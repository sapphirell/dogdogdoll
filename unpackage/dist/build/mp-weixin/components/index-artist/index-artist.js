"use strict";const e=require("../../common/vendor.js"),a=require("../../common/assets.js"),l=require("../../common/config.js");if(!Array){(e.resolveComponent("uni-icons")+e.resolveComponent("common-modal")+e.resolveComponent("bottom-popup"))()}Math||((()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../common-modal/common-modal.js")+(()=>"../bottom-popup/bottom-popup.js"))();const t={__name:"index-artist",setup(t){const o=e.ref([{label:"全部",value:0},{label:"长期接单",value:1},{label:"限时手速",value:2},{label:"限时抽选",value:3},{label:"黑箱卡",value:4},{label:"关闭接单",value:9}]),u=e.ref([]),s=e.ref([]),n=e.ref(0),i=e.ref(""),v=e.ref(""),r=e.ref(1),c=e.ref(20),m=e.ref(0),p=e.ref(!1),d=e.ref(!0),h=e.ref(!1),g=e.ref(!1);e.onMounted((()=>{f()}));const f=async()=>{try{p.value=!0;const a={page:r.value,size:c.value};0!==n.value&&(a.status=n.value),i.value&&(a.min_price=i.value),v.value&&(a.max_price=v.value);const t=(await e.index.request({url:`${l.websiteUrl.value}/brand-artist-list`,method:"GET",data:a})).data;"success"===t.status?(1===r.value&&(u.value=[]),u.value=[...u.value,...t.data.list],m.value=t.data.total,x(),d.value=u.value.length<m.value):e.index.showToast({title:t.msg||"获取数据失败",icon:"none"})}catch(a){console.error("获取妆师列表失败:",a),e.index.showToast({title:"网络请求失败",icon:"none"})}finally{p.value=!1}},b=()=>{g.value=!0},_=()=>{g.value=!1,r.value=1,f()},w=()=>{h.value=!0},x=()=>{s.value=u.value},y=()=>{n.value=0,i.value="",v.value="",r.value=1,f(),g.value=!1},j=e=>{switch(e){case 1:return"status-long-term";case 2:return"status-speed";case 3:return"status-lottery";case 4:return"status-black-card";case 9:return"status-closed";default:return""}};return e.onReachBottom((()=>{!p.value&&d.value&&(r.value+=1,f())})),e.onPullDownRefresh((()=>{u.value=[],r.value=1,f().then((()=>{e.index.stopPullDownRefresh()}))})),(l,t)=>e.e({a:e.p({type:"tune",size:"18",color:"#fff"}),b:e.o(b),c:e.p({type:"help",size:"24",color:"#808080"}),d:e.o(w),e:e.f(s.value,((a,l,t)=>e.e({a:a.logo_image,b:e.t(a.brand_name),c:e.t(a.status_text),d:e.n(j(a.status)),e:e.t(a.base_price),f:a.description},a.description?{g:e.t(a.description)}:{},{h:a.highlight_img&&a.highlight_img.length>0},a.highlight_img&&a.highlight_img.length>0?{i:e.f(a.highlight_img,((e,a,l)=>({a:e,b:a})))}:{},{j:l,k:e.o((l=>(a=>{e.index.navigateTo({url:"/pages/artist_info/artist_info?brand_id="+a.brand_id})})(a)),l)}))),f:d.value},d.value?e.e({g:p.value},(p.value,{})):{},{h:0===s.value.length&&!p.value},0!==s.value.length||p.value?{}:{i:a._imports_0$14,j:e.o(y)},{k:e.o((e=>h.value=!1)),l:e.o((e=>h.value=e)),m:e.p({visible:h.value,top:"15vh"}),n:e.o((e=>g.value=!1)),o:e.p({type:"closeempty",size:"24",color:"#666"}),p:e.f(o.value,((a,l,t)=>({a:e.t(a.label),b:l,c:e.n({active:n.value===a.value}),d:e.o((e=>n.value=a.value),l)}))),q:i.value,r:e.o((e=>i.value=e.detail.value)),s:v.value,t:e.o((e=>v.value=e.detail.value)),v:e.o(y),w:e.o(_),x:e.o((e=>g.value=!1)),y:e.p({show:g.value})})}};wx.createComponent(t);
