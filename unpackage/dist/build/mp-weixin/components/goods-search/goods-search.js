"use strict";const e=require("../../common/vendor.js"),t=require("../../common/assets.js"),a=require("../../common/config.js"),o={__name:"goods-search",props:{modelValue:{type:String,default:""},width:{type:String,default:"100%"},background:{type:String,default:""},fontSize:{type:String,default:""},tagColor:{type:String,default:"#666"},mode:{type:String,default:"jump",validator:e=>["jump","fill"].includes(e)},hiddenIcon:{type:Boolean,default:!0}},emits:["select","update:modelValue"],setup(o,{emit:d}){const l=o,n=d,u=e.ref([]),r=e.computed({get:()=>l.modelValue,set:e=>n("update:modelValue",e)}),s=async t=>{var o;r.value=t.detail.value;const d=t.detail.value.trim();if(d)try{const t=await e.index.request({url:a.websiteUrl+`/search-goods?search=${encodeURIComponent(d)}`,method:"GET"});u.value="success"===(null==(o=t.data)?void 0:o.status)&&t.data.data||[]}catch(l){console.error("搜索失败:",l),u.value=[]}else u.value=[]},i=()=>{u.value=[]};return(a,d)=>e.e({a:!o.hiddenIcon},o.hiddenIcon?{}:{b:t._imports_0$6},{c:r.value,d:e.o(s),e:o.fontSize||"22rpx",f:u.value.length>0},u.value.length>0?{g:t._imports_1$6,h:e.o(i)}:{},{i:e.n(a.$attrs.class),j:o.background||"#fff",k:u.value.length>0},u.value.length>0?{l:e.f(u.value,((t,a,o)=>e.e({a:t.brand_name},t.brand_name?{b:e.t(t.brand_name)}:{},{c:e.t(t.name),d:t.id,e:e.o((a=>{return o=t,"jump"===l.mode&&e.index.navigateTo({url:`/pages/goods/goods?goods_id=${o.id}`}),void("fill"===l.mode&&(n("select",o),r.value=o.name,u.value=[]));var o}),t.id)}))),m:o.width}:{})}};wx.createComponent(o);
