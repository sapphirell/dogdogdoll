"use strict";const e=require("../../common/vendor.js"),a=require("../../common/assets.js"),t=require("../../common/config.js"),d={__name:"goods-search",props:{modelValue:{type:String,default:""},width:{type:String,default:"100%"},background:{type:String,default:""},fontSize:{type:String,default:""},tagColor:{type:String,default:"#666"},mode:{type:String,default:"jump",validator:e=>["jump","fill"].includes(e)},hiddenIcon:{type:Boolean,default:!0},brandId:{type:Number,default:0}},emits:["select","update:modelValue"],setup(d,{emit:o}){const l=e.ref(!1),n=d,u=o,r=e.ref([]),s=e.computed({get:()=>n.modelValue,set:e=>u("update:modelValue",e)});e.watch(r,(e=>{l.value=e.length>0}));const i=()=>{r.value=[],l.value=!1},c=async a=>{var d;s.value=a.detail.value;const o=a.detail.value.trim();if(l.value=!0,!o)return void(r.value=[]);let u=`${t.websiteUrl.value}/search-goods?search=${encodeURIComponent(o)}`;n.brandId&&0!==n.brandId&&(u+=`&brand_id=${n.brandId}`);try{const a=await e.index.request({url:u,method:"GET"});r.value="success"===(null==(d=a.data)?void 0:d.status)&&a.data.data||[]}catch(i){console.error("搜索失败:",i),r.value=[]}},m=()=>{i()};return(t,o)=>e.e({a:l.value},l.value?{b:e.o(i)}:{},{c:!d.hiddenIcon},d.hiddenIcon?{}:{d:a._imports_0$15},{e:s.value,f:e.o(c),g:d.fontSize||"23rpx",h:r.value.length>0},r.value.length>0?{i:a._imports_1$5,j:e.o(m)}:{},{k:e.n(t.$attrs.class),l:d.background||"#fff",m:r.value.length>0},r.value.length>0?{n:e.f(r.value,((a,t,d)=>e.e({a:a.brand_name},a.brand_name?{b:e.t(a.brand_name)}:{},{c:e.t(a.name),d:a.id,e:e.o((t=>{return d=a,"jump"===n.mode&&e.index.navigateTo({url:`/pages/goods/goods?goods_id=${d.id}`}),"fill"===n.mode&&(u("select",d),s.value=d.name,r.value=[]),void i();var d}),a.id)}))),o:d.width}:{})}},o=e._export_sfc(d,[["__scopeId","data-v-eebe9bc8"]]);wx.createComponent(o);
