"use strict";const e=require("../../common/vendor.js"),a=require("../../common/assets.js"),t=require("../../common/config.js"),o={__name:"goods-search",props:{width:{type:String,default:"100%"},background:{type:String,default:""},fontSize:{type:String,default:""},tagColor:{type:String,default:"#666"},mode:{type:String,default:"jump",validator:e=>["jump","fill"].includes(e)}},emits:["select"],setup(o,{emit:r}){const l=o,n=r,s=e.ref(""),u=e.ref([]),d=async()=>{var a;if(s.value.trim())try{const o=await e.index.request({url:t.websiteUrl+`/search-goods?search=${encodeURIComponent(s.value)}`,method:"GET"});u.value="success"===(null==(a=o.data)?void 0:a.status)&&o.data.data||[]}catch(o){console.error("搜索失败:",o),u.value=[]}else u.value=[]},i=()=>{s.value="",u.value=[]};return(t,r)=>e.e({a:a._imports_0$6,b:e.o([e=>s.value=e.detail.value,d]),c:o.fontSize||"22rpx",d:s.value,e:u.value.length>0},u.value.length>0?{f:a._imports_1$6,g:e.o(i)}:{},{h:e.n(t.$attrs.class),i:o.background||"#fff",j:u.value.length>0},u.value.length>0?{k:e.f(u.value,((a,t,o)=>e.e({a:a.brand_name},a.brand_name?{b:e.t(a.brand_name)}:{},{c:e.t(a.name),d:a.id,e:e.o((t=>{return o=a,void("jump"===l.mode?e.index.navigateTo({url:`/pages/goods/goods?goods_id=${o.id}`}):"fill"===l.mode&&(n("select",o),s.value="",u.value=[]));var o}),a.id)}))),l:o.width}:{})}};wx.createComponent(o);
