"use strict";const e=require("../../common/vendor.js"),a=require("../../common/assets.js"),t=require("../../common/config.js"),o={__name:"goods-search",props:{modelValue:{type:String,default:""},width:{type:String,default:"100%"},background:{type:String,default:""},fontSize:{type:String,default:""},tagColor:{type:String,default:"#666"},mode:{type:String,default:"jump",validator:e=>["jump","fill"].includes(e)},hiddenIcon:{type:Boolean,default:!0}},emits:["select","update:modelValue"],setup(o,{emit:l}){const n=e.ref(!1),d=o,u=l,r=e.ref([]),s=e.computed({get:()=>d.modelValue,set:e=>u("update:modelValue",e)});e.watch(r,(e=>{n.value=e.length>0}));const i=()=>{r.value=[],n.value=!1},c=async a=>{var o;s.value=a.detail.value;const l=a.detail.value.trim();if(n.value=!0,l)try{const a=await e.index.request({url:t.websiteUrl+`/search-goods?search=${encodeURIComponent(l)}`,method:"GET"});r.value="success"===(null==(o=a.data)?void 0:o.status)&&a.data.data||[]}catch(d){console.error("搜索失败:",d),r.value=[]}else r.value=[]},m=()=>{i()};return(t,l)=>e.e({a:n.value},n.value?{b:e.o(i)}:{},{c:!o.hiddenIcon},o.hiddenIcon?{}:{d:a._imports_0$6},{e:s.value,f:e.o(c),g:o.fontSize||"22rpx",h:r.value.length>0},r.value.length>0?{i:a._imports_1$6,j:e.o(m)}:{},{k:e.n(t.$attrs.class),l:o.background||"#fff",m:r.value.length>0},r.value.length>0?{n:e.f(r.value,((a,t,o)=>e.e({a:a.brand_name},a.brand_name?{b:e.t(a.brand_name)}:{},{c:e.t(a.name),d:a.id,e:e.o((t=>{return o=a,"jump"===d.mode&&e.index.navigateTo({url:`/pages/goods/goods?goods_id=${o.id}`}),"fill"===d.mode&&(u("select",o),s.value=o.name,r.value=[]),void i();var o}),a.id)}))),o:o.width}:{})}};wx.createComponent(o);
