"use strict";const e=require("../../common/vendor.js"),o=require("../../common/config.js"),t={__name:"comment-input",props:{replyInfo:{type:Object,default:()=>({})},targetId:{type:String,required:!0},safeBottom:{type:Number,default:10}},emits:["submit","update:replyInfo"],setup(t,{expose:n,emit:l}){const a=t;e.ref(null);const r=e.ref(!1),u=l,s=e.ref(""),i=e.ref(!1),d=e.ref(0),v=e.index.getSystemInfoSync(),c=e.computed((()=>{var e,o;let t=(null==(e=v.safeAreaInsets)?void 0:e.bottom)||10;console.log("底部安全距离1:",null==(o=v.safeAreaInsets)?void 0:o.bottom,"=>",t);return`${t+d.value}px`})),p=e=>{console.log("键盘高度变化",e),d.value=e.height},f=()=>{i.value=!0,r.value=!0},m=()=>{i.value=!1,r.value=!1},g=()=>{i.value=!1,r.value=!1,e.index.hideKeyboard()},y=()=>{if(!s.value.trim())return void e.index.showToast({title:"请输入评论内容",icon:"none"});let t=o.getScene();console.log("scene",t),u("submit",{content:s.value,target_id:a.targetId,type:4,replyInfo:a.replyInfo,origin:t}),s.value="",u("update:replyInfo",{})};return n({focusInput:()=>{r.value=!0}}),e.onShow((()=>{console.log("注册键盘弹出事件"),e.index.onKeyboardHeightChange(p)})),(o,n)=>({a:i.value,b:e.o(g),c:r.value,d:r.value?1:"",e:e.o(f),f:e.o(m),g:t.replyInfo.username?"回复@"+t.replyInfo.username+" ":"写评论...",h:s.value,i:e.o((e=>s.value=e.detail.value)),j:e.o(y),k:c.value})}},n=e._export_sfc(t,[["__scopeId","data-v-958d699a"]]);wx.createComponent(n);
