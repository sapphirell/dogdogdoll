"use strict";const e=require("../../common/vendor.js"),o=require("../../common/config.js"),t={__name:"comment-input",props:{replyInfo:{type:Object,default:()=>({})},targetId:{type:String,required:!0},safeBottom:{type:Number,default:10}},emits:["submit","update:replyInfo"],setup(t,{expose:n,emit:l}){const a=t;e.ref(null);const u=e.ref(!1),r=l,s=e.ref(""),i=e.ref(!1),c=e.ref(0),d=e.index.getSystemInfoSync(),v=e.computed((()=>{var e,o;let t=(null==(e=d.safeAreaInsets)?void 0:e.bottom)||10;console.log("底部安全距离1:",null==(o=d.safeAreaInsets)?void 0:o.bottom,"=>",t);let n=t+c.value;return console.log("底部最终距离2:",n),`${n}px`})),f=e=>{console.log("键盘高度变化",e),c.value=e.height},p=()=>{i.value=!0,u.value=!0},m=()=>{i.value=!1,u.value=!1},g=()=>{i.value=!1,u.value=!1,e.index.hideKeyboard()},y=()=>{if(!s.value.trim())return void e.index.showToast({title:"请输入评论内容",icon:"none"});let t=o.getScene();console.log("scene",t),r("submit",{content:s.value,target_id:a.targetId,type:4,replyInfo:a.replyInfo,origin:t}),s.value="",r("update:replyInfo",{})};return n({focusInput:()=>{u.value=!0}}),e.onMounted((()=>{console.log("注册键盘弹出事件"),e.index.onKeyboardHeightChange(f)})),(o,n)=>({a:i.value,b:e.o(g),c:u.value,d:u.value?1:"",e:e.o(p),f:e.o(m),g:t.replyInfo.username?"回复@"+t.replyInfo.username+" ":"写评论...",h:s.value,i:e.o((e=>s.value=e.detail.value)),j:e.o(y),k:v.value})}},n=e._export_sfc(t,[["__scopeId","data-v-0af4224c"]]);wx.createComponent(n);
