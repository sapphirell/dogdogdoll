"use strict";const e=require("../../common/vendor.js"),o=require("../../common/config.js"),t={__name:"comment-input",props:{replyInfo:{type:Object,default:()=>({})},targetId:{type:String,required:!0},safeBottom:{type:Number,default:10}},emits:["submit","update:replyInfo"],setup(t,{emit:n}){const r=t,a=n,l=e.ref(""),u=e.ref(!1),s=e.ref(0),i=e.index.getSystemInfoSync(),d=e.computed((()=>{var e,o;let t=(null==(e=i.safeAreaInsets)?void 0:e.bottom)||10;console.log("底部安全距离:",null==(o=i.safeAreaInsets)?void 0:o.bottom,"=>",t);return`${t+s.value}px`})),f=e=>{console.log("键盘高度变化",e),s.value=e.height},p=()=>{u.value=!0},c=()=>{u.value=!1},m=()=>{u.value=!1,e.index.hideKeyboard()},v=()=>{if(!l.value.trim())return void e.index.showToast({title:"请输入评论内容",icon:"none"});let t=o.getScene();console.log("scene",t),a("submit",{content:l.value,target_id:r.targetId,type:4,replyInfo:r.replyInfo,origin:t}),l.value="",a("update:replyInfo",{})};return e.onShow((()=>{console.log("注册键盘弹出事件"),e.index.onKeyboardHeightChange(f)})),(o,n)=>e.e({a:u.value,b:e.o(m),c:t.replyInfo.username},t.replyInfo.username?{d:e.t("@"+t.replyInfo.username)}:{},{e:e.o(p),f:e.o(c),g:l.value,h:e.o((e=>l.value=e.detail.value)),i:e.o(v),j:d.value})}},n=e._export_sfc(t,[["__scopeId","data-v-eabdf47f"]]);wx.createComponent(n);
