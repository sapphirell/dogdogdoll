"use strict";const e=require("../../common/vendor.js"),a=require("../../common/assets.js"),t=require("../../common/config.js"),l={__name:"common-search",props:{mode:{type:String,default:"jump",validator:e=>["jump","fill"].includes(e)},width:{type:String,default:"100%"}},emits:["select"],setup(l,{emit:o}){const u=l,r=o,n=e.ref(""),i=e.ref([]),d=async()=>{if(""!==n.value.trim()){r("select",0,n.value);try{const a=await e.index.request({url:t.websiteUrl+`/search-brand?search=${n.value}`,method:"GET",header:{"Content-Type":"application/json"}});return console.log("请求结果:",a.data),"success"==a.data.status?null==a.data.data?void(i.value=[]):void(i.value=a.data.data):void(i.value=[])}catch(a){return console.error("请求错误:",a),void(i.value=[])}}else i.value=[]};function s(){n.value="",i.value=[]}return(t,o)=>e.e({a:"jump"==u.mode},"jump"==u.mode?{b:a._imports_0$6}:{},{c:e.o([e=>n.value=e.detail.value,d]),d:n.value,e:i.value.length>0},i.value.length>0?{f:a._imports_1$6,g:e.o(s)}:{},{h:i.value.length>0},i.value.length>0?{i:e.f(i.value,((a,t,l)=>({a:e.t(a.name),b:a.id,c:e.o((t=>{return l=a.id,o=a.name,void("jump"===u.mode?e.index.navigateTo({url:`/pages/brand/brand?brand_id=${l}`}):"fill"===u.mode&&(n.value=o,i.value=[],r("select",l,o)));var l,o}),a.id)}))),j:l.width}:{})}};wx.createComponent(l);
