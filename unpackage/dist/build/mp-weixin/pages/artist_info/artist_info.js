"use strict";const t=require("../../common/vendor.js"),e=require("../../common/assets.js"),a=require("../../common/config.js");if(!Array){t.resolveComponent("uni-load-more")()}Math;const s={__name:"artist_info",setup(s){const i=t.ref({artist_id:0,brand_id:0,brand_name:"",description:"",logo_image:"",highlight_images:[],status_of_artist:0,status_of_artist_text:"",status_of_hairstylist:0,status_of_hairstylist_text:"",base_price_of_artist:0,base_price_of_hairstylist:0}),o=t.ref([]),r=t.ref("works"),n=t.ref("artist"),l=t.ref(1),u=t.ref(20),d=t.ref(!0),c=t.ref(0),v=t.ref([]),_=t.ref(1),g=t.ref(5),h=t.ref(!0),f=t=>{const e=["#FFEEF2","#E8F5FF","#F0FFF0","#FFF8E8","#F5F0FF","#E8FFF8","#FFF0F5","#F0F8FF"];return e[t.charCodeAt(0)%e.length]};function p(e){t.index.navigateTo({url:"/pages/brand/brand?brand_id="+e})}const m=async()=>{try{const e=await t.index.request({url:`${a.websiteUrl.value}/brand-artist/bjd-faceup?brand_id=${c.value}&page=${l.value}&size=${u.value}`,method:"GET"});if("success"===e.data.status){const t=e.data.data.list;1===l.value?o.value=t:o.value=[...o.value,...t],d.value=o.value.length<e.data.data.total}else console.log(e),t.index.showToast({title:"获取作品列表失败",icon:"none"})}catch(e){t.index.showToast({title:"网络错误",icon:"none"})}},b=()=>{const e="artist"===n.value?i.value.contact_info_artist:i.value.contact_info_hairstylist;e?t.index.setClipboardData({data:e,success:()=>{t.index.showToast({title:"已复制联系信息",icon:"success"})}}):t.index.showToast({title:"暂无联系信息",icon:"none"})},x=async()=>{try{const e="artist"===n.value?1:2,s=await t.index.request({url:`${a.websiteUrl.value}/brand-artist/order-plans?brand_id=${c.value}&artist_type=${e}&page=${_.value}&size=${g.value}`,method:"GET"});if("success"===s.data.status){const t=s.data.data;1===_.value?v.value=t:v.value=[...v.value,...t],h.value=t.length===g.value}else t.index.showToast({title:"获取开单记录失败",icon:"none"})}catch(e){t.index.showToast({title:"网络错误",icon:"none"})}},F=t=>{r.value=t,"plans"===t&&(_.value=1,x())},w=t=>{n.value=t,"works"===r.value?(l.value=1,m()):(_.value=1,x())},y=t=>{if(!t)return"";const e=new Date(t);return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}`};return t.onLoad((e=>{console.log("页面加载",e),t.index.setNavigationBarTitle({title:"妆师毛娘主页"}),(t=>{console.log(t),c.value=(null==t?void 0:t.brand_id)||0})(e),(async()=>{try{const e=await t.index.request({url:`${a.websiteUrl.value}/brand-artist/info?brand_id=${c.value}`,method:"GET"});"success"===e.data.status?i.value=e.data.data:t.index.showToast({title:"获取创作者信息失败",icon:"none"})}catch(e){t.index.showToast({title:"网络错误",icon:"none"})}})(),m()})),t.index.setNavigationBarTitle({title:""}),(a,s)=>t.e({a:i.value.logo_image,b:t.o((t=>p(i.value.brand_id))),c:t.t(i.value.brand_name),d:t.o((t=>p(i.value.brand_id))),e:t.t(i.value.description),f:"artist"===n.value},"artist"===n.value?{g:t.t(i.value.status_of_artist_text)}:{h:t.t(i.value.status_of_hairstylist_text)},{i:t.t(i.value.contact?i.value.contact:"尚未设置"),j:t.o(b),k:"works"===r.value?1:"",l:t.o((t=>F("works"))),m:"plans"===r.value?1:"",n:t.o((t=>F("plans"))),o:"works"===r.value},"works"===r.value?t.e({p:t.f(i.value.highlight_images,((t,e,a)=>({a:e,b:t}))),q:"artist"===n.value?1:"",r:t.o((t=>w("artist"))),s:"hairstylist"===n.value?1:"",t:t.o((t=>w("hairstylist"))),v:"artist"===n.value},"artist"===n.value?{w:t.f(o.value,((e,a,s)=>t.e({a:e.image_urls[0],b:t.t(e.head_name),c:t.o((a=>{return s=e.goods_id,void t.index.navigateTo({url:`/pages/goods/goods?goods_id=${s||1576}`});var s}),e.id),d:t.t(e.sex),e:t.n("男"===e.sex?"male":"female"),f:e.style_tags&&e.style_tags.length},e.style_tags&&e.style_tags.length?{g:t.f(e.style_tags,((e,a,s)=>({a:t.t(e),b:a,c:f(e)})))}:{},{h:e.id,i:t.o((a=>{return s=e.id,void t.index.navigateTo({url:`/pages/artwork/artwork?id=${s}`});var s}),e.id)})))}:{x:e._imports_0$12},{y:d.value&&"artist"===n.value},d.value&&"artist"===n.value?{z:t.p({status:"loading"})}:("artist"===n.value&&o.value.length,{}),{A:"artist"===n.value&&o.value.length>0}):t.e({B:"artist"===n.value?1:"",C:t.o((t=>w("artist"))),D:"hairstylist"===n.value?1:"",E:t.o((t=>w("hairstylist"))),F:t.f(v.value,((e,a,s)=>{return t.e({a:t.f(e.images,((a,s,i)=>({a:s,b:a,c:t.o((a=>{return i=e.images,o=s,void t.index.previewImage({current:o,urls:i,indicator:"number",loop:!0,success:()=>{console.log("预览图片成功")},fail:e=>{console.log("预览图片失败",e),t.index.showToast({title:"预览图片失败",icon:"none"})}});var i,o}),s)}))),b:t.t((i=e.order_type,{1:"长期接单",2:"限时手速",3:"限时抽选",4:"限时黑箱卡",9:"关闭投递"}[i]||"未知类型")),c:t.t(e.max_participants),d:t.t(e.max_submissions_per_user),e:t.t(y(1e3*e.open_time)),f:t.t(y(1e3*e.close_time)),g:t.t(e.is_active?"进行中":"已结束"),h:t.n(e.is_active?"active":"inactive"),i:t.f(e.tiers,((e,a,s)=>({a:t.t(e.title),b:t.t(e.price),c:t.t(e.description),d:a}))),j:e.addons&&e.addons.length},e.addons&&e.addons.length?{k:t.f(e.addons,((e,a,s)=>({a:t.t(e.title),b:t.t(e.price),c:t.t(e.description),d:a})))}:{},{l:e.id});var i})),G:h.value},h.value?{H:t.p({status:"loading"})}:v.value.length>0?{}:{J:e._imports_0$12},{I:v.value.length>0}))}},i=t._export_sfc(s,[["__scopeId","data-v-c12c9cfd"]]);wx.createPage(i);
