"use strict";const e=require("../../common/vendor.js"),o=require("../../common/config.js");if(!Array){(e.resolveComponent("transition")+e.resolveComponent("common-page"))()}Math;const a={__name:"stock",setup(a){const t=e.index.getSystemInfoSync();e.ref(t.statusBarHeight);const l=e.ref(1),n=e.ref(1);function s(){return l.value>n.value?"slide_left":"slide_right"}function u(e){switch(n.value=l.value,l.value=e,console.log(`切换到 tab ${e}`),e){case 1:f(),l.value=1;break;case 2:l.value=2,h();break;case 3:l.value=3,b()}}const i=e.ref(0),c=e.ref(["全部","娃头","娃衣","眼珠","假发","娃鞋"]),r=e.ref({}),v=e.ref({}),d=e.ref({});function g(e){i.value=e.detail.value,f(c.value[i.value])}function f(a){if(console.log(o.global),!o.global.isLogin)return;let t=e.index.getStorageSync("token"),l=o.websiteUrl+"/with-state/account-book";a&&"全部"!==a&&(l=o.websiteUrl+"/with-state/account-book?type="+a),r.value={},e.index.request({url:l,method:"GET",header:{Authorization:t},success:e=>{console.log(e.data.data),r.value=e.data.data},fail:e=>{console.log(e)}})}function h(){if(console.log(o.global),!o.global.isLogin)return;let a=e.index.getStorageSync("token");v.value={},e.index.request({url:o.websiteUrl+"/with-state/showcase",method:"GET",header:{Authorization:a},success:e=>{console.log(e.data.data),v.value=e.data.data},fail:e=>{console.log(e)}})}function b(){if(console.log(o.global),!o.global.isLogin)return;let a=e.index.getStorageSync("token");d.value={},e.index.request({url:o.websiteUrl+"/with-state/tail-bill",method:"GET",header:{Authorization:a},success:e=>{console.log(e.data.data),d.value=e.data.data},fail:e=>{console.log(e)}})}function m(){e.index.navigateTo({url:"/pages/stock/account_book_form/account_book_form"})}function _(){e.index.navigateTo({url:"/pages/stock/showcase_form/showcase_form"})}function k(o){0!=o?e.index.navigateTo({url:"/pages/stock/bill_form/bill_form?bill_id="+o}):e.index.navigateTo({url:"/pages/stock/bill_form/bill_form"})}return e.onShow((()=>{o.asyncGetUserInfo().then((e=>{f(),h(),b()}))})),(o,a)=>{var t,n;return e.e({a:e.o((e=>u(1))),b:1===l.value?1:"",c:e.o((e=>u(2))),d:2===l.value?1:"",e:e.o((e=>u(3))),f:3===l.value?1:"",g:1===l.value},1===l.value?e.e({h:e.t(c.value[i.value]),i:i.value,j:c.value,k:e.o(g),l:(null==(t=r.value.account_books)?void 0:t.length)>0},(null==(n=r.value.account_books)?void 0:n.length)>0?{m:e.f(r.value.account_books,((o,a,t)=>({a:o.image_url,b:e.t(o.type),c:e.t(o.price),d:e.t(o.name),e:a,f:e.o((a=>{return t=o.id,void e.index.navigateTo({url:"/pages/stock/account_book_form/account_book_form?account_book_id="+t});var t}),a)})))}:{},{n:e.o(m),o:1!==l.value?1:""}):{},{p:e.p({name:s()}),q:2===l.value},2===l.value?e.e({r:v.value.showcases&&v.value.showcases.length>0},v.value.showcases&&v.value.showcases.length>0?{s:e.f(v.value.showcases,((o,a,t)=>({a:o.image_url,b:e.t(o.name),c:e.t(o.description),d:a,e:e.o((a=>{return t=o.id,void e.index.navigateTo({url:"/pages/stock/showcase_form/showcase_form?showcase_id="+t});var t}),a)})))}:{},{t:e.o(_),v:2!==l.value?1:""}):{},{w:e.p({name:s()}),x:3===l.value},3===l.value?{y:e.f(d.value,((o,a,t)=>({a:e.t(a),b:e.f(o,((o,a,t)=>e.e({a:e.t(o.name),b:e.t(o.price),c:e.t(o.ymd),d:0===o.status},(o.status,{}),{e:o.id,f:e.o((e=>k(o.id)),o.id)}))),c:a}))),z:e.o((e=>k(!1))),A:3!==l.value?1:""}:{},{B:e.p({name:s()}),C:e.p({head_color:"rgb(185 195 253)"})})}}};wx.createPage(a);
