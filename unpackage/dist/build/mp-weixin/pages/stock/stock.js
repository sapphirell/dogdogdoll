"use strict";const e=require("../../common/vendor.js"),o=require("../../common/assets.js"),a=require("../../common/config.js");if(!Array){(e.resolveComponent("transition")+e.resolveComponent("common-page"))()}Math;const t={__name:"stock",setup(t){const l=e.index.getSystemInfoSync();e.ref(l.statusBarHeight);const s=e.ref(1),n=e.ref(1);function i(){return s.value>n.value?"slide_left":"slide_right"}function u(e){switch(n.value=s.value,s.value=e,console.log(`切换到 tab ${e}`),e){case 1:h(),s.value=1;break;case 2:s.value=2,_();break;case 3:s.value=3,b()}}function r(e){return e.filter((e=>1===e.status)).length}const c=e.ref(0),v=e.ref(["全部","娃头","娃衣","眼珠","假发","娃鞋"]),d=e.ref({}),g=e.ref({}),f=e.ref({});function m(e){c.value=e.detail.value,h(v.value[c.value])}function h(o){if(console.log(a.global),!a.global.isLogin)return;let t=e.index.getStorageSync("token"),l=a.websiteUrl+"/with-state/account-book";o&&"全部"!==o&&(l=a.websiteUrl+"/with-state/account-book?type="+o),d.value={},e.index.request({url:l,method:"GET",header:{Authorization:t},success:e=>{console.log(e.data.data),d.value=e.data.data},fail:e=>{console.log(e)}})}function _(){if(console.log(a.global),!a.global.isLogin)return;let o=e.index.getStorageSync("token");g.value={},e.index.request({url:a.websiteUrl+"/with-state/showcase",method:"GET",header:{Authorization:o},success:e=>{console.log(e.data.data),g.value=e.data.data},fail:e=>{console.log(e)}})}function b(){if(console.log(a.global),!a.global.isLogin)return;let o=e.index.getStorageSync("token");f.value={},e.index.request({url:a.websiteUrl+"/with-state/tail-bill",method:"GET",header:{Authorization:o},success:e=>{console.log(e.data.data),f.value=e.data.data},fail:e=>{console.log(e)}})}function p(){e.index.navigateTo({url:"/pages/stock/account_book_form/account_book_form"})}function k(){e.index.navigateTo({url:"/pages/stock/showcase_form/showcase_form"})}function w(o){0!=o?e.index.navigateTo({url:"/pages/stock/bill_form/bill_form?bill_id="+o}):e.index.navigateTo({url:"/pages/stock/bill_form/bill_form"})}return e.onShow((()=>{a.asyncGetUserInfo().then((e=>{h(),_(),b()}))})),(a,t)=>{var l,n;return e.e({a:e.o((e=>u(1))),b:1===s.value?1:"",c:e.o((e=>u(2))),d:2===s.value?1:"",e:e.o((e=>u(3))),f:3===s.value?1:"",g:1===s.value},1===s.value?e.e({h:e.t(v.value[c.value]),i:c.value,j:v.value,k:e.o(m),l:(null==(l=d.value.account_books)?void 0:l.length)>0},(null==(n=d.value.account_books)?void 0:n.length)>0?{m:e.f(d.value.account_books,((o,a,t)=>({a:o.image_url,b:e.t(o.type),c:e.t(o.price),d:e.t(o.name),e:a,f:e.o((a=>{return t=o.id,void e.index.navigateTo({url:"/pages/stock/account_book_form/account_book_form?account_book_id="+t});var t}),a)})))}:{n:o._imports_0$1},{o:e.o(p),p:1!==s.value?1:""}):{},{q:e.p({name:i()}),r:2===s.value},2===s.value?e.e({s:g.value.showcases&&g.value.showcases.length>0},g.value.showcases&&g.value.showcases.length>0?{t:e.f(g.value.showcases,((o,a,t)=>{return e.e({a:1!==o.display},1!==o.display?{b:e.t((l=o.display,{0:"审核中",2:"人工复核中",3:"违规隐藏中"}[l]||""))}:{},{c:o.image_url_list[0],d:e.t(o.name),e:e.t(o.description),f:e.t(o.views||0),g:e.t(o.likes||0),h:1!==o.display?1:"",i:a,j:e.o((a=>{return t=o.id,void e.index.navigateTo({url:"/pages/stock/showcase_form/showcase_form?showcase_id="+t});var t}),a)});var l})),v:o._imports_1$2,w:o._imports_2$1}:{x:o._imports_0$1},{y:e.o(k),z:2!==s.value?1:""}):{},{A:e.p({name:i()}),B:3===s.value},3===s.value?e.e({C:Object.keys(f.value).length>0},Object.keys(f.value).length>0?{D:e.f(f.value,((o,a,t)=>({a:e.t(a),b:e.t(r(o)),c:e.t(o.length),d:e.f(o,((o,a,t)=>({a:e.t(o.name),b:e.t(o.price),c:e.t(o.ymd),d:e.t(0===o.status?"未补款":"已补款"),e:1===o.status?1:"",f:o.id,g:e.o((e=>w(o.id)),o.id)}))),e:a})))}:{E:o._imports_0$1},{F:e.o((e=>w(!1))),G:3!==s.value?1:""}):{},{H:e.p({name:i()}),I:e.p({head_color:"rgb(185 195 253)"})})}}};wx.createPage(t);
