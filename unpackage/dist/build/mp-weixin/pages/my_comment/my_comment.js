"use strict";const e=require("../../common/vendor.js"),a=require("../../common/config.js"),t={__name:"my_comment",setup(t){const o=e.ref([]),n=e.ref(1),r=e.ref(10),s=e.ref(0),l=e.ref(!1),i=e.ref(!1),c={1:{name:"品牌",class:"brand"},2:{name:"商品",class:"goods"},3:{name:"搭配",class:"collocation"},4:{name:"资讯",class:"news"},5:{name:"树洞",class:"treehole"},6:{name:"展示柜",class:"collocation"},7:{name:"文章",class:"collocation"}};e.onMounted((()=>{d()}));const d=async(t=!1)=>{if(!l.value&&!i.value){l.value=!0;try{const c=await e.index.request({url:`${a.websiteUrl}/with-state/my-comment`,method:"GET",header:{Authorization:e.index.getStorageSync("token")},data:{page:n.value,page_size:r.value}});if("success"===c.data.status){const e=c.data.data;o.value=t?[...o.value,...e.comment_list]:e.comment_list,s.value=e.total,n.value++,i.value=o.value.length>=s.value}}finally{l.value=!1}}},u=()=>{i.value||d(!0)},g=a=>{let t="";const o=a.relation_id;switch(a.type){case 1:t=`/pages/brand/brand?brand_id=${o}`;break;case 2:t=`/pages/goods/goods?goods_id=${o}`;break;case 3:t=`/pages/collocation_share/collocation_share?collocation_id=${o}&origin=1`;break;case 4:t=`/pages/sale_news/sale_news?id=${o}&brand_id=0`;break;case 5:t=`/pages/treehole_detail/treehole_detail?id=${o}`;break;case 6:t=`/pages/collocation_share/collocation_share?collocation_id=${o}&origin=2`;break;default:return void e.index.showToast({title:"未知类型",icon:"none"})}t&&e.index.navigateTo({url:t})},m=e=>{var a;return(null==(a=c[e])?void 0:a.class)||""};function v(e){const a=new Date(1e3*e);return`${a.getFullYear()}-${(a.getMonth()+1).toString().padStart(2,"0")}-${a.getDate().toString().padStart(2,"0")} ${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}:${a.getSeconds().toString().padStart(2,"0")}`}return e.index.setNavigationBarTitle({title:"我的评论"}),(a,t)=>e.e({a:e.f(o.value,((a,t,o)=>{return e.e({a:a.avatar||"/static/default-avatar.png",b:e.t(a.username),c:e.t(v(a.created_at)),d:e.t(a.comment),e:a.target_image},a.target_image?{f:a.target_image}:{},{g:e.t((n=a.type,(null==(r=c[n])?void 0:r.name)||"未知")),h:e.n(m(a.type)),i:e.t(a.target_name),j:e.o((e=>g(a)),t),k:t,l:e.o((e=>g(a)),t)});var n,r})),b:l.value},(l.value,{}),{c:i.value},(i.value,{}),{d:e.o(u)})}},o=e._export_sfc(t,[["__scopeId","data-v-70964898"]]);wx.createPage(o);
