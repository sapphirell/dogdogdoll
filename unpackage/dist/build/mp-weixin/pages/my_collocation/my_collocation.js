"use strict";const e=require("../../common/vendor.js"),a=require("../../common/assets.js"),t=require("../../common/config.js"),l={__name:"my_collocation",setup(l){const n=e.ref([]),o=e.ref(1),r=e.ref(10),i=e.ref(0),u=e.ref(!1),s=e.ref(!1),c=e=>{const a=new Date(1e3*e);return`${a.getFullYear()}-${a.getMonth()+1}-${a.getDate()}`},v=async()=>{if(!s.value&&!u.value){u.value=!0;try{if(!(await t.asyncGetUserInfo()))return;const a=await e.index.request({url:`${t.websiteUrl}/with-state/my-collocation`,method:"GET",header:{Authorization:e.index.getStorageSync("token")},data:{page:o.value,page_size:r.value}});"success"===a.data.status&&(n.value=[...n.value,...a.data.data.collocation_relation_list],i.value=a.data.data.total,s.value=n.value.length>=i.value,o.value++)}catch(a){e.index.showToast({title:"加载失败",icon:"none"})}finally{u.value=!1}}},g=()=>{s.value||v()};return e.index.setNavigationBarTitle({title:"我的搭配"}),e.onMounted((()=>{v()})),(l,o)=>e.e({a:0===n.value.length&&!u.value},(0!==n.value.length||u.value,{}),{b:e.f(n.value,((a,l,n)=>e.e({a:a.avatar||`${e.unref(t.image1Url)}/default-avatar.png`,b:e.t(c(a.created_at)),c:a.image_urls.length>1},a.image_urls.length>1?{d:e.f(a.image_urls,((e,a,t)=>({a:e,b:a})))}:{e:a.image_urls[0]},{f:e.t(a.title),g:e.t(a.content),h:a.relation_list.length>0},a.relation_list.length>0?{i:e.f(a.relation_list,((a,t,l)=>({a:e.t(a.type),b:e.t(a.relation_goods_name||a.relation_brand_name),c:t})))}:{},{j:l}))),c:u.value},u.value?{d:a._imports_0$9}:{},{e:s.value},(s.value,{}),{f:e.o(g)})}},n=e._export_sfc(l,[["__scopeId","data-v-c0888068"]]);wx.createPage(n);
