"use strict";const e=require("../../common/vendor.js"),o=require("../../common/config.js");if(!Array){(e.resolveComponent("common-search")+e.resolveComponent("common-page"))()}Math||((()=>"../../components/common-search/common-search.js")+(()=>"../../components/common-page/common-page.js"))();const t={__name:"calendar",setup(t){const n=e.ref(["全部","整体","单头","单体","娃衣","眼珠","娃鞋","手型","脚型","袜子","配饰"]);let a=e.ref("全部"),r=e.ref({}),s=e.ref({});const d=new Date,u=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`;e.ref(null);const l=e.index.getSystemInfoSync(),g=l.screenWidth/7;let i=e.ref(0);const c=e.ref(l.statusBarHeight);console.log("状态栏高度"+c.value);let f=e.ref(u),m=e.ref({});function p(e){const o={};return Object.entries(r.value).forEach((([t,n])=>{const a={...n};a.goods&&(a.goods="全部"===e?a.goods:a.goods.filter((o=>o.type===e)),0===a.goods.length&&(a.goods=null)),o[t]=a})),o}e.index.showLoading({title:"加载中"});function y(e){const o=new Date(1e3*e);return`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"0")}-${o.getDate().toString().padStart(2,"0")} ${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}:${o.getSeconds().toString().padStart(2,"0")}`}function _(o){e.index.navigateTo({url:"/pages/goods/goods?goods_id="+o})}return e.index.request({url:o.websiteUrl+"/goods-news",method:"GET",timeout:5e3,success:e=>{console.log(e.data.data),r.value=e.data.data,s.value=p("全部");for(let[o,t]of Object.entries(s.value))o===u&&(m.value=t)},fail:o=>{console.log(o),e.index.showToast({title:"网络请求失败",icon:"none"})},complete:()=>{i.value=7*g-5,console.log("left:"+i.value),e.index.hideLoading()}}),(o,t)=>e.e({a:e.p({width:"560rpx"}),b:e.s("width:500rpx; margin:20rpx 20rpx 0rpx 20rpx"),c:e.f(n.value,((o,t,n)=>({a:e.t(o),b:t,c:e.unref(a)===o?1:"",d:e.o((e=>(e=>{a.value=e;const o=p(e);s.value={...o};const t=Object.entries(o).find((([e,o])=>o.goods));t?(f.value=t[0],m.value=t[1]):m.value={goods:null}})(o)),t)}))),d:e.f(e.unref(s),((o,t,n)=>e.e({a:o.goods_number>0},o.goods_number>0?e.e({b:"周日"===o.weekday||"周六"===o.weekday},"周日"===o.weekday||"周六"===o.weekday?{c:e.t(o.goods_number)}:{},{d:"周日"!==o.weekday&&"周六"!==o.weekday},"周日"!==o.weekday&&"周六"!==o.weekday?{e:e.t(o.goods_number)}:{}):{},{f:"周日"===o.weekday||"周六"===o.weekday},"周日"===o.weekday||"周六"===o.weekday?{g:e.t(o.weekday)}:{},{h:"周日"!==o.weekday&&"周六"!==o.weekday},"周日"!==o.weekday&&"周六"!==o.weekday?{i:e.t(o.weekday)}:{},{j:e.unref(f)!==t},e.unref(f)!==t?{k:e.t(o.day_number)}:{l:e.t(o.day_number)},{m:o.id,n:e.o((e=>function(e,o){console.log(o),f.value=e,m.value=o}(t,o)),o.id)}))),e:e.unref(i),f:e.t(e.unref(f)),g:e.t(e.unref(m).weekday),h:null==e.unref(m).goods},(e.unref(m).goods,{}),{i:e.unref(m).goods},e.unref(m).goods?{j:e.f(e.unref(m).goods,((o,t,n)=>e.e({a:o.goods_image,b:e.t(o.sale_type),c:e.o((e=>_(o.goods_id)),o.id),d:e.t(o.brand_name),e:e.t(o.goods_name),f:e.t(o.size),g:e.t(o.size_detail),h:e.t(o.type),i:e.t(y(o.sub_time)),j:"限量现货"!=o.sale_type&&"不限量现货"!=o.sale_type},"限量现货"!=o.sale_type&&"不限量现货"!=o.sale_type?{k:e.t(o.sub_amount),l:e.t(o.currency),m:e.t(o.fin_amount)}:{},{n:"限量现货"==o.sale_type||"不限量现货"==o.sale_type},"限量现货"==o.sale_type||"不限量现货"==o.sale_type?{o:e.t(o.sub_amount+o.fin_amount),p:e.t(o.currency)}:{},{q:e.o((e=>_(o.goods_id)),o.id),r:o.id})))}:{},{k:e.p({head_color:"rgb(185 195 253)"})})}},n=e._export_sfc(t,[["__scopeId","data-v-f9a8b1f0"]]);t.__runtimeHooks=2,wx.createPage(n);
