"use strict";const e=require("../../../common/vendor.js"),a=require("../../../common/config.js");if(!Array){e.resolveComponent("uni-icons")()}Math;const o={__name:"password",setup(o){e.index.setNavigationBarTitle({title:"设置密码"});let t=e.ref(""),l=e.ref(""),s=e.ref("");const n=e.computed((()=>l.value&&s.value&&l.value===s.value)),u=e.computed((()=>l.value.length<6?"密码过于简单":l.value.length<10?"密码强度一般":"密码强度较高")),r=e=>l.value.length<6?"weak":l.value.length<10?"medium":"strong";function i(){l.value==s.value?!a.global.userInfo.password||t.value?e.index.request({url:a.websiteUrl+"/with-state/setting-password",method:"POST",header:{Authorization:e.index.getStorageSync("token")},data:{old_password:t.value,new_password:l.value},success:a=>{console.log(a.data),"success"==a.data.status?e.index.showToast({title:"修改成功",icon:"success"}):e.index.showToast({title:a.data.msg,icon:"none"})}}):e.index.showToast({title:"请输入原密码",icon:"none"}):e.index.showToast({title:"两次密码输入不一致",icon:"none"})}return a.getUserInfo(),(o,d)=>e.e({a:e.unref(a.global).userInfo.password},e.unref(a.global).userInfo.password?{b:e.unref(t),c:e.o((a=>e.isRef(t)?t.value=a.detail.value:t=a.detail.value)),d:e.p({type:"locked",size:"18",color:"#999"}),e:e.unref(l),f:e.o((a=>e.isRef(l)?l.value=a.detail.value:l=a.detail.value)),g:e.p({type:"gear",size:"18",color:"#999"}),h:e.unref(s),i:e.o((a=>e.isRef(s)?s.value=a.detail.value:s=a.detail.value)),j:e.p({type:"checkmarkempty",size:"18",color:"#999"})}:{k:e.unref(l),l:e.o((a=>e.isRef(l)?l.value=a.detail.value:l=a.detail.value)),m:e.p({type:"locked",size:"18",color:"#999"}),n:e.unref(s),o:e.o((a=>e.isRef(s)?s.value=a.detail.value:s=a.detail.value)),p:e.p({type:"checkmarkempty",size:"18",color:"#999"})},{q:e.unref(l)},e.unref(l)?{r:e.n(r()),s:e.n(r()),t:e.n(r()),v:e.t(u.value)}:{},{w:e.t(e.unref(a.global).userInfo.password?"更新密码":"设置密码"),x:n.value?1:"",y:e.o(i),z:!n.value,A:e.p({type:"info",size:"16",color:"#666"})})}},t=e._export_sfc(o,[["__scopeId","data-v-a0f78cf6"]]);wx.createPage(t);
