"use strict";const e=require("../../../common/vendor.js"),o=require("../../../common/config.js");if(!Array){(e.resolveComponent("view-logs")+e.resolveComponent("uni-icons"))()}Math||((()=>"../../../components/view-logs/view-logs.js")+(()=>"../../../uni_modules/uni-icons/components/uni-icons/uni-icons.js"))();const a={__name:"password",setup(a){e.index.setNavigationBarTitle({title:"设置密码"});let s=e.ref(""),t=e.ref(""),l=e.ref("");const n=e.computed((()=>t.value&&l.value&&t.value===l.value)),u=e.computed((()=>t.value.length<6?"密码过于简单":t.value.length<10?"密码强度一般":"密码强度较高")),i=e=>t.value.length<6?"weak":t.value.length<10?"medium":"strong";function r(){t.value==l.value?!o.global.userInfo.password||s.value?e.index.request({url:o.websiteUrl.value+"/with-state/setting-password",method:"POST",header:{Authorization:e.index.getStorageSync("token")},data:{old_password:s.value,new_password:t.value},success:o=>{console.log(o.data),"success"==o.data.status?e.index.showToast({title:"修改成功",icon:"success"}):e.index.showToast({title:o.data.msg,icon:"none"})}}):e.index.showToast({title:"请输入原密码",icon:"none"}):e.index.showToast({title:"两次密码输入不一致",icon:"none"})}return o.getUserInfo(),(a,c)=>e.e({a:e.unref(o.global).userInfo.password},e.unref(o.global).userInfo.password?{b:e.unref(s),c:e.o((o=>e.isRef(s)?s.value=o.detail.value:s=o.detail.value)),d:e.p({type:"locked",size:"18",color:"#999"}),e:e.unref(t),f:e.o((o=>e.isRef(t)?t.value=o.detail.value:t=o.detail.value)),g:e.p({type:"gear",size:"18",color:"#999"}),h:e.unref(l),i:e.o((o=>e.isRef(l)?l.value=o.detail.value:l=o.detail.value)),j:e.p({type:"checkmarkempty",size:"18",color:"#999"})}:{k:e.unref(t),l:e.o((o=>e.isRef(t)?t.value=o.detail.value:t=o.detail.value)),m:e.p({type:"locked",size:"18",color:"#999"}),n:e.unref(l),o:e.o((o=>e.isRef(l)?l.value=o.detail.value:l=o.detail.value)),p:e.p({type:"checkmarkempty",size:"18",color:"#999"})},{q:e.unref(t)},e.unref(t)?{r:e.n(i()),s:e.n(i()),t:e.n(i()),v:e.t(u.value)}:{},{w:e.t(e.unref(o.global).userInfo.password?"更新密码":"设置密码"),x:n.value?1:"",y:e.o(r),z:!n.value,A:e.p({type:"info",size:"16",color:"#666"})})}},s=e._export_sfc(a,[["__scopeId","data-v-3ea4ad6a"]]);wx.createPage(s);
