"use strict";const e=require("../../common/vendor.js"),a=require("../../common/config.js"),o={__name:"user_like",setup(o){const t=e.ref([{type:1,name:"商品"},{type:2,name:"品牌"},{type:3,name:"搭配"},{type:4,name:"展示柜"}]),n=e.ref(1),l=e.ref([]),i=e.ref(!1),s=e.ref(!1),d=e.reactive({page:1,page_size:8,total:0});e.onMounted((async()=>{await r(),u()}));const r=async()=>{await a.asyncGetUserInfo()||e.index.navigateTo({url:"/pages/login/login"})},u=async()=>{if(!i.value&&!s.value){i.value=!0;try{const o=await e.index.request({url:`${a.websiteUrl}/with-state/user-likes`,method:"GET",data:{type:n.value,page:d.page,page_size:d.page_size},header:{Authorization:e.index.getStorageSync("token")}});if("success"===o.data.status){const e=o.data.data.list;l.value=[...l.value,...e],d.total=o.data.data.total,o.data.data.list.length?s.value=!1:s.value=!0,d.page+=1}}catch(o){e.index.showToast({title:"加载失败",icon:"none"})}finally{i.value=!1}}},v=()=>{s.value?console.log("no more"):u()},c=()=>{d.page=1,l.value=[],s.value=!1},g=e=>(null==e?void 0:e.length)>0?e[0]:"",p=e=>{const a=(null==e?void 0:e.split(",")[0])||"";return a||""};return(a,o)=>e.e({a:e.f(t.value,((a,o,t)=>({a:e.t(a.name),b:o,c:n.value===a.type?1:"",d:e.o((e=>{return o=a.type,void(n.value!==o&&(n.value=o,c(),u()));var o}),o)}))),b:e.f(l.value,((a,o,t)=>e.e({a:1===n.value&&a.goods},1===n.value&&a.goods?{b:g(a.goods.goods_images),c:e.t(a.goods.name),d:e.o((o=>{return t=a.goods.id,void e.index.navigateTo({url:`/pages/goods/goods?goods_id=${t}`});var t}),a.id)}:{},{e:2===n.value&&a.brand},2===n.value&&a.brand?{f:a.brand.logo_image,g:e.t(a.brand.brand_name),h:e.o((o=>{return t=a.brand.id,void e.index.navigateTo({url:`/pages/brand/brand?brand_id=${t}`});var t}),a.id)}:{},{i:3===n.value&&a.collocation},3===n.value&&a.collocation?{j:p(a.collocation.image_urls),k:e.t(a.collocation.title),l:e.o((o=>{return t=a.collocation.id,void e.index.navigateTo({url:`/pages/collocation/detail?id=${t}`});var t}),a.id)}:{},{m:4===n.value&&a.showcase},4===n.value&&a.showcase?{n:g(a.showcase.image_urls),o:e.t(a.showcase.name),p:e.o((o=>{return t=a.showcase.id,void e.index.navigateTo({url:`/pages/showcase/detail?id=${t}`});var t}),a.id)}:{},{q:a.id}))),c:i.value},(i.value,{}),{d:s.value},(s.value,{}),{e:e.o(v)})}},t=e._export_sfc(o,[["__scopeId","data-v-af9b3ef9"]]);wx.createPage(t);
