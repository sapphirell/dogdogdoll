"use strict";const e=require("../../common/vendor.js"),a=require("../../common/config.js");if(!Array){(e.resolveComponent("uni-icons")+e.resolveComponent("loading-toast"))()}Math||((()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../components/loading-toast/loading-toast.js"))();const o={__name:"account_book_preview",props:["account_book_id"],setup(o){const t=o,l=e.ref(!1),i=e.ref({}),u=e.ref(500),r=e.ref([]),n=e.ref(0),c=e.computed((()=>i.value.image_url?i.value.image_url.split(",").map((e=>e.trim())):[])),v=()=>{e.index.navigateTo({url:`/pages/stock/account_book_form/account_book_form?account_book_id=${t.account_book_id}`})};return e.onShow((()=>{u.value=300,r.value=[];const o=e.index.getSystemInfoSync();n.value=o.windowWidth,a.asyncGetUserInfo().then((o=>{(async o=>{const t=e.index.getStorageSync("token");try{const u=await e.index.request({url:`${a.websiteUrl}/with-state/account-book-detail?id=${o}`,method:"GET",header:{Authorization:t}});"success"===u.data.status?(i.value=u.data.data,setTimeout((()=>{l.value=!0,e.index.setNavigationBarTitle({title:i.value.name||"账本详情"})}),600)):e.index.showToast({title:u.data.msg||"获取详情失败",icon:"none"})}catch(u){e.index.showToast({title:"网络请求失败",icon:"none"})}})(t.account_book_id)}))})),(a,o)=>e.e({a:l.value},l.value?e.e({b:e.f(c.value,((a,o,t)=>({a:a,b:e.o((e=>((e,a)=>{if(!n.value)return;const{width:o,height:t}=e.detail,l=t/o*n.value;r.value[a]=l;const i=r.value.filter((e=>e));if(i.length>0){const e=Math.max(...i);e>u.value&&(u.value=e)}})(e,o)),o),c:o}))),c:u.value+"px",d:e.t(i.value.name),e:e.t(i.value.type),f:e.p({type:"list",size:"16",color:"#5db7ff"}),g:i.value.count},i.value.count?{h:e.p({type:"number",size:"14",color:"#5db7ff"}),i:e.t(i.value.count)}:{},{j:i.value.price||i.value.final_price>0},i.value.price||i.value.final_price>0?e.e({k:e.p({type:"money",size:"14",color:"#5db7ff"}),l:i.value.final_price>0},i.value.final_price>0?{m:e.t(i.value.price)}:{n:e.t(i.value.price)}):{},{o:i.value.final_price>0},i.value.final_price>0?e.e({p:e.p({type:"money",size:"14",color:"#5db7ff"}),q:e.t(i.value.final_price),r:i.value.final_time},i.value.final_time?{s:e.t(i.value.final_time)}:{}):{},{t:i.value.shop_name},i.value.shop_name?{v:e.p({type:"shop",size:"14",color:"#5db7ff"}),w:e.t(i.value.shop_name)}:{},{x:i.value.size||i.value.size_detail},i.value.size||i.value.size_detail?{y:e.p({type:"compose",size:"14",color:"#5db7ff"}),z:e.t(i.value.size),A:e.t(i.value.size_detail)}:{},{B:i.value.head_circumference},i.value.head_circumference?{C:e.p({type:"circle",size:"14",color:"#5db7ff"}),D:e.t(i.value.head_circumference)}:{},{E:i.value.shoulder_width},i.value.shoulder_width?{F:e.p({type:"arrowright",size:"14",color:"#5db7ff"}),G:e.t(i.value.shoulder_width)}:{},{H:i.value.makeup_artist},i.value.makeup_artist?{I:e.p({type:"person",size:"14",color:"#5db7ff"}),J:e.t(i.value.makeup_artist)}:{},{K:i.value.color},i.value.color?{L:e.p({type:"color",size:"14",color:"#5db7ff"}),M:e.t(i.value.color),N:i.value.color}:{},{O:i.value.buy_date||i.value.arrival_date},i.value.buy_date||i.value.arrival_date?e.e({P:e.p({type:"calendar",size:"16",color:"#5db7ff"}),Q:i.value.buy_date},i.value.buy_date?{R:e.p({type:"cart",size:"14",color:"#5db7ff"}),S:e.t(i.value.buy_date)}:{},{T:i.value.arrival_date},i.value.arrival_date?{U:e.p({type:"home",size:"14",color:"#5db7ff"}),V:e.t(i.value.arrival_date)}:{}):{},{W:i.value.position},i.value.position?{X:e.p({type:"location",size:"16",color:"#5db7ff"}),Y:e.p({type:"map",size:"14",color:"#5db7ff"}),Z:e.t(i.value.position)}:{},{aa:i.value.additional_value||i.value.remark},i.value.additional_value||i.value.remark?e.e({ab:e.p({type:"info",size:"16",color:"#5db7ff"}),ac:i.value.additional_value},i.value.additional_value?{ad:e.p({type:"plus",size:"14",color:"#5db7ff"}),ae:e.t(i.value.additional_value)}:{},{af:i.value.remark},i.value.remark?{ag:e.p({type:"chat",size:"14",color:"#5db7ff"}),ah:e.t(i.value.remark)}:{}):{}):{},{ai:e.p({type:"compose",size:"22",color:"#fff"}),aj:e.o(v),ak:e.p({show:!l.value})})}};wx.createPage(o);
