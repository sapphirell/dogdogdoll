"use strict";const e=require("../../common/vendor.js"),a=require("../../common/config.js");if(!Array){(e.resolveComponent("uni-icons")+e.resolveComponent("common-search"))()}Math||((()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../components/common-search/common-search.js"))();const t={__name:"creator_base",setup(t){const o=e.ref(!1),s=e.ref(!1),n=e.ref(!1),i=e.ref({brand_name:"加载中...",description:"",country_name:"",nickname_list:"",logo_image:"",type:"",goods_count:0,views:0,vote_number:0,score:0,is_brand:0,is_bjd_artist:0,is_bjd_hairstylist:0}),r=e.ref(""),l=e.ref(0),d=e.ref({}),c=e.computed((()=>d.value.brand_id>0)),u=e.computed((()=>r.value?`我的UID是${d.value.id}，我的品牌是${r.value}，品牌ID是${l.value}`:""));let v=e.ref(0),_=e.ref(!1);const m=async(t,r)=>{if(!_.value){_.value=!0,e.index.showLoading({title:"更新中...",mask:!0});try{const l=e.index.getStorageSync("token");if(!l)return void e.index.showToast({title:"请先登录",icon:"none"});const d={};d[t]=r?1:0;const c=await e.index.request({url:`${a.websiteUrl.value}/brand-manager/update-brand-identity`,method:"POST",header:{Authorization:l,"Content-Type":"application/json"},data:d});"success"===c.data.status?(e.index.showToast({title:"更新成功",icon:"success"}),i.value[t]=r?1:0):(e.index.showToast({title:c.data.msg||"更新失败",icon:"none"}),"is_brand"===t&&(o.value=!r),"is_bjd_artist"===t&&(s.value=!r),"is_bjd_hairstylist"===t&&(n.value=!r))}catch(l){console.error("更新失败:",l),e.index.showToast({title:"网络请求失败",icon:"none"})}finally{_.value=!1,e.index.hideLoading()}}},g=e=>{const a=e.detail.value;m("is_brand",a)},b=e=>{const a=e.detail.value;m("is_bjd_artist",a)},p=e=>{const a=e.detail.value;m("is_bjd_hairstylist",a)},f=e=>{console.log(e),r.value=e,l.value=0},h=(e,a)=>{l.value=e,r.value=a},x=()=>{e.index.setClipboardData({data:"dogdogdoll",success:()=>{e.index.showToast({title:"已复制联系方式",icon:"success"})}})},y=()=>{u.value?e.index.setClipboardData({data:u.value,success:()=>{e.index.showToast({title:"已复制入驻信息",icon:"success"})}}):e.index.showToast({title:"请先选择品牌",icon:"none"})},w=a=>{switch(a){case"info-setting":e.index.navigateTo({url:"/pages/creator_base/brand_edit/brand_edit"});break;case"goods-manage":e.index.navigateTo({url:"/pages/creator_base/goods_list/goods_list"});break;case"image-manage":e.index.navigateTo({url:"/pages/creator_base/news/news"});break;case"artist_info":e.index.navigateTo({url:"/pages/creator_base/artist_setting/artist_setting"})}};return e.onMounted((()=>{e.index.setNavigationBarTitle({title:"我的品牌"}),(async()=>{try{const t=await a.asyncGetUserInfo();if(d.value=t,!t||!t.brand_id)return void(i.value.brand_id=0);v.value=t.brand_id,e.index.request({url:`${a.websiteUrl.value}/brand-info?id=${t.brand_id}`,method:"GET",success:a=>{"success"===a.data.status?(i.value=a.data.data,o.value=1===a.data.data.is_brand,s.value=1===a.data.data.is_bjd_artist,n.value=1===a.data.data.is_bjd_hairstylist):e.index.showToast({title:a.data.msg||"获取品牌信息失败",icon:"none"})},fail:a=>{console.error("请求失败:",a),e.index.showToast({title:"网络请求失败",icon:"none"})}})}catch(t){console.error("加载品牌数据出错:",t),e.index.showToast({title:"加载数据出错",icon:"none"})}})()})),(a,t)=>e.e({a:c.value},c.value?{b:i.value.logo_image,c:e.t(i.value.brand_name),d:e.t(i.value.type),e:e.t(i.value.country_name),f:e.p({type:"star-filled",size:"16",color:"#FFC107"}),g:e.t(i.value.score),h:e.t(i.value.brand_name),i:e.t(i.value.description),j:e.t(i.value.country_name),k:e.t(i.value.nickname_list),l:e.t(i.value.type),m:o.value,n:e.o(g),o:e.t(o.value?"我是店铺":"不是店铺"),p:s.value,q:e.o(b),r:e.t(s.value?"我是妆师":"不是妆师"),s:n.value,t:e.o(p),v:e.t(n.value?"我是毛娘":"不是毛娘"),w:e.p({type:"contact",size:"24",color:"#006a57"}),x:e.o((e=>w("info-setting"))),y:e.p({type:"shop",size:"24",color:"#dfd7c2"}),z:e.o((e=>w("goods-manage"))),A:e.p({type:"image",size:"24",color:"#fff6e1"}),B:e.o((e=>w("image-manage"))),C:e.p({type:"contact",size:"24",color:"#c7e1fa"}),D:e.o((e=>w("artist_info")))}:e.e({E:e.o(x),F:e.o(h),G:e.o(f),H:e.p({mode:"fill",placeholder:"搜索并选择您的品牌","show-index-selector":!0}),I:l.value},l.value?{J:e.t(l.value)}:{},{K:u.value,L:e.o(y)}))}},o=e._export_sfc(t,[["__scopeId","data-v-65beb174"]]);wx.createPage(o);
