import{r as a,b as e,c as s,w as t,d as l,C as o,a0 as r,u as n,e as u,k as i,F as c,l as d,t as m,v as p,n as v,i as f,M as _,f as h,g,S as y}from"./index-6ojkiy1R.js";import{_ as k}from"./search.CsIL0f2m.js";import{_ as j}from"./cancel.CnEdunnH.js";import{w as b}from"./config.Bhvn_Gfs.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=w(Object.assign({inheritAttrs:!1},{__name:"common-search",props:{mode:{type:String,default:"jump",validator:a=>["jump","fill"].includes(a)},width:{type:String,default:"100%"},background:{type:String,default:""},fontSize:{type:String,default:""}},emits:["select"],setup(w,{emit:C}){const S=w,x=C,E=a(""),I=a([]),V=async()=>{if(""!==E.value.trim()){x("select",0,E.value);try{const a=await p({url:b+`/search-brand?search=${E.value}`,method:"GET",header:{"Content-Type":"application/json"}});return console.log("请求结果:",a.data),"success"==a.data.status?null==a.data.data?void(I.value=[]):void(I.value=a.data.data):void(I.value=[])}catch(a){return console.error("请求错误:",a),void(I.value=[])}}else I.value=[]};function $(){E.value="",I.value=[]}return(a,p)=>{const b=f,C=_,T=h,z=g,A=y;return e(),s(z,{style:{width:"100%"}},{default:t((()=>[l(z,{class:o(["search_tab",a.$attrs.class]),style:r({background:w.background||"#fff"})},{default:t((()=>["jump"==S.mode?(e(),s(b,{key:0,class:"icon_image",src:k})):n("",!0),l(C,{class:"common_search_input",placeholder:"可以模糊搜索娃社 o( ❛ᴗ❛ )o …",modelValue:E.value,"onUpdate:modelValue":p[0]||(p[0]=a=>E.value=a),onInput:V,ignoreCompositionEvent:!1},null,8,["modelValue"]),I.value.length>0?(e(),s(z,{key:1,class:"search-info-tap"},{default:t((()=>[I.value.length>0&&E.value.length<5?(e(),s(T,{key:0},{default:t((()=>[u("拼音、缩写、别名都可以搜")])),_:1})):n("",!0),l(b,{class:"icon_image",src:j,onClick:$})])),_:1})):n("",!0)])),_:1},8,["class","style"]),l(z,{style:{position:"relative"}},{default:t((()=>[I.value.length>0?(e(),s(A,{key:0,class:"search_results",style:r({width:w.width}),"scroll-y":""},{default:t((()=>[(e(!0),i(c,null,d(I.value,(a=>(e(),s(z,{key:a.id,class:"result_item",onClick:e=>{return s=a.id,t=a.name,void("jump"===S.mode?v({url:`/pages/brand/brand?brand_id=${s}`}):"fill"===S.mode&&(E.value=t,I.value=[],x("select",s,t)));var s,t}},{default:t((()=>[u(m(a.name),1)])),_:2},1032,["onClick"])))),128))])),_:1},8,["style"])):n("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-e250f8d9"]]);export{C as _};
