import{g as a,a8 as e,l as t,C as s,W as l,c as o,w as n,f as c,o as r,a as i,d as u,r as d,F as m,b as g,v as _,e as f,S as p,t as v,q as h,m as b,n as k,i as y}from"./index-CAhh9jg-.js";import{w as S}from"./config.D_tpLRWx.js";import{_ as $}from"./_plugin-vue_export-helper.BCo6x5W8.js";const w=$({__name:"my_comment",setup($){const w=a([]),x=a(1),C=a(10),F=a(0),j=a(!1),z=a(!1),D={1:{name:"品牌",class:"brand"},2:{name:"商品",class:"goods"},3:{name:"搭配",class:"collocation"},4:{name:"资讯",class:"news"},5:{name:"树洞",class:"treehole"},6:{name:"展示柜",class:"collocation"}};e((()=>{I()}));const I=async(a=!1)=>{if(!j.value&&!z.value){j.value=!0;try{const e=await t({url:`${S}/with-state/my-comment`,method:"GET",header:{Authorization:s("token")},data:{page:x.value,page_size:C.value}});if("success"===e.data.status){const t=e.data.data;w.value=a?[...w.value,...t.comment_list]:t.comment_list,F.value=t.total,x.value++,z.value=w.value.length>=F.value}}finally{j.value=!1}}},M=()=>{z.value||I(!0)},q=a=>{let e="";const t=a.relation_id;switch(a.type){case 1:e=`/pages/brand/brand?brand_id=${t}`;break;case 2:e=`/pages/goods/goods?goods_id=${t}`;break;case 3:e=`/pages/collocation_share/collocation_share?collocation_id=${t}&origin=1`;break;case 4:e=`/pages/sale_news/sale_news?newsId=${t}`;break;case 5:e=`/pages/treehole_detail/treehole_detail?id=${t}`;break;case 6:e=`/pages/collocation_share/collocation_share?collocation_id=${t}&origin=2`;break;default:return void b({title:"未知类型",icon:"none"})}e&&k({url:e})},A=a=>{var e;return(null==(e=D[a])?void 0:e.name)||"未知"};function E(a){const e=new Date(1e3*a);return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}`}return l({title:"我的评论"}),(a,e)=>{const t=y,s=f,l=c,b=p;return r(),o(l,{class:"page-container"},{default:n((()=>[i(b,{class:"comment-list","scroll-y":"",onScrolltolower:M,"show-scrollbar":!1},{default:n((()=>[(r(!0),u(m,null,d(w.value,((a,e)=>(r(),o(l,{key:e,class:"comment-item",onClick:e=>q(a)},{default:n((()=>[i(l,{class:"user-info"},{default:n((()=>[i(t,{class:"avatar",src:a.avatar||"/static/default-avatar.png",mode:"aspectFill"},null,8,["src"]),i(l,{class:"user-meta"},{default:n((()=>[i(s,{class:"username"},{default:n((()=>[g(v(a.username),1)])),_:2},1024),i(s,{class:"time"},{default:n((()=>[g(v(E(a.created_at)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),i(l,{class:"content-box"},{default:n((()=>[i(s,{class:"content"},{default:n((()=>[g(v(a.comment),1)])),_:2},1024)])),_:2},1024),i(l,{class:"target-box",onClick:e=>q(a)},{default:n((()=>[a.target_image?(r(),o(t,{key:0,class:"target-image",src:a.target_image,mode:"aspectFill"},null,8,["src"])):_("",!0),i(l,{class:"target-info"},{default:n((()=>{return[i(l,{class:h(["type-tag",(e=a.type,(null==(t=D[e])?void 0:t.class)||"")])},{default:n((()=>[g(v(A(a.type)),1)])),_:2},1032,["class"]),i(s,{class:"target-name"},{default:n((()=>[g(v(a.target_name),1)])),_:2},1024)];var e,t})),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1032,["onClick"])))),128)),i(l,{class:"loading-status"},{default:n((()=>[j.value?(r(),o(s,{key:0,class:"loading-text"},{default:n((()=>[g("加载中...")])),_:1})):_("",!0),z.value?(r(),o(s,{key:1,class:"no-more-text"},{default:n((()=>[g("没有更多了")])),_:1})):_("",!0)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-812b4fe0"]]);export{w as default};
