import{r as e,b as a,c as s,w as t,d as l,D as o,a0 as r,p as n,e as u,v as i,F as d,x as c,t as m,q as p,n as v,i as f,M as _,f as h,g,S as y}from"./index-BFzTDSoz.js";import{_ as j}from"./search.CsIL0f2m.js";import{_ as k}from"./cancel.CnEdunnH.js";import{w as b}from"./view-logs.yEAac7W9.js";import{_ as w}from"./_plugin-vue_export-helper.CXFOpRdI.js";const S=w(Object.assign({inheritAttrs:!1},{__name:"common-search",props:{mode:{type:String,default:"jump",validator:e=>["jump","fill"].includes(e)},width:{type:String,default:"100%"},background:{type:String,default:""},fontSize:{type:String,default:""}},emits:["select"],setup(w,{emit:S}){const C=w,x=S,I=e(""),V=e([]),$=async()=>{if(""!==I.value.trim()){x("select",0,I.value);try{const e=await p({url:b+`/search-brand?search=${I.value}`,method:"GET",header:{"Content-Type":"application/json"}});return console.log("请求结果:",e.data),"success"==e.data.status?null==e.data.data?void(V.value=[]):void(V.value=e.data.data):void(V.value=[])}catch(e){return console.error("请求错误:",e),void(V.value=[])}}else V.value=[]};function A(){I.value="",V.value=[]}return(e,p)=>{const b=f,S=_,E=h,T=g,q=y;return a(),s(T,{style:{width:"100%"}},{default:t((()=>[l(T,{class:o(["search_tab",e.$attrs.class]),style:r({background:w.background||"#fff"})},{default:t((()=>["jump"==C.mode?(a(),s(b,{key:0,class:"icon_image",src:j})):n("",!0),l(S,{class:"common_search_input",placeholder:"可以模糊搜索娃社 o( ❛ᴗ❛ )o …",modelValue:I.value,"onUpdate:modelValue":p[0]||(p[0]=e=>I.value=e),onInput:$,ignoreCompositionEvent:!1},null,8,["modelValue"]),V.value.length>0?(a(),s(T,{key:1,class:"search-info-tap"},{default:t((()=>[V.value.length>0&&I.value.length<5?(a(),s(E,{key:0},{default:t((()=>[u("拼音、缩写、别名都可以搜")])),_:1})):n("",!0),l(b,{class:"icon_image",src:k,onClick:A})])),_:1})):n("",!0)])),_:1},8,["class","style"]),l(T,{style:{position:"relative"}},{default:t((()=>[V.value.length>0?(a(),s(q,{key:0,class:"search_results",style:r({width:w.width}),"scroll-y":""},{default:t((()=>[(a(!0),i(d,null,c(V.value,(e=>(a(),s(T,{key:e.id,class:"result_item",onClick:a=>{return s=e.id,t=e.name,void("jump"===C.mode?v({url:`/pages/brand/brand?brand_id=${s}`}):"fill"===C.mode&&(I.value=t,V.value=[],x("select",s,t)));var s,t}},{default:t((()=>[u(m(e.name),1)])),_:2},1032,["onClick"])))),128))])),_:1},8,["style"])):n("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-e250f8d9"]]);export{S as _};
