import{g as a,o as e,d as s,a as l,w as t,c as o,v as n,F as r,r as u,b as c,t as i,U as d,l as m,n as p,i as v,Q as _,f as h,S as f}from"./index-CAhh9jg-.js";import{_ as g}from"./cancel.CnEdunnH.js";import{w as y}from"./config.D_tpLRWx.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";const b=j({__name:"common-search",props:{mode:{type:String,default:"jump",validator:a=>["jump","fill"].includes(a)},width:{type:String,default:"100%"}},emits:["select"],setup(j,{emit:b}){const k=j,w=b,C=a(""),x=a([]),S=async()=>{if(""!==C.value.trim()){w("select",0,C.value);try{const a=await m({url:y+`/search-brand?search=${C.value}`,method:"GET",header:{"Content-Type":"application/json"}});return console.log("请求结果:",a.data),"success"==a.data.status?null==a.data.data?void(x.value=[]):void(x.value=a.data.data):void(x.value=[])}catch(a){return console.error("请求错误:",a),void(x.value=[])}}else x.value=[]};function V(){C.value="",x.value=[]}return(a,m)=>{const y=v,b=_,E=h,I=f;return e(),s(r,null,[l(E,{class:"search_tab"},{default:t((()=>["jump"==k.mode?(e(),o(y,{key:0,class:"icon_image",src:"/assets/search-2h22765p.png"})):n("",!0),l(b,{class:"common_search_input",placeholder:"请输入品牌 …",modelValue:C.value,"onUpdate:modelValue":m[0]||(m[0]=a=>C.value=a),onInput:S,ignoreCompositionEvent:!1},null,8,["modelValue"]),x.value.length>0?(e(),o(y,{key:1,class:"icon_image",src:g,onClick:V})):n("",!0)])),_:1}),x.value.length>0?(e(),o(I,{key:0,class:"search_results",style:d({width:j.width}),"scroll-y":""},{default:t((()=>[(e(!0),s(r,null,u(x.value,(a=>(e(),o(E,{key:a.id,class:"result_item",onClick:e=>{return s=a.id,l=a.name,void("jump"===k.mode?p({url:`/pages/brand/brand?brand_id=${s}`}):"fill"===k.mode&&(C.value=l,x.value=[],w("select",s,l)));var s,l}},{default:t((()=>[c(i(a.name),1)])),_:2},1032,["onClick"])))),128))])),_:1},8,["style"])):n("",!0)],64)}}},[["__scopeId","data-v-f072ce3b"]]);export{b as _};
