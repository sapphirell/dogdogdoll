import{k as a,a4 as e,V as t,c as l,w as u,A as s,p as n,g as d,o as i,a as o,b as c,t as r,q as p,a2 as v,f as m,J as f,y as _,C as h}from"./index-D8OtiTi9.js";import{w as g}from"./config.BPuNpLTQ.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";const y=b({__name:"bill_form",props:["bill_id"],setup(b){const y=b,V=!!y.bill_id,w=a(""),S=a(""),k=a(""),x=a(0),T=["未补款","已补款"];const A=a("");function C(a){const e=a.detail.value;k.value=e,A.value=j(e)}function j(a){let e=new Date(a);return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`}function z(a){x.value=a.detail.value}function F(){V?function(){let a={id:parseInt(y.bill_id,10),name:w.value,price:parseFloat(S.value),ymd:k.value,status:x.value};n({url:g+"/with-state/update-tail-bill",method:"POST",header:{Authorization:s("token")},data:a,success:a=>{"success"==a.data.status?(p({title:"提交成功",icon:"success"}),setTimeout((()=>{v()}),500)):p({title:a.data.msg,icon:"none"})}})}():function(){let a={name:w.value,price:parseFloat(S.value),ymd:k.value,status:x.value};n({url:g+"/with-state/add-tail-bill",method:"POST",header:{Authorization:s("token")},data:a,success:a=>{"success"==a.data.status?(p({title:"提交成功",icon:"success"}),setTimeout((()=>{v()}),500)):p({title:a.data.msg,icon:"none"})}})}()}return e((()=>{V?(!function(a){let e=s("token");n({url:g+"/with-state/tail-bill-detail",method:"GET",header:{Authorization:e},data:{id:a},success:a=>{w.value=a.data.data.name,S.value=a.data.data.price,k.value=a.data.data.ymd,x.value=a.data.data.status,A.value=j(a.data.data.ymd)},fail:a=>{console.log(a)}})}(y.bill_id),t({title:"编辑账单"})):t({title:"新增账单"})})),(a,e)=>{const t=m,s=f,n=d,p=_,v=h;return i(),l(n,{style:{padding:"15px"}},{default:u((()=>[o(n,null,{default:u((()=>[o(t,null,{default:u((()=>[c("账单名称")])),_:1}),o(s,{class:"inputer",type:"text",placeholder:"名称",modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=a=>w.value=a)},null,8,["modelValue"])])),_:1}),o(n,null,{default:u((()=>[o(t,null,{default:u((()=>[c("账单金额")])),_:1}),o(s,{class:"inputer",type:"digit",placeholder:"金额",modelValue:S.value,"onUpdate:modelValue":e[1]||(e[1]=a=>S.value=a)},null,8,["modelValue"])])),_:1}),o(n,null,{default:u((()=>[o(t,null,{default:u((()=>[c("账单日期")])),_:1}),o(p,{mode:"date",class:"inputer",value:A.value,onChange:C},{default:u((()=>[o(n,{class:"uni-input"},{default:u((()=>[c(r(A.value),1)])),_:1})])),_:1},8,["value"])])),_:1}),o(n,null,{default:u((()=>[o(t,null,{default:u((()=>[c("账单状态")])),_:1}),o(p,{mode:"selector",class:"inputer",value:x.value,range:T,onChange:z},{default:u((()=>[o(n,{class:"uni-input"},{default:u((()=>[c(r(T[x.value]),1)])),_:1})])),_:1},8,["value"])])),_:1}),o(v,{class:"light_button",onClick:F},{default:u((()=>[c("提交")])),_:1})])),_:1})}}},[["__scopeId","data-v-49f0d11a"]]);export{y as default};
