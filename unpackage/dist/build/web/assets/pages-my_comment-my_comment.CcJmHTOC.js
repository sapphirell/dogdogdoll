import{r as a,o as e,q as t,j as s,a2 as l,a as o,c as n,w as c,g as r,b as i,d as u,v as d,x as _,F as g,e as m,p,f as v,S as f,t as h,D as b,A as k,n as y,i as w}from"./index-BFzTDSoz.js";import{w as S,_ as $}from"./view-logs.yEAac7W9.js";import{_ as x,r as j}from"./_plugin-vue_export-helper.CXFOpRdI.js";const C=x({__name:"my_comment",setup(x){const C=a([]),F=a(1),A=a(10),D=a(0),z=a(!1),M=a(!1),q={1:{name:"品牌",class:"brand"},2:{name:"商品",class:"goods"},3:{name:"搭配",class:"collocation"},4:{name:"资讯",class:"news"},5:{name:"树洞",class:"treehole"},6:{name:"展示柜",class:"collocation"},7:{name:"文章",class:"collocation"}};e((()=>{B()}));const B=async(a=!1)=>{if(!z.value&&!M.value){z.value=!0;try{const e=await t({url:`${S}/with-state/my-comment`,method:"GET",header:{Authorization:s("token")},data:{page:F.value,page_size:A.value}});if("success"===e.data.status){const t=e.data.data;C.value=a?[...C.value,...t.comment_list]:t.comment_list,D.value=t.total,F.value++,M.value=C.value.length>=D.value}}finally{z.value=!1}}},E=()=>{M.value||B(!0)},G=a=>{let e="";const t=a.relation_id;switch(a.type){case 1:e=`/pages/brand/brand?brand_id=${t}`;break;case 2:e=`/pages/goods/goods?goods_id=${t}`;break;case 3:e=`/pages/collocation_share/collocation_share?collocation_id=${t}&origin=1`;break;case 4:e=`/pages/sale_news/sale_news?id=${t}&brand_id=0`;break;case 5:e=`/pages/treehole_detail/treehole_detail?id=${t}`;break;case 6:e=`/pages/collocation_share/collocation_share?collocation_id=${t}&origin=2`;break;default:return void k({title:"未知类型",icon:"none"})}e&&y({url:e})},H=a=>{var e;return(null==(e=q[a])?void 0:e.name)||"未知"};function I(a){const e=new Date(1e3*a);return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}`}return l({title:"我的评论"}),(a,e)=>{const t=j(o("view-logs"),$),s=w,l=v,k=r,y=f;return i(),n(k,{class:"page-container"},{default:c((()=>[u(t),u(y,{class:"comment-list","scroll-y":"",onScrolltolower:E,"show-scrollbar":!1},{default:c((()=>[(i(!0),d(g,null,_(C.value,((a,e)=>(i(),n(k,{key:e,class:"comment-item",onClick:e=>G(a)},{default:c((()=>[u(k,{class:"user-info"},{default:c((()=>[u(s,{class:"avatar",src:a.avatar||"/static/default-avatar.png",mode:"aspectFill"},null,8,["src"]),u(k,{class:"user-meta"},{default:c((()=>[u(l,{class:"username"},{default:c((()=>[m(h(a.username),1)])),_:2},1024),u(l,{class:"time"},{default:c((()=>[m(h(I(a.created_at)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),u(k,{class:"content-box"},{default:c((()=>[u(l,{class:"content"},{default:c((()=>[m(h(a.comment),1)])),_:2},1024)])),_:2},1024),u(k,{class:"target-box",onClick:e=>G(a)},{default:c((()=>[a.target_image?(i(),n(s,{key:0,class:"target-image",src:a.target_image,mode:"aspectFill"},null,8,["src"])):p("",!0),u(k,{class:"target-info"},{default:c((()=>{return[u(k,{class:b(["type-tag",(e=a.type,(null==(t=q[e])?void 0:t.class)||"")])},{default:c((()=>[m(h(H(a.type)),1)])),_:2},1032,["class"]),u(l,{class:"target-name"},{default:c((()=>[m(h(a.target_name),1)])),_:2},1024)];var e,t})),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1032,["onClick"])))),128)),u(k,{class:"loading-status"},{default:c((()=>[z.value?(i(),n(l,{key:0,class:"loading-text"},{default:c((()=>[m("加载中...")])),_:1})):p("",!0),M.value?(i(),n(l,{key:1,class:"no-more-text"},{default:c((()=>[m("没有更多了")])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-05128455"]]);export{C as default};
