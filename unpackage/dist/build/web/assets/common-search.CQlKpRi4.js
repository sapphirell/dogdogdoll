import{r as a,b as e,c as s,w as t,d as l,D as o,a1 as r,p as n,e as u,v as i,F as c,x as d,t as m,q as p,n as v,i as f,N as _,f as h,g,S as y}from"./index-I3aG4WZL.js";import{_ as j}from"./search.CsIL0f2m.js";import{_ as k}from"./cancel.CnEdunnH.js";import{w as b}from"./config.BjeWXQ7P.js";import{_ as w}from"./_plugin-vue_export-helper.DF4WgY5m.js";const S=w(Object.assign({inheritAttrs:!1},{__name:"common-search",props:{mode:{type:String,default:"jump",validator:a=>["jump","fill"].includes(a)},width:{type:String,default:"100%"},background:{type:String,default:""},fontSize:{type:String,default:""}},emits:["select"],setup(w,{emit:S}){const x=w,C=S,V=a(""),$=a([]),D=async()=>{if(""!==V.value.trim()){C("select",0,V.value);try{const a=await p({url:b+`/search-brand?search=${V.value}`,method:"GET",header:{"Content-Type":"application/json"}});return console.log("请求结果:",a.data),"success"==a.data.status?null==a.data.data?void($.value=[]):void($.value=a.data.data):void($.value=[])}catch(a){return console.error("请求错误:",a),void($.value=[])}}else $.value=[]};function E(){V.value="",$.value=[]}return(a,p)=>{const b=f,S=_,G=h,I=g,T=y;return e(),s(I,{style:{width:"100%"}},{default:t((()=>[l(I,{class:o(["search_tab",a.$attrs.class]),style:r({background:w.background||"#fff"})},{default:t((()=>["jump"==x.mode?(e(),s(b,{key:0,class:"icon_image",src:j})):n("",!0),l(S,{class:"common_search_input",placeholder:"可以模糊搜索娃社 o( ❛ᴗ❛ )o …",modelValue:V.value,"onUpdate:modelValue":p[0]||(p[0]=a=>V.value=a),onInput:D,ignoreCompositionEvent:!1},null,8,["modelValue"]),$.value.length>0?(e(),s(I,{key:1,class:"search-info-tap"},{default:t((()=>[$.value.length>0&&V.value.length<5?(e(),s(G,{key:0},{default:t((()=>[u("拼音、缩写、别名都可以搜")])),_:1})):n("",!0),l(b,{class:"icon_image",src:k,onClick:E})])),_:1})):n("",!0)])),_:1},8,["class","style"]),l(I,{style:{position:"relative"}},{default:t((()=>[$.value.length>0?(e(),s(T,{key:0,class:"search_results",style:r([{height:"600rpx"},{width:w.width}]),"scroll-y":""},{default:t((()=>[(e(!0),i(c,null,d($.value,(a=>(e(),s(I,{key:a.id,class:"result_item",onClick:e=>{return s=a.id,t=a.name,void("jump"===x.mode?v({url:`/pages/brand/brand?brand_id=${s}`}):"fill"===x.mode&&(V.value=t,$.value=[],C("select",s,t)));var s,t}},{default:t((()=>[u(m(a.name),1)])),_:2},1032,["onClick"])))),128))])),_:1},8,["style"])):n("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-1ec7491a"]]);export{S as _};
