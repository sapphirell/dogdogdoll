import{r as a,a2 as l,o as e,a as t,c as s,w as o,q as c,j as n,A as r,g as i,b as u,B as d,d as _,e as f,p as g,v as m,x as v,F as p,i as y,f as h,S as w,C as k,t as x,E as b,G as F}from"./index-BFzTDSoz.js";import{c as $,w as j,_ as z,i as A}from"./view-logs.yEAac7W9.js";import{_ as B,r as D}from"./_plugin-vue_export-helper.CXFOpRdI.js";const E=B({__name:"my_collocation",setup(B){const E=a([]),G=a(1),R=a(10),S=a(0),q=a(!1),C=a(!1),I=a=>{const l=new Date(1e3*a);return`${l.getFullYear()}-${l.getMonth()+1}-${l.getDate()}`},M=async()=>{if(!C.value&&!q.value){q.value=!0;try{if(!(await $()))return;const a=await c({url:`${j}/with-state/my-collocation`,method:"GET",header:{Authorization:n("token")},data:{page:G.value,page_size:R.value}});"success"===a.data.status&&(E.value=[...E.value,...a.data.data.collocation_relation_list],S.value=a.data.data.total,C.value=E.value.length>=S.value,G.value++)}catch(a){r({title:"加载失败",icon:"none"})}finally{q.value=!1}}},T=()=>{C.value||M()};return l({title:"我的搭配"}),e((()=>{M()})),(a,l)=>{const e=D(t("view-logs"),z),c=i,n=y,r=h,$=b,j=F,B=w;return u(),s(c,{class:"container"},{default:o((()=>[d("meta",{name:"theme-color",content:"#F8F8F8"}),_(e),_(B,{class:"scroll-content","scroll-y":"",onScrolltolower:T,"show-scrollbar":!1},{default:o((()=>[0!==E.value.length||q.value?g("",!0):(u(),s(c,{key:0,class:"empty-tip"},{default:o((()=>[f(" 暂无发布的搭配，快去创建吧~ ")])),_:1})),(u(!0),m(p,null,v(E.value,((a,l)=>(u(),s(c,{key:l,class:"collocation-card"},{default:o((()=>[_(c,{class:"card-header"},{default:o((()=>[_(n,{class:"avatar",src:a.avatar||`${k(A)}/default-avatar.png`,mode:"aspectFill"},null,8,["src"]),_(r,{class:"time"},{default:o((()=>[f(x(I(a.created_at)),1)])),_:2},1024)])),_:2},1024),_(c,{class:"image-container"},{default:o((()=>[a.image_urls.length>1?(u(),s(j,{key:0,class:"swiper-box",autoplay:!1,circular:!0},{default:o((()=>[(u(!0),m(p,null,v(a.image_urls,((a,l)=>(u(),s($,{key:l},{default:o((()=>[_(n,{class:"swiper-image",src:a,mode:"aspectFill","lazy-load":"",style:{aspectRatio:"3/4"}},null,8,["src"])])),_:2},1024)))),128))])),_:2},1024)):(u(),s(n,{key:1,class:"single-image",src:a.image_urls[0],mode:"aspectFill","lazy-load":"",style:{aspectRatio:"3/4"}},null,8,["src"]))])),_:2},1024),_(c,{class:"content-box"},{default:o((()=>[_(r,{class:"title"},{default:o((()=>[f(x(a.title),1)])),_:2},1024),_(r,{class:"content"},{default:o((()=>[f(x(a.content),1)])),_:2},1024)])),_:2},1024),a.relation_list.length>0?(u(),s(c,{key:0,class:"relation-box"},{default:o((()=>[_(r,{class:"relation-label"},{default:o((()=>[f("搭配包含：")])),_:1}),_(B,{"scroll-x":"",class:"tag-scroll"},{default:o((()=>[(u(!0),m(p,null,v(a.relation_list,((a,l)=>(u(),s(c,{key:l,class:"relation-tag"},{default:o((()=>[f(x(a.type)+"·"+x(a.relation_goods_name||a.relation_brand_name),1)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):g("",!0)])),_:2},1024)))),128)),q.value?(u(),s(c,{key:1,class:"loading-box"},{default:o((()=>[_(n,{src:"/static/images/loading.gif",class:"loading-icon"}),_(r,null,{default:o((()=>[f("加载中...")])),_:1})])),_:1})):g("",!0),C.value?(u(),s(c,{key:2,class:"no-more"},{default:o((()=>[f("没有更多了～")])),_:1})):g("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-dccc4a44"]]);export{E as default};
