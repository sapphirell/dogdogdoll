import{r as e,o as a,a2 as t,c as l,w as s,j as o,v as u,g as d,b as i,B as c,d as n,e as r,t as m,D as p,u as f,x as v,A as _,ab as h,f as b,M as g,K as x,i as y,h as k}from"./index-6ojkiy1R.js";import{_ as w}from"./info-circle.U4M77mlp.js";import{w as F}from"./config.Bhvn_Gfs.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";const T=S({__name:"bill_form",props:["bill_id"],setup(S){const T=S,V=!!T.bill_id,j=e(""),z=e(""),A=e(""),C=e(0),D=["未补款","已补款"];const O=e("");function I(e){const a=e.detail.value;A.value=a,O.value=$(a)}function P(){v({title:"提示",content:"确定删除该账单吗？",success:e=>{e.confirm&&u({url:F+"/with-state/delete-tail-bill?id="+parseInt(T.bill_id,10),method:"POST",header:{Authorization:o("token")},success:e=>{"success"==e.data.status?(_({title:"删除成功",icon:"success"}),setTimeout((()=>{h()}),500)):_({title:e.data.msg,icon:"none"})}})}})}function $(e){let a=new Date(e);return`${a.getFullYear()}-${(a.getMonth()+1).toString().padStart(2,"0")}-${a.getDate().toString().padStart(2,"0")}`}function E(e){C.value=e.detail.value}function M(){V?function(){let e={id:parseInt(T.bill_id,10),name:j.value,price:parseFloat(z.value),ymd:A.value,status:C.value};u({url:F+"/with-state/update-tail-bill",method:"POST",header:{Authorization:o("token")},data:e,success:e=>{"success"==e.data.status?(_({title:"提交成功",icon:"success"}),setTimeout((()=>{h()}),500)):_({title:e.data.msg,icon:"none"})}})}():function(){let e={name:j.value,price:parseFloat(z.value),ymd:A.value,status:C.value};u({url:F+"/with-state/add-tail-bill",method:"POST",header:{Authorization:o("token")},data:e,success:e=>{"success"==e.data.status?(_({title:"提交成功",icon:"success"}),setTimeout((()=>{h()}),500)):_({title:e.data.msg,icon:"none"})}})}()}return a((()=>{V?(!function(e){let a=o("token");u({url:F+"/with-state/tail-bill-detail",method:"GET",header:{Authorization:a},data:{id:e},success:e=>{j.value=e.data.data.name,z.value=e.data.data.price,A.value=e.data.data.ymd,C.value=e.data.data.status,O.value=$(e.data.data.ymd)},fail:e=>{console.log(e)}})}(T.bill_id),t({title:"编辑账单"})):t({title:"新增账单"})})),(e,a)=>{const t=b,o=g,u=d,v=x,_=y,h=k;return i(),l(u,{class:"container"},{default:s((()=>[c("meta",{name:"theme-color",content:"#F8F8F8"}),n(u,{class:"form-card"},{default:s((()=>[n(u,{class:"form-item"},{default:s((()=>[n(t,{class:"form-label"},{default:s((()=>[r("账单名称")])),_:1}),n(o,{class:"form-input",type:"text",placeholder:"请输入名称","placeholder-class":"placeholder-style",modelValue:j.value,"onUpdate:modelValue":a[0]||(a[0]=e=>j.value=e)},null,8,["modelValue"])])),_:1}),n(u,{class:"form-item"},{default:s((()=>[n(t,{class:"form-label"},{default:s((()=>[r("账单金额")])),_:1}),n(o,{class:"form-input",type:"digit",placeholder:"请输入金额","placeholder-class":"placeholder-style",modelValue:z.value,"onUpdate:modelValue":a[1]||(a[1]=e=>z.value=e)},null,8,["modelValue"])])),_:1}),n(u,{class:"form-item"},{default:s((()=>[n(t,{class:"form-label"},{default:s((()=>[r("账单日期")])),_:1}),n(u,{style:{padding:"0px 10px",border:"1px solid #e6e6e6","border-radius":"10px"}},{default:s((()=>[n(v,{mode:"date",value:O.value,onChange:I},{default:s((()=>[n(u,{class:"picker-content",style:{color:"#2c2c2c","font-size":"26rpx"}},{default:s((()=>[r(m(O.value||"请选择日期"),1)])),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),n(u,{class:"form-item"},{default:s((()=>[n(t,{class:"form-label"},{default:s((()=>[r("账单状态")])),_:1}),n(u,{style:{padding:"0px 10px",border:"1px solid #e6e6e6","border-radius":"10px"}},{default:s((()=>[n(v,{mode:"selector",value:C.value,range:D,onChange:E},{default:s((()=>[n(u,{class:"picker-content"},{default:s((()=>[r(m(D[C.value]||"请选择状态"),1)])),_:1})])),_:1},8,["value"])])),_:1})])),_:1}),n(u,{style:{overflow:"hidden"}},{default:s((()=>[n(_,{src:w,mode:"aspectFill",style:{width:"28rpx",height:"28rpx","margin-right":"10rpx",position:"relative",top:"3rpx"}}),n(t,{style:{color:"#888"}},{default:s((()=>[r("仅用于您的记账，其他人不会看到")])),_:1})])),_:1})])),_:1}),n(u,{class:"button-group"},{default:s((()=>[n(h,{class:"submit-button",onClick:M},{default:s((()=>[r(" 记录"+m(p(V)?"修改":"新增"),1)])),_:1}),p(V)?(i(),l(h,{key:0,class:"delete-button",onClick:P},{default:s((()=>[r(" 删除账单 ")])),_:1})):f("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-d0481feb"]]);export{T as default};
