import{g as a,W as l,a8 as e,c as t,w as s,l as o,C as c,m as n,f as r,o as u,k as i,a as d,b as _,v as f,d as m,r as g,F as v,i as y,e as p,S as h,u as k,t as w,D as b,y as x}from"./index-CAhh9jg-.js";import{b as F,w as $,i as z}from"./config.D_tpLRWx.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";const D=j({__name:"my_collocation",setup(j){const D=a([]),C=a(1),R=a(10),S=a(0),A=a(!1),E=a(!1),G=a=>{const l=new Date(1e3*a);return`${l.getFullYear()}-${l.getMonth()+1}-${l.getDate()}`},I=async()=>{if(!E.value&&!A.value){A.value=!0;try{if(!(await F()))return;const a=await o({url:`${$}/with-state/my-collocation`,method:"GET",header:{Authorization:c("token")},data:{page:C.value,page_size:R.value}});"success"===a.data.status&&(D.value=[...D.value,...a.data.data.collocation_relation_list],S.value=a.data.data.total,E.value=D.value.length>=S.value,C.value++)}catch(a){n({title:"加载失败",icon:"none"})}finally{A.value=!1}}},M=()=>{E.value||I()};return l({title:"我的搭配"}),e((()=>{I()})),(a,l)=>{const e=r,o=y,c=p,n=b,F=x,$=h;return u(),t(e,{class:"container"},{default:s((()=>[i("meta",{name:"theme-color",content:"#F8F8F8"}),d($,{class:"scroll-content","scroll-y":"",onScrolltolower:M,"show-scrollbar":!1},{default:s((()=>[0!==D.value.length||A.value?f("",!0):(u(),t(e,{key:0,class:"empty-tip"},{default:s((()=>[_(" 暂无发布的搭配，快去创建吧~ ")])),_:1})),(u(!0),m(v,null,g(D.value,((a,l)=>(u(),t(e,{key:l,class:"collocation-card"},{default:s((()=>[d(e,{class:"card-header"},{default:s((()=>[d(o,{class:"avatar",src:a.avatar||`${k(z)}/default-avatar.png`,mode:"aspectFill"},null,8,["src"]),d(c,{class:"time"},{default:s((()=>[_(w(G(a.created_at)),1)])),_:2},1024)])),_:2},1024),d(e,{class:"image-container"},{default:s((()=>[a.image_urls.length>1?(u(),t(F,{key:0,class:"swiper-box",autoplay:!1,circular:!0},{default:s((()=>[(u(!0),m(v,null,g(a.image_urls,((a,l)=>(u(),t(n,{key:l},{default:s((()=>[d(o,{class:"swiper-image",src:a,mode:"aspectFill","lazy-load":"",style:{aspectRatio:"3/4"}},null,8,["src"])])),_:2},1024)))),128))])),_:2},1024)):(u(),t(o,{key:1,class:"single-image",src:a.image_urls[0],mode:"aspectFill","lazy-load":"",style:{aspectRatio:"3/4"}},null,8,["src"]))])),_:2},1024),d(e,{class:"content-box"},{default:s((()=>[d(c,{class:"title"},{default:s((()=>[_(w(a.title),1)])),_:2},1024),d(c,{class:"content"},{default:s((()=>[_(w(a.content),1)])),_:2},1024)])),_:2},1024),a.relation_list.length>0?(u(),t(e,{key:0,class:"relation-box"},{default:s((()=>[d(c,{class:"relation-label"},{default:s((()=>[_("搭配包含：")])),_:1}),d($,{"scroll-x":"",class:"tag-scroll"},{default:s((()=>[(u(!0),m(v,null,g(a.relation_list,((a,l)=>(u(),t(e,{key:l,class:"relation-tag"},{default:s((()=>[_(w(a.type)+"·"+w(a.relation_goods_name||a.relation_brand_name),1)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):f("",!0)])),_:2},1024)))),128)),A.value?(u(),t(e,{key:1,class:"loading-box"},{default:s((()=>[d(o,{src:"/static/images/loading.gif",class:"loading-icon"}),d(c,null,{default:s((()=>[_("加载中...")])),_:1})])),_:1})):f("",!0),E.value?(u(),t(e,{key:2,class:"no-more"},{default:s((()=>[_("没有更多了～")])),_:1})):f("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-c0888068"]]);export{D as default};
