import{r as e,o as a,a as l,b as s,c as t,w as o,d as n,e as i,n as c,s as u,i as d,f as r,g as _,h as f,j as p,t as v,k as g,F as m,l as h,S as y,m as b,p as k,q as w,u as x,v as C,x as F,y as z,z as T,A as D,B as S,C as j,D as B,E as $,G as U,H as I,I as A,J as L}from"./index-6ojkiy1R.js";import{_ as E}from"./uni-icons.C75VRGWb.js";import{r as q,o as G,a as V,b as H}from"./uni-app.es.BMFd5FAr.js";import{_ as J,a as M}from"./common-modal.Biav_mER.js";import{g as O,w as X,a as Y,b as Z}from"./config.Bhvn_Gfs.js";import{_ as P}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as R}from"./goods-search.BuQh0O7r.js";import{_ as K}from"./common-search.DQepwF8H.js";import{_ as N}from"./loading-toast.DerU_Gz0.js";import"./search.CsIL0f2m.js";import"./cancel.CnEdunnH.js";const Q=P({__name:"privacy-permission-modal",setup(v){const g=e(!1),m=()=>{if((()=>{let e=p("privacyAgreementStatus");return console.log(e),"agreed"===e})())return void console.log("用户已经同意过隐私政策");const e=O();2===e||3===e?setTimeout((()=>{g.value=!0}),1e3):console.log("并非安卓或iOS客户端：",e)},h=()=>{c({url:"/pages/private/private"})},y=()=>{c({url:"/pages/permission/permission"})},b=()=>{u("privacyAgreementStatus","agreed"),g.value=!1},k=()=>{uni.exitApp()};return a((()=>{m()})),(e,a)=>{const c=d,u=r,p=_,v=q(l("uni-icons"),E),m=f,w=q(l("common-modal"),J);return s(),t(w,{visible:g.value,"onUpdate:visible":a[0]||(a[0]=e=>g.value=e),top:"20vh",height:"auto",closeable:!1},{default:o((()=>[n(p,{class:"privacy-container"},{default:o((()=>[n(p,{class:"header"},{default:o((()=>[n(c,{src:"/assets/write-CBs1v0fX.png",class:"logo"}),n(u,{class:"title"},{default:o((()=>[i("隐私与权限说明")])),_:1})])),_:1}),n(p,{class:"content"},{default:o((()=>[n(u,{class:"desc"},{default:o((()=>[i("欢迎使用我们的应用，为了提供更好的服务，我们需要获取相关权限并说明隐私政策：")])),_:1}),n(p,{class:"policy-item",onClick:h},{default:o((()=>[n(v,{type:"info",size:"18",color:"#80afff"}),n(u,{class:"policy-text"},{default:o((()=>[i("《隐私政策》")])),_:1}),n(v,{type:"arrowright",size:"16",color:"#999"})])),_:1}),n(p,{class:"policy-item",onClick:y},{default:o((()=>[n(v,{type:"locked",size:"18",color:"#80afff"}),n(u,{class:"policy-text"},{default:o((()=>[i("《权限说明》")])),_:1}),n(v,{type:"arrowright",size:"16",color:"#999"})])),_:1})])),_:1}),n(p,{class:"footer"},{default:o((()=>[n(m,{class:"btn refuse",onClick:k},{default:o((()=>[i("拒绝并退出")])),_:1}),n(m,{class:"btn agree",onClick:b},{default:o((()=>[i("同意并继续")])),_:1})])),_:1})])),_:1})])),_:1},8,["visible"])}}},[["__scopeId","data-v-f5b1c985"]]),W=P({__name:"index-brand",props:["brand","key"],setup(e){const a=e;function l(){c({url:"/pages/brand/brand?brand_id="+a.brand.id})}return(a,u)=>{const f=d,p=r,b=_,k=y;return s(),t(b,{class:"brand-card",key:e.key},{default:o((()=>[n(b,{class:"brand-header",onClick:l},{default:o((()=>[e.brand.logo_image?(s(),t(f,{key:0,class:"brand-logo",src:e.brand.logo_image,mode:"aspectFit"},null,8,["src"])):(s(),t(b,{key:1,class:"brand-logo",style:{background:"linear-gradient(180deg, #d8c1b3 0%, #d3f5ff 100%)","align-items":"center"}},{default:o((()=>[n(p,{style:{color:"rgb(255, 255, 255)","font-size":"100rpx",display:"block","text-align":"center"}},{default:o((()=>[i("?")])),_:1})])),_:1})),n(b,{class:"brand-meta"},{default:o((()=>[n(b,{class:"title-row"},{default:o((()=>[n(f,{src:e.brand.brand_name_image,mode:"heightFix",style:{height:"40rpx"}},null,8,["src"]),n(p,{class:"brand-tag"},{default:o((()=>[i(v(e.brand.country_name)+"·"+v(e.brand.type),1)])),_:1}),n(p,{class:"goods-count"},{default:o((()=>[i("收录"+v(e.brand.total_goods)+"款",1)])),_:1})])),_:1}),n(p,{class:"brand-desc"},{default:o((()=>[i(v(e.brand.description),1)])),_:1})])),_:1})])),_:1}),n(k,{class:"goods-scroll","scroll-x":"","show-scrollbar":!1},{default:o((()=>[n(b,{class:"goods-list"},{default:o((()=>[(s(!0),g(m,null,h(e.brand.goods,((e,a)=>(s(),t(b,{class:"goods-item",key:e.id,onClick:a=>{return l=e.id,void c({url:"/pages/goods/goods?goods_id="+l});var l}},{default:o((()=>[n(f,{class:"goods-image",src:e.goods_images&&e.goods_images[0],mode:"aspectFill"},null,8,["src"]),n(p,{class:"goods-name"},{default:o((()=>[i(v(e.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-3290f0de"]]),ee=P({__name:"version-check",props:{showUpToDateToast:{type:Boolean,default:!1},currentVersion:{type:String,required:!0},autoCheck:{type:Boolean,default:!0}},setup(c,{expose:d}){const g=c,m=e(!1),h=e(null),z=e(!1),T=e("1.0.0"),D=b((()=>k().platform||"unknown")),S=e=>{if(!e)return"未知日期";const a=new Date(1e3*e);return`${a.getFullYear()}-${(a.getMonth()+1).toString().padStart(2,"0")}-${a.getDate().toString().padStart(2,"0")}`},j=async()=>{try{let e=O();if(1===e||4===e)return void console.log("scene:",e);if((()=>{const e=p("ignoreUpdateTime");if(console.log("忽略时间：",e),!e)return!1;const a=Date.now();return console.log("当前时间",a),a-e<2592e5})())return void console.log("在忽略期内，不显示更新提示 ");w().appVersion;const a=await C({url:`${X}/latest-version?version=1.0.40`,method:"GET"});a&&a.data&&("success"===a.data.status&&a.data.data?(h.value=a.data.data,m.value=!0):"failed"===a.data.status&&g.showUpToDateToast&&(z.value=!0,setTimeout((()=>{z.value=!1}),2e3)))}catch(e){console.error("版本检查失败:",e)}},B=()=>{u("ignoreUpdateTime",Date.now()),m.value=!1;const e=D.value.toLowerCase();console.log(e);let a=O();2===a||3===a?plus.runtime.openURL("https://apps.apple.com/app/id6747564362"):F({title:"更新提示",content:"请前往应用商店更新最新版本",showCancel:!1})},$=()=>{u("ignoreUpdateTime",Date.now()),m.value=!1};return d({checkVersion:j}),a((()=>{T.value=w().appVersion,g.autoCheck&&setTimeout((()=>{j()}),1500)})),(e,a)=>{const c=_,u=y,d=f,p=q(l("common-modal"),J),g=r;return s(),t(c,null,{default:o((()=>[n(p,{visible:m.value,"onUpdate:visible":a[0]||(a[0]=e=>m.value=e),top:"15vh"},{default:o((()=>[n(c,{class:"version-update-container"},{default:o((()=>[n(c,{class:"update-title"},{default:o((()=>{var e;return[i("发现新版本 v"+v(null==(e=h.value)?void 0:e.version)+" 当前 v"+v(),1)]})),_:1}),n(u,{class:"update-content","scroll-y":""},{default:o((()=>[n(c,{class:"update-section"},{default:o((()=>[n(c,{class:"section-title"},{default:o((()=>[i("更新内容")])),_:1}),n(c,{class:"section-content"},{default:o((()=>{var e;return[i(v((null==(e=h.value)?void 0:e.note)||"优化用户体验，修复已知问题"),1)]})),_:1})])),_:1}),n(c,{class:"update-section"},{default:o((()=>[n(c,{class:"section-title"},{default:o((()=>[i("更新日期")])),_:1}),n(c,{class:"section-content"},{default:o((()=>{var e;return[i(v(S(null==(e=h.value)?void 0:e.created_at)),1)]})),_:1})])),_:1})])),_:1}),n(c,{class:"update-buttons"},{default:o((()=>[n(d,{class:"update-btn ignore",onClick:$},{default:o((()=>[i("暂不更新")])),_:1}),n(d,{class:"update-btn confirm",onClick:B},{default:o((()=>[i("立即更新")])),_:1})])),_:1})])),_:1})])),_:1},8,["visible"]),z.value?(s(),t(c,{key:0,class:"toast-message"},{default:o((()=>[n(g,null,{default:o((()=>[i("已是最新版本")])),_:1})])),_:1})):x("",!0)])),_:1})}}},[["__scopeId","data-v-ea2857da"]]),ae=P({__name:"index",setup(a){z((e=>({"78fd51a6":we.value})));let u=e([]),f=e({}),y=e(""),w=e(!1);const J=e([{label:"中国娃社",value:1},{label:"个人作者",value:2},{label:"外国娃社",value:3}]),O=e(1);e(0);const P=k();e(0);const ae=e(1),le=e(10),se=e(!0),te=e(!1);let oe=e([]);const ne=e(1),ie=e(10),ce=e(!0),ue=e(!1);let de=e([]);const re=e(1),_e=e(10),fe=e(!0),pe=e(!1);let ve=e([]);const ge=e(1),me=e(10),he=e(!0),ye=e(!1),be=e("news"),ke=e=>{be.value=e};b((()=>0));const we=b((()=>`${P.statusBarHeight||0}px`));G((async()=>{try{await xe(),T()}catch(e){T(),D({title:"刷新失败",icon:"none"})}}));const xe=async()=>{w.value=!0,setTimeout((async()=>{const e={brands:()=>{ae.value=1,u.value=[],se.value=!0,ze(!0)},news:()=>{ne.value=1,oe.value=[],ce.value=!0,Ce(!0)},hot:()=>{re.value=1,de.value=[],fe.value=!0,Fe(!0)},second:()=>{ge.value=1,ve.value=[],he.value=!0,Te(!0)}};await e[be.value]()}),800)};const Ce=async(e=!1)=>{e&&(ne.value=1),ce.value&&!ue.value&&(ue.value=!0,w.value=!0,C({url:X+"/sale-news",data:{page:ne.value,pageSize:ie.value},success:e=>{const a=e.data.data.news_list;0!==a.length?(oe.value=[...oe.value,...a],ce.value=e.data.data.news_list.length===ie.value,ne.value++):ce.value=!1},fail:e=>{console.log(e),D({title:"加载失败",icon:"none"})},complete:()=>{ue.value=!1,w.value=!1}}))};const Fe=async(e=!1)=>{e&&(re.value=1),fe.value&&!pe.value&&(pe.value=!0,w.value=!0,C({url:X+"/hot-collocation",data:{page:re.value,pageSize:_e.value},success:e=>{const a=e.data.data.collocation_relation_list;0!==a.length?(de.value=[...de.value,...a.map((e=>({...e})))],fe.value=de.value.length<e.data.data.total,re.value++):fe.value=!1},fail:e=>{console.log(e),D({title:"加载失败",icon:"none"})},complete:()=>{pe.value=!1,w.value=!1}}))};const ze=async(e=!1)=>{if(e&&(ae.value=1,u.value=[],se.value=!0,y.value=""),!se.value||te.value)return;te.value=!0,w.value=!0;const a={pageSize:le.value};y.value?a.cursor=y.value:O.value&&(a.searchType=O.value),C({url:X+"/brands-info-list",data:a,success:e=>{if("success"!==e.data.status)return void D({title:"加载失败: "+e.data.message,icon:"none"});const a=e.data.data,l=a.data;console.log("newData:",l),y.value=a.next_cursor||"",0!==l.length?(u.value=[...u.value,...l],se.value=a.has_more):se.value=!1},fail:e=>{console.log(e),D({title:"网络请求失败",icon:"none"})},complete:()=>{te.value=!1,w.value=!1}})},Te=async(e=!1)=>{e&&(ge.value=1),he.value&&!ye.value&&(ye.value=!0,w.value=!0,C({url:X+"/treehole-submissions",data:{page:ge.value,pageSize:me.value},success:e=>{const a=e.data.data.submission_list.map((e=>({...e,images:e.images||[]})));0!==a.length?(ve.value=[...ve.value,...a],he.value=ve.value.length<e.data.data.total,ge.value++):he.value=!1},fail:e=>{D({title:"加载失败",icon:"none"})},complete:()=>{ye.value=!1,w.value=!1}}))};function De(){Z.isLogin?c({url:"/pages/treehole_publish/treehole_publish"}):F({title:"提示",content:"需要登录后才能发布树洞",success:e=>{e.confirm&&c({url:"/pages/login/login"})}})}const Se=e=>{const a=new Date(1e3*e);return`${a.getFullYear()}-${a.getMonth()+1}-${a.getDate()}`};return V((()=>{Y(),ze(),Ce(),Fe(),Te(),C({url:X+"/articles",data:{page:1,page_size:10,status:1},success:e=>{"success"===e.data.status&&(f.value=e.data.data.list)},fail:e=>{console.error("获取Banner失败:",e),f.value={}}})})),H((()=>{"brands"===be.value&&se.value?ze():"news"===be.value&&ce.value?Ce():"second"===be.value&&he.value&&Te()})),(e,a)=>{const b=q(l("privacy-permission-modal"),Q),k=_,F=d,z=q(l("goods-search"),R),T=r,G=$,V=U,H=q(l("uni-transition"),M),Y=q(l("common-search"),K),P=q(l("index-brand"),W),le=q(l("uni-icons"),E),ne=q(l("loading-toast"),N),ie=q(l("version-check"),ee);return s(),g(m,null,[S("meta",{name:"theme-color",content:"#def9ff"}),n(k,null,{default:o((()=>[n(b),n(k,{class:"body"},{default:o((()=>[n(k,{class:"index_header"},{default:o((()=>[n(k,{class:"header-placeholders"}),n(k,null,{default:o((()=>[n(k,{style:{display:"inline-block","margin-left":"20rpx"}},{default:o((()=>[n(F,{src:"/assets/title-CZ7i4fDk.gif",mode:"widthFix",style:{width:"400rpx","max-height":"180rpx",position:"relative",left:"-20rpx","margin-bottom":"10rpx"}})])),_:1}),n(z,{width:"720rpx",hiddenIcon:!1})])),_:1}),n(k,{style:{margin:"20rpx 0rpx 0rpx 0rpx",padding:"5px 10px 0px 10px","border-radius":"20px 20px 0 0"}},{default:o((()=>[n(k,{class:"index_page_article"},{default:o((()=>[n(k,{class:j(["swich_box",{active:"news"===be.value}]),onClick:a[0]||(a[0]=e=>ke("news"))},{default:o((()=>[n(F,{src:"/assets/telphone-BjqfLgIC.png",mode:"aspectFill"}),n(T,{class:"font-cute"},{default:o((()=>[i("新情报！")])),_:1})])),_:1},8,["class"]),n(k,{class:j(["swich_box",{active:"brands"===be.value}]),onClick:a[1]||(a[1]=e=>ke("brands"))},{default:o((()=>[n(F,{src:"/assets/read-B439FUUE.png",mode:"aspectFill"}),n(T,{class:"font-cute"},{default:o((()=>[i("娃物图鉴")])),_:1})])),_:1},8,["class"]),n(k,{class:j(["swich_box",{active:"hot"===be.value}]),onClick:a[2]||(a[2]=e=>ke("hot"))},{default:o((()=>[n(F,{src:"/assets/collocation-EqLyG3om.png",mode:"aspectFill",style:{width:"90rpx",height:"90rpx",position:"relative",bottom:"0rpx"}}),n(T,{class:"font-cute",style:{position:"relative",bottom:"5rpx"}},{default:o((()=>[i("热门搭配")])),_:1})])),_:1},8,["class"]),n(k,{class:j(["swich_box",{active:"second"===be.value}]),onClick:a[3]||(a[3]=e=>ke("second"))},{default:o((()=>[n(F,{src:"/assets/write-CBs1v0fX.png",mode:"aspectFill"}),n(T,{class:"font-cute"},{default:o((()=>[i("匿名版")])),_:1})])),_:1},8,["class"])])),_:1})])),_:1})])),_:1}),n(k,{class:"body_container"},{default:o((()=>[n(k,{style:{height:"40rpx"}}),n(H,{"mode-class":["fade"],show:"news"===be.value},{default:o((()=>["news"===be.value?(s(),t(k,{key:0,class:"body_list news-box"},{default:o((()=>[n(k,{style:{position:"relative",height:"250rpx","margin-bottom":"20rpx",display:"none"}},{default:o((()=>[n(V,{interval:3e3,duration:200,class:"banner_swiper","indicator-active-color":"#4cbbd0","indicator-color":"rgba(255,255,255,0.5)"},{default:o((()=>[(s(!0),g(m,null,h(B(f),(e=>(s(),t(G,{key:e.id,class:"banner_swiper_item"},{default:o((()=>[n(k,{class:"swiper-item"},{default:o((()=>[n(F,{src:e.banner,mode:"aspectFill",style:{width:"100%",height:"250rpx"},onClick:a=>(e=>{c({url:`/pages/article_detail/article_detail?id=${e.id}`})})(e)},null,8,["src","onClick"])])),_:2},1024)])),_:2},1024)))),128)),0===B(f).length?(s(),t(G,{key:0},{default:o((()=>[n(k,{class:"empty-banner"},{default:o((()=>[n(F,{src:"/static/default-banner.jpg",mode:"aspectFill",style:{width:"100%",height:"250rpx"}})])),_:1})])),_:1})):x("",!0)])),_:1})])),_:1}),(s(!0),g(m,null,h(B(oe),(e=>(s(),t(k,{key:e.id,class:"news-item",onClick:a=>function(e){c({url:"/pages/sale_news/sale_news?id="+e.id+"&brand_id="+e.brand_id})}(e)},{default:o((()=>[n(k,{class:"news-images"},{default:o((()=>[e.image_list.length>0?(s(),t(V,{key:0,class:"image-swiper",autoplay:!0,circular:!0},{default:o((()=>[(s(!0),g(m,null,h(e.image_list,((e,a)=>(s(),t(G,{key:a},{default:o((()=>[n(F,{src:e,mode:"aspectFill",class:"swiper-image"},null,8,["src"])])),_:2},1024)))),128))])),_:2},1024)):x("",!0)])),_:2},1024),n(k,{class:"news-content"},{default:o((()=>[n(T,{class:"news-title"},{default:o((()=>[i(v(e.title),1)])),_:2},1024),n(T,{class:"news-desc"},{default:o((()=>[i(v(e.content),1)])),_:2},1024),n(k,{class:"news-footer"},{default:o((()=>[n(T,{class:"brand-tag"},{default:o((()=>[i(v(e.brand_name),1)])),_:2},1024),n(T,{class:"news-time"},{default:o((()=>[i(v(Se(e.created_at)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),n(k,{class:"loading-more"},{default:o((()=>[ue.value?(s(),t(T,{key:0},{default:o((()=>[i("加载中...")])),_:1})):x("",!0),ce.value?x("",!0):(s(),t(T,{key:1},{default:o((()=>[i("没有更多了~")])),_:1}))])),_:1})])),_:1})):x("",!0)])),_:1},8,["show"]),n(H,{"mode-class":["fade"],show:"brands"===be.value},{default:o((()=>[n(k,{style:{width:"700rpx"}},{default:o((()=>[n(Y,{style:{width:"100%"},width:"720rpx"})])),_:1}),n(k,{class:"filter-tabs"},{default:o((()=>[(s(!0),g(m,null,h(J.value,((e,a)=>(s(),t(k,{key:a,class:j(["tab-item",{active:O.value===e.value}]),onClick:a=>{return l=e.value,O.value===l?O.value=null:O.value=l,ae.value=1,se.value=!0,u.value=[],y.value="",void ze();var l}},{default:o((()=>[i(v(e.label),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),n(k,{class:"brand_type_description",style:{display:"block"}},{default:o((()=>[1==O.value?(s(),t(T,{key:0},{default:o((()=>[i("中国公司制作的BJD在打磨、分模线等工艺的处理上比较优秀，价格也比外社低很多。")])),_:1})):x("",!0),2==O.value?(s(),t(T,{key:1},{default:o((()=>[i("个人作者在贩售娃物前基本都是圈内玩家，在设计方面花的心思很多。")])),_:1})):x("",!0),3==O.value?(s(),t(T,{key:2},{default:o((()=>[i("国外娃社起步较早，风格设计也比较多样化。")])),_:1})):x("",!0)])),_:1}),"brands"===be.value?(s(),t(k,{key:0,class:"body_list brand_box",style:{position:"relative"}},{default:o((()=>[(s(!0),g(m,null,h(B(u),((e,a)=>(s(),t(k,{key:e.id},{default:o((()=>[n(P,{brand:e},null,8,["brand"])])),_:2},1024)))),128)),n(k,{class:"loading-more"},{default:o((()=>[te.value?(s(),t(T,{key:0},{default:o((()=>[i("加载中...")])),_:1})):x("",!0),se.value?x("",!0):(s(),t(T,{key:1},{default:o((()=>[i("没有更多数据了")])),_:1}))])),_:1})])),_:1})):x("",!0)])),_:1},8,["show"]),n(H,{"mode-class":["fade"],show:"hot"===be.value},{default:o((()=>["hot"===be.value?(s(),t(k,{key:0,class:"body_list hot-box"},{default:o((()=>[(s(!0),g(m,null,h(B(de),(e=>(s(),t(k,{key:e.collocation_id,class:"hot-item",onClick:a=>function(e){c({url:`/pages/collocation_share/collocation_share?collocation_id=${e.collocation_id}&origin=${e.origin}`})}(e)},{default:o((()=>[n(k,{class:"images-box"},{default:o((()=>[e.image_urls.length>0?(s(),t(V,{key:0,class:"image-swiper",autoplay:!0,circular:!0},{default:o((()=>[(s(!0),g(m,null,h(e.image_urls,((e,a)=>(s(),t(G,{key:a},{default:o((()=>[n(F,{src:e,mode:"aspectFill",class:"swiper-image"},null,8,["src"])])),_:2},1024)))),128))])),_:2},1024)):x("",!0)])),_:2},1024),n(k,{class:"content-box"},{default:o((()=>[n(T,{class:"title"},{default:o((()=>[i(v(e.title),1)])),_:2},1024),n(T,{class:"desc"},{default:o((()=>[i(v(e.content),1)])),_:2},1024),n(k,{class:"tags-box"},{default:o((()=>[(s(!0),g(m,null,h(e.relation_list,((e,a)=>(s(),t(k,{key:a,class:"tag-item"},{default:o((()=>[n(T,{class:"tag-text"},{default:o((()=>[i(v(e.relation_goods_name),1)])),_:2},1024),n(T,{class:"brand-text"},{default:o((()=>[i(v(e.relation_brand_name),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024),n(k,{class:"footer"},{default:o((()=>[n(k,{class:"user-info"},{default:o((()=>[n(F,{src:e.avatar,class:"avatar",mode:"aspectFill"},null,8,["src"]),n(T,{class:"time"},{default:o((()=>[i(" 发布"+v(1==e.origin?"搭配":"展示柜")+"于 "+v(Se(e.created_at)),1)])),_:2},1024)])),_:2},1024),n(k,{class:"like-box"},{default:o((()=>[n(le,{type:"heart",size:"18",color:"#ff4d4f"}),n(T,{class:"like-count"},{default:o((()=>[i(v(e.like_count),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),n(k,{class:"loading-more"},{default:o((()=>[pe.value?(s(),t(T,{key:0},{default:o((()=>[i("加载中...")])),_:1})):x("",!0),fe.value?x("",!0):(s(),t(T,{key:1},{default:o((()=>[i("没有更多了~")])),_:1}))])),_:1})])),_:1})):x("",!0)])),_:1},8,["show"]),n(H,{"mode-class":["fade"],show:"second"===be.value},{default:o((()=>["second"===be.value?(s(),t(k,{key:0,class:"body_list treehole-box"},{default:o((()=>[n(k,{class:"publish-btn",onClick:De},{default:o((()=>[n(le,{type:"plusempty",size:"30",color:"#fff"})])),_:1}),(s(!0),g(m,null,h(B(ve),(e=>(s(),t(k,{key:e.id,class:"treehole-item",onClick:a=>function(e){c({url:"/pages/treehole_detail/treehole_detail?id="+e.id})}(e)},{default:o((()=>[n(k,{class:"user-info",onClick:I((a=>function(e){1!=e.is_anonymous&&c({url:"/pages/user_page/user_page?uid="+e.uid})}(e)),["stop"])},{default:o((()=>[""!==e.avatar?(s(),t(F,{key:0,src:e.avatar,class:"avatar",mode:"aspectFill"},null,8,["src"])):(s(),t(F,{key:1,src:"/assets/noname-CTwn5AZS.png",class:"avatar",mode:"scaleToFill"})),n(T,{class:"username"},{default:o((()=>[i(v(e.is_anonymous?"匿名用户":e.author_name),1)])),_:2},1024),n(T,{class:"time"},{default:o((()=>[i(v(Se(e.created_at)),1)])),_:2},1024),n(T,{class:"cid"},{default:o((()=>[i("【"+v(e.id)+"】",1)])),_:2},1024)])),_:2},1032,["onClick"]),n(T,{class:"content"},{default:o((()=>[i(v(e.content),1)])),_:2},1024),e.images.length>0?(s(),t(k,{key:0,class:"image-grid"},{default:o((()=>[n(V,{class:"image-swiper",autoplay:!0,circular:!0,"indicator-dots":""},{default:o((()=>[(s(!0),g(m,null,h(e.images,((a,l)=>(s(),t(G,{key:l},{default:o((()=>[n(F,{src:a,mode:"aspectFill",class:"swiper-image",onClick:I((a=>{return s=e.images,void L({current:l,urls:s});var s}),["stop"])},null,8,["src","onClick"])])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):x("",!0),n(k,{class:"action-bar"},{default:o((()=>[n(k,{class:"action-item",onClick:a=>function(e){if(!Z.isLogin)return void D({title:"请先登录",icon:"none"});let a=p("token");a?C({url:X+(e.has_liked?"/with-state/unlike":"/with-state/add-like"),method:"POST",header:{Authorization:a},data:{id:e.id,type:5},success:a=>{"success"===a.data.status?(e.has_liked=!e.has_liked,e.like_count+=e.has_liked?1:-1):uni.showD}}):D({title:"请先登录",icon:"none"})}(e)},{default:o((()=>[n(le,{type:e.has_liked?"hand-up-filled":"hand-up",size:"18",color:e.has_liked?"#ff4d4f":"#666"},null,8,["type","color"]),n(T,{class:"count"},{default:o((()=>[i(v(e.like_count||0),1)])),_:2},1024)])),_:2},1032,["onClick"]),n(k,{class:"action-item"},{default:o((()=>[n(le,{type:"chat",size:"18",color:"#666"}),n(T,{class:"count"},{default:o((()=>[i(v(e.comment_count||0),1)])),_:2},1024)])),_:2},1024),n(k,{class:"action-item",onClick:I((a=>function(e){let a="http://m.dogdogdoll.com/#/pages/treehole_detail/treehole_detail?id="+e.id;A({data:a,success:function(){D({title:"复制链接成功",icon:"none"})}})}(e)),["stop"])},{default:o((()=>[n(le,{type:"redo",size:"18",color:"#666"}),n(T,{class:"count"},{default:o((()=>[i("分享")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["onClick"])))),128)),n(k,{class:"loading-more"},{default:o((()=>[ye.value?(s(),t(T,{key:0},{default:o((()=>[i("加载中...")])),_:1})):x("",!0),he.value?x("",!0):(s(),t(T,{key:1},{default:o((()=>[i("没有更多了~")])),_:1}))])),_:1})])),_:1})):x("",!0)])),_:1},8,["show"])])),_:1}),n(ne,{show:B(w)},null,8,["show"]),n(ie,{"show-up-to-date-toast":!0})])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-80c74e87"]]);export{ae as default};
