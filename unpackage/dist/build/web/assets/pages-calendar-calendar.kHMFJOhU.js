import{h as e,j as t,s as a,k as l,e as o,d as s,a as d,w as n,F as r,l as i,m as u,p as c,o as g,r as p,u as f,b as _,t as y,c as m,v as x,g as b,f as h,W as k,q as w,n as v,i as S,$ as j}from"./index-u2rUIk8T.js";import{_ as $}from"./common-search.B09gwaSi.js";import{r as z}from"./uni-app.es.DpDa-E5E.js";import{_ as C}from"./common-page.CNR2v_s0.js";import{w as D}from"./config.DgkxgtZ3.js";import{_ as F}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./cancel.CnEdunnH.js";const H=F({__name:"calendar",setup(F){const H=e(["全部","整体","单头","单体","娃衣","眼珠","娃鞋","手型","脚型","袜子","配饰"]);let M=e("全部"),O=e({}),E=e({});const W=new Date,Y=`${W.getFullYear()}-${String(W.getMonth()+1).padStart(2,"0")}-${String(W.getDate()).padStart(2,"0")}`,q=e(null),B=t(),G=B.screenWidth/7;let I=e(0);const T=e(B.statusBarHeight);console.log("状态栏高度"+T.value);let V=e(Y),A=e({});function J(e){const t={};return Object.entries(O.value).forEach((([a,l])=>{const o={...l};o.goods&&(o.goods="全部"===e?o.goods:o.goods.filter((t=>t.type===e)),0===o.goods.length&&(o.goods=null)),t[a]=o})),t}a({title:"加载中"});function K(e){const t=new Date(1e3*e);return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}`}function L(e){v({url:"/pages/goods/goods?goods_id="+e})}return i({url:D+"/goods-news",method:"GET",timeout:5e3,success:e=>{console.log(e.data.data),O.value=e.data.data,E.value=J("全部");for(let[t,a]of Object.entries(E.value))t===Y&&(A.value=a)},fail:e=>{console.log(e),u({title:"网络请求失败",icon:"none"})},complete:()=>{I.value=7*G-5,console.log("left:"+I.value),c()}}),(e,t)=>{const a=z(l("common-search"),$),i=b,u=h,c=k,v=S,D=j,F=z(l("common-page"),C);return g(),o(r,null,[s("meta",{name:"theme-color",content:"rgb(185 195 253)"}),d(F,{head_color:"rgb(185 195 253)"},{default:n((()=>[d(i,{class:"goods_renew_header_content"},{default:n((()=>[d(i,{style:{width:"80%",margin:"80rpx auto 20rpx auto"}},{default:n((()=>[d(a,{width:"560rpx"})])),_:1}),d(c,{"scroll-x":"true",class:"choose_tab","show-scrollbar":!1},{default:n((()=>[(g(!0),o(r,null,p(H.value,((e,t)=>(g(),m(u,{key:t,class:w({active:f(M)===e}),onClick:t=>(e=>{M.value=e;const t=J(e);E.value={...t};const a=Object.entries(t).find((([e,t])=>t.goods));a?(V.value=a[0],A.value=a[1]):A.value={goods:null}})(e)},{default:n((()=>[_(y(e),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),d(i,{class:"content-box"},{default:n((()=>[d(c,{class:"scroll-view_H","scroll-x":"true",ref_key:"scrollView",ref:q,"scroll-left":f(I),"show-scrollbar":!1},{default:n((()=>[(g(!0),o(r,null,p(f(E),((e,t)=>(g(),m(i,{key:e.id,class:"scroll-view-item_H",onClick:a=>function(e,t){console.log(t),V.value=e,A.value=t}(t,e)},{default:n((()=>[e.goods_number>0?(g(),m(i,{key:0},{default:n((()=>["周日"===e.weekday||"周六"===e.weekday?(g(),m(i,{key:0,class:"float-number-red"},{default:n((()=>[_(y(e.goods_number),1)])),_:2},1024)):x("",!0),"周日"!==e.weekday&&"周六"!==e.weekday?(g(),m(i,{key:1,class:"float-number-blue"},{default:n((()=>[_(y(e.goods_number),1)])),_:2},1024)):x("",!0)])),_:2},1024)):x("",!0),"周日"===e.weekday||"周六"===e.weekday?(g(),m(u,{key:1,style:{display:"block",margin:"10px 0px 15px",color:"#e65555"}},{default:n((()=>[_(y(e.weekday),1)])),_:2},1024)):x("",!0),"周日"!==e.weekday&&"周六"!==e.weekday?(g(),m(u,{key:2,style:{display:"block",margin:"10px 0px 15px"}},{default:n((()=>[_(y(e.weekday),1)])),_:2},1024)):x("",!0),f(V)!==t?(g(),m(u,{key:3,style:{display:"block","border-radius":"100%",padding:"10px","box-sizing":"border-box",width:"60px",height:"47px"}},{default:n((()=>[_(y(e.day_number),1)])),_:2},1024)):(g(),m(u,{key:4,style:{display:"block",background:"#7dc3d3",color:"#fff","border-radius":"5px",padding:"10px","box-sizing":"border-box",width:"60px",height:"45px"}},{default:n((()=>[_(y(e.day_number),1)])),_:2},1024))])),_:2},1032,["onClick"])))),128))])),_:1},8,["scroll-left"]),d(i,{style:{padding:"5px 0px"}},{default:n((()=>[d(u,{class:"font-alimamashuhei",style:{color:"#7dc3d3",margin:"15px 0px 15px 0px",display:"block"}},{default:n((()=>[_(y(f(V))+" 日 星期"+y(f(A).weekday)+"上新",1)])),_:1}),null==f(A).goods?(g(),m(i,{key:0},{default:n((()=>[d(u,null,{default:n((()=>[_("这天没有上新呢...")])),_:1})])),_:1})):x("",!0)])),_:1}),f(A).goods?(g(!0),o(r,{key:0},p(f(A).goods,(e=>(g(),m(i,{key:e.id,style:{margin:"10px 0px 10px 0px","box-sizing":"border-box",padding:"10px 0px"}},{default:n((()=>[d(i,{style:{width:"30vw",float:"left",position:"relative"}},{default:n((()=>[d(D,{onClick:t=>L(e.goods_id)},{default:n((()=>[d(v,{src:e.goods_image,mode:"aspectFill",style:{width:"30vw",height:"auto","aspect-ratio":"1"}},null,8,["src"]),d(u,{style:{left:"0px",position:"absolute",top:"5px",width:"100px",background:"rgb(82 104 138)",color:"#fff","text-align":"center",opacity:"0.8","font-size":"13px",padding:"5rpx"}},{default:n((()=>[_(y(e.sale_type),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024),d(i,{class:"brand_goods_item",style:{width:"calc(70vw - 70px)",float:"left","margin-left":"15px"}},{default:n((()=>[d(D,{onClick:t=>L(e.goods_id)},{default:n((()=>[d(u,{class:"font-alimamashuhei"},{default:n((()=>[_(y(e.brand_name)+" "+y(e.goods_name),1)])),_:2},1024),d(i,null,{default:n((()=>[d(u,{class:"line-height"},{default:n((()=>[_(y(e.size)+"·"+y(e.size_detail)+"·"+y(e.type),1)])),_:2},1024)])),_:2},1024),d(i,null,{default:n((()=>[d(u,{class:"line-height"},{default:n((()=>[_("开定时间 "+y(K(e.sub_time)),1)])),_:2},1024)])),_:2},1024),"限量现货"!=e.sale_type&&"不限量现货"!=e.sale_type?(g(),m(u,{key:0,class:"line-height",style:{color:"rgb(255 150 178)"}},{default:n((()=>[_(" 定金 "),d(u,{style:{"font-size":"25px",color:"rgb(255 150 178)","font-weight":"900"}},{default:n((()=>[_(y(e.sub_amount),1)])),_:2},1024),_(" ("+y(e.currency)+") 尾款 ",1),d(u,{style:{color:"rgb(255 150 178)","font-weight":"900"}},{default:n((()=>[_(y(e.fin_amount),1)])),_:2},1024)])),_:2},1024)):x("",!0),"限量现货"==e.sale_type||"不限量现货"==e.sale_type?(g(),m(u,{key:1,class:"line-height",style:{color:"rgb(255 150 178)"}},{default:n((()=>[_(" 全款 "),d(u,{style:{"font-size":"25px",color:"rgb(255 150 178)","font-weight":"900"}},{default:n((()=>[_(y(e.sub_amount+e.fin_amount),1)])),_:2},1024),_(" ("+y(e.currency)+") ",1)])),_:2},1024)):x("",!0)])),_:2},1032,["onClick"])])),_:2},1024),d(i,{style:{clear:"both"}})])),_:2},1024)))),128)):x("",!0)])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-67098edf"]]);export{H as default};
