import{g as e,h as a,U as t,o as s,d as o,W as l,X as n,a as u,w as r,c as p,b as i,t as m,v as d,V as f,F as c,Y as v,m as y,f as _,e as I,Z as b,H as g}from"./index-CfMR_IzQ.js";import{b as j}from"./uni-app.es.5AkhYBbN.js";import{d as k}from"./config.BX5UpUDr.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const V=x({__name:"comment-input",props:{replyInfo:{type:Object,default:()=>({})},targetId:{type:String,required:!0},safeBottom:{type:Number,default:10}},emits:["submit","update:replyInfo"],setup(x,{emit:V}){const A=x,B=V,h=e(""),w=e(!1),C=e(0),F=a(),U=t((()=>{var e,a;let t=(null==(e=F.safeAreaInsets)?void 0:e.bottom)||10;console.log("底部安全距离:",null==(a=F.safeAreaInsets)?void 0:a.bottom,"=>",t);return`${t+C.value}px`})),q=()=>{w.value=!0},H=()=>{w.value=!1},N=()=>{w.value=!1,v()},O=()=>{if(!h.value.trim())return void y({title:"请输入评论内容",icon:"none"});let e=k();console.log("scene",e),B("submit",{content:h.value,target_id:A.targetId,type:4,replyInfo:A.replyInfo,origin:e}),h.value="",B("update:replyInfo",{})};return j((()=>{})),(e,a)=>{const t=_,v=I,y=b,j=g;return s(),o(c,null,[l(u(t,{class:"mask",onClick:N},null,512),[[n,w.value]]),u(t,{class:"bottom_tab","adjust-position":!1,style:f({paddingBottom:U.value})},{default:r((()=>[x.replyInfo.username?(s(),p(v,{key:0,class:"replyInfo"},{default:r((()=>[i(m("@"+x.replyInfo.username),1)])),_:1})):d("",!0),u(y,{class:"comment_input",modelValue:h.value,"onUpdate:modelValue":a[0]||(a[0]=e=>h.value=e),onFocus:q,onBlur:H,"adjust-position":!1},null,8,["modelValue"]),u(j,{onClick:O},{default:r((()=>[i("写评论")])),_:1})])),_:1},8,["style"])],64)}}},[["__scopeId","data-v-eabdf47f"]]);export{V as _};
