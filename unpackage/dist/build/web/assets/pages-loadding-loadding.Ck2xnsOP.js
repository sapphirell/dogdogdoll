import{b as e,c as t,w as s,d as r,a0 as a,C as n,e as h,t as i,aq as o,i as f,f as l,g as d,S as c,p as m,a as u,k as p,l as g,F as _}from"./index-6ojkiy1R.js";import{_ as R}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{r as v}from"./uni-app.es.BMFd5FAr.js";const b=R({props:{threshold:{type:Number,default:150},scrollHeight:{type:String,default:"100vh"}},data:()=>({triggered:!1,pullDownGif:"https://images1.fantuanpu.com/home/f4a2f2a997e45b87bfce23edc794d9a6.gif",refreshingGif:"https://images1.fantuanpu.com/home/f4a2f2a997e45b87bfce23edc794d9a6.gif",refreshText:"下拉刷新"}),methods:{onRefresh(){this.triggered=!0,this.refreshText="正在刷新...",this.$emit("refresh")},finishRefresh(){this.triggered=!1,this.refreshText="刷新完成",setTimeout((()=>{this.refreshText="下拉刷新"}),800)},onRestore(){this.refreshText="下拉刷新"},onAbort(){this.refreshText="刷新取消"}}},[["render",function(m,u,p,g,_,R){const v=f,b=l,x=d,j=c;return e(),t(x,null,{default:s((()=>[r(j,{"scroll-y":"","refresher-default-style":"none","refresher-enabled":!0,"refresher-triggered":_.triggered,"refresher-threshold":p.threshold,"refresher-background":"#f8f8f8",onRefresherrefresh:R.onRefresh,onRefresherrestore:R.onRestore,onRefresherabort:R.onAbort,style:a({height:p.scrollHeight}),class:"scroll-view"},{refresher:s((()=>[r(x,{slot:"refresher",class:"refresh-container",style:a({height:`${p.threshold}px`})},{default:s((()=>[r(x,{class:n(["refresh-content",{refreshing:_.triggered}])},{default:s((()=>[r(v,{class:"refresh-icon",src:_.triggered?_.refreshingGif:_.pullDownGif,mode:"aspectFit"},null,8,["src"]),r(b,{class:"refresh-text"},{default:s((()=>[h(i(_.refreshText),1)])),_:1})])),_:1},8,["class"])])),_:1},8,["style"])])),default:s((()=>[o(m.$slots,"default",{},void 0,!0)])),_:3},8,["refresher-triggered","refresher-threshold","onRefresherrefresh","onRefresherrestore","onRefresherabort","style"])])),_:3})}],["__scopeId","data-v-852bc35b"]]);const x=R({data:()=>({statusBarHeight:0,dataList:[{id:1,name:"张三",content:"今天天气真不错，适合户外运动！",time:"10:30",avatar:"https://randomuser.me/api/portraits/men/1.jpg"},{id:2,name:"李四",content:"刚刚完成了一个重要的项目，庆祝一下！",time:"09:15",avatar:"https://randomuser.me/api/portraits/women/2.jpg"},{id:3,name:"王五",content:"学习新技能真的很有成就感，继续加油！",time:"昨天 18:20",avatar:"https://randomuser.me/api/portraits/men/3.jpg"},{id:4,name:"赵六",content:"分享一张今天拍的美景照片，大自然真神奇！",time:"昨天 16:45",avatar:"https://randomuser.me/api/portraits/women/4.jpg"},{id:5,name:"钱七",content:"尝试了新的菜谱，味道超级棒！",time:"昨天 14:30",avatar:"https://randomuser.me/api/portraits/men/5.jpg"}]}),onLoad(){const e=m();this.statusBarHeight=e.statusBarHeight},methods:{handleRefresh(){setTimeout((()=>{const e={id:this.dataList.length+1,name:`新用户${this.dataList.length+1}`,content:`这是新刷出的内容 #${this.dataList.length+1}`,time:"刚刚",avatar:`https://randomuser.me/api/portraits/${this.dataList.length%2==0?"men":"women"}/${this.dataList.length+1}.jpg`};this.dataList.unshift(e),this.$refs.refresh.finishRefresh()}),1500)}}},[["render",function(a,n,o,c,m,R){const x=l,j=d,y=f,L=v(u("comment-loadding"),b);return e(),t(j,{class:"container"},{default:s((()=>[r(L,{ref:"refresh",onRefresh:R.handleRefresh,scrollHeight:`calc(100vh - ${m.statusBarHeight}px)`},{default:s((()=>[r(j,{class:"content"},{default:s((()=>[r(j,{class:"header"},{default:s((()=>[r(x,{class:"title"},{default:s((()=>[h("自定义下拉刷新演示")])),_:1})])),_:1}),r(j,{class:"card-list"},{default:s((()=>[(e(!0),p(_,null,g(m.dataList,((a,n)=>(e(),t(j,{key:n,class:"card"},{default:s((()=>[r(j,{class:"card-header"},{default:s((()=>[r(y,{class:"avatar",src:a.avatar,mode:"aspectFill"},null,8,["src"]),r(x,{class:"name"},{default:s((()=>[h(i(a.name),1)])),_:2},1024)])),_:2},1024),r(x,{class:"card-content"},{default:s((()=>[h(i(a.content),1)])),_:2},1024),r(x,{class:"card-time"},{default:s((()=>[h(i(a.time),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},8,["onRefresh","scrollHeight"])])),_:1})}],["__scopeId","data-v-9c51d43f"]]);export{x as default};
