import{a2 as e,r as t,c as a,w as l,g as s,b as o,D as n,d as u,e as d,T as i,t as c,u as p,v as r,j as f,A as _,M as h,f as m,h as v}from"./index-6ojkiy1R.js";import{a as x,b as g,w as y}from"./config.Bhvn_Gfs.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";const k=b({__name:"tel_phone",setup(b){e({title:"手机号"});let k=t(""),V=t(""),j=t("发送验证码");function w(){r({url:y+"/with-state/update-profile",method:"POST",header:{Authorization:f("token")},data:{tel_phone:k.value,code:V.value},success:e=>{console.log(e.data),"success"==e.data.status?(_({title:"修改成功",icon:"success"}),x()):_({title:e.data.msg,icon:"none"})}})}function z(){"发送验证码"==j.value?""!=k.value&&""!=k.value?/^1[3456789]\d{9}$/.test(k.value)?(j.value="发送中",r({url:y+"/send-sms-code",method:"POST",header:{Authorization:f("token")},data:{tel_phone:k.value},success:e=>{console.log(e.data),"success"==e.data.status?(j.value="已发送",_({title:"发送成功",icon:"success"})):(_({title:e.data.msg,icon:"none"}),j.value="发送验证码")}})):_({title:"手机号格式错误",icon:"none"}):_({title:"请输入手机号和密码",icon:"none"}):_({title:"请点击发送验证码",icon:"none"})}return x(),(e,t)=>{const r=h,f=m,_=s,x=v;return o(),a(_,{style:{padding:"15px"}},{default:l((()=>[n(g).userInfo.tel_phone?(o(),a(_,{key:0},{default:l((()=>[u(r,{type:"text",class:"inputer",value:n(g).userInfo.tel_phone,disabled:""},null,8,["value"]),u(f,{style:{padding:"10px","font-size":"20px",color:"rgb(190 190 190)"}},{default:l((()=>[d("已绑定，如需修改请联系管理员操作。")])),_:1})])),_:1})):(o(),a(_,{key:1},{default:l((()=>[u(r,{class:"inputer",type:"text",placeholder:"请输入手机号",modelValue:n(k),"onUpdate:modelValue":t[0]||(t[0]=e=>i(k)?k.value=e:k=e)},null,8,["modelValue"]),u(_,{style:{position:"relative"}},{default:l((()=>[u(r,{class:"inputer",type:"text",placeholder:"请输入验证码",modelValue:n(V),"onUpdate:modelValue":t[1]||(t[1]=e=>i(V)?V.value=e:V=e)},null,8,["modelValue"]),u(x,{style:{position:"absolute",right:"0px",width:"110px","font-size":"16px",bottom:"10px"},onClick:z},{default:l((()=>[u(f,null,{default:l((()=>[d(c(n(j)),1)])),_:1})])),_:1})])),_:1})])),_:1})),n(g).userInfo.tel_phone?p("",!0):(o(),a(x,{key:2,class:"light_button",onClick:w},{default:l((()=>[d("提交")])),_:1}))])),_:1})}}},[["__scopeId","data-v-daa99446"]]);export{k as default};
