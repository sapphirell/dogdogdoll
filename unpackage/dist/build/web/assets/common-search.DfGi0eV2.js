import{k as a,o as e,e as s,a as l,w as t,c as n,B as o,F as u,r as c,b as r,t as d,j as i,p,n as m,i as v,J as h,g as _}from"./index-D8OtiTi9.js";import{_ as g}from"./_plugin-vue_export-helper.BCo6x5W8.js";const f="/assets/cancel-DLRcPTCd.png",y=g({__name:"common-search",props:{mode:{type:String,default:"jump",validator:a=>["jump","fill"].includes(a)},width:{type:String,default:"100%"}},emits:["select"],setup(g,{emit:f}){const y=g,j=f,k=a(""),b=a([]),C=async()=>{if(""!==k.value.trim()){j("select",0,k.value);try{const a=await p({url:`http://localhost:8080/search-brand?search=${k.value}`,method:"GET",header:{"Content-Type":"application/json"}});return console.log("请求结果:",a.data),"success"==a.data.status?null==a.data.data?void(b.value=[]):void(b.value=a.data.data):void(b.value=[])}catch(a){return console.error("请求错误:",a),void(b.value=[])}}else b.value=[]};function w(){k.value="",b.value=[]}return(a,p)=>{const f=v,T=h,x=_;return e(),s(u,null,[l(x,{class:"search_tab"},{default:t((()=>["jump"==y.mode?(e(),n(f,{key:0,class:"icon_image",src:"/assets/search-2h22765p.png"})):o("",!0),l(T,{class:"common_search_input",placeholder:"请输入品牌 …",modelValue:k.value,"onUpdate:modelValue":p[0]||(p[0]=a=>k.value=a),onInput:C},null,8,["modelValue"]),b.value.length>0?(e(),n(f,{key:1,class:"icon_image",src:"/assets/cancel-DLRcPTCd.png",onClick:w})):o("",!0)])),_:1}),b.value.length>0?(e(),n(x,{key:0,class:"search_results",style:i({width:g.width})},{default:t((()=>[(e(!0),s(u,null,c(b.value,(a=>(e(),n(x,{key:a.id,class:"result_item",onClick:e=>{return s=a.id,l=a.name,void("jump"===y.mode?m({url:`/pages/brand/brand?brand_id=${s}`}):"fill"===y.mode&&(k.value=l,b.value=[],j("select",s,l)));var s,l}},{default:t((()=>[r(d(a.name),1)])),_:2},1032,["onClick"])))),128))])),_:1},8,["style"])):o("",!0)],64)}}},[["__scopeId","data-v-c1ded29a"]]);export{y as _,f as a};
