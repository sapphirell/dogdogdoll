import{r as a,a2 as l,o as e,c as t,w as s,v as o,j as c,A as n,g as r,b as u,B as i,d,e as _,u as f,k as g,l as m,F as v,i as p,f as y,S as h,D as k,t as w,E as b,G as x}from"./index-6ojkiy1R.js";import{c as F,w as $,i as j}from"./config.Bhvn_Gfs.js";import{_ as z}from"./_plugin-vue_export-helper.BCo6x5W8.js";const D=z({__name:"my_collocation",setup(z){const D=a([]),E=a(1),A=a(10),G=a(0),R=a(!1),S=a(!1),B=a=>{const l=new Date(1e3*a);return`${l.getFullYear()}-${l.getMonth()+1}-${l.getDate()}`},I=async()=>{if(!S.value&&!R.value){R.value=!0;try{if(!(await F()))return;const a=await o({url:`${$}/with-state/my-collocation`,method:"GET",header:{Authorization:c("token")},data:{page:E.value,page_size:A.value}});"success"===a.data.status&&(D.value=[...D.value,...a.data.data.collocation_relation_list],G.value=a.data.data.total,S.value=D.value.length>=G.value,E.value++)}catch(a){n({title:"加载失败",icon:"none"})}finally{R.value=!1}}},M=()=>{S.value||I()};return l({title:"我的搭配"}),e((()=>{I()})),(a,l)=>{const e=r,o=p,c=y,n=b,F=x,$=h;return u(),t(e,{class:"container"},{default:s((()=>[i("meta",{name:"theme-color",content:"#F8F8F8"}),d($,{class:"scroll-content","scroll-y":"",onScrolltolower:M,"show-scrollbar":!1},{default:s((()=>[0!==D.value.length||R.value?f("",!0):(u(),t(e,{key:0,class:"empty-tip"},{default:s((()=>[_(" 暂无发布的搭配，快去创建吧~ ")])),_:1})),(u(!0),g(v,null,m(D.value,((a,l)=>(u(),t(e,{key:l,class:"collocation-card"},{default:s((()=>[d(e,{class:"card-header"},{default:s((()=>[d(o,{class:"avatar",src:a.avatar||`${k(j)}/default-avatar.png`,mode:"aspectFill"},null,8,["src"]),d(c,{class:"time"},{default:s((()=>[_(w(B(a.created_at)),1)])),_:2},1024)])),_:2},1024),d(e,{class:"image-container"},{default:s((()=>[a.image_urls.length>1?(u(),t(F,{key:0,class:"swiper-box",autoplay:!1,circular:!0},{default:s((()=>[(u(!0),g(v,null,m(a.image_urls,((a,l)=>(u(),t(n,{key:l},{default:s((()=>[d(o,{class:"swiper-image",src:a,mode:"aspectFill","lazy-load":"",style:{aspectRatio:"3/4"}},null,8,["src"])])),_:2},1024)))),128))])),_:2},1024)):(u(),t(o,{key:1,class:"single-image",src:a.image_urls[0],mode:"aspectFill","lazy-load":"",style:{aspectRatio:"3/4"}},null,8,["src"]))])),_:2},1024),d(e,{class:"content-box"},{default:s((()=>[d(c,{class:"title"},{default:s((()=>[_(w(a.title),1)])),_:2},1024),d(c,{class:"content"},{default:s((()=>[_(w(a.content),1)])),_:2},1024)])),_:2},1024),a.relation_list.length>0?(u(),t(e,{key:0,class:"relation-box"},{default:s((()=>[d(c,{class:"relation-label"},{default:s((()=>[_("搭配包含：")])),_:1}),d($,{"scroll-x":"",class:"tag-scroll"},{default:s((()=>[(u(!0),g(v,null,m(a.relation_list,((a,l)=>(u(),t(e,{key:l,class:"relation-tag"},{default:s((()=>[_(w(a.type)+"·"+w(a.relation_goods_name||a.relation_brand_name),1)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):f("",!0)])),_:2},1024)))),128)),R.value?(u(),t(e,{key:1,class:"loading-box"},{default:s((()=>[d(o,{src:"/static/images/loading.gif",class:"loading-icon"}),d(c,null,{default:s((()=>[_("加载中...")])),_:1})])),_:1})):f("",!0),S.value?(u(),t(e,{key:2,class:"no-more"},{default:s((()=>[_("没有更多了～")])),_:1})):f("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-c0888068"]]);export{D as default};
