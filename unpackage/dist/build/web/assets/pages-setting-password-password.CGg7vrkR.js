import{a2 as a,r as l,k as e,a as s,v as t,d as o,w as u,F as n,g as c,b as d,C as i,c as p,T as r,e as m,D as f,t as _,p as v,A as g,q as h,j as w,M as y,X as V,f as b,h as k}from"./index-BFzTDSoz.js";import{a as z,_ as j,b as U,w as x}from"./view-logs.yEAac7W9.js";import{_ as I,r as A}from"./_plugin-vue_export-helper.CXFOpRdI.js";import{_ as C}from"./uni-icons.COaeasi-.js";const T=I({__name:"password",setup(I){a({title:"设置密码"});let T=l(""),q=l(""),B=l("");const D=e((()=>q.value&&B.value&&q.value===B.value)),F=e((()=>q.value.length<6?"密码过于简单":q.value.length<10?"密码强度一般":"密码强度较高")),M=a=>q.value.length<6?"weak":q.value.length<10?"medium":"strong";function O(){q.value==B.value?!U.userInfo.password||T.value?h({url:x+"/with-state/setting-password",method:"POST",header:{Authorization:w("token")},data:{old_password:T.value,new_password:q.value},success:a=>{console.log(a.data),"success"==a.data.status?g({title:"修改成功",icon:"success"}):g({title:a.data.msg,icon:"none"})}}):g({title:"请输入原密码",icon:"none"}):g({title:"两次密码输入不一致",icon:"none"})}return z(),(a,l)=>{const e=A(s("view-logs"),j),g=y,h=V,w=A(s("uni-icons"),C),z=c,x=b,I=k;return d(),t(n,null,[o(e),o(z,{class:"password-container"},{default:u((()=>[o(z,{class:"form-wrapper"},{default:u((()=>[i(U).userInfo.password?(d(),p(z,{key:0,class:"input-group"},{default:u((()=>[o(z,{class:"input-item"},{default:u((()=>[o(g,{class:"input",type:"password",placeholder:" ",modelValue:i(T),"onUpdate:modelValue":l[0]||(l[0]=a=>r(T)?T.value=a:T=a)},null,8,["modelValue"]),o(h,{class:"floating-label"},{default:u((()=>[m("原密码")])),_:1}),o(w,{class:"input-icon",type:"locked",size:"18",color:"#999"})])),_:1}),o(z,{class:"input-item"},{default:u((()=>[o(g,{class:"input",type:"password",placeholder:" ",modelValue:i(q),"onUpdate:modelValue":l[1]||(l[1]=a=>r(q)?q.value=a:q=a)},null,8,["modelValue"]),o(h,{class:"floating-label"},{default:u((()=>[m("新密码")])),_:1}),o(w,{class:"input-icon",type:"gear",size:"18",color:"#999"})])),_:1}),o(z,{class:"input-item"},{default:u((()=>[o(g,{class:"input",type:"password",placeholder:" ",modelValue:i(B),"onUpdate:modelValue":l[2]||(l[2]=a=>r(B)?B.value=a:B=a)},null,8,["modelValue"]),o(h,{class:"floating-label"},{default:u((()=>[m("确认新密码")])),_:1}),o(w,{class:"input-icon",type:"checkmarkempty",size:"18",color:"#999"})])),_:1})])),_:1})):(d(),p(z,{key:1,class:"input-group"},{default:u((()=>[o(z,{class:"input-item"},{default:u((()=>[o(g,{class:"input",type:"password",placeholder:" ",modelValue:i(q),"onUpdate:modelValue":l[3]||(l[3]=a=>r(q)?q.value=a:q=a)},null,8,["modelValue"]),o(h,{class:"floating-label"},{default:u((()=>[m("设置密码")])),_:1}),o(w,{class:"input-icon",type:"locked",size:"18",color:"#999"})])),_:1}),o(z,{class:"input-item"},{default:u((()=>[o(g,{class:"input",type:"password",placeholder:" ",modelValue:i(B),"onUpdate:modelValue":l[4]||(l[4]=a=>r(B)?B.value=a:B=a)},null,8,["modelValue"]),o(h,{class:"floating-label"},{default:u((()=>[m("确认密码")])),_:1}),o(w,{class:"input-icon",type:"checkmarkempty",size:"18",color:"#999"})])),_:1})])),_:1})),i(q)?(d(),p(z,{key:2,class:"password-strength"},{default:u((()=>[o(z,{class:f(["strength-bar",M()])},null,8,["class"]),o(z,{class:f(["strength-bar",M()])},null,8,["class"]),o(z,{class:f(["strength-bar",M()])},null,8,["class"]),o(x,{class:"strength-text"},{default:u((()=>[m(_(F.value),1)])),_:1})])),_:1})):v("",!0),o(I,{class:f(["submit-btn",{active:D.value}]),onClick:O,disabled:!D.value},{default:u((()=>[m(_(i(U).userInfo.password?"更新密码":"设置密码"),1)])),_:1},8,["class","disabled"])])),_:1}),o(z,{class:"security-tips"},{default:u((()=>[o(w,{type:"info",size:"16",color:"#666"}),o(x,null,{default:u((()=>[m("建议使用8位以上包含字母和数字的组合")])),_:1})])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-c9958d54"]]);export{T as default};
