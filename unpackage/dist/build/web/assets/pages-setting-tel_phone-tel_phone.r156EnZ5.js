import{V as e,k as t,c as a,w as l,g as s,o,v as n,a as u,b as d,G as i,t as c,B as p,p as r,A as f,q as _,J as m,f as h,C as v}from"./index-D8OtiTi9.js";import{b as g,g as x,w as y}from"./config.BPuNpLTQ.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";const b=k({__name:"tel_phone",setup(k){e({title:"手机号"});let b=t(""),V=t(""),w=t("发送验证码");function z(){r({url:y+"/with-state/update-profile",method:"POST",header:{Authorization:f("token")},data:{tel_phone:b.value,code:V.value},success:e=>{console.log(e.data),"success"==e.data.status?(_({title:"修改成功",icon:"success"}),g()):_({title:e.data.msg,icon:"none"})}})}function I(){"发送验证码"==w.value?""!=b.value&&""!=b.value?/^1[3456789]\d{9}$/.test(b.value)?(w.value="发送中",r({url:y+"/send-sms-code",method:"POST",header:{Authorization:f("token")},data:{tel_phone:b.value},success:e=>{console.log(e.data),"success"==e.data.status?(w.value="已发送",_({title:"发送成功",icon:"success"})):(_({title:e.data.msg,icon:"none"}),w.value="发送验证码")}})):_({title:"手机号格式错误",icon:"none"}):_({title:"请输入手机号和密码",icon:"none"}):_({title:"请点击发送验证码",icon:"none"})}return g(),(e,t)=>{const r=m,f=h,_=s,g=v;return o(),a(_,{style:{padding:"15px"}},{default:l((()=>[n(x).userInfo.tel_phone?(o(),a(_,{key:0},{default:l((()=>[u(r,{type:"text",class:"inputer",value:n(x).userInfo.tel_phone,disabled:""},null,8,["value"]),u(f,{style:{padding:"10px","font-size":"20px",color:"rgb(190 190 190)"}},{default:l((()=>[d("已绑定，如需修改请联系管理员操作。")])),_:1})])),_:1})):(o(),a(_,{key:1},{default:l((()=>[u(r,{class:"inputer",type:"text",placeholder:"请输入手机号",modelValue:n(b),"onUpdate:modelValue":t[0]||(t[0]=e=>i(b)?b.value=e:b=e)},null,8,["modelValue"]),u(_,{style:{position:"relative"}},{default:l((()=>[u(r,{class:"inputer",type:"text",placeholder:"请输入验证码",modelValue:n(V),"onUpdate:modelValue":t[1]||(t[1]=e=>i(V)?V.value=e:V=e)},null,8,["modelValue"]),u(g,{style:{position:"absolute",right:"0px",width:"110px","font-size":"16px",bottom:"10px"},onClick:I},{default:l((()=>[u(f,null,{default:l((()=>[d(c(n(w)),1)])),_:1})])),_:1})])),_:1})])),_:1})),n(x).userInfo.tel_phone?p("",!0):(o(),a(g,{key:2,class:"light_button",onClick:z},{default:l((()=>[d("提交")])),_:1}))])),_:1})}}},[["__scopeId","data-v-89ed9166"]]);export{b as default};
