import{a3 as a,r as l,k as s,a as e,v as t,d as o,w as u,F as n,g as c,b as d,C as i,c as p,T as r,e as m,D as f,t as _,p as v,A as g,q as h,j as w,N as y,X as V,f as b,h as k}from"./index-I3aG4WZL.js";import{_ as z}from"./view-logs.C4HVuFxK.js";import{_ as j,r as U}from"./_plugin-vue_export-helper.DF4WgY5m.js";import{_ as x}from"./uni-icons.BQtdpjJ2.js";import{a as I,b as C,w as A}from"./config.BjeWXQ7P.js";const D=j({__name:"password",setup(j){a({title:"设置密码"});let D=l(""),T=l(""),q=l("");const E=s((()=>T.value&&q.value&&T.value===q.value)),F=s((()=>T.value.length<6?"密码过于简单":T.value.length<10?"密码强度一般":"密码强度较高")),G=a=>T.value.length<6?"weak":T.value.length<10?"medium":"strong";function N(){T.value==q.value?!C.userInfo.password||D.value?h({url:A+"/with-state/setting-password",method:"POST",header:{Authorization:w("token")},data:{old_password:D.value,new_password:T.value},success:a=>{console.log(a.data),"success"==a.data.status?g({title:"修改成功",icon:"success"}):g({title:a.data.msg,icon:"none"})}}):g({title:"请输入原密码",icon:"none"}):g({title:"两次密码输入不一致",icon:"none"})}return I(),(a,l)=>{const s=U(e("view-logs"),z),g=y,h=V,w=U(e("uni-icons"),x),j=c,I=b,A=k;return d(),t(n,null,[o(s),o(j,{class:"password-container"},{default:u((()=>[o(j,{class:"form-wrapper"},{default:u((()=>[i(C).userInfo.password?(d(),p(j,{key:0,class:"input-group"},{default:u((()=>[o(j,{class:"input-item"},{default:u((()=>[o(g,{class:"input",type:"password",placeholder:" ",modelValue:i(D),"onUpdate:modelValue":l[0]||(l[0]=a=>r(D)?D.value=a:D=a)},null,8,["modelValue"]),o(h,{class:"floating-label"},{default:u((()=>[m("原密码")])),_:1}),o(w,{class:"input-icon",type:"locked",size:"18",color:"#999"})])),_:1}),o(j,{class:"input-item"},{default:u((()=>[o(g,{class:"input",type:"password",placeholder:" ",modelValue:i(T),"onUpdate:modelValue":l[1]||(l[1]=a=>r(T)?T.value=a:T=a)},null,8,["modelValue"]),o(h,{class:"floating-label"},{default:u((()=>[m("新密码")])),_:1}),o(w,{class:"input-icon",type:"gear",size:"18",color:"#999"})])),_:1}),o(j,{class:"input-item"},{default:u((()=>[o(g,{class:"input",type:"password",placeholder:" ",modelValue:i(q),"onUpdate:modelValue":l[2]||(l[2]=a=>r(q)?q.value=a:q=a)},null,8,["modelValue"]),o(h,{class:"floating-label"},{default:u((()=>[m("确认新密码")])),_:1}),o(w,{class:"input-icon",type:"checkmarkempty",size:"18",color:"#999"})])),_:1})])),_:1})):(d(),p(j,{key:1,class:"input-group"},{default:u((()=>[o(j,{class:"input-item"},{default:u((()=>[o(g,{class:"input",type:"password",placeholder:" ",modelValue:i(T),"onUpdate:modelValue":l[3]||(l[3]=a=>r(T)?T.value=a:T=a)},null,8,["modelValue"]),o(h,{class:"floating-label"},{default:u((()=>[m("设置密码")])),_:1}),o(w,{class:"input-icon",type:"locked",size:"18",color:"#999"})])),_:1}),o(j,{class:"input-item"},{default:u((()=>[o(g,{class:"input",type:"password",placeholder:" ",modelValue:i(q),"onUpdate:modelValue":l[4]||(l[4]=a=>r(q)?q.value=a:q=a)},null,8,["modelValue"]),o(h,{class:"floating-label"},{default:u((()=>[m("确认密码")])),_:1}),o(w,{class:"input-icon",type:"checkmarkempty",size:"18",color:"#999"})])),_:1})])),_:1})),i(T)?(d(),p(j,{key:2,class:"password-strength"},{default:u((()=>[o(j,{class:f(["strength-bar",G()])},null,8,["class"]),o(j,{class:f(["strength-bar",G()])},null,8,["class"]),o(j,{class:f(["strength-bar",G()])},null,8,["class"]),o(I,{class:"strength-text"},{default:u((()=>[m(_(F.value),1)])),_:1})])),_:1})):v("",!0),o(A,{class:f(["submit-btn",{active:E.value}]),onClick:N,disabled:!E.value},{default:u((()=>[m(_(i(C).userInfo.password?"更新密码":"设置密码"),1)])),_:1},8,["class","disabled"])])),_:1}),o(j,{class:"security-tips"},{default:u((()=>[o(w,{type:"info",size:"16",color:"#666"}),o(I,null,{default:u((()=>[m("建议使用8位以上包含字母和数字的组合")])),_:1})])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-c9958d54"]]);export{D as default};
