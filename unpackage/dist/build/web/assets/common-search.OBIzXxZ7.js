import{g as a,o as e,c as s,w as t,a as l,x as o,Y as r,z as n,b as u,d as i,F as c,r as d,t as m,l as p,n as v,i as f,L as _,e as h,f as g,S as y}from"./index-B55GPRQF.js";import{_ as j}from"./search.CsIL0f2m.js";import{_ as k}from"./cancel.CnEdunnH.js";import{w as b}from"./config.BIUptOrH.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";const S=w(Object.assign({inheritAttrs:!1},{__name:"common-search",props:{mode:{type:String,default:"jump",validator:a=>["jump","fill"].includes(a)},width:{type:String,default:"100%"},background:{type:String,default:""},fontSize:{type:String,default:""}},emits:["select"],setup(w,{emit:S}){const C=w,x=S,I=a(""),V=a([]),$=async()=>{if(""!==I.value.trim()){x("select",0,I.value);try{const a=await p({url:b+`/search-brand?search=${I.value}`,method:"GET",header:{"Content-Type":"application/json"}});return console.log("请求结果:",a.data),"success"==a.data.status?null==a.data.data?void(V.value=[]):void(V.value=a.data.data):void(V.value=[])}catch(a){return console.error("请求错误:",a),void(V.value=[])}}else V.value=[]};function z(){I.value="",V.value=[]}return(a,p)=>{const b=f,S=_,E=h,G=g,T=y;return e(),s(G,{style:{width:"100%"}},{default:t((()=>[l(G,{class:o(["search_tab",a.$attrs.class]),style:r({background:w.background||"#fff"})},{default:t((()=>["jump"==C.mode?(e(),s(b,{key:0,class:"icon_image",src:j})):n("",!0),l(S,{class:"common_search_input",placeholder:"可以模糊搜索娃社 o( ❛ᴗ❛ )o …",modelValue:I.value,"onUpdate:modelValue":p[0]||(p[0]=a=>I.value=a),onInput:$,ignoreCompositionEvent:!1},null,8,["modelValue"]),V.value.length>0?(e(),s(G,{key:1,class:"search-info-tap"},{default:t((()=>[V.value.length>0&&I.value.length<5?(e(),s(E,{key:0},{default:t((()=>[u("拼音、缩写、别名都可以搜")])),_:1})):n("",!0),l(b,{class:"icon_image",src:k,onClick:z})])),_:1})):n("",!0)])),_:1},8,["class","style"]),l(G,{style:{position:"relative"}},{default:t((()=>[V.value.length>0?(e(),s(T,{key:0,class:"search_results",style:r({width:w.width}),"scroll-y":""},{default:t((()=>[(e(!0),i(c,null,d(V.value,(a=>(e(),s(G,{key:a.id,class:"result_item",onClick:e=>{return s=a.id,t=a.name,void("jump"===C.mode?v({url:`/pages/brand/brand?brand_id=${s}`}):"fill"===C.mode&&(I.value=t,V.value=[],x("select",s,t)));var s,t}},{default:t((()=>[u(m(a.name),1)])),_:2},1032,["onClick"])))),128))])),_:1},8,["style"])):n("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-e250f8d9"]]);export{S as _};
