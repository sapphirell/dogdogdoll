import{h as a,af as e,aa as l,n as s,l as t,C as o,m as i,c as n,w as c,g as u,o as r,a as d,e as m,r as v,F as g,b as p,v as _,f,W as k,q as y,t as h,i as b}from"./index-u2rUIk8T.js";import{b as w,w as C}from"./config.DgkxgtZ3.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const F=x({__name:"user_like",setup(x){const F=a([{type:1,name:"商品"},{type:2,name:"品牌"},{type:3,name:"搭配"},{type:4,name:"展示柜"}]),$=a(1),z=a([]),j=a(!1),q=a(!1),A=e({page:1,page_size:8,total:0});l((async()=>{await E(),G()}));const E=async()=>{await w()||s({url:"/pages/login/login"})},G=async()=>{if(!j.value&&!q.value){j.value=!0;try{const a=await t({url:`${C}/with-state/user-likes`,method:"GET",data:{type:$.value,page:A.page,page_size:A.page_size},header:{Authorization:o("token")}});if("success"===a.data.status){const e=a.data.data.list;z.value=[...z.value,...e],A.total=a.data.data.total,a.data.data.list.length?q.value=!1:q.value=!0,A.page+=1}}catch(a){i({title:"加载失败",icon:"none"})}finally{j.value=!1}}},I=()=>{q.value?console.log("no more"):G()},S=()=>{A.page=1,z.value=[],q.value=!1},T=a=>(null==a?void 0:a.length)>0?a[0]:"",W=a=>{const e=(null==a?void 0:a.split(",")[0])||"";return e||""};return(a,e)=>{const l=u,t=b,o=f,i=k;return r(),n(l,{class:"container"},{default:c((()=>[d(l,{class:"nav-bar"},{default:c((()=>[(r(!0),m(g,null,v(F.value,((a,e)=>(r(),n(l,{key:e,class:y(["nav-item",{active:$.value===a.type}]),onClick:e=>{return l=a.type,void($.value!==l&&($.value=l,S(),G()));var l}},{default:c((()=>[p(h(a.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),d(i,{class:"scroll-view","scroll-y":"",onScrolltolower:I,"show-scrollbar":!1},{default:c((()=>[d(l,{class:"list-container"},{default:c((()=>[(r(!0),m(g,null,v(z.value,((a,e)=>(r(),m(g,{key:a.id},[1===$.value&&a.goods?(r(),n(l,{key:0,class:"list-item",onClick:e=>{return l=a.goods.id,void s({url:`/pages/goods/goods?goods_id=${l}`});var l}},{default:c((()=>[d(t,{class:"item-image",src:T(a.goods.goods_images),mode:"aspectFill"},null,8,["src"]),d(o,{class:"item-title"},{default:c((()=>[p(h(a.goods.name),1)])),_:2},1024)])),_:2},1032,["onClick"])):_("",!0),2===$.value&&a.brand?(r(),n(l,{key:1,class:"list-item",onClick:e=>{return l=a.brand.id,void s({url:`/pages/brand/brand?brand_id=${l}`});var l}},{default:c((()=>[d(t,{class:"item-image brand-image",src:a.brand.logo_image,mode:"aspectFit"},null,8,["src"]),d(o,{class:"item-title"},{default:c((()=>[p(h(a.brand.brand_name),1)])),_:2},1024)])),_:2},1032,["onClick"])):_("",!0),3===$.value&&a.collocation?(r(),n(l,{key:2,class:"list-item",onClick:e=>{return l=a.collocation.id,void s({url:`/pages/collocation/detail?id=${l}`});var l}},{default:c((()=>[d(t,{class:"item-image",src:W(a.collocation.image_urls),mode:"aspectFill"},null,8,["src"]),d(o,{class:"item-title"},{default:c((()=>[p(h(a.collocation.title),1)])),_:2},1024)])),_:2},1032,["onClick"])):_("",!0),4===$.value&&a.showcase?(r(),n(l,{key:3,class:"list-item",onClick:e=>{return l=a.showcase.id,void s({url:`/pages/showcase/detail?id=${l}`});var l}},{default:c((()=>[d(t,{class:"item-image",src:T(a.showcase.image_urls),mode:"aspectFill"},null,8,["src"]),d(o,{class:"item-title"},{default:c((()=>[p(h(a.showcase.name),1)])),_:2},1024)])),_:2},1032,["onClick"])):_("",!0)],64)))),128)),d(l,{class:"loading-status"},{default:c((()=>[j.value?(r(),n(o,{key:0,class:"loading-text"},{default:c((()=>[p("加载中...")])),_:1})):_("",!0),q.value?(r(),n(o,{key:1,class:"no-more-text"},{default:c((()=>[p("没有更多了")])),_:1})):_("",!0)])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-af9b3ef9"]]);export{F as default};
