import{_ as a,g as e,j as l,m as s,c as t,w as o,f as u,o as n,a as c,y as d,R as i,b as p,x as r,t as m,z as f,k as _,l as g,H as v,L as h,a9 as w,e as y,K as V}from"./index-B55GPRQF.js";import{_ as b}from"./uni-icons.B2Wm8RW1.js";import{r as k}from"./uni-app.es.CzHle-z4.js";import{g as z,a as j,w as x}from"./config.BIUptOrH.js";import{_ as U}from"./_plugin-vue_export-helper.BCo6x5W8.js";const I=U({__name:"password",setup(U){a({title:"设置密码"});let I=e(""),A=e(""),C=e("");const D=l((()=>A.value&&C.value&&A.value===C.value)),E=l((()=>A.value.length<6?"密码过于简单":A.value.length<10?"密码强度一般":"密码强度较高")),G=a=>A.value.length<6?"weak":A.value.length<10?"medium":"strong";function H(){A.value==C.value?j.userInfo.password||I.value?g({url:x+"/with-state/setting-password",method:"POST",header:{Authorization:v("token")},data:{old_password:I.value,new_password:A.value},success:a=>{console.log(a.data),"success"==a.data.status?_({title:"修改成功",icon:"success"}):_({title:a.data.msg,icon:"none"})}}):_({title:"请输入原密码",icon:"none"}):_({title:"两次密码输入不一致",icon:"none"})}return z(),(a,e)=>{const l=h,_=w,g=k(s("uni-icons"),b),v=u,z=y,x=V;return n(),t(v,{class:"password-container"},{default:o((()=>[c(v,{class:"form-wrapper"},{default:o((()=>[d(j).userInfo.password?(n(),t(v,{key:0,class:"input-group"},{default:o((()=>[c(v,{class:"input-item"},{default:o((()=>[c(l,{class:"input",type:"password",placeholder:" ",modelValue:d(I),"onUpdate:modelValue":e[0]||(e[0]=a=>i(I)?I.value=a:I=a)},null,8,["modelValue"]),c(_,{class:"floating-label"},{default:o((()=>[p("原密码")])),_:1}),c(g,{class:"input-icon",type:"locked",size:"18",color:"#999"})])),_:1}),c(v,{class:"input-item"},{default:o((()=>[c(l,{class:"input",type:"password",placeholder:" ",modelValue:d(A),"onUpdate:modelValue":e[1]||(e[1]=a=>i(A)?A.value=a:A=a)},null,8,["modelValue"]),c(_,{class:"floating-label"},{default:o((()=>[p("新密码")])),_:1}),c(g,{class:"input-icon",type:"gear",size:"18",color:"#999"})])),_:1}),c(v,{class:"input-item"},{default:o((()=>[c(l,{class:"input",type:"password",placeholder:" ",modelValue:d(C),"onUpdate:modelValue":e[2]||(e[2]=a=>i(C)?C.value=a:C=a)},null,8,["modelValue"]),c(_,{class:"floating-label"},{default:o((()=>[p("确认新密码")])),_:1}),c(g,{class:"input-icon",type:"checkmarkempty",size:"18",color:"#999"})])),_:1})])),_:1})):(n(),t(v,{key:1,class:"input-group"},{default:o((()=>[c(v,{class:"input-item"},{default:o((()=>[c(l,{class:"input",type:"password",placeholder:" ",modelValue:d(A),"onUpdate:modelValue":e[3]||(e[3]=a=>i(A)?A.value=a:A=a)},null,8,["modelValue"]),c(_,{class:"floating-label"},{default:o((()=>[p("设置密码")])),_:1}),c(g,{class:"input-icon",type:"locked",size:"18",color:"#999"})])),_:1}),c(v,{class:"input-item"},{default:o((()=>[c(l,{class:"input",type:"password",placeholder:" ",modelValue:d(C),"onUpdate:modelValue":e[4]||(e[4]=a=>i(C)?C.value=a:C=a)},null,8,["modelValue"]),c(_,{class:"floating-label"},{default:o((()=>[p("确认密码")])),_:1}),c(g,{class:"input-icon",type:"checkmarkempty",size:"18",color:"#999"})])),_:1})])),_:1})),d(A)?(n(),t(v,{key:2,class:"password-strength"},{default:o((()=>[c(v,{class:r(["strength-bar",G()])},null,8,["class"]),c(v,{class:r(["strength-bar",G()])},null,8,["class"]),c(v,{class:r(["strength-bar",G()])},null,8,["class"]),c(z,{class:"strength-text"},{default:o((()=>[p(m(E.value),1)])),_:1})])),_:1})):f("",!0),c(x,{class:r(["submit-btn",{active:D.value}]),onClick:H,disabled:!D.value},{default:o((()=>[p(m(d(j).userInfo.password?"更新密码":"设置密码"),1)])),_:1},8,["class","disabled"])])),_:1}),c(v,{class:"security-tips"},{default:o((()=>[c(g,{type:"info",size:"16",color:"#666"}),c(z,null,{default:o((()=>[p("建议使用8位以上包含字母和数字的组合")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-70a4d085"]]);export{I as default};
