import{k as t,s as e,v as l,c as a,w as o,B as s,p as i,q as d,u as n,A as c,g as u,o as r,a as _,b as g,t as p,e as m,r as f,F as x,G as y,n as h,i as b,f as v,S as k,M as w,N as S,C,O as z,j,P as T,x as $}from"./index-D8OtiTi9.js";import{_ as F,a as I}from"./heart2.DWT8AkCv.js";import{_ as A}from"./right2.s_X9TKoF.js";import{a as G,w as L,g as M}from"./config.BPuNpLTQ.js";import{_ as O}from"./_plugin-vue_export-helper.BCo6x5W8.js";const P=O({__name:"goods",props:["goods_id"],setup(O){const P=O;let D=t({}),E=t({}),V=t(1),q=t(1),B=t(""),W=t(!1),H=t(!1),K=t({});function N(t){console.log(t.detail.current),q.value=t.detail.current+1}function U(){i({url:L+"/goods?id="+P.goods_id,method:"GET",timeout:5e3,success:t=>{console.log(t.data.data),D.value=t.data.data},fail:t=>{console.log(t),d({title:"网络请求失败",icon:"none"})},complete:()=>{n()}})}function Y(t){if(t<1e3)return t.toString();return`${Math.floor(t/1e3)}k+`}function J(t){const e=new Date(1e3*t),l=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0"),s=e.getHours().toString().padStart(2,"0"),i=e.getMinutes().toString().padStart(2,"0");return e.getSeconds().toString().padStart(2,"0"),`${l}-${a}-${o} ${s}:${i}`}function Q(){i({url:L+"/goods-comment?goods_id="+P.goods_id+"&page="+V.value,method:"GET",timeout:5e3,success:t=>{console.log(t.data.data),E.value.page_index=t.data.data.page_index,E.value.total=t.data.data.total,E.value.comment_list=E.value.comment_list?E.value.comment_list.concat(t.data.data.comment_list):t.data.data.comment_list,null!=t.data.data.comment_list&&(t.data.data.comment_list.length>0&&(V.value+=1),0==t.data.data.comment_list.length&&V.value>1&&d({title:"没有更多数据了",icon:"none"}))},fail:t=>{console.log(t),d({title:"网络请求失败",icon:"none"})}})}function R(){let t=c("token");if(!M.isLogin)return void d({title:"请先登录",icon:"none"});if(""==B.value)return void d({title:"请输入评论内容",icon:"none"});let e={content:B.value,target_id:parseInt(P.goods_id),type:2};K.value.id&&(e.reply_id=K.value.id,e.reply_for=K.value.comment,e.reply_user_id=K.value.user_id),console.log(e),i({url:L+"/with-state/add-comment",method:"POST",header:{Authorization:t},data:e,success:t=>(console.log(t.data),"success"==t.data.status?(d({title:"评论成功",icon:"success"}),B.value="",V.value=1,E.value={},void Q()):void d({title:t.data.msg,icon:"none"})),fail:t=>{console.log(t),d({title:"网络请求失败",icon:"none"})}})}function X(){let t=c("token");""!=t&&i({url:L+"/with-state/hasLike?id="+P.goods_id+"&type=1",method:"POST",header:{Authorization:t},success:t=>{console.log(t.data),"success"==t.data.status?t.data.data.id>0?W.value=!0:W.value=!1:d({title:t.data.msg,icon:"none"})},fail:t=>{console.log(t),d({title:"网络请求失败",icon:"none"})}})}function Z(){h({url:"/pages/collocation/collocation?goods_id="+P.goods_id+"&brand_id="+D.value.brand_id+"&goods_name="+D.value.name+"&brand_name="+D.value.brand_name+"&type="+D.value.type})}function tt(t){if(!t)return"";return t.split(",")[0].trim()}return e({title:"加载中"}),U(),Q(),i({url:L+"/goods-collocation?goods_id="+P.goods_id,method:"GET",timeout:5e3,success:t=>{console.log(t.data.data),H.value=t.data.data},fail:t=>{console.log(t),d({title:"网络请求失败",icon:"none"})}}),G().then((t=>{console.log(t),X()})),(t,e)=>{const n=b,G=v,O=u,V=$,et=k,lt=w,at=S,ot=C,st=z;return l(D).name?(r(),a(O,{key:0},{default:o((()=>[_(O,null,{default:o((()=>[_(O,{style:{position:"relative"}},{default:o((()=>[_(O,{class:"heart",onClick:e[0]||(e[0]=t=>function(){let t=c("token");if(!M.isLogin)return void d({title:"请先登录",icon:"none"});let e={id:parseInt(P.goods_id),type:1},l=W.value?"/with-state/unlike":"/with-state/add-like";i({url:L+l,method:"POST",header:{Authorization:t},data:e,success:t=>(console.log(t.data),"success"==t.data.status?(d({title:"操作成功",icon:"success"}),W.value=!W.value,X(),void U()):void d({title:t.data.msg,icon:"none"})),fail:t=>{console.log(t),d({title:"网络请求失败",icon:"none"})}})}())},{default:o((()=>[l(W)?(r(),a(n,{key:1,src:I})):(r(),a(n,{key:0,src:F})),_(G,null,{default:o((()=>[g(p(Y(l(D).goods_like_count)),1)])),_:1})])),_:1}),_(et,{interval:3e3,duration:200,onChange:N,class:"banner_swiper"},{default:o((()=>[(r(!0),m(x,null,f(l(D).goods_images,((t,e)=>(r(),a(V,{key:e,class:"banner_swiper_item"},{default:o((()=>[_(O,{class:"swiper-item"},{default:o((()=>[_(n,{src:t,mode:"aspectFill",style:{width:"100vw","min-height":"45vh"},onClick:t=>{T({current:D.value.goods_images.index,urls:D.value.goods_images})}},null,8,["src","onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),_(O,{class:"swiper-index-box"},{default:o((()=>[_(G,{class:"font-alimamashuhei"},{default:o((()=>[g(p(l(q))+" / "+p(l(D).goods_images.length),1)])),_:1})])),_:1})])),_:1})])),_:1}),_(O,{class:"msg_body"},{default:o((()=>[_(O,{class:"msg_block"},{default:o((()=>[_(G,{class:"lable_text"},{default:o((()=>[g("名称")])),_:1}),_(G,{class:"msg_text"},{default:o((()=>[g(p(l(D).name),1)])),_:1})])),_:1}),_(O,{class:"msg_block"},{default:o((()=>[_(G,{class:"lable_text"},{default:o((()=>[g("类型")])),_:1}),_(G,{class:"msg_text"},{default:o((()=>[g(p(l(D).type),1)])),_:1})])),_:1}),_(O,{class:"msg_block"},{default:o((()=>[_(G,{class:"lable_text"},{default:o((()=>[g("初贩定价")])),_:1}),l(D).goods_sales&&l(D).goods_sales.length>0?(r(),a(G,{key:0,class:"msg_text"},{default:o((()=>[g(p(l(D).goods_sales[0].sub_amount+l(D).goods_sales[0].fin_amount)+" "+p(l(D).goods_sales[0].currency),1)])),_:1})):(r(),a(G,{key:1},{default:o((()=>[g("未知")])),_:1}))])),_:1}),_(O,{class:"msg_block"},{default:o((()=>[_(G,{class:"lable_text"},{default:o((()=>[g("尺寸")])),_:1}),_(G,{class:"msg_text"},{default:o((()=>[g(p(l(D).size)+" / "+p(l(D).size_detail),1)])),_:1})])),_:1}),"单体"===l(D).type||"整体"===l(D).type?(r(),a(O,{key:0,class:"msg_block"},{default:o((()=>[_(G,{class:"lable_text"},{default:o((()=>[g("胸型")])),_:1}),_(G,{class:"msg_text"},{default:o((()=>[g(p(l(D).body_size),1)])),_:1})])),_:1})):s("",!0),_(O,{class:"msg_block"},{default:o((()=>[_(G,{class:"lable_text"},{default:o((()=>[g("可选颜色")])),_:1}),_(G,{class:"msg_text"},{default:o((()=>[g(p(l(D).skin),1)])),_:1})])),_:1}),_(O,{class:"msg_block"},{default:o((()=>[_(G,{class:"lable_text"},{default:o((()=>[g("贩售情报")])),_:1}),null==l(D).goods_sales?(r(),a(G,{key:0},{default:o((()=>[g("暂无收录贩售信息")])),_:1})):s("",!0),_(O,{class:"msg_text"},{default:o((()=>[(r(!0),m(x,null,f(l(D).goods_sales,(t=>(r(),a(G,{key:t.id,style:{width:"100%",display:"block","margin-bottom":"10px"}},{default:o((()=>[g(p(J(t.sub_time))+", "+p(t.sale_type)+", 总价: "+p(t.sub_amount+t.fin_amount)+" ("+p(t.currency)+") ",1)])),_:2},1024)))),128))])),_:1})])),_:1}),_(O,{class:"msg_block"},{default:o((()=>[_(G,{class:"lable_text"},{default:o((()=>[g("制作方")])),_:1}),_(G,{class:"msg_text"},{default:o((()=>[_(lt,{onClick:e[1]||(e[1]=t=>{return e=l(D).brand_id,void h({url:"/pages/brand/brand?brand_id="+e});var e}),style:{display:"inline"}},{default:o((()=>[_(G,null,{default:o((()=>[g(p(l(D).brand_name),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),_(O,{style:{padding:"20px"}},{default:o((()=>[_(O,{style:{display:"flex",margin:"30px 5px 10px 5px"}},{default:o((()=>[_(G,{style:{color:"rgb(100, 198, 220)","font-weight":"bold",display:"block",width:"calc(100% - 85px)"}},{default:o((()=>[g("搭配参考")])),_:1}),_(O,{style:{display:"flex"}},{default:o((()=>[_(G,{style:{width:"70px",display:"inline-block",color:"#888"}},{default:o((()=>[g("查看更多")])),_:1}),_(n,{src:A,style:{width:"20px",height:"20px",display:"inline-block"}})])),_:1})])),_:1}),_(at,{"scroll-x":"true",class:"collocationBox","ll-with-animation":"true","show-scrollbar":!1},{default:o((()=>[l(H)&&l(H).collocation_relation_list.length>0?(r(!0),m(x,{key:0},f(l(H).collocation_relation_list,(t=>(r(),a(O,{key:t.collocation_id,style:{},class:"collocationItem square",onClick:e=>{return l=t.collocation_id,void h({url:"/pages/collocation_share/collocation_share?collocation_id="+l});var l}},{default:o((()=>[_(n,{src:tt(t.image_urls),mode:"aspectFill",style:{width:"100%",height:"100%"}},null,8,["src"])])),_:2},1032,["onClick"])))),128)):s("",!0)])),_:1}),_(O,{onClick:Z,style:{border:"1px solid #eaeaea",display:"flex",margin:"20px 60px","border-radius":"15px"}},{default:o((()=>[_(n,{src:"/assets/paper_plane-DW2p-K8L.png",style:{width:"25px",height:"25px",margin:"13px"}}),_(G,{style:{color:"rgb(184 184 184)",margin:"15px auto"}},{default:o((()=>[g("上传搭配参考帮助他人")])),_:1})])),_:1})])),_:1}),_(O,{style:{padding:"20px"}},{default:o((()=>[_(G,{style:{color:"rgb(100, 198, 220)","font-weight":"bold",isplay:"block",margin:"30px 5px",display:"block"}},{default:o((()=>[g("评论区 ("+p(l(E).total||0)+")",1)])),_:1}),_(O,null,{default:o((()=>[l(E).comment_list?(r(),a(O,{key:0},{default:o((()=>[(r(!0),m(x,null,f(l(E).comment_list,((t,e)=>(r(),a(O,{class:"comment_item",key:t.id,style:{"margin-bottom":"20px"}},{default:o((()=>[_(O,{style:{float:"left",width:"80px",padding:"0px 10px 10px 0px"}},{default:o((()=>[_(n,{style:{width:"50px",height:"50px","border-radius":"100%",display:"block",margin:"10px"},src:t.avatar,mode:"aspectFill"},null,8,["src"]),_(G,{style:{display:"block","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},{default:o((()=>[g(p(t.username),1)])),_:2},1024)])),_:2},1024),_(O,{style:{float:"left",padding:"15px 15px 30px 15px",background:"rgb(245 245 245)",width:"calc(100vw - 170px)","min-height":"60px","border-radius":"15px",position:"relative",top:"2px"}},{default:o((()=>[_(G,{style:{width:"100%","white-space":"normal","word-break":"break-all"}},{default:o((()=>[g(p(t.comment),1)])),_:2},1024),_(G,{style:{color:"#888","font-size":"12px",position:"absolute",bottom:"3px",left:"15px"}},{default:o((()=>[g(p(J(t.created_at))+" floor#"+p(t.floor),1)])),_:2},1024),_(G,{style:j([{fontSize:"12px",position:"absolute",bottom:"3px",right:"15px",fontWeight:"1000"},l(K).id===t.id?{color:"#fd6669"}:{color:"#888"}]),onClick:e=>function(t){K.value.id!=t.id?K.value=t:K.value={}}(t)},{default:o((()=>[g(" 引用此回复 ")])),_:2},1032,["style","onClick"])])),_:2},1024),_(O,{style:{clear:"both"}})])),_:2},1024)))),128)),_(ot,{class:"load_more",onClick:Q},{default:o((()=>[g("加载更多")])),_:1})])),_:1})):s("",!0)])),_:1})])),_:1}),_(O,{style:{height:"80px"}}),_(O,{class:"bottom_tab",style:{}},{default:o((()=>[l(K).id?(r(),a(G,{key:0,class:"replyInfo",style:{}},{default:o((()=>[g(p("@"+l(K).username),1)])),_:1})):s("",!0),_(st,{class:"comment_input",modelValue:l(B),"onUpdate:modelValue":e[2]||(e[2]=t=>y(B)?B.value=t:B=t),style:{}},null,8,["modelValue"]),_(ot,{style:{"flex-shrink":"0",width:"90px"},onClick:R},{default:o((()=>[g("写评论")])),_:1})])),_:1})])),_:1})):s("",!0)}}},[["__scopeId","data-v-fceaeba7"]]);export{P as default};
