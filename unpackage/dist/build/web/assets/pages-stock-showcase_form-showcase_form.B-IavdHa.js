import{k as e,V as a,c as t,w as l,A as s,p as u,g as o,o as n,a as d,b as i,B as c,q as r,a2 as m,f as p,J as h,O as _,i as f,C as v}from"./index-D8OtiTi9.js";import{w as g,i as w}from"./config.BPuNpLTQ.js";import{c as V,g as k,u as x}from"./image.I4lmB4WI.js";import{_ as T}from"./_plugin-vue_export-helper.BCo6x5W8.js";const j=T({__name:"showcase_form",props:["showcase_id"],setup(T){const j=T,y=!!j.showcase_id,A=e(""),C=e(""),U=e("");function z(){V().then((e=>{k().then((a=>{x(e,a.token,a.path).then((e=>{200!=e.statusCode&&r({title:"上传失败",icon:"none"}),U.value=w+a.path,r({title:"上传成功",icon:"success"})}))}))}))}function O(){y?function(){let e={id:parseInt(j.showcase_id,10),name:A.value,description:C.value,image_url:U.value};u({url:g+"/with-state/update-showcase",method:"POST",header:{Authorization:s("token")},data:e,success:e=>{"success"==e.data.status?(r({title:"提交成功",icon:"success"}),setTimeout((()=>{m()}),500)):r({title:e.data.msg,icon:"none"})}})}():function(){let e={name:A.value,description:C.value,image_url:U.value};u({url:g+"/with-state/add-showcase",method:"POST",header:{Authorization:s("token")},data:e,success:e=>{"success"==e.data.status?(r({title:"提交成功",icon:"success"}),setTimeout((()=>{m()}),500)):r({title:e.data.msg,icon:"none"})}})}()}return y?(!function(e){let a=s("token");u({url:g+"/with-state/showcase-detail",method:"GET",header:{Authorization:a},data:{id:e},success:e=>{A.value=e.data.data.name,C.value=e.data.data.description,U.value=e.data.data.image_url},fail:e=>{console.log(e)}})}(j.showcase_id),a({title:"编辑展示柜"})):a({title:"新增展示柜"}),(e,a)=>{const s=p,u=h,r=o,m=_,g=f,w=v;return n(),t(r,{style:{padding:"15px"}},{default:l((()=>[d(r,null,{default:l((()=>[d(s,null,{default:l((()=>[i("展示柜名称")])),_:1}),d(u,{class:"inputer",type:"text",placeholder:"名称",modelValue:A.value,"onUpdate:modelValue":a[0]||(a[0]=e=>A.value=e)},null,8,["modelValue"])])),_:1}),d(r,null,{default:l((()=>[d(s,null,{default:l((()=>[i("展示柜描述")])),_:1}),d(m,{class:"inputer",placeholder:"描述",modelValue:C.value,"onUpdate:modelValue":a[1]||(a[1]=e=>C.value=e)},null,8,["modelValue"])])),_:1}),d(r,null,{default:l((()=>[d(s,null,{default:l((()=>[i("展示柜图片")])),_:1}),d(u,{class:"inputer",type:"text",placeholder:"图片URL",modelValue:U.value,"onUpdate:modelValue":a[2]||(a[2]=e=>U.value=e)},null,8,["modelValue"]),U.value?(n(),t(r,{key:0},{default:l((()=>[d(g,{mode:"aspectFill",src:U.value},null,8,["src"])])),_:1})):c("",!0),d(w,{class:"",onClick:z},{default:l((()=>[i("选择图片")])),_:1})])),_:1}),d(w,{class:"light_button",onClick:O},{default:l((()=>[i("提交")])),_:1})])),_:1})}}},[["__scopeId","data-v-1cc587d9"]]);export{j as default};
