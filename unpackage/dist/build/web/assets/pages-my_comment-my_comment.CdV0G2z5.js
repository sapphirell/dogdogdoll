import{r as a,o as e,q as t,j as s,a3 as l,a as o,c as n,w as c,g as r,b as i,d as u,v as d,x as m,F as g,e as _,p,f,S as v,t as h,D as b,A as k,n as y,i as w}from"./index-I3aG4WZL.js";import{_ as S}from"./view-logs.C4HVuFxK.js";import{_ as $,r as x}from"./_plugin-vue_export-helper.DF4WgY5m.js";import{w as j}from"./config.BjeWXQ7P.js";const C=$({__name:"my_comment",setup($){const C=a([]),D=a(1),F=a(10),z=a(0),A=a(!1),G=a(!1),M={1:{name:"品牌",class:"brand"},2:{name:"商品",class:"goods"},3:{name:"搭配",class:"collocation"},4:{name:"资讯",class:"news"},5:{name:"树洞",class:"treehole"},6:{name:"展示柜",class:"collocation"},7:{name:"文章",class:"collocation"}};e((()=>{q()}));const q=async(a=!1)=>{if(!A.value&&!G.value){A.value=!0;try{const e=await t({url:`${j}/with-state/my-comment`,method:"GET",header:{Authorization:s("token")},data:{page:D.value,page_size:F.value}});if("success"===e.data.status){const t=e.data.data;C.value=a?[...C.value,...t.comment_list]:t.comment_list,z.value=t.total,D.value++,G.value=C.value.length>=z.value}}finally{A.value=!1}}},E=()=>{G.value||q(!0)},H=a=>{let e="";const t=a.relation_id;switch(a.type){case 1:e=`/pages/brand/brand?brand_id=${t}`;break;case 2:e=`/pages/goods/goods?goods_id=${t}`;break;case 3:e=`/pages/collocation_share/collocation_share?collocation_id=${t}&origin=1`;break;case 4:e=`/pages/sale_news/sale_news?id=${t}&brand_id=0`;break;case 5:e=`/pages/treehole_detail/treehole_detail?id=${t}`;break;case 6:e=`/pages/collocation_share/collocation_share?collocation_id=${t}&origin=2`;break;default:return void k({title:"未知类型",icon:"none"})}e&&y({url:e})},I=a=>{var e;return(null==(e=M[a])?void 0:e.name)||"未知"};function T(a){const e=new Date(1e3*a);return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}`}return l({title:"我的评论"}),(a,e)=>{const t=x(o("view-logs"),S),s=w,l=f,k=r,y=v;return i(),n(k,{class:"page-container"},{default:c((()=>[u(t),u(y,{class:"comment-list","scroll-y":"",onScrolltolower:E,"show-scrollbar":!1},{default:c((()=>[(i(!0),d(g,null,m(C.value,((a,e)=>(i(),n(k,{key:e,class:"comment-item",onClick:e=>H(a)},{default:c((()=>[u(k,{class:"user-info"},{default:c((()=>[u(s,{class:"avatar",src:a.avatar||"/static/default-avatar.png",mode:"aspectFill"},null,8,["src"]),u(k,{class:"user-meta"},{default:c((()=>[u(l,{class:"username"},{default:c((()=>[_(h(a.username),1)])),_:2},1024),u(l,{class:"time"},{default:c((()=>[_(h(T(a.created_at)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),u(k,{class:"content-box"},{default:c((()=>[u(l,{class:"content"},{default:c((()=>[_(h(a.comment),1)])),_:2},1024)])),_:2},1024),u(k,{class:"target-box",onClick:e=>H(a)},{default:c((()=>[a.target_image?(i(),n(s,{key:0,class:"target-image",src:a.target_image,mode:"aspectFill"},null,8,["src"])):p("",!0),u(k,{class:"target-info"},{default:c((()=>{return[u(k,{class:b(["type-tag",(e=a.type,(null==(t=M[e])?void 0:t.class)||"")])},{default:c((()=>[_(h(I(a.type)),1)])),_:2},1032,["class"]),u(l,{class:"target-name"},{default:c((()=>[_(h(a.target_name),1)])),_:2},1024)];var e,t})),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1032,["onClick"])))),128)),u(k,{class:"loading-status"},{default:c((()=>[A.value?(i(),n(l,{key:0,class:"loading-text"},{default:c((()=>[_("加载中...")])),_:1})):p("",!0),G.value?(i(),n(l,{key:1,class:"no-more-text"},{default:c((()=>[_("没有更多了")])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-05128455"]]);export{C as default};
