import{_ as e,h as t,c as a,w as l,g as s,o,u as n,a as u,b as d,K as i,t as c,v as p,l as r,C as _,m as f,N as h,f as m,D as v}from"./index-u2rUIk8T.js";import{g as x,a as g,w as y}from"./config.DgkxgtZ3.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";const b=k({__name:"tel_phone",setup(k){e({title:"手机号"});let b=t(""),V=t(""),w=t("发送验证码");function z(){r({url:y+"/with-state/update-profile",method:"POST",header:{Authorization:_("token")},data:{tel_phone:b.value,code:V.value},success:e=>{console.log(e.data),"success"==e.data.status?(f({title:"修改成功",icon:"success"}),x()):f({title:e.data.msg,icon:"none"})}})}function I(){"发送验证码"==w.value?""!=b.value&&""!=b.value?/^1[3456789]\d{9}$/.test(b.value)?(w.value="发送中",r({url:y+"/send-sms-code",method:"POST",header:{Authorization:_("token")},data:{tel_phone:b.value},success:e=>{console.log(e.data),"success"==e.data.status?(w.value="已发送",f({title:"发送成功",icon:"success"})):(f({title:e.data.msg,icon:"none"}),w.value="发送验证码")}})):f({title:"手机号格式错误",icon:"none"}):f({title:"请输入手机号和密码",icon:"none"}):f({title:"请点击发送验证码",icon:"none"})}return x(),(e,t)=>{const r=h,_=m,f=s,x=v;return o(),a(f,{style:{padding:"15px"}},{default:l((()=>[n(g).userInfo.tel_phone?(o(),a(f,{key:0},{default:l((()=>[u(r,{type:"text",class:"inputer",value:n(g).userInfo.tel_phone,disabled:""},null,8,["value"]),u(_,{style:{padding:"10px","font-size":"20px",color:"rgb(190 190 190)"}},{default:l((()=>[d("已绑定，如需修改请联系管理员操作。")])),_:1})])),_:1})):(o(),a(f,{key:1},{default:l((()=>[u(r,{class:"inputer",type:"text",placeholder:"请输入手机号",modelValue:n(b),"onUpdate:modelValue":t[0]||(t[0]=e=>i(b)?b.value=e:b=e)},null,8,["modelValue"]),u(f,{style:{position:"relative"}},{default:l((()=>[u(r,{class:"inputer",type:"text",placeholder:"请输入验证码",modelValue:n(V),"onUpdate:modelValue":t[1]||(t[1]=e=>i(V)?V.value=e:V=e)},null,8,["modelValue"]),u(x,{style:{position:"absolute",right:"0px",width:"110px","font-size":"16px",bottom:"10px"},onClick:I},{default:l((()=>[u(_,null,{default:l((()=>[d(c(n(w)),1)])),_:1})])),_:1})])),_:1})])),_:1})),n(g).userInfo.tel_phone?p("",!0):(o(),a(x,{key:2,class:"light_button",onClick:z},{default:l((()=>[d("提交")])),_:1}))])),_:1})}}},[["__scopeId","data-v-daa99446"]]);export{b as default};
