import{g as a,ac as e,$ as t,c as l,w as s,C as o,l as u,f as d,o as i,a as c,b as n,t as r,u as m,v as f,m as p,a9 as v,e as _,Q as h,E as g,i as b,H as y}from"./index-CfMR_IzQ.js";import{_ as k}from"./info-circle.U4M77mlp.js";import{w}from"./config.BX5UpUDr.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=x({__name:"bill_form",props:["bill_id"],setup(x){const C=x,S=!!C.bill_id,V=a(""),T=a(""),j=a(""),A=a(0),F=["未补款","已补款"];const $=a("");function z(a){const e=a.detail.value;j.value=e,$.value=D(e)}function D(a){let e=new Date(a);return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`}function E(a){A.value=a.detail.value}function I(){S?function(){let a={id:parseInt(C.bill_id,10),name:V.value,price:parseFloat(T.value),ymd:j.value,status:A.value};u({url:w+"/with-state/update-tail-bill",method:"POST",header:{Authorization:o("token")},data:a,success:a=>{"success"==a.data.status?(p({title:"提交成功",icon:"success"}),setTimeout((()=>{v()}),500)):p({title:a.data.msg,icon:"none"})}})}():function(){let a={name:V.value,price:parseFloat(T.value),ymd:j.value,status:A.value};u({url:w+"/with-state/add-tail-bill",method:"POST",header:{Authorization:o("token")},data:a,success:a=>{"success"==a.data.status?(p({title:"提交成功",icon:"success"}),setTimeout((()=>{v()}),500)):p({title:a.data.msg,icon:"none"})}})}()}return e((()=>{S?(!function(a){let e=o("token");u({url:w+"/with-state/tail-bill-detail",method:"GET",header:{Authorization:e},data:{id:a},success:a=>{V.value=a.data.data.name,T.value=a.data.data.price,j.value=a.data.data.ymd,A.value=a.data.data.status,$.value=D(a.data.data.ymd)},fail:a=>{console.log(a)}})}(C.bill_id),t({title:"编辑账单"})):t({title:"新增账单"})})),(a,e)=>{const t=_,o=h,u=d,p=g,v=b,w=y;return i(),l(u,{class:"container"},{default:s((()=>[c(u,{class:"form-card"},{default:s((()=>[c(u,{class:"form-item"},{default:s((()=>[c(t,{class:"form-label"},{default:s((()=>[n("账单名称")])),_:1}),c(o,{class:"form-input",type:"text",placeholder:"请输入名称","placeholder-class":"placeholder-style",modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=a=>V.value=a)},null,8,["modelValue"])])),_:1}),c(u,{class:"form-item"},{default:s((()=>[c(t,{class:"form-label"},{default:s((()=>[n("账单金额")])),_:1}),c(o,{class:"form-input",type:"digit",placeholder:"请输入金额","placeholder-class":"placeholder-style",modelValue:T.value,"onUpdate:modelValue":e[1]||(e[1]=a=>T.value=a)},null,8,["modelValue"])])),_:1}),c(u,{class:"form-item"},{default:s((()=>[c(t,{class:"form-label"},{default:s((()=>[n("账单日期")])),_:1}),c(p,{mode:"date",class:"form-input",value:$.value,onChange:z},{default:s((()=>[c(u,{class:"picker-content"},{default:s((()=>[n(r($.value||"请选择日期"),1)])),_:1})])),_:1},8,["value"])])),_:1}),c(u,{class:"form-item"},{default:s((()=>[c(t,{class:"form-label"},{default:s((()=>[n("账单状态")])),_:1}),c(p,{mode:"selector",class:"form-input",value:A.value,range:F,onChange:E},{default:s((()=>[c(u,{class:"picker-content"},{default:s((()=>[n(r(F[A.value]||"请选择状态"),1)])),_:1})])),_:1},8,["value"])])),_:1}),c(u,{style:{overflow:"hidden"}},{default:s((()=>[c(v,{src:k,mode:"aspectFill",style:{width:"28rpx",height:"28rpx","margin-right":"10rpx",position:"relative",top:"3rpx"}}),c(t,{style:{color:"#888"}},{default:s((()=>[n("仅用于您的记账，其他人不会看到")])),_:1})])),_:1})])),_:1}),c(u,{class:"button-group"},{default:s((()=>[c(w,{class:"submit-button",onClick:I},{default:s((()=>[n(" 提交"+r(m(S)?"修改":"新增"),1)])),_:1}),m(S)?(i(),l(w,{key:0,class:"delete-button",onClick:a.handleDelete},{default:s((()=>[n(" 删除账单 ")])),_:1},8,["onClick"])):f("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-577d2293"]]);export{C as default};
