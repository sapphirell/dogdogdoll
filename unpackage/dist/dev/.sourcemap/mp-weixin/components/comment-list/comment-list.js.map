{"version":3,"file":"comment-list.js","sources":["components/comment-list/comment-list.vue","/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/comment-list/comment-list.vue?type=component"],"sourcesContent":["<!-- components/comment-list.vue -->\n<template>\n\t<view class=\"comment-container\">\n\t\t<view class=\"comment-count\" v-if=\"commentList.length > 0\">\n\t\t\t共{{ mainCommentsTotal }}条回复\n\t\t</view>\n\t\t<view class=\"empty-tips\" v-else>\n\t\t\t<text>-- 暂无回复 --</text>\n\t\t</view>\n\t\t<!-- 评论列表 -->\n\t\t<view v-for=\"comment in commentList\" :key=\"comment.id\" class=\"comment-card\">\n\t\t\t<!-- 主评论 -->\n\t\t\t<view class=\"main-comment\">\n\t\t\t\t<image @tap=\"jump2user(comment.uid)\" :src=\"comment.avatar\" class=\"avatar\" mode=\"aspectFill\" />\n\t\t\t\t<view class=\"content\">\n\t\t\t\t\t<view class=\"header\">\n\t\t\t\t\t\t<view>\n\t\t\t\t\t\t\t<text class=\"username\"\n\t\t\t\t\t\t\t\t@tap=\"jump2user(comment.uid)\">{{ formatUsername(comment.username) }}</text>\n\t\t\t\t\t\t\t<text class=\"floor\">#{{ comment.floor }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<report-button :report-type=5 :relation-id=\"comment.id\" button-text=\"举报\" icon-color=\"#999\"\n\t\t\t\t\t\t\ttheme-color=\"#64c6dc\" icon-size=\"24\" />\n\n\t\t\t\t\t</view>\n\t\t\t\t\t<!-- 新增：评论图片展示 -->\n\t\t\t\t\t<view v-if=\"comment.image_url\" class=\"comment-images\">\n\t\t\t\t\t\t<image :src=\"comment.image_url\" mode=\"aspectFill\" class=\"comment-image\"\n\t\t\t\t\t\t\t@tap=\"previewImage(comment.image_url)\" />\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"comment-text\" @click=\"handleReply(comment)\">{{ comment.comment }}</text>\n\t\t\t\t\t<!-- 新增：关联信息展示 -->\n\t\t\t\t\t  <view v-if=\"comment.association_id\" class=\"association-card\" @click=\"navigateToAssociation(comment)\">\n\t\t\t\t\t    <image :src=\"comment.association_image\" mode=\"aspectFill\" class=\"association-image\" />\n\t\t\t\t\t    <view class=\"association-info\">\n\t\t\t\t\t      <text class=\"association-name\">{{ comment.association_name }}</text>\n\t\t\t\t\t      <text class=\"association-type\">{{ getAssociationTypeText(comment.association_type) }}</text>\n\t\t\t\t\t    </view>\n\t\t\t\t\t    <uni-icons type=\"arrow-right\" size=\"20\" color=\"#999\" class=\"association-arrow\" />\n\t\t\t\t\t  </view>\n\n\t\t\t\t\t<view class=\"footer\">\n\t\t\t\t\t\t<view class=\"left-actions\">\n\t\t\t\t\t\t\t<text class=\"time\">{{ formatTime(comment.created_at) }}</text>\n\t\t\t\t\t\t\t<view class=\"like-container\">\n\t\t\t\t\t\t\t\t<view class=\"like-btn\" @click=\"handleLike(comment)\">\n\t\t\t\t\t\t\t\t\t<uni-icons :type=\"comment.user_like ? 'hand-up-filled' : 'hand-up'\" size=\"18\"\n\t\t\t\t\t\t\t\t\t\t:color=\"comment.user_like ? 'rgb(100 198 220)' : '#999'\" />\n\t\t\t\t\t\t\t\t\t<text class=\"like-count\" :class=\"{ liked: comment.user_like }\">\n\t\t\t\t\t\t\t\t\t\t{{ comment.like_count || 0 }}\n\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\n\n\t\t\t\t\t\t<view class=\"right-actions\">\n\t\t\t\t\t\t\t<!-- 新增表态按钮组 -->\n\t\t\t\t\t\t\t<attitude-widget :target-id=\"comment.id\" :type=\"6\" :attitude-status=\"comment.attitudeStatus\"\n\t\t\t\t\t\t\t\t:attitude-counts=\"comment.attitudeCounts\"\n\t\t\t\t\t\t\t\t@change=\"handleAttitudeChange(comment, $event)\" />\n\n\t\t\t\t\t\t\t<text class=\"reply-btn\" @click=\"handleReply(comment)\">回复</text>\n\t\t\t\t\t\t</view>\n\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 子评论 -->\n\t\t\t<view v-if=\"comment.localChildren && comment.localChildren.length\" class=\"sub-comments\">\n\t\t\t\t<view v-for=\"(child, index) in visibleChildren(comment)\" :key=\"child.id\" class=\"sub-comment\">\n\t\t\t\t\t<image @tap=\"jump2user(child.uid)\" :src=\"child.avatar\" class=\"avatar\" mode=\"aspectFill\" />\n\t\t\t\t\t<view class=\"content\">\n\t\t\t\t\t\t<view class=\"header\">\n\t\t\t\t\t\t\t<text @tap=\"jump2user(child.uid)\"\n\t\t\t\t\t\t\t\tclass=\"username\">{{ formatUsername(child.username) }}</text>\n\t\t\t\t\t\t\t<!-- <text v-if=\"child.reply_for\" class=\"reply-to\">@{{ child.reply_for }}</text> -->\n\t\t\t\t\t\t\t<report-button :report-type=5 :relation-id=\"child.id\" button-text=\"举报\" icon-color=\"#999\"\n\t\t\t\t\t\t\t\ttheme-color=\"#64c6dc\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<!-- 评论图片 -->\n\t\t\t\t\t\t<view v-if=\"child.image_url\" class=\"comment-images\">\n\t\t\t\t\t\t\t<image :src=\"child.image_url\" mode=\"aspectFill\" class=\"comment-image\"\n\t\t\t\t\t\t\t\t@tap=\"previewImage(child.image_url)\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<text class=\"comment-text\" @click=\"handleReply(comment)\">{{ child.comment }}</text>\n\n\n\t\t\t\t\t\t <view v-if=\"child.association_id\" class=\"association-card\" @click=\"navigateToAssociation(child)\">\n\t\t\t\t\t\t    <image :src=\"child.association_image\" mode=\"aspectFill\" class=\"association-image\" />\n\t\t\t\t\t\t    <view class=\"association-info\">\n\t\t\t\t\t\t      <text class=\"association-name\">{{ child.association_name }}</text>\n\t\t\t\t\t\t      <text class=\"association-type\">{{ getAssociationTypeText(child.association_type) }}</text>\n\t\t\t\t\t\t    </view>\n\t\t\t\t\t\t    <uni-icons type=\"arrow-right\" size=\"20\" color=\"#999\" class=\"association-arrow\" />\n\t\t\t\t\t\t  </view>\n\n\n\n\t\t\t\t\t\t<view class=\"footer\">\n\t\t\t\t\t\t\t<view class=\"left-actions\">\n\t\t\t\t\t\t\t\t<text class=\"time\">{{ formatTime(child.created_at) }}</text>\n\t\t\t\t\t\t\t\t<view class=\"like-container\">\n\t\t\t\t\t\t\t\t\t<view class=\"like-btn\" @click=\"handleLike(child)\">\n\t\t\t\t\t\t\t\t\t\t<uni-icons :type=\"child.user_like ? 'hand-up-filled' : 'hand-up'\" size=\"18\"\n\t\t\t\t\t\t\t\t\t\t\t:color=\"child.user_like ? 'rgb(100 198 220)' : '#999'\" />\n\t\t\t\t\t\t\t\t\t\t<text class=\"like-count\" :class=\"{ liked: child.user_like }\">\n\t\t\t\t\t\t\t\t\t\t\t{{ child.like_count || 0 }}\n\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t<view class=\"right-actions\">\n\t\t\t\t\t\t\t\t<!-- 新增表态按钮组 -->\n\t\t\t\t\t\t\t\t<attitude-widget :target-id=\"child.id\" :type=\"6\"\n\t\t\t\t\t\t\t\t\t:attitude-status=\"comment.attitudeStatus\" :attitude-counts=\"comment.attitudeCounts\"\n\t\t\t\t\t\t\t\t\t@change=\"handleAttitudeChange(comment, $event)\" />\n\n\t\t\t\t\t\t\t\t<text class=\"reply-btn\" @click=\"handleReply(comment, child)\">回复</text>\n\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 加载更多 -->\n\t\t\t\t<view v-if=\"shouldShowMore(comment)\" class=\"load-more\" @click=\"loadMore(comment)\">\n\t\t\t\t\t<text>展开{{ remainingCount(comment) }}条回复</text>\n\t\t\t\t\t<uni-icons type=\"arrow-down\" size=\"18\" color=\"#007AFF\" />\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\n\t\t<!-- 加载更多按钮 -->\n\t\t<view class=\"load-more-box\" v-if=\"commentList.length > 0\">\n\t\t\t<view v-if=\"hasMore\" class=\"load-more-btn\" @click=\"loadMoreMainComments\" :class=\"{loading: loading}\">\n\t\t\t\t<view v-if=\"!loading\">\n\t\t\t\t\t<text> 加载更多 </text>\n\t\t\t\t\t<uni-icons type=\"arrow-down\" size=\"18\" color=\"#007AFF\" />\n\t\t\t\t</view>\n\t\t\t\t<view v-else>\n\t\t\t\t\t<uni-icons type=\"spinner-cycle\" size=\"16\" color=\"#888\" />\n\t\t\t\t</view>\n\n\t\t\t</view>\n\t\t\t<view v-else class=\"no-more\">\n\t\t\t\t<text>-- 没有更多了 --</text>\n\t\t\t</view>\n\t\t</view>\n\n\n\t</view>\n</template>\n\n<script setup>\n\timport {\n\t\tref,\n\t\tcomputed,\n\t\tonMounted,\n\t\treactive\n\t} from 'vue'\n\timport {\n\t\twebsiteUrl,\n\t\tasyncGetUserInfo,\n\t\twechatSignLogin,\n\t\tgetScene,\n\t\tglobal,\n\t} from '../../common/config.js'\n\n\n\tconst props = defineProps({\n\t\ttype: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\trelationId: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t})\n\n\tconst commentList = ref([])\n\tconst currentPage = ref(1)\n\tconst mainCommentsTotal = ref(0)\n\t// 主贴是否有更多\n\tconst hasMore = ref(true)\n\n\tconst subCommentPages = reactive({})\n\tconst emit = defineEmits(['reply'])\n\n\tconst loading = ref(false)\n\t// 添加临时评论ID映射\n\tconst tempCommentMap = ref({})\n\t// 处理状态变化\n\tconst handleAttitudeChange = (comment, {\n\t\tstatus,\n\t\tcounts\n\t}) => {\n\t\tcomment.attitudeStatus = status\n\t\tcomment.attitudeCounts = counts\n\t}\n\n\n\t// 暴露给父组件的方法\n\tdefineExpose({\n\t  // 添加主评论（支持临时评论）\n\t  addNewComment: (comment) => {\n\t    // 标记为临时评论\n\t    const tempComment = {\n\t      ...comment,\n\t      isTemp: true,\n\t      showAll: false,\n\t      localChildren: [],\n\t      childTotal: 0\n\t    }\n\t    \n\t    // 保存到临时映射\n\t    tempCommentMap.value[comment.id] = tempComment\n\t    \n\t    commentList.value.unshift(tempComment)\n\t  },\n\t\n\t  // 添加回复评论（支持临时评论）\n\t  addReplyComment: (reply) => {\n\t    const parentId = reply.parent_id\n\t    const parent = commentList.value.find(c => c.id === parentId)\n\t    \n\t    if (parent) {\n\t      // 标记为临时评论\n\t      const tempReply = {\n\t        ...reply,\n\t        isTemp: true\n\t      }\n\t      \n\t      // 保存到临时映射\n\t      tempCommentMap.value[reply.id] = tempReply\n\t      \n\t      // 确保 localChildren 数组存在\n\t      if (!parent.localChildren) {\n\t        parent.localChildren = []\n\t      }\n\t      \n\t      // 确保 childTotal 存在\n\t      if (typeof parent.childTotal !== 'number') {\n\t        parent.childTotal = 0\n\t      }\n\t\n\t      parent.localChildren.unshift(tempReply)\n\t      parent.childTotal += 1\n\t\n\t      // 自动展开子评论列表\n\t      if (!parent.showAll && parent.childTotal <= 5) {\n\t        parent.showAll = true\n\t      }\n\t    }\n\t  },\n\t\n\t  // 更新临时评论为真实评论\n\t  updateTempComment: (tempId, newComment) => {\n\t    // 更新主评论\n\t    const mainIndex = commentList.value.findIndex(c => c.id === tempId)\n\t    if (mainIndex !== -1) {\n\t      commentList.value[mainIndex] = {\n\t        ...newComment,\n\t        showAll: commentList.value[mainIndex].showAll,\n\t        localChildren: commentList.value[mainIndex].localChildren || [],\n\t        childTotal: commentList.value[mainIndex].childTotal || 0\n\t      }\n\t      delete tempCommentMap.value[tempId]\n\t      return\n\t    }\n\t    \n\t    // 更新子评论\n\t    for (const parent of commentList.value) {\n\t      if (parent.localChildren && parent.localChildren.length) {\n\t        const childIndex = parent.localChildren.findIndex(c => c.id === tempId)\n\t        if (childIndex !== -1) {\n\t          parent.localChildren[childIndex] = {\n\t            ...newComment,\n\t            // 保留原有的临时属性\n\t            parent_id: parent.localChildren[childIndex].parent_id\n\t          }\n\t          delete tempCommentMap.value[tempId]\n\t          return\n\t        }\n\t      }\n\t    }\n\t  },\n\t\n\t  // 移除临时评论\n\t  removeTempComment: (tempId) => {\n\t    // 从主评论移除\n\t    const mainIndex = commentList.value.findIndex(c => c.id === tempId)\n\t    if (mainIndex !== -1) {\n\t      commentList.value.splice(mainIndex, 1)\n\t      delete tempCommentMap.value[tempId]\n\t      return\n\t    }\n\t    \n\t    // 从子评论移除\n\t    for (const parent of commentList.value) {\n\t      if (parent.localChildren && parent.localChildren.length) {\n\t        const childIndex = parent.localChildren.findIndex(c => c.id === tempId)\n\t        if (childIndex !== -1) {\n\t          parent.localChildren.splice(childIndex, 1)\n\t          parent.childTotal = Math.max(0, parent.childTotal - 1)\n\t          delete tempCommentMap.value[tempId]\n\t          return\n\t        }\n\t      }\n\t    }\n\t  }\n\t})\n\t\n\t\n\n\t// 初始化加载评论\n\tonMounted(() => {\n\t\tloadMainComments()\n\t})\n\t// 增加缺失的visibleChildren计算属性\n\tconst visibleChildren = (comment) => {\n\t\tif (!comment.showAll && comment.localChildren.length > 5) {\n\t\t\treturn comment.localChildren.slice(0, 5)\n\t\t}\n\t\treturn comment.localChildren\n\t}\n\t// 加载更多主评论\n\tconst loadMoreMainComments = async () => {\n\t\tif (loading.value || !hasMore.value) {\n\t\t\treturn\n\t\t}\n\t\ttry {\n\t\t\tloading.value = true\n\t\t\tcurrentPage.value += 1\n\t\t\tawait loadMainComments()\n\t\t} finally {\n\t\t\tloading.value = false\n\t\t}\n\t}\n\t// 新增方法：预览图片\n\tconst previewImage = (url) => {\n\t\tuni.previewImage({\n\t\t\turls: [url],\n\t\t\tcurrent: url\n\t\t})\n\t}\n\n\t// 处理点赞\n\tconst handleLike = async (comment) => {\n\t\tif (!global.isLogin) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请先登录',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\ttry {\n\t\t\tconst token = uni.getStorageSync('token')\n\t\t\tconst url = `${websiteUrl.value}/with-state/${comment.user_like ? 'unlike' : 'add-like'}`\n\t\t\tconst res = await uni.request({\n\t\t\t\turl,\n\t\t\t\tmethod: 'POST',\n\t\t\t\theader: {\n\t\t\t\t\tAuthorization: token\n\t\t\t\t},\n\t\t\t\tdata: {\n\t\t\t\t\tid: comment.id,\n\t\t\t\t\ttype: 6 // 评论类型\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tif (res.data.status === \"success\") {\n\t\t\t\t// 更新点赞状态和数量\n\t\t\t\tcomment.user_like = !comment.user_like\n\t\t\t\tif (comment.user_like) {\n\t\t\t\t\tcomment.like_count = (comment.like_count || 0) + 1\n\t\t\t\t} else {\n\t\t\t\t\tcomment.like_count = Math.max(0, (comment.like_count || 0) - 1)\n\t\t\t\t}\n\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: comment.user_like ? '点赞成功' : '已取消点赞',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: res.data.msg || '操作失败',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error('点赞失败:', err)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '操作失败',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t}\n\t}\n\n\tconst jump2user = (uid) => {\n\t\tuni.navigateTo({\n\t\t\turl: '/pages/user_page/user_page?uid=' + uid\n\t\t})\n\t}\n\t// 格式化显示\n\tconst formatTime = (timestamp) => {\n\t\tconst date = new Date(timestamp * 1000)\n\t\treturn `${date.getMonth()+1}-${date.getDate()} ${date.getHours()}:${date.getMinutes()}`\n\t}\n\n\tconst formatUsername = (name) => {\n\t  if (!name) return '未知用户' // 添加空值检查\n\t  return name.length > 12 ? name.slice(0, 12) + '...' : name\n\t}\n\n\t// 加载主评论\n\tconst loadMainComments = async () => {\n\t\ttry {\n\t\t\tloading.value = true\n\t\t\tlet token = uni.getStorageSync('token');\n\t\t\tconst res = await uni.request({\n\t\t\t\turl: `${websiteUrl.value}/get-comments`,\n\t\t\t\tdata: {\n\t\t\t\t\trelation_id: props.relationId,\n\t\t\t\t\ttype: props.type,\n\t\t\t\t\tpage: currentPage.value,\n\t\t\t\t\tpage_size: 10 // 添加分页大小\n\t\t\t\t},\n\t\t\t\theader: {\n\t\t\t\t\t'Authorization': token\n\t\t\t\t},\n\t\t\t})\n\n\t\t\tif (res.data.status === 'success') {\n\t\t\t\tconst data = res.data.data\n\t\t\t\tconst newComments = data.comment_list.map(c => ({\n\t\t\t\t\t...c,\n\t\t\t\t\tshowAll: false,\n\t\t\t\t\tlocalChildren: c.children || [],\n\t\t\t\t\tchildTotal: c.childTotal || (c.children ? c.children.length : 0),\n\t\t\t\t\t// 新增表态相关字段\n\t\t\t\t\tattitudeStatus: c.user_attitude || 0, // 当前用户表态状态\n\t\t\t\t\tattitudeCounts: c.attitude_counts || {\n\t\t\t\t\t\t1: c.count_1 || 0,\n\t\t\t\t\t\t2: c.count_2 || 0,\n\t\t\t\t\t\t3: c.count_3 || 0,\n\t\t\t\t\t\t4: c.count_4 || 0,\n\t\t\t\t\t\t5: c.count_5 || 0\n\t\t\t\t\t},\n\t\t\t\t}))\n\n\t\t\t\t// 第一页替换，后续追加\n\t\t\t\tif (currentPage.value === 1) {\n\t\t\t\t\tcommentList.value = newComments\n\t\t\t\t} else {\n\t\t\t\t\tcommentList.value.push(...newComments)\n\t\t\t\t}\n\t\t\t\tconsole.log(\"total\", data.total)\n\t\t\t\t// 判断是否还有更多\n\t\t\t\thasMore.value = data.total > commentList.value.length\n\t\t\t\tmainCommentsTotal.value = data.total\n\t\t\t\tconsole.log(\"是否还有更多?\", hasMore.value)\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '加载失败',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t} finally {\n\t\t\tloading.value = false\n\t\t}\n\t}\n\n\t// 处理回复\n\tconst handleReply = (parent, target = null) => {\n\t\temit('reply', {\n\t\t\tparent,\n\t\t\ttarget,\n\t\t\trelationId: props.relationId\n\t\t})\n\t}\n\n\t// 新增方法：获取关联类型文本\n\t  const getAssociationTypeText = (type) => {\n\t    return type === 1 ? '娃物' : type === 2 ? '店铺' : '关联内容';\n\t  }\n\n\t// 新增方法：跳转到关联页面\n\tconst navigateToAssociation = (comment) => {\n\t\tif (!comment.association_id) return\n\n\t\tif (comment.association_type === 1) {\n\t\t\t// 跳转到商品页面\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/goods/goods?goods_id=${comment.association_id}`\n\t\t\t})\n\t\t} else if (comment.association_type === 2) {\n\t\t\t// 跳转到品牌页面\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/brand/brand?brand_id=${comment.association_id}`\n\t\t\t})\n\t\t}\n\t}\n\n\tconst shouldShowMore = (comment) => {\n\t\treturn comment.childTotal > 5 && !comment.showAll\n\t}\n\t// 剩余数量计算\n\tconst remainingCount = (comment) => {\n\t\treturn comment.childTotal - Math.min(comment.localChildren.length, 5)\n\t}\n\n\t// 修正后的加载更多逻辑\n\tconst loadMore = async (comment) => {\n\t\tif (comment.localChildren.length < comment.childTotal) {\n\t\t\tconst nextPage = Math.ceil(comment.localChildren.length / 5) + 1\n\t\t\ttry {\n\t\t\t\tconst res = await uni.request({\n\t\t\t\t\turl: `${websiteUrl.value}/get-comments-by-parent-id`,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tparent_id: comment.id,\n\t\t\t\t\t\tpage: nextPage\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\tif (res.data.status === 'success') {\n\t\t\t\t\tcomment.localChildren = [\n\t\t\t\t\t\t...comment.localChildren,\n\t\t\t\t\t\t...res.data.data.comment_list\n\t\t\t\t\t]\n\t\t\t\t\tcomment.childTotal = res.data.data.total\n\n\t\t\t\t\t// 如果加载后仍然未完全展开，保持折叠状态\n\t\t\t\t\tif (comment.localChildren.length >= 5 && !comment.showAll) {\n\t\t\t\t\t\tcomment.showAll = true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '加载失败',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t}\n\t\t} else {\n\t\t\tcomment.showAll = !comment.showAll\n\t\t}\n\t}\n</script>\n\n<style lang=\"less\">\n\t.comment-container {\n\t\tpadding: 20rpx;\n\t\t// background: #f8f8f8;\n\n\t\t.comment-count {\n\t\t\tpadding: 20rpx 24rpx;\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #999;\n\t\t\tmargin-bottom: 20rpx;\n\t\t}\n\n\t\t.empty-tips {\n\t\t\ttext-align: center;\n\t\t\tpadding: 100rpx 0;\n\n\t\t\ttext {\n\t\t\t\tcolor: #999;\n\t\t\t\tfont-size: 22rpx;\n\t\t\t}\n\n\t\t}\n\t}\n\n\t.comment-card {\n\t\tbackground: #fff;\n\t\tborder-radius: 16rpx;\n\t\tmargin-bottom: 24rpx;\n\t\tpadding: 24rpx;\n\t\t// box-shadow: 0 4rpx 22rpx rgba(0, 0, 0, 0.05);\n\t}\n\n\t.main-comment,\n\t.sub-comment {\n\t\tdisplay: flex;\n\n\t\t.avatar {\n\t\t\twidth: 72rpx;\n\t\t\theight: 72rpx;\n\t\t\tborder-radius: 50%;\n\t\t\tmargin-right: 24rpx;\n\t\t\tflex-shrink: 0;\n\t\t\tborder: 2rpx solid #f0f0f0;\n\t\t}\n\n\t\t.content {\n\t\t\tflex: 1;\n\t\t\tmin-height: 120rpx; // 添加最小高度\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column; // 改为纵向布局\n\n\t\t\t.header {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tmargin-bottom: 12rpx;\n\n\t\t\t\t.username {\n\t\t\t\t\tfont-size: 22rpx;\n\t\t\t\t\tcolor: #b2b8bc;\n\t\t\t\t\tfont-weight: 500;\n\t\t\t\t\tmax-width: 400rpx;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\t}\n\n\t\t\t\t.floor {\n\t\t\t\t\tfont-size: 20rpx;\n\t\t\t\t\tcolor: #999;\n\t\t\t\t\tmargin-left: 16rpx;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.comment-text {\n\t\t\t\tfont-size: 22rpx;\n\t\t\t\tcolor: #494b4b;\n\t\t\t\tline-height: 1.6;\n\t\t\t\tmargin-bottom: 16rpx;\n\t\t\t\tflex: 1; // 内容区域撑满空间\n\t\t\t\tmargin-bottom: 10rpx;\n\t\t\t\tmin-height: 60rpx; // 内容最小高度\n\t\t\t}\n\n\n\t\t}\n\t}\n\n\t.sub-comments {\n\t\tmargin-left: 72rpx;\n\t\tpadding-left: 24rpx;\n\t\tborder-left: 2rpx solid #eee;\n\n\t\t.sub-comment {\n\t\t\tmargin-top: 24rpx;\n\n\t\t\t.avatar {\n\t\t\t\twidth: 56rpx;\n\t\t\t\theight: 56rpx;\n\t\t\t}\n\n\t\t\t.header {\n\t\t\t\t.reply-to {\n\t\t\t\t\tcolor: #00aadb;\n\t\t\t\t\tmargin-left: 12rpx;\n\t\t\t\t\tfont-size: 20rpx;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t&.folded {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\n\t\t.load-more {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\n\t\t\ttext {\n\t\t\t\tfont-size: 22rpx;\n\t\t\t}\n\n\t\t\tpadding: 16rpx;\n\t\t\tmargin-top: 16rpx;\n\t\t\tbackground: none;\n\t\t\tborder-radius: 8rpx;\n\n\t\t\tuni-icons {\n\t\t\t\tmargin-left: 8rpx;\n\t\t\t}\n\t\t}\n\t}\n\n\t.load-more-box {\n\t\ttext-align: center;\n\t\tpadding: 30rpx 0;\n\n\t\t.load-more-btn {\n\t\t\tpadding: 12rpx 24rpx;\n\t\t\tborder-radius: 40rpx;\n\t\t}\n\n\t\t.no-more {\n\t\t\tcolor: #999;\n\t\t\tfont-size: 24rpx;\n\t\t}\n\t}\n\n\n\t// 优化子评论布局\n\t.sub-comment {\n\t\tdisplay: flex;\n\t\tmargin-top: 24rpx;\n\n\t\t.avatar {\n\t\t\twidth: 56rpx !important; // 强制覆盖\n\t\t\theight: 56rpx !important;\n\t\t\tmargin-right: 20rpx;\n\t\t\tflex-shrink: 0;\n\t\t}\n\n\t\t.header {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tmargin-bottom: 10rpx;\n\n\t\t\t.username {\n\t\t\t\tfont-size: 22rpx;\n\t\t\t\tcolor: #888;\n\t\t\t\tmax-width: 180rpx;\n\t\t\t}\n\n\t\t\t.reply-to {\n\t\t\t\tcolor: #007AFF;\n\t\t\t\tmargin-left: 12rpx;\n\t\t\t\tfont-size: 20rpx;\n\t\t\t\tmax-width: 200rpx;\n\t\t\t\toverflow: hidden;\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t}\n\t\t}\n\n\t\t.comment-text {\n\t\t\tfont-size: 22rpx !important;\n\t\t\tcolor: #666 !important;\n\t\t\tline-height: 1.5;\n\t\t}\n\n\t}\n\n\n\t// 加载更多样式优化\n\t.load-more {\n\t\tmargin-top: 24rpx !important;\n\t\t// background: rgba(0, 122, 255, 0.05) !important;\n\t\tborder-radius: 8rpx !important;\n\t}\n\n\t.load-more-box {\n\t\tpadding: 30rpx 0;\n\t\ttext-align: center;\n\n\t\ttext {\n\t\t\tfont-size: 22rpx;\n\t\t}\n\n\t\t.load-more-btn {\n\t\t\tdisplay: inline-flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\theight: 64rpx;\n\t\t\tpadding: 0 40rpx;\n\t\t\tfont-size: 26rpx;\n\t\t\tborder-radius: 64rpx;\n\t\t\ttransition: all 0.3s;\n\n\n\n\t\t\t&.loading {\n\t\t\t\tcolor: #494b4b;\n\t\t\t\topacity: 0.8;\n\t\t\t\tpadding: 0 30rpx;\n\t\t\t}\n\n\t\t\tuni-icons {\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tmargin-left: 8rpx;\n\t\t\t\tanimation: rotating 1s linear infinite;\n\t\t\t}\n\t\t}\n\n\t\t.no-more {\n\t\t\tcolor: #999;\n\t\t\tfont-size: 24rpx;\n\t\t\tpadding: 20rpx 0;\n\t\t}\n\t}\n\n\t@keyframes rotating {\n\t\tfrom {\n\t\t\ttransform: rotate(0deg);\n\t\t}\n\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\n\t// 新增表态按钮样式\n\t.attitude-actions {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-right: 20rpx;\n\n\t\t.attitude-btn {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tpadding: 6rpx 12rpx;\n\t\t\tmargin-right: 10rpx;\n\t\t\tborder-radius: 20rpx;\n\t\t\tbackground: #f5f5f5;\n\t\t\ttransition: all 0.3s;\n\n\t\t\t&.active {\n\t\t\t\tbackground: #e0f0ff;\n\n\t\t\t\t.emoji,\n\t\t\t\t.count {\n\t\t\t\t\tcolor: #fff;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.emoji {\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tmargin-right: 4rpx;\n\t\t\t}\n\n\t\t\t.count {\n\t\t\t\tfont-size: 22rpx;\n\t\t\t\tcolor: #666;\n\t\t\t}\n\t\t}\n\t}\n\n\t// 调整原有回复按钮位置\n\t.reply-btn {\n\t\tmargin-left: auto;\n\t}\n\n\t// 移动端适配\n\t@media (max-width: 480px) {\n\t\t.attitude-actions {\n\t\t\t.attitude-btn {\n\t\t\t\tpadding: 4rpx 8rpx;\n\t\t\t\tmargin-right: 6rpx;\n\n\t\t\t\t.emoji {\n\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t}\n\n\t\t\t\t.count {\n\t\t\t\t\tfont-size: 18rpx;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\n\t.footer {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-top: 16rpx;\n\n\t\t.left-actions {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tgap: 20rpx;\n\n\t\t\t.time {\n\t\t\t\tfont-size: 20rpx;\n\t\t\t\tcolor: #999;\n\t\t\t}\n\n\t\t\t.like-container {\n\t\t\t\t.like-btn {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tgap: 8rpx;\n\t\t\t\t\tpadding: 6rpx 16rpx;\n\t\t\t\t\tborder-radius: 20rpx;\n\n\n\t\t\t\t\t.like-count {\n\t\t\t\t\t\tfont-size: 20rpx;\n\t\t\t\t\t\tcolor: #999;\n\n\t\t\t\t\t\t&.liked {\n\t\t\t\t\t\t\tcolor: rgb(100 198 220);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.right-actions {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\t/* 添加这行确保垂直居中 */\n\t\t\tgap: 10rpx;\n\t\t\t/* 添加间距使两个按钮分开 */\n\n\t\t\t.reply-btn {\n\t\t\t\tfont-size: 22rpx;\n\t\t\t\tcolor: #97b7df;\n\t\t\t\tpadding: 6rpx 20rpx;\n\t\t\t\tborder-radius: 24rpx;\n\t\t\t}\n\t\t}\n\t}\n\n\t/* 子评论操作栏微调 */\n\t.sub-comment .footer {\n\t\tmargin-top: 10rpx;\n\n\t\t.like-btn {\n\t\t\tpadding: 4rpx 12rpx;\n\t\t}\n\t}\n\n\t/* 新增：评论图片样式 */\n\t.comment-images {\n\t\tmargin: 15rpx 0;\n\n\t\t.comment-image {\n\t\t\twidth: 200rpx;\n\t\t\theight: 200rpx;\n\t\t\tborder-radius: 10rpx;\n\t\t}\n\t}\n\n\t/* 新增：关联链接样式 */\n\t  .association-card {\n\t    display: flex;\n\t    align-items: center;\n\t    padding: 16rpx;\n\t    background: #fff;\n\t    border-radius: 16rpx;\n\t    margin: 16rpx 0;\n\t    box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.05);\n\t    border: 1rpx solid #f0f0f0;\n\t    \n\t    .association-image {\n\t      width: 100rpx;\n\t      height: 100rpx;\n\t      border-radius: 12rpx;\n\t      margin-right: 20rpx;\n\t      background: #f8f8f8;\n\t    }\n\t    \n\t    .association-info {\n\t      flex: 1;\n\t      display: flex;\n\t      flex-direction: column;\n\t      overflow: hidden;\n\t      \n\t      .association-name {\n\t        font-size: 28rpx;\n\t        color: #333;\n\t        font-weight: bold;\n\t        overflow: hidden;\n\t        text-overflow: ellipsis;\n\t        white-space: nowrap;\n\t        margin-bottom: 6rpx;\n\t      }\n\t      \n\t      .association-type {\n\t        font-size: 22rpx;\n\t        color: #999;\n\t        background: #f7f7f7;\n\t        padding: 4rpx 12rpx;\n\t        border-radius: 20rpx;\n\t        align-self: flex-start;\n\t      }\n\t    }\n\t    \n\t    .association-arrow {\n\t      margin-left: 10rpx;\n\t      flex-shrink: 0;\n\t    }\n\t  }\n\t  \n\t  /* 删除原有的关联链接样式 */\n\t  .association-link {\n\t    display: none;\n\t  }\n\t  \n\t  /* 调整原有样式，确保新卡片布局协调 */\n\t  .comment-card {\n\t    padding-bottom: 10rpx; /* 减少底部内边距 */\n\t  }\n\t  \n\t  .footer {\n\t    margin-top: 10rpx; /* 减少顶部间距 */\n\t  }\n</style>","import Component from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/comment-list/comment-list.vue'\nwx.createComponent(Component)"],"names":["ref","reactive","onMounted","uni","global","websiteUrl","Component"],"mappings":"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"}