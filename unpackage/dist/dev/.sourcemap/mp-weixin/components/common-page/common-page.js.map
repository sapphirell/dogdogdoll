{"version":3,"file":"common-page.js","sources":["components/common-page/common-page.vue","/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/common-page/common-page.vue?type=component"],"sourcesContent":["<template>\n  <!-- 页面容器 -->\n  <view class=\"page-container\">\n    <!-- 顶部安全区域占位 -->\n    <view class=\"header-placeholder\"></view>\n    \n    <!-- 页面内容区域 -->\n    <view class=\"content-container\">\n      <!-- 这里放页面主要内容 -->\n      <scroll-view class=\"main-content\" scroll-y   @scroll=\"handleScroll\">\n        <slot></slot>\n      </scroll-view>\n    </view>\n    \n    <!-- 底部安全区域占位 -->\n    <view class=\"footer-placeholder\"></view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\n\n\nconst emit = defineEmits(['scroll'])\n\nconst handleScroll = (e) => {\n  emit('scroll', e.detail) // 传递滚动事件\n}\n// 获取系统信息\nconst systemInfo = uni.getSystemInfoSync()\n\n// 计算导航栏高度（小程序专用）\nconst navBarHeight = computed(() => {\n  // #ifdef MP-WEIXIN\n  const menuButtonInfo = uni.getMenuButtonBoundingClientRect()\n  // 确保状态栏高度存在（iOS可能为0）\n  const statusBarHeight = systemInfo.statusBarHeight || 32\n  return menuButtonInfo.bottom + menuButtonInfo.top - 2 * statusBarHeight\n  // #endif\n  return 0\n})\n// 参数\nconst props = defineProps({\n  head_color: {\n    type: String,\n    default: '#ffffff',\n}})\n\n// 计算顶部占位高度\nconst headerHeight = computed(() => {\n  // 小程序需要包含状态栏和导航栏高度\n  // #ifdef MP-WEIXIN\n  return navBarHeight.value + 'px'\n  // #endif\n  \n  // H5/App使用安全区域计算\n  return `calc(constant(safe-area-inset-top) + 20px)` // 默认值20px作为fallback\n})\n\n// 底部安全区域高度\nconst footerHeight = computed(() => {\n  // 通过系统信息获取安全区域值\n  const safeBottom = systemInfo.safeAreaInsets?.bottom || 0\n  return `${safeBottom + 20}px` // 直接返回计算后的像素值\n})\n</script>\n\n<style lang=\"less\">\n.page-container {\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n  // background-color: #f5f5f5;\n  // background: linear-gradient(180deg, rgb(218 238 255) 0%, rgb(255 255 255) 100%);\n  // 适配异形屏的安全区域\n  padding-left: constant(safe-area-inset-left);\n  padding-left: env(safe-area-inset-left);\n  padding-right: constant(safe-area-inset-right);\n  padding-right: env(safe-area-inset-right);\n}\n\n.header-placeholder {\n  height: v-bind(headerHeight);\n  background-color: v-bind('head_color');\n}\n\n.content-container {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.main-content {\n  flex: 1;\n  // padding: 20rpx;\n  // background-color: #ffffff;\n  overflow-y: auto;\n}\n\n.footer-placeholder {\n  height: v-bind(footerHeight);\n  background-color: #ffffff;\n  padding-bottom: constant(safe-area-inset-bottom);\n  padding-bottom: env(safe-area-inset-bottom);\n}\n\n// 适配iOS安全区域\n@supports (bottom: constant(safe-area-inset-bottom)) {\n  .page-container {\n    padding-bottom: constant(safe-area-inset-bottom);\n    padding-bottom: env(safe-area-inset-bottom);\n  }\n}\n</style>","import Component from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/common-page/common-page.vue'\nwx.createComponent(Component)"],"names":["uni","computed","Component"],"mappings":";;;;;;;;;;;;;;;;;AAuBA,UAAM,OAAO;AAEb,UAAM,eAAe,CAAC,MAAM;AAC1B,WAAK,UAAU,EAAE,MAAM;AAAA,IACzB;AAEA,UAAM,aAAaA,cAAG,MAAC,kBAAmB;AAG1C,UAAM,eAAeC,cAAQ,SAAC,MAAM;AAElC,YAAM,iBAAiBD,cAAG,MAAC,gCAAiC;AAE5D,YAAM,kBAAkB,WAAW,mBAAmB;AACtD,aAAO,eAAe,SAAS,eAAe,MAAM,IAAI;AAAA,IAG1D,CAAC;AASD,UAAM,eAAeC,cAAQ,SAAC,MAAM;AAGlC,aAAO,aAAa,QAAQ;AAAA,IAK9B,CAAC;AAGD,UAAM,eAAeA,cAAQ,SAAC,MAAM;;AAElC,YAAM,eAAa,gBAAW,mBAAX,mBAA2B,WAAU;AACxD,aAAO,GAAG,aAAa,EAAE;AAAA,IAC3B,CAAC;;;;;;;;;AC/DD,GAAG,gBAAgBC,SAAS;"}