{"version":3,"file":"common-page.js","sources":["components/common-page/common-page.vue","/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/common-page/common-page.vue?type=component"],"sourcesContent":["<template>\r\n\t<!-- 页面容器 -->\r\n\t<view class=\"page-container\">\r\n\t\t<!-- 顶部安全区域占位 -->\r\n\t\t<view class=\"header-placeholder\"></view>\n\t\t\r\n\r\n\t\t<!-- 页面内容区域 -->\r\n\t\t<view class=\"content-container\">\r\n\t\t\t<!-- 这里放页面主要内容 -->\r\n\t\t\t<view class=\"main-content\" scroll-y @scroll=\"handleScroll\">\r\n\t\t\t\t<slot></slot>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 底部安全区域占位 -->\r\n\t\t<view class=\"footer-placeholder\"></view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\tcomputed\r\n\t} from 'vue'\r\n\r\n\r\n\tconst emit = defineEmits(['scroll'])\r\n\r\n\tconst handleScroll = (e) => {\r\n\t\temit('scroll', e.detail) // 传递滚动事件\r\n\t}\r\n\t// 获取系统信息\r\n\tconst systemInfo = uni.getSystemInfoSync()\r\n\r\n\t// 计算导航栏高度（小程序专用）\r\n\tconst navBarHeight = computed(() => {\r\n\t\t// #ifdef MP-WEIXIN\r\n\t\tconst menuButtonInfo = uni.getMenuButtonBoundingClientRect()\r\n\t\t// 确保状态栏高度存在（iOS可能为0）\r\n\t\tconst statusBarHeight = systemInfo.statusBarHeight || 32\r\n\t\treturn menuButtonInfo.bottom + menuButtonInfo.top - 2 * statusBarHeight\r\n\t\t// #endif\r\n\t\treturn 0\r\n\t})\r\n\t// 参数\r\n\tconst props = defineProps({\r\n\t\thead_color: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '#ffffff',\r\n\t\t}\r\n\t})\r\n\r\n\t// 计算顶部占位高度\r\n\tconst headerHeight = computed(() => {\r\n\t\t// 小程序需要包含状态栏和导航栏高度\r\n\t\t// #ifdef MP-WEIXIN\r\n\t\treturn navBarHeight.value + 'px'\r\n\t\t// #endif\r\n\r\n\t\t// // H5/App使用安全区域计算\r\n\t\t// return `calc(constant(safe-area-inset-top) + 20px)` // 默认值20px作为fallback\r\n\t\t// #ifdef H5 || APP\r\n\t\t// 直接获取状态栏高度（iOS 安卓通用）\r\n\t\tconst statusBarHeight = systemInfo.statusBarHeight || 0\r\n\t\treturn `${statusBarHeight}px` // 44px 为 iOS 导航栏标准高度\r\n\t\t// #endif\r\n\t})\r\n\r\n\t// 底部安全区域高度\r\n\tconst footerHeight = computed(() => {\r\n\t\t// 通过系统信息获取安全区域值\r\n\t\tconst safeBottom = systemInfo.safeAreaInsets?.bottom || 0\r\n\t\treturn `${safeBottom + 20}px` // 直接返回计算后的像素值\r\n\t})\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\t.page-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tmin-height: 100vh;\r\n\t\t// background-color: #f5f5f5;\r\n\t\t// background: linear-gradient(180deg, rgb(218 238 255) 0%, rgb(255 255 255) 100%);\r\n\t\t// 适配异形屏的安全区域\r\n\t\tpadding-left: constant(safe-area-inset-left);\r\n\t\tpadding-left: env(safe-area-inset-left);\r\n\t\tpadding-right: constant(safe-area-inset-right);\r\n\t\tpadding-right: env(safe-area-inset-right);\r\n\t}\r\n\r\n\t.header-placeholder {\r\n\t\theight: v-bind(headerHeight);\r\n\t\tbackground: v-bind('head_color');\n\t\tbackground-size: cover;\n\t\tbackground-position: 0px 50rpx;\r\n\t}\r\n\r\n\t.content-container {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.main-content {\r\n\t\tflex: 1;\r\n\t\t// padding: 20rpx;\r\n\t\t// background-color: #ffffff;\r\n\t\toverflow-y: auto;\r\n\t}\r\n\r\n\t.footer-placeholder {\r\n\t\theight: v-bind(footerHeight);\r\n\t\tbackground-color: #ffffff;\r\n\t\tpadding-bottom: constant(safe-area-inset-bottom);\r\n\t\tpadding-bottom: env(safe-area-inset-bottom);\r\n\t}\r\n\r\n\t// 适配iOS安全区域\r\n\t@supports (bottom: constant(safe-area-inset-bottom)) {\r\n\t\t.page-container {\r\n\t\t\tpadding-bottom: constant(safe-area-inset-bottom);\r\n\t\t\tpadding-bottom: env(safe-area-inset-bottom);\r\n\t\t}\r\n\t}\r\n</style>","import Component from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/common-page/common-page.vue'\nwx.createComponent(Component)"],"names":["uni","computed","Component"],"mappings":";;;;;;;;;;;;;;;;;AA2BC,UAAM,OAAO;AAEb,UAAM,eAAe,CAAC,MAAM;AAC3B,WAAK,UAAU,EAAE,MAAM;AAAA,IACvB;AAED,UAAM,aAAaA,cAAG,MAAC,kBAAmB;AAG1C,UAAM,eAAeC,cAAAA,SAAS,MAAM;AAEnC,YAAM,iBAAiBD,cAAG,MAAC,gCAAiC;AAE5D,YAAM,kBAAkB,WAAW,mBAAmB;AACtD,aAAO,eAAe,SAAS,eAAe,MAAM,IAAI;AAAA,IAG1D,CAAE;AAUD,UAAM,eAAeC,cAAAA,SAAS,MAAM;AAGnC,aAAO,aAAa,QAAQ;AAAA,IAU9B,CAAE;AAGD,UAAM,eAAeA,cAAAA,SAAS,MAAM;;AAEnC,YAAM,eAAa,gBAAW,mBAAX,mBAA2B,WAAU;AACxD,aAAO,GAAG,aAAa,EAAE;AAAA,IAC3B,CAAE;;;;;;;;;ACzEF,GAAG,gBAAgBC,SAAS;"}