{"version":3,"file":"item-impression.js","sources":["components/item-impression/item-impression.vue","/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/item-impression/item-impression.vue?type=component"],"sourcesContent":["<template>\n\t<!-- 表态组件主容器 -->\n\t<view class=\"impression-container\">\n\t\t<!-- 标题区域 -->\n\t\t<view class=\"impression-header\">\n\t\t\t<text class=\"title\">你对它的印象怎样？</text>\n\t\t\t<text class=\"subtitle\">（轻触表态）</text>\n\t\t\t<!-- <text class=\"subtitle\">({{ totalCount }}条表态)</text> -->\n\t\t</view>\n\n\t\t<!-- 表态列表区域 - 换行布局 -->\n\t\t<view class=\"impression-list\">\n\t\t\t<!-- 所有表态项 -->\n\t\t\t<view \n\t\t\t\tv-for=\"(item, index) in allImpressions\" \n\t\t\t\t:key=\"item.id || 'default-' + item.content\"\n\t\t\t\t:class=\"['impression-item', { 'active': item.selected }]\"\n\t\t\t\t@tap=\"handleImpressionClick(item)\">\n\t\t\t\t<text class=\"impression-text\">{{ item.content }}</text>\n\t\t\t\t<text class=\"impression-count\">{{ item.count }}</text>\n\t\t\t</view>\n\n\t\t\t<!-- 添加新表态按钮 -->\n\t\t\t<view class=\"add-impression\" @tap=\"showAddModal\">\n\t\t\t\t<text class=\"plus-icon\">+</text>\n\t\t\t\t<text class=\"add-text\">添加表态</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 添加新表态模态框 -->\n\t\t<common-modal :visible=\"modalVisible\" @update:visible=\"modalVisible = $event\" width=\"80%\" top=\"30%\">\n\t\t\t<view class=\"modal-content\">\n\t\t\t\t<text class=\"modal-title\">添加新表态</text>\n\t\t\t\t<input class=\"input-field\" v-model=\"newImpression\" placeholder=\"请输入表态内容\"\n\t\t\t\t\tplaceholder-style=\"color: #aaa;\" @confirm=\"confirmAdd\" />\n\t\t\t\t<view class=\"modal-actions\">\n\t\t\t\t\t<button class=\"cancel-btn\" @tap=\"cancelAdd\">取消</button>\n\t\t\t\t\t<button class=\"confirm-btn\" @tap=\"confirmAdd\">确定</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</common-modal>\n\t</view>\n</template>\n\n<script setup>\n\timport {\n\t\tref,\n\t\tonMounted,\n\t\twatch,\n\t\tcomputed\n\t} from 'vue';\n\timport {\n\t\twebsiteUrl,\n\t\tasyncGetUserInfo\n\t} from '../../common/config.js';\n\n\t// 组件属性\n\tconst props = defineProps({\n\t\ttarget_id: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tgoodsType : {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t}\n\t});\n\n\t// 响应式数据\n\tconst impressions = ref([]); // 已有表态\n\tconst defaultImpressionTitles = ref([]); // 默认表态标题\n\tconst totalCount = ref(0);\n\tconst newImpression = ref('');\n\tconst modalVisible = ref(false);\n\tconst userInfo = ref(null);\n\n\n\t// 计算所有表态（合并已有和默认，并按数量排序）\n\tconst allImpressions = computed(() => {\n\t\t// 1. 创建已有表态的映射\n\t\tconst existingMap = {};\n\t\timpressions.value.forEach(item => {\n\t\t\texistingMap[item.content] = item;\n\t\t});\n\t\t\n\t\t// 2. 处理默认表态\n\t\tconst defaultItems = defaultImpressionTitles.value.map(title => {\n\t\t\t// 如果已有表态中有相同内容，则使用已有数据\n\t\t\tif (existingMap[title]) {\n\t\t\t\treturn {\n\t\t\t\t\t...existingMap[title],\n\t\t\t\t\tisDefault: true\n\t\t\t\t};\n\t\t\t}\n\t\t\t\n\t\t\t// 否则创建新的默认表态项\n\t\t\treturn {\n\t\t\t\tcontent: title,\n\t\t\t\tcount: 0,\n\t\t\t\tselected: false,\n\t\t\t\tisDefault: true\n\t\t\t};\n\t\t});\n\t\t\n\t\t// 3. 添加不在默认列表中的已有表态\n\t\tconst uniqueExisting = impressions.value.filter(item => \n\t\t\t!defaultImpressionTitles.value.includes(item.content)\n\t\t);\n\t\t\n\t\t// 4. 合并所有表态\n\t\tconst merged = [...defaultItems, ...uniqueExisting];\n\t\t\n\t\t// 5. 按照点赞数量从高到低排序\n\t\treturn merged.sort((a, b) => b.count - a.count);\n\t});\n\n\n\t// 获取默认表态列表 - 根据商品类型\n\tconst fetchDefaultImpressions = async () => {\n\t  try {\n\t    // 根据商品类型映射为接口需要的参数\n\t    let impressionType = 9; // 默认9\n\t    \n\t    // 根据商品类型映射\n\t    switch (props.goodsType) {\n\t      case \"整体\" || \"单体\": // 整体、单体\n\t        impressionType = 1;\n\t        break;\n\t      case \"单头\": // 单头\n\t        impressionType = 2;\n\t        break;\n\t      case \"娃衣\"||\"娃鞋\": // 娃衣、娃鞋等\n\t        impressionType = 3;\n\t        break;\n\t      case \"眼珠\": // 眼珠\n\t        impressionType = 4;\n\t        break;\n\t      case \"假发\": // 假发\n\t        impressionType = 5;\n\t        break;\n\t      default:\n\t        impressionType = 9; // 默认\n\t    }\n\t    \n\t    const res = await uni.request({\n\t      url: `${websiteUrl}/impression/default`,\n\t      method: 'GET',\n\t      data: {\n\t        type: impressionType\n\t      }\n\t    });\n\t    \n\t    if (res.statusCode === 200 && res.data.status === 'success') {\n\t      defaultImpressionTitles.value = res.data.data;\n\t    } else {\n\t      console.error('获取默认表态失败:', res.data);\n\t      uni.showToast({\n\t        title: '获取默认表态失败',\n\t        icon: 'none'\n\t      });\n\t    }\n\t  } catch (error) {\n\t    console.error('获取默认表态失败:', error);\n\t    uni.showToast({\n\t      title: '获取默认表态失败',\n\t      icon: 'none'\n\t    });\n\t  }\n\t};\n\n\t// 获取表态数据\n\tconst fetchImpressionData = async () => {\n\t\ttry {\n\t\t\t// 获取用户信息\n\t\t\tuserInfo.value = await asyncGetUserInfo();\n\n\t\t\t// 获取表态统计\n\t\t\tconst countsRes = await uni.request({\n\t\t\t\turl: `${websiteUrl}/impression/counts`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tdata: {\n\t\t\t\t\ttarget_id: parseInt(props.target_id, 10),\n\t\t\t\t\ttype_id: parseInt(props.type, 10),\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// 获取用户表态状态\n\t\t\tconst statusRes = await uni.request({\n\t\t\t\turl: `${websiteUrl}/with-state/impression/status`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tdata: {\n\t\t\t\t\ttarget_id: parseInt(props.target_id, 10),\n\t\t\t\t\ttype_id: parseInt(props.type, 10),\n\t\t\t\t},\n\t\t\t\theader: {\n\t\t\t\t\tAuthorization: uni.getStorageSync('token')\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// 处理数据\n\t\t\tif (countsRes.statusCode === 200 && countsRes.data.status === 'success') {\n\t\t\t\tconst countsData = countsRes.data.data;\n\n\t\t\t\t// 计算总表态数\n\t\t\t\ttotalCount.value = countsData.reduce((sum, item) => sum + item.count, 0);\n\n\t\t\t\t// 处理用户选择状态\n\t\t\t\tconst userSelected = statusRes.statusCode === 200 && statusRes.data.status === 'success' ?\n\t\t\t\t\tstatusRes.data.data.map(item => item.id) : [];\n\n\t\t\t\t// 组合数据\n\t\t\t\timpressions.value = countsData.map(item => ({\n\t\t\t\t\t...item,\n\t\t\t\t\tselected: userSelected.includes(item.id)\n\t\t\t\t}));\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('获取表态数据失败:', error);\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '获取表态数据失败',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t}\n\t};\n\n\t// 处理表态点击\n\tconst handleImpressionClick = async (item) => {\n\t\tif (!userInfo.value) {\n\t\t\t// 未登录处理\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请先登录',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\t// 1. 创建请求数据\n\t\t\tconst data = {\n\t\t\t\ttarget_id: parseInt(props.target_id, 10),\n\t\t\t\ttype_id: parseInt(props.type, 10),\n\t\t\t};\n\t\t\t\n\t\t\t// 2. 如果是默认表态且没有ID，则使用内容\n\t\t\tif (item.isDefault && !item.id) {\n\t\t\t\tdata.content = item.content;\n\t\t\t} else {\n\t\t\t\tdata.impression_id = item.id;\n\t\t\t}\n\n\t\t\tif (item.selected) {\n\t\t\t\t// 3. 移除表态\n\t\t\t\tconst res = await uni.request({\n\t\t\t\t\turl: `${websiteUrl}/with-state/impression/remove`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theader: {\n\t\t\t\t\t\tAuthorization: uni.getStorageSync('token'),\n\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t},\n\t\t\t\t\tdata: {\n\t\t\t\t\t\timpression_id: item.id\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (res.statusCode === 200 && res.data.status === 'success') {\n\t\t\t\t\t// 4. 更新状态 - 使用响应式方法\n\t\t\t\t\tupdateImpressionState(item, false);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// 5. 添加表态\n\t\t\t\tconst res = await uni.request({\n\t\t\t\t\turl: `${websiteUrl}/with-state/impression/add`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theader: {\n\t\t\t\t\t\tAuthorization: uni.getStorageSync('token'),\n\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t},\n\t\t\t\t\tdata\n\t\t\t\t});\n\n\t\t\t\tif (res.statusCode === 200 && res.data.status === 'success') {\n\t\t\t\t\t// 6. 更新状态 - 使用响应式方法\n\t\t\t\t\tupdateImpressionState(item, true, res.data.data.impression_id);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('操作失败:', error);\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '操作失败',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t}\n\t};\n\n\t// 更新表态状态（确保响应式更新）\n\tconst updateImpressionState = (item, isSelected, newId = null) => {\n\t\t// 1. 查找在 impressions 数组中的索引\n\t\tconst impressionIndex = impressions.value.findIndex(imp => \n\t\t\timp.id === item.id || imp.content === item.content\n\t\t);\n\t\t\n\t\t// 2. 如果是新表态（默认表态首次点击）\n\t\tif (impressionIndex === -1 && isSelected) {\n\t\t\t// 创建新表态对象\n\t\t\tconst newImpression = {\n\t\t\t\tid: newId,\n\t\t\t\tcontent: item.content,\n\t\t\t\tcount: 1,\n\t\t\t\tselected: true\n\t\t\t};\n\t\t\t\n\t\t\t// 添加到已有表态列表\n\t\t\timpressions.value = [...impressions.value, newImpression];\n\t\t\ttotalCount.value++;\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t// 3. 更新现有表态\n\t\tif (impressionIndex !== -1) {\n\t\t\t// 创建新数组确保响应式更新\n\t\t\tconst updatedImpressions = [...impressions.value];\n\t\t\tconst updatedItem = { ...updatedImpressions[impressionIndex] };\n\t\t\t\n\t\t\tif (isSelected) {\n\t\t\t\t// 选中状态\n\t\t\t\tupdatedItem.selected = true;\n\t\t\t\tupdatedItem.count = (updatedItem.count || 0) + 1;\n\t\t\t\tif (newId) updatedItem.id = newId; // 更新ID（如果是默认表态首次点击）\n\t\t\t\ttotalCount.value++;\n\t\t\t} else {\n\t\t\t\t// 取消选中状态\n\t\t\t\tupdatedItem.selected = false;\n\t\t\t\tupdatedItem.count = Math.max(0, updatedItem.count - 1);\n\t\t\t\ttotalCount.value--;\n\t\t\t}\n\t\t\t\n\t\t\t// 更新数组\n\t\t\tupdatedImpressions[impressionIndex] = updatedItem;\n\t\t\timpressions.value = updatedImpressions;\n\t\t}\n\t};\n\n\t// 显示添加模态框\n\tconst showAddModal = () => {\n\t\tif (!userInfo.value) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请先登录',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tnewImpression.value = '';\n\t\tmodalVisible.value = true;\n\t};\n\n\t// 取消添加\n\tconst cancelAdd = () => {\n\t\tmodalVisible.value = false;\n\t};\n\n\t// 确认添加新表态\n\tconst confirmAdd = async () => {\n\t\tif (!newImpression.value.trim()) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请输入表态内容',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst res = await uni.request({\n\t\t\t\turl: `${websiteUrl}/with-state/impression/add`,\n\t\t\t\tmethod: 'POST',\n\t\t\t\theader: {\n\t\t\t\t\tAuthorization: uni.getStorageSync('token'),\n\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t},\n\t\t\t\tdata: {\n\t\t\t\t\ttarget_id: parseInt(props.target_id, 10),\n\t\t\t\t\ttype_id: parseInt(props.type, 10),\n\t\t\t\t\tcontent: newImpression.value.trim()\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (res.statusCode === 200 && res.data.status === 'success') {\n\t\t\t\t// 添加新表态到列表（使用响应式更新）\n\t\t\t\timpressions.value = [\n\t\t\t\t\t...impressions.value,\n\t\t\t\t\t{\n\t\t\t\t\t\tid: res.data.data.impression_id,\n\t\t\t\t\t\tcontent: newImpression.value.trim(),\n\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\tselected: true\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t\ttotalCount.value++;\n\n\t\t\t\tmodalVisible.value = false;\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '添加成功',\n\t\t\t\t\ticon: 'success'\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('添加表态失败:', error);\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '添加表态失败',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t}\n\t};\n\n\t// 监听属性变化\n\twatch(() => [props.target_id, props.type], fetchImpressionData, {\n\t\timmediate: true\n\t});\n\n\t// 组件挂载时加载数据\n\tonMounted(() => {\n\t\tfetchDefaultImpressions();\n\t\tfetchImpressionData();\n\t});\n</script>\n\n<style lang=\"less\">\n\t.impression-container {\n\t\tpadding: 20rpx 30rpx;\n\t\tbackground-color: #fff;\n\t\tborder-radius: 16rpx;\n\t\tbox-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.05);\n\t}\n\n\t.impression-header {\n\t\tdisplay: flex;\n\t\talign-items: baseline;\n\t\tmargin-bottom: 20rpx;\n\n\t\t.title {\n\t\t    display: block;\n\t\t    font-size: 26rpx;\n\t\t    font-weight: bold;\n\t\t    color: #64c6dc;\n\t\t    margin-bottom: 0.78125rem;\n\t\t    padding-left: 0.3125rem;\n\t\t    border-left: 0.25rem solid #64c6dc;\n\t\t\tmargin-left: 10rpx;\n\t\t}\n\n\t\t.subtitle {\n\t\t\tfont-size: 22rpx; /* 调小字体 */\n\t\t\tcolor: #999;\n\t\t}\n\t}\n\n\t/* 换行布局 */\n\t.impression-list {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tgap: 16rpx; /* 减小间距 */\n\t}\n\n\t.impression-item {\n\t\tpadding: 12rpx 20rpx; /* 减小内边距 */\n\t\tbackground-color: #f5f7fa;\n\t\tborder-radius: 32rpx; /* 调小圆角 */\n\t\tdisplay: inline-flex;\n\t\talign-items: center;\n\t\ttransition: all 0.3s ease;\n\t\tflex-shrink: 0;\n\n\t\t&.active {\n\t\t\tbackground-color: #e6f9fc; /* 浅蓝色背景 */\n\t\t\tborder: 1rpx solid #64c6dc; /* 主色调蓝色 */\n\n\t\t\t.impression-text {\n\t\t\t\tcolor: #64c6dc; /* 主色调蓝色 */\n\t\t\t}\n\n\t\t\t.impression-count {\n\t\t\t\tbackground-color: #64c6dc; /* 主色调蓝色 */\n\t\t\t\tcolor: #fff;\n\t\t\t}\n\t\t}\n\n\t\t.impression-text {\n\t\t\tfont-size: 24rpx; /* 调小字体 */\n\t\t\tcolor: #666;\n\t\t\tmargin-right: 10rpx; /* 调整间距 */\n\t\t}\n\n\t\t.impression-count {\n\t\t\tfont-size: 20rpx; /* 调小字体 */\n\t\t\tbackground-color: #e8e8e8;\n\t\t\tcolor: #888;\n\t\t\tborder-radius: 50%;\n\t\t\twidth: 34rpx; /* 调小尺寸 */\n\t\t\theight: 34rpx; /* 调小尺寸 */\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t}\n\t}\n\n\t.add-impression {\n\t\tpadding: 12rpx 20rpx; /* 减小内边距 */\n\t\tbackground-color: #f5f7fa;\n\t\tborder-radius: 32rpx; /* 调小圆角 */\n\t\tdisplay: inline-flex;\n\t\talign-items: center;\n\n\t\t.plus-icon {\n\t\t\tfont-size: 26rpx; /* 调小字体 */\n\t\t\tcolor: #64c6dc; /* 主色调蓝色 */\n\t\t\tmargin-right: 6rpx; /* 调整间距 */\n\t\t\tfont-weight: bold;\n\t\t}\n\n\t\t.add-text {\n\t\t\tfont-size: 24rpx; /* 调小字体 */\n\t\t\tcolor: #666;\n\t\t}\n\t}\n\n\t.modal-content {\n\t\tpadding: 30rpx; /* 减小内边距 */\n\t\tbackground-color: #fff;\n\t\tborder-radius: 16rpx; /* 调小圆角 */\n\n\t\t.modal-title {\n\t\t\tdisplay: block;\n\t\t\ttext-align: center;\n\t\t\tfont-size: 28rpx; /* 调小字体 */\n\t\t\tfont-weight: 600;\n\t\t\tcolor: #333;\n\t\t\tmargin-bottom: 30rpx; /* 调整间距 */\n\t\t}\n\n\t\t.input-field {\n\t\t\theight: 70rpx; /* 调小高度 */\n\t\t\tbackground-color: #f5f7fa;\n\t\t\tborder-radius: 10rpx; /* 调小圆角 */\n\t\t\tpadding: 0 16rpx; /* 调整内边距 */\n\t\t\tfont-size: 24rpx; /* 调小字体 */\n\t\t\tcolor: #333;\n\t\t\tmargin-bottom: 30rpx; /* 调整间距 */\n\t\t}\n\n\t\t.modal-actions {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\n\t\t\tbutton {\n\t\t\t\tflex: 1;\n\t\t\t\theight: 70rpx; /* 调小高度 */\n\t\t\t\tline-height: 70rpx; /* 调整行高 */\n\t\t\t\tfont-size: 26rpx; /* 调小字体 */\n\t\t\t\tborder-radius: 10rpx; /* 调小圆角 */\n\t\t\t\tmargin: 0 8rpx; /* 调整间距 */\n\t\t\t\tborder: none;\n\n\t\t\t\t&::after {\n\t\t\t\t\tborder: none;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.cancel-btn {\n\t\t\t\tbackground-color: #f5f7fa;\n\t\t\t\tcolor: #666;\n\t\t\t}\n\n\t\t\t.confirm-btn {\n\t\t\t\tbackground-color: #64c6dc; /* 主色调蓝色 */\n\t\t\t\tcolor: #fff;\n\t\t\t}\n\t\t}\n\t}\n</style>\n","import Component from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/item-impression/item-impression.vue'\nwx.createComponent(Component)"],"names":["ref","computed","uni","websiteUrl","asyncGetUserInfo","newImpression","watch","onMounted","Component"],"mappings":"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"}