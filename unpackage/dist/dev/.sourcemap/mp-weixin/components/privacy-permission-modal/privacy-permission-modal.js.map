{"version":3,"file":"privacy-permission-modal.js","sources":["components/privacy-permission-modal/privacy-permission-modal.vue","/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/privacy-permission-modal/privacy-permission-modal.vue?type=component"],"sourcesContent":["<!-- components/privacy-permission-modal.vue -->\r\n<template>\r\n\t<common-modal v-model:visible=\"showModal\" top=\"20vh\" height=\"auto\" :closeable=\"false\">\r\n\t\t<view class=\"privacy-container\">\r\n\t\t\t<view class=\"header\">\r\n\t\t\t\t<image src=\"/static/new-icon/write.png\" class=\"logo\" />\r\n\t\t\t\t<text class=\"title\">隐私与权限说明</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"content\">\r\n\t\t\t\t<text class=\"desc\">欢迎使用我们的应用，为了提供更好的服务，我们需要获取相关权限并说明隐私政策：</text>\r\n\r\n\t\t\t\t<view class=\"policy-item\" @click=\"goToPrivacy\">\r\n\t\t\t\t\t<uni-icons type=\"info\" size=\"18\" color=\"#80afff\" />\r\n\t\t\t\t\t<text class=\"policy-text\">《隐私政策》</text>\r\n\t\t\t\t\t<uni-icons type=\"arrowright\" size=\"16\" color=\"#999\" />\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"policy-item\" @click=\"goToPermissions\">\r\n\t\t\t\t\t<uni-icons type=\"locked\" size=\"18\" color=\"#80afff\" />\r\n\t\t\t\t\t<text class=\"policy-text\">《权限说明》</text>\r\n\t\t\t\t\t<uni-icons type=\"arrowright\" size=\"16\" color=\"#999\" />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"footer\">\r\n\t\t\t\t<button class=\"btn refuse\" @click=\"handleDisagree\">拒绝并退出</button>\r\n\t\t\t\t<button class=\"btn agree\" @click=\"handleAgree\">同意并继续</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</common-modal>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\tonMounted\r\n\t} from 'vue';\r\n\timport {\r\n\t\twebsiteUrl,\r\n\t\twechatSignLogin,\r\n\t\tgetUserInfo,\r\n\t\tglobal,\r\n\t\tgetScene\r\n\t} from \"../../common/config.js\";\r\n\r\n\tconst showModal = ref(false);\r\n\tconst storageKey = 'privacyAgreementStatus';\r\n\r\n\t// 检查是否已同意\r\n\tconst hasAgreed = () => {\n\t\tlet storageContent = uni.getStorageSync(storageKey)\n\t\tconsole.log(storageContent)\r\n\t\treturn storageContent === 'agreed';\r\n\t};\r\n\r\n\t// 检查环境并显示弹窗\r\n\tconst checkAndShow = () => {\n\t\tif (hasAgreed()) {\n\t\t\tconsole.log(\"用户已经同意过隐私政策\")\n\t\t\treturn\n\t\t}\n\t\tconst scene = getScene();\n\t\tif(scene !== 2 && scene !== 3) {\n\t\t\tconsole.log(\"并非安卓或iOS客户端\")\n\t\t\treturn\n\t\t}\n\t\t\r\n\t\n\t\tsetTimeout(() => {\n\t\t\tshowModal.value = true;\n\t\t}, 1000);\n\t\r\n\t\t\r\n\t};\r\n\r\n\t// 跳转到隐私政策\r\n\tconst goToPrivacy = () => {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '/pages/private/private'\r\n\t\t});\r\n\t};\r\n\r\n\t// 跳转到权限说明\r\n\tconst goToPermissions = () => {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '/pages/permission/permission'\r\n\t\t});\r\n\t};\r\n\r\n\t// 处理同意\r\n\tconst handleAgree = () => {\r\n\t\tuni.setStorageSync(storageKey, 'agreed');\r\n\t\tshowModal.value = false;\r\n\t};\r\n\r\n\t// 处理拒绝\r\n\tconst handleDisagree = () => {\r\n\t\t// 退出App\r\n\t\tuni.exitApp();\r\n\t};\r\n\r\n\tonMounted(() => {\r\n\t\tcheckAndShow();\r\n\t});\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\t.privacy-container {\r\n\t\tpadding: 24rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\n\t\twidth: 85vw;\n\t\tbox-sizing: border-box;\r\n\r\n\t\t.header {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding-bottom: 16rpx;\r\n\t\t\tborder-bottom: 1px solid #f0f0f0;\r\n\t\t\tmargin-bottom: 24rpx;\r\n\r\n\t\t\t.logo {\r\n\t\t\t\twidth: 80rpx;\r\n\t\t\t\theight: 80rpx;\r\n\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.title {\r\n\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.content {\r\n\t\t\tpadding: 0 10rpx;\r\n\r\n\t\t\t.desc {\r\n\t\t\t\tfont-size: 25rpx;\r\n\t\t\t\tcolor: #666;\r\n\t\t\t\tline-height: 1.6;\r\n\t\t\t\tmargin-bottom: 30rpx;\r\n\t\t\t\tdisplay: block;\r\n\t\t\t}\r\n\r\n\t\t\t.policy-item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding: 24rpx 20rpx;\r\n\t\t\t\tbackground-color: #f9f9f9;\r\n\t\t\t\tborder-radius: 12rpx;\r\n\t\t\t\tmargin-bottom: 24rpx;\r\n\r\n\t\t\t\t.policy-text {\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\tfont-size: 25rpx;\r\n\t\t\t\t\tcolor: #80afff;\r\n\t\t\t\t\tmargin-left: 16rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.footer {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tmargin-top: 20rpx;\r\n\r\n\t\t\t.btn {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\theight: 60rpx;\r\n\t\t\t\tline-height: 60rpx;\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tborder-radius: 40rpx;\r\n\t\t\t\tmargin: 0 10rpx;\r\n\t\t\t\tborder: none;\n\t\t\t\t\n\t\t\t\t&::after {\n\t\t\t\t\tborder: none;\n\t\t\t\t}\r\n\r\n\t\t\t\t&.refuse {\r\n\t\t\t\t\tbackground-color: #f8f8f8;\r\n\t\t\t\t\tcolor: #666;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&.agree {\r\n\t\t\t\t\tbackground-color: #80afff;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import Component from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/privacy-permission-modal/privacy-permission-modal.vue'\nwx.createComponent(Component)"],"names":["ref","uni","getScene","onMounted","Component"],"mappings":";;;;;;;;;;;;;;AA+CC,MAAM,aAAa;;;;AADnB,UAAM,YAAYA,kBAAI,KAAK;AAI3B,UAAM,YAAY,MAAM;AACvB,UAAI,iBAAiBC,cAAAA,MAAI,eAAe,UAAU;AAClDA,oBAAAA,MAAY,MAAA,OAAA,0EAAA,cAAc;AAC1B,aAAO,mBAAmB;AAAA,IAC5B;AAGC,UAAM,eAAe,MAAM;AAC1B,UAAI,UAAS,GAAI;AAChBA,sBAAAA,MAAA,MAAA,OAAA,0EAAY,aAAa;AACzB;AAAA,MACA;AACD,YAAM,QAAQC,cAAAA;AACd,UAAG,UAAU,KAAK,UAAU,GAAG;AAC9BD,sBAAAA,MAAA,MAAA,OAAA,0EAAY,aAAa;AACzB;AAAA,MACA;AAGD,iBAAW,MAAM;AAChB,kBAAU,QAAQ;AAAA,MAClB,GAAE,GAAI;AAAA,IAGT;AAGC,UAAM,cAAc,MAAM;AACzBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACR,CAAG;AAAA,IACH;AAGC,UAAM,kBAAkB,MAAM;AAC7BA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACR,CAAG;AAAA,IACH;AAGC,UAAM,cAAc,MAAM;AACzBA,oBAAAA,MAAI,eAAe,YAAY,QAAQ;AACvC,gBAAU,QAAQ;AAAA,IACpB;AAGC,UAAM,iBAAiB,MAAM;AAE5BA,oBAAG,MAAC,QAAO;AAAA,IACb;AAECE,kBAAAA,UAAU,MAAM;AACf;IACF,CAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvGF,GAAG,gBAAgBC,SAAS;"}