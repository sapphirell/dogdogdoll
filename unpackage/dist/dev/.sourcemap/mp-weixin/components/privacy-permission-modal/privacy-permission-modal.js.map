{"version":3,"file":"privacy-permission-modal.js","sources":["components/privacy-permission-modal/privacy-permission-modal.vue","/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/privacy-permission-modal/privacy-permission-modal.vue?type=component"],"sourcesContent":["<!-- components/privacy-permission-modal.vue -->\n<template>\n\t<common-modal v-model:visible=\"showModal\" top=\"20vh\" height=\"auto\" :closeable=\"false\">\n\t\t<view class=\"privacy-container\">\n\t\t\t<view class=\"header\">\n\t\t\t\t<image src=\"/static/new-icon/write.gif\" class=\"logo\" />\n\t\t\t\t<text class=\"title\">隐私与权限说明</text>\n\t\t\t</view>\n\n\t\t\t<view class=\"content\">\n\t\t\t\t<text class=\"desc\">欢迎使用我们的应用，为了提供更好的服务，我们需要获取相关权限并说明隐私政策：</text>\n\n\t\t\t\t<view class=\"policy-item\" @click=\"goToPrivacy\">\n\t\t\t\t\t<uni-icons type=\"info\" size=\"18\" color=\"#80afff\" />\n\t\t\t\t\t<text class=\"policy-text\">《隐私政策》</text>\n\t\t\t\t\t<uni-icons type=\"arrowright\" size=\"16\" color=\"#999\" />\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"policy-item\" @click=\"goToPermissions\">\n\t\t\t\t\t<uni-icons type=\"locked\" size=\"18\" color=\"#80afff\" />\n\t\t\t\t\t<text class=\"policy-text\">《权限说明》</text>\n\t\t\t\t\t<uni-icons type=\"arrowright\" size=\"16\" color=\"#999\" />\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<view class=\"footer\">\n\t\t\t\t<button class=\"btn refuse\" @click=\"handleDisagree\">拒绝并退出</button>\n\t\t\t\t<button class=\"btn agree\" @click=\"handleAgree\">同意并继续</button>\n\t\t\t</view>\n\t\t</view>\n\t</common-modal>\n</template>\n\n<script setup>\n\timport {\n\t\tref,\n\t\tonMounted\n\t} from 'vue';\n\timport {\n\t\twebsiteUrl,\n\t\twechatSignLogin,\n\t\tgetUserInfo,\n\t\tglobal,\n\t\tgetScene\n\t} from \"../../common/config.js\";\n\n\tconst showModal = ref(false);\n\tconst storageKey = 'privacyAgreementStatus';\n\n\t// 检查是否已同意\n\tconst hasAgreed = () => {\n\t\tlet storageContent = uni.getStorageSync(storageKey)\n\t\tconsole.log(storageContent)\n\t\treturn storageContent === 'agreed';\n\t};\n\n\t// 检查环境并显示弹窗\n\tconst checkAndShow = () => {\n\t\tif (hasAgreed()) {\n\t\t\tconsole.log(\"用户已经同意过隐私政策\")\n\t\t\treturn\n\t\t}\n\t\tconst scene = getScene();\n\t\tif(scene !== 2 && scene !== 3) {\n\t\t\tconsole.log(\"并非安卓或iOS客户端：\", scene)\n\t\t\treturn\n\t\t}\n\t\t\n\t\n\t\tsetTimeout(() => {\n\t\t\tshowModal.value = true;\n\t\t}, 1000);\n\t\n\t\t\n\t};\n\n\t// 跳转到隐私政策\n\tconst goToPrivacy = () => {\n\t\tuni.navigateTo({\n\t\t\turl: '/pages/private/private'\n\t\t});\n\t};\n\n\t// 跳转到权限说明\n\tconst goToPermissions = () => {\n\t\tuni.navigateTo({\n\t\t\turl: '/pages/permission/permission'\n\t\t});\n\t};\n\n\t// 处理同意\n\tconst handleAgree = () => {\n\t\tuni.setStorageSync(storageKey, 'agreed');\n\t\tshowModal.value = false;\n\t};\n\n\t// 处理拒绝\n\tconst handleDisagree = () => {\n\t\t// 退出App\n\t\tuni.exitApp();\n\t};\n\n\tonMounted(() => {\n\t\tcheckAndShow();\n\t});\n</script>\n\n<style lang=\"less\">\n\t.privacy-container {\n\t\tpadding: 24rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\twidth: 85vw;\n\t\tbox-sizing: border-box;\n\n\t\t.header {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tpadding-bottom: 16rpx;\n\t\t\tborder-bottom: 1px solid #f0f0f0;\n\t\t\tmargin-bottom: 24rpx;\n\n\t\t\t.logo {\n\t\t\t\twidth: 80rpx;\n\t\t\t\theight: 80rpx;\n\t\t\t\tborder-radius: 16rpx;\n\t\t\t\tmargin-right: 20rpx;\n\t\t\t}\n\n\t\t\t.title {\n\t\t\t\tfont-size: 26rpx;\n\t\t\t\tfont-weight: bold;\n\t\t\t\tcolor: #333;\n\t\t\t}\n\t\t}\n\n\t\t.content {\n\t\t\tpadding: 0 10rpx;\n\n\t\t\t.desc {\n\t\t\t\tfont-size: 25rpx;\n\t\t\t\tcolor: #666;\n\t\t\t\tline-height: 1.6;\n\t\t\t\tmargin-bottom: 30rpx;\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n\t\t\t.policy-item {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tpadding: 24rpx 20rpx;\n\t\t\t\tbackground-color: #f9f9f9;\n\t\t\t\tborder-radius: 12rpx;\n\t\t\t\tmargin-bottom: 24rpx;\n\n\t\t\t\t.policy-text {\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tfont-size: 25rpx;\n\t\t\t\t\tcolor: #80afff;\n\t\t\t\t\tmargin-left: 16rpx;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.footer {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\tmargin-top: 20rpx;\n\n\t\t\t.btn {\n\t\t\t\tflex: 1;\n\t\t\t\theight: 60rpx;\n\t\t\t\tline-height: 60rpx;\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tborder-radius: 40rpx;\n\t\t\t\tmargin: 0 10rpx;\n\t\t\t\tborder: none;\n\t\t\t\t\n\t\t\t\t&::after {\n\t\t\t\t\tborder: none;\n\t\t\t\t}\n\n\t\t\t\t&.refuse {\n\t\t\t\t\tbackground-color: #f8f8f8;\n\t\t\t\t\tcolor: #666;\n\t\t\t\t}\n\n\t\t\t\t&.agree {\n\t\t\t\t\tbackground-color: #80afff;\n\t\t\t\t\tcolor: #fff;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</style>","import Component from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/privacy-permission-modal/privacy-permission-modal.vue'\nwx.createComponent(Component)"],"names":["ref","uni","getScene","onMounted","Component"],"mappings":";;;;;;;;;;;;;;AA+CC,MAAM,aAAa;;;;AADnB,UAAM,YAAYA,kBAAI,KAAK;AAI3B,UAAM,YAAY,MAAM;AACvB,UAAI,iBAAiBC,cAAAA,MAAI,eAAe,UAAU;AAClDA,oBAAAA,MAAY,MAAA,OAAA,0EAAA,cAAc;AAC1B,aAAO,mBAAmB;AAAA,IAC5B;AAGC,UAAM,eAAe,MAAM;AAC1B,UAAI,UAAS,GAAI;AAChBA,sBAAAA,MAAA,MAAA,OAAA,0EAAY,aAAa;AACzB;AAAA,MACA;AACD,YAAM,QAAQC,cAAAA;AACd,UAAG,UAAU,KAAK,UAAU,GAAG;AAC9BD,sBAAAA,MAAA,MAAA,OAAA,0EAAY,gBAAgB,KAAK;AACjC;AAAA,MACA;AAGD,iBAAW,MAAM;AAChB,kBAAU,QAAQ;AAAA,MAClB,GAAE,GAAI;AAAA,IAGT;AAGC,UAAM,cAAc,MAAM;AACzBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACR,CAAG;AAAA,IACH;AAGC,UAAM,kBAAkB,MAAM;AAC7BA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACR,CAAG;AAAA,IACH;AAGC,UAAM,cAAc,MAAM;AACzBA,oBAAAA,MAAI,eAAe,YAAY,QAAQ;AACvC,gBAAU,QAAQ;AAAA,IACpB;AAGC,UAAM,iBAAiB,MAAM;AAE5BA,oBAAG,MAAC,QAAO;AAAA,IACb;AAECE,kBAAAA,UAAU,MAAM;AACf;IACF,CAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvGF,GAAG,gBAAgBC,SAAS;"}