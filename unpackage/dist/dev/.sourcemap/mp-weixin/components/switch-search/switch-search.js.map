{"version":3,"file":"switch-search.js","sources":["components/switch-search/switch-search.vue","/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/switch-search/switch-search.vue?type=component"],"sourcesContent":["<template>\r\n\t<view class=\"integrated-search-container\">\r\n\t\t<!-- ÊêúÁ¥¢Ê°ÜÂå∫Âüü -->\r\n\t\t<view class=\"search-header\">\r\n\t\t\t<view class=\"search-wrapper\" :style=\"{ width: searchWidth }\">\r\n\t\t\t\t<!-- ÂïÜÂìÅÊêúÁ¥¢ÁªÑ‰ª∂ -->\r\n\t\t\t\t<goods-search v-if=\"searchType === 'goods'\" ref=\"goodsSearchRef\" :width=\"searchWidth\"\r\n\t\t\t\t\t:background=\"background\" :hidden-icon=\"false\" :mode=\"mode\" @select=\"handleGoodsSelect\" />\r\n\r\n\t\t\t\t<!-- ÂìÅÁâåÊêúÁ¥¢ÁªÑ‰ª∂ -->\r\n\t\t\t\t<common-search v-else ref=\"commonSearchRef\" :width=\"searchWidth\" :background=\"background\"\r\n\t\t\t\t\t:fontSize=\"fontSize\" :hidenIcon=\"false\" :mode=\"mode\" @select=\"handleBrandSelect\" />\r\n\t\t\t</view>\r\n\t\t\t<!-- ÂàáÊç¢ÊåâÈíÆ -->\r\n\t\t\t<view class=\"toggle-button\" @tap=\"toggleSearchType\">\r\n\t\t\t\t<text>{{ searchType === 'goods' ? 'Â®ÉÁâ©' : 'Â®ÉÂ∫ó' }}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- ÊêúÁ¥¢ÁªìÊûúÂå∫Âüü -->\r\n\t\t<view v-if=\"hasResults\" class=\"results-container\">\r\n\t\t\t<!-- ÂïÜÂìÅÊêúÁ¥¢ÁªìÊûú -->\r\n\t\t\t<view v-if=\"searchType === 'goods' && goodsResults.length > 0\" class=\"goods-results\">\r\n\t\t\t\t<view v-for=\"item in goodsResults\" :key=\"item.id\" class=\"result-item\" @tap=\"selectGoods(item)\">\r\n\t\t\t\t\t<view class=\"brand-tag\">{{ item.brand_name }}</view>\r\n\t\t\t\t\t<text class=\"goods-name\">{{ item.name }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- ÂìÅÁâåÊêúÁ¥¢ÁªìÊûú -->\r\n\t\t\t<view v-else-if=\"searchType === 'brand' && brandResults.length > 0\" class=\"brand-results\">\r\n\t\t\t\t<view v-for=\"item in brandResults\" :key=\"item.id\" class=\"result-item\" @tap=\"selectBrand(item)\">\r\n\t\t\t\t\t{{ item.name }}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\tcomputed\r\n\t} from 'vue';\r\n\r\n\t// ÊêúÁ¥¢Á±ªÂûãÔºö'goods' Êàñ 'brand'\r\n\tconst searchType = ref('goods');\r\n\r\n\t// ÂïÜÂìÅÊêúÁ¥¢ÁªìÊûú\r\n\tconst goodsResults = ref([]);\r\n\r\n\t// ÂìÅÁâåÊêúÁ¥¢ÁªìÊûú\r\n\tconst brandResults = ref([]);\r\n\r\n\t// ÁªÑ‰ª∂ÂºïÁî®\r\n\tconst goodsSearchRef = ref(null);\r\n\tconst commonSearchRef = ref(null);\r\n\r\n\t// ËÆ°ÁÆóÂ±ûÊÄßÔºöÊòØÂê¶ÊúâÊêúÁ¥¢ÁªìÊûú\r\n\tconst hasResults = computed(() => {\r\n\t\treturn (searchType.value === 'goods' && goodsResults.value.length > 0) ||\r\n\t\t\t(searchType.value === 'brand' && brandResults.value.length > 0);\r\n\t});\r\n\r\n\t// ÂàáÊç¢ÊêúÁ¥¢Á±ªÂûã\r\n\tconst toggleSearchType = () => {\r\n\t\t// Ê∏ÖÁ©∫ÂΩìÂâçÊêúÁ¥¢ÁªìÊûú\r\n\t\tif (searchType.value === 'goods') {\r\n\t\t\tgoodsResults.value = [];\r\n\t\t} else {\r\n\t\t\tbrandResults.value = [];\r\n\t\t}\r\n\r\n\t\t// ÂàáÊç¢ÊêúÁ¥¢Á±ªÂûã\r\n\t\tsearchType.value = searchType.value === 'goods' ? 'brand' : 'goods';\r\n\t};\r\n\r\n\t// Â§ÑÁêÜÂïÜÂìÅÊêúÁ¥¢ÁªìÊûú\r\n\tconst handleGoodsSelect = (goods) => {\r\n\t\tgoodsResults.value = goods ? [goods] : [];\r\n\t\t// Ê∑ªÂä†ÔºöÁ´ãÂç≥Ëß¶Âèësubmit‰∫ã‰ª∂\r\n\t\tif (goods) {\r\n\t\t\temit('submit', {\r\n\t\t\t\ttype: 'goods',\r\n\t\t\t\tdata: goods\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// Â§ÑÁêÜÂìÅÁâåÊêúÁ¥¢ÁªìÊûú\r\n\tconst handleBrandSelect = (id, name) => {\r\n\t\tif (id === 0) {\r\n\t\t\tbrandResults.value = [];\r\n\t\t} else {\r\n\t\t\tbrandResults.value = [{\r\n\t\t\t\tid,\r\n\t\t\t\tname\r\n\t\t\t}];\r\n\t\t\t// Ê∑ªÂä†ÔºöÁ´ãÂç≥Ëß¶Âèësubmit‰∫ã‰ª∂\r\n\t\t\temit('submit', {\r\n\t\t\t\ttype: 'brand',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tid,\r\n\t\t\t\t\tname\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t// ÈÄâÊã©ÂïÜÂìÅ\r\n\tconst selectGoods = (goods) => {\r\n\t\tif (props.mode === 'jump') {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: `/pages/goods/goods?goods_id=${goods.id}`\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// ÈÄâÊã©ÂìÅÁâå\r\n\tconst selectBrand = (brand) => {\r\n\t\tif (props.mode === 'jump') {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: `/pages/brand/brand?brand_id=${brand.id}`\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// ÁªÑ‰ª∂Â±ûÊÄß\r\n\tconst props = defineProps({\r\n\t\tmode: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'jump',\r\n\t\t\tvalidator: (value) => ['jump', 'fill'].includes(value)\r\n\t\t},\r\n\t\twidth: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '100%'\r\n\t\t},\r\n\t\tbackground: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '#fff'\r\n\t\t},\r\n\t\tfontSize: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '28rpx'\r\n\t\t}\r\n\t});\r\n\r\n\t// ËÆ°ÁÆóÊêúÁ¥¢Ê°ÜÂÆΩÂ∫¶ÔºàÂáèÂéªÂàáÊç¢ÊåâÈíÆÂÆΩÂ∫¶Ôºâ\r\n\tconst searchWidth = computed(() => {\r\n\t\treturn \"700rpx\"\r\n\t});\r\n\r\n\t// ‰∫ã‰ª∂ÂÆö‰πâ - Ê∑ªÂä† submit ‰∫ã‰ª∂\r\n\tconst emit = defineEmits(['submit']);\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t.integrated-search-container {\r\n\t\twidth: v-bind('props.width');\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.search-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 35rpx;\r\n\t}\n\t\r\n\t.search-wrapper \n\t{\n\t\tflex: 1;\n\t\tpadding-left: 20rpx;\n\t}\r\n\t.toggle-button {\r\n\t\tflex-shrink: 0;\r\n\t\tbackground: linear-gradient(135deg, #97e7f7, #d5acd6);\r\n\t\tcolor: #fff;\r\n\t\tpadding: 10rpx 20rpx;\r\n\t\tborder-radius: 50rpx;\r\n\t\tfont-size: 26rpx;\r\n\t\tfont-weight: bold;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(164, 148, 178, 0.3);\r\n\t\ttransition: all 0.3s ease;\r\n\r\n\t\ttext {\r\n\t\t\tcolor: #fff;\r\n\t\t}\r\n\r\n\t\t&:active {\r\n\t\t\ttransform: scale(0.95);\r\n\t\t\tbox-shadow: 0 2rpx 6rpx rgba(164, 148, 178, 0.3);\r\n\t\t}\r\n\t}\r\n\r\n\t.results-container {\r\n\t\tmargin-top: 20rpx;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 16rpx;\r\n\t\tbox-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.08);\r\n\t\tmax-height: 500rpx;\r\n\t\toverflow-y: auto;\r\n\t\tposition: absolute;\r\n\t\twidth: 100%;\r\n\t\tz-index: 100;\r\n\r\n\t\t.result-item {\r\n\t\t\tpadding: 24rpx;\r\n\t\t\tborder-bottom: 1rpx solid #f0f0f0;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t&:last-child {\r\n\t\t\t\tborder-bottom: none;\r\n\t\t\t}\r\n\r\n\t\t\t&:active {\r\n\t\t\t\tbackground-color: #f9f9f9;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.goods-results {\r\n\t\t.brand-tag {\r\n\t\t\tbackground: #f0f0f0;\r\n\t\t\tcolor: #666;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tpadding: 4rpx 12rpx;\r\n\t\t\tborder-radius: 6rpx;\r\n\t\t\tmargin-right: 16rpx;\r\n\t\t\tline-height: 1.4;\r\n\t\t\tmax-width: 200rpx;\r\n\t\t\twhite-space: nowrap;\r\n\t\t\toverflow: hidden;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t}\r\n\r\n\t\t.goods-name {\r\n\t\t\tflex: 1;\r\n\t\t\tcolor: #333;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\toverflow: hidden;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t\twhite-space: nowrap;\r\n\t\t}\r\n\t}\r\n\r\n\t.brand-results {\r\n\t\t.result-item {\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: #333;\r\n\t\t\tpadding: 20rpx 24rpx;\r\n\r\n\t\t\t&:before {\r\n\t\t\t\tcontent: 'üè∑Ô∏è';\r\n\t\t\t\tmargin-right: 12rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import Component from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/switch-search/switch-search.vue'\nwx.createComponent(Component)"],"names":["ref","computed","uni"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CC,UAAM,aAAaA,kBAAI,OAAO;AAG9B,UAAM,eAAeA,kBAAI,CAAA,CAAE;AAG3B,UAAM,eAAeA,kBAAI,CAAA,CAAE;AAG3B,UAAM,iBAAiBA,kBAAI,IAAI;AAC/B,UAAM,kBAAkBA,kBAAI,IAAI;AAGhC,UAAM,aAAaC,cAAAA,SAAS,MAAM;AACjC,aAAQ,WAAW,UAAU,WAAW,aAAa,MAAM,SAAS,KAClE,WAAW,UAAU,WAAW,aAAa,MAAM,SAAS;AAAA,IAChE,CAAE;AAGD,UAAM,mBAAmB,MAAM;AAE9B,UAAI,WAAW,UAAU,SAAS;AACjC,qBAAa,QAAQ;MACxB,OAAS;AACN,qBAAa,QAAQ;MACrB;AAGD,iBAAW,QAAQ,WAAW,UAAU,UAAU,UAAU;AAAA,IAC9D;AAGC,UAAM,oBAAoB,CAAC,UAAU;AACpC,mBAAa,QAAQ,QAAQ,CAAC,KAAK,IAAI,CAAA;AAEvC,UAAI,OAAO;AACV,aAAK,UAAU;AAAA,UACd,MAAM;AAAA,UACN,MAAM;AAAA,QACV,CAAI;AAAA,MACD;AAAA,IACH;AAGC,UAAM,oBAAoB,CAAC,IAAI,SAAS;AACvC,UAAI,OAAO,GAAG;AACb,qBAAa,QAAQ;MACxB,OAAS;AACN,qBAAa,QAAQ,CAAC;AAAA,UACrB;AAAA,UACA;AAAA,QACJ,CAAI;AAED,aAAK,UAAU;AAAA,UACd,MAAM;AAAA,UACN,MAAM;AAAA,YACL;AAAA,YACA;AAAA,UACA;AAAA,QACL,CAAI;AAAA,MACD;AAAA,IACH;AAEC,UAAM,cAAc,CAAC,UAAU;AAC9B,UAAI,MAAM,SAAS,QAAQ;AAC1BC,sBAAAA,MAAI,WAAW;AAAA,UACd,KAAK,+BAA+B,MAAM,EAAE;AAAA,QAChD,CAAI;AAAA,MACD;AAAA,IACH;AAGC,UAAM,cAAc,CAAC,UAAU;AAC9B,UAAI,MAAM,SAAS,QAAQ;AAC1BA,sBAAAA,MAAI,WAAW;AAAA,UACd,KAAK,+BAA+B,MAAM,EAAE;AAAA,QAChD,CAAI;AAAA,MACD;AAAA,IACH;AAGC,UAAM,QAAQ;AAqBd,UAAM,cAAcD,cAAAA,SAAS,MAAM;AAClC,aAAO;AAAA,IACT,CAAE;AAGD,UAAM,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxJd,GAAG,gBAAgB,SAAS;"}