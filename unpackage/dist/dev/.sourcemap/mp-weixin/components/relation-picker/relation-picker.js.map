{"version":3,"file":"relation-picker.js","sources":["components/relation-picker/relation-picker.vue","/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/relation-picker/relation-picker.vue?type=component"],"sourcesContent":["<!-- components/relation-picker/relation-picker.vue -->\n<template>\n\t<common-modal :visible=\"internalVisible\" @update:visible=\"handleModalVisibilityChange\" top=\"200rpx\">\n\t\t<view class=\"relation-picker-container\">\n\t\t\t<view class=\"picker-header\">\n\t\t\t\t<view class=\"mode-switch\">\n\t\t\t\t\t<!-- 模式切换按钮 -->\n\t\t\t\t\t<view v-if=\"isFuzzyMode\" class=\"switch-btn precision-mode\" @tap=\"switchMode(false)\">\n\t\t\t\t\t\t<uni-icons type=\"search\" size=\"18\" color=\"#fff\"></uni-icons>\n\t\t\t\t\t\t<text>切换到精确关联</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view v-if=\"!isFuzzyMode\" class=\"switch-btn fuzzy-mode\" @tap=\"switchMode(true)\">\n\t\t\t\t\t\t<uni-icons type=\"list\" size=\"18\" color=\"#fff\"></uni-icons>\n\t\t\t\t\t\t<text>切换到模糊关联</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<view class=\"picker-body\">\n\t\t\t\t<!-- 精确模式 -->\n\t\t\t\t<template v-if=\"!isFuzzyMode\">\n\t\t\t\t\t<common-name-picker ref=\"typePicker\"  v-if=\"!hideType\" :dataList=\"typeList\" @select=\"handleTypeSelect\"\n\t\t\t\t\t\t@toggle=\"handleComponentToggle('type')\" class=\"type-picker\" />\n\n\t\t\t\t\t<common-search ref=\"brandSearch\" background=\"#f8f8f8\" mode=\"fill\" @select=\"handleBrandSelect\"\n\t\t\t\t\t\t@toggle=\"handleComponentToggle('brand')\" class=\"brand-search\"  style=\"padding: 0px!important;\" />\n\n\t\t\t\t\t<custom-picker ref=\"goodsPicker\" background=\"#f8f8f8\"  :dataList=\"goodsList\" @select=\"handleGoodsSelect\"\n\t\t\t\t\t\t@toggle=\"handleComponentToggle('goods')\" class=\"goods-picker\" />\n\t\t\t\t</template>\n\n\t\t\t\t<!-- 模糊模式 -->\n\t\t\t\t<template v-else>\n\t\t\t\t\t<goods-search ref=\"fuzzySearch\" mode=\"fill\" @select=\"handleFuzzySelect\" v-model=\"searchKeyword\" width=\"550rpx\"\n\t\t\t\t\t\t@toggle=\"handleComponentToggle('fuzzy')\" class=\"fuzzy-search\" />\n\t\t\t\t</template>\n\t\t\t</view>\n\n\t\t\t<view class=\"picker-footer\">\n\t\t\t\t<button class=\"cancel-btn\" @tap=\"handleCancel\">取消</button>\n\t\t\t\t<button class=\"confirm-btn\" @tap=\"handleConfirm\">确认</button>\n\t\t\t</view>\n\t\t</view>\n\t</common-modal>\n</template>\n\n<script setup>\n\timport {\n\t\tref,\n\t\twatch,\n\t\tnextTick\n\t} from 'vue';\n\n\timport {\n\t\twebsiteUrl,\n\t\timage1Url,\n\t\twechatSignLogin,\n\t\tgetUserInfo,\n\t\tglobal,\n\t\tasyncGetUserInfo,\n\t\tgetScene,\n\t} from \"../../common/config.js\"\n\n\n\tconst props = defineProps({\n\t\ttypeList: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => []\n\t\t},\n\t\tvisible: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t  hideType: {\n\t\ttype: Boolean,\n\t\tdefault: false\n\t  }\n\t})\n\tconst emit = defineEmits([\n\t\t'update:visible',\n\t\t'confirm',\n\t\t'cancel'\n\t])\n\tconst goodsList = ref([])\n\n\t// 组件refs\n\tconst typePicker = ref()\n\tconst brandSearch = ref()\n\tconst goodsPicker = ref()\n\tconst fuzzySearch = ref()\n\n\t// 使用内部状态管理可见性\n\tconst internalVisible = ref(false)\n\t// 状态管理\n\tconst isFuzzyMode = ref(true)\n\tconst selectedData = ref({\n\t\ttype: null,\n\t\tbrand: {\n\t\t\tid: 0,\n\t\t\tname: ''\n\t\t},\n\t\tgoods: {\n\t\t\tid: 0,\n\t\t\tname: '',\n\t\t\timage: ''\n\t\t}\n\t})\n\n\n\t// 搜索关键词\n\tconst searchKeyword = ref('')\n\n\t// 模式切换\n\t// const switchMode = (isFuzzy) => {\n\t// \tconsole.log(isFuzzy)\n\t// \tisFuzzyMode.value = isFuzzy\n\t// \t// 切换时重置所有状态\n\t// \tsearchKeyword.value = ''\n\t// \tselectedData.value = {\n\t// \t\ttype: null,\n\t// \t\tbrand: null,\n\t// \t\tgoods: null\n\t// \t}\n\t// \tgoodsList.value = []\n\t// }\n\tconst switchMode = (isFuzzy) => {\n\t\tisFuzzyMode.value = isFuzzy\n\t\tresetAllComponents()\n\t\tselectedData.value = {\n\t\t\ttype: null,\n\t\t\tbrand: {\n\t\t\t\tid: 0,\n\t\t\t\tname: ''\n\t\t\t},\n\t\t\tgoods: {\n\t\t\t\tid: 0,\n\t\t\t\tname: '',\n\t\t\t\timage: ''\n\t\t\t}\n\t\t}\n\t}\n\n\t// 处理组件展开状态\n\tconst handleComponentToggle = (component) => {\n\t\tconst components = {\n\t\t\ttype: typePicker,\n\t\t\tbrand: brandSearch,\n\t\t\tgoods: goodsPicker,\n\t\t\tfuzzy: fuzzySearch\n\t\t}\n\n\t\tObject.entries(components).forEach(([key, ref]) => {\n\t\t\tif (key !== component && ref.value?.close) {\n\t\t\t\tref.value.close()\n\t\t\t}\n\t\t})\n\t}\n\n\t// 重置所有子组件\n\tconst resetAllComponents = () => {\n\t\t;\n\t\t[typePicker, brandSearch, goodsPicker, fuzzySearch].forEach(comp => {\n\t\t\tif (comp.value?.reset) comp.value.reset()\n\t\t})\n\t}\n\n\n\n\t// 模糊搜索选择处理\n\tconst handleFuzzySelect = async (goods) => {\n\t\ttry {\n\t\t\t// 处理手动输入的情况\n\t\t\tif (!goods?.id) {\n\t\t\t\tsearchKeyword.value = goods.name\n\t\t\t\tselectedData.value = {\n\t\t\t\t\ttype: '未知类型',\n\t\t\t\t\tbrand: {\n\t\t\t\t\t\tid: 0,\n\t\t\t\t\t\tname: ''\n\t\t\t\t\t},\n\t\t\t\t\tgoods: {\n\t\t\t\t\t\tid: 0,\n\t\t\t\t\t\tname: goods.name,\n\t\t\t\t\t\timage: ''\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst detail = await getGoodsInfo(goods.id)\n\t\t\tsearchKeyword.value = goods.name\n\n\t\t\tselectedData.value = {\n\t\t\t\ttype: detail.type || '未知类型',\n\t\t\t\tbrand: {\n\t\t\t\t\tid: detail.brand_id || 0,\n\t\t\t\t\tname: detail.brand_name || ''\n\t\t\t\t},\n\t\t\t\tgoods: {\n\t\t\t\t\tid: goods.id,\n\t\t\t\t\tname: goods.name,\n\t\t\t\t\timage: detail?.goods_images?.[0] || ''\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('商品信息获取失败', error)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '详细信息获取失败，已保存基本信息',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\tsearchKeyword.value = goods.name\n\t\t\tselectedData.value = {\n\t\t\t\ttype: '未知类型',\n\t\t\t\tbrand: {\n\t\t\t\t\tid: 0,\n\t\t\t\t\tname: ''\n\t\t\t\t},\n\t\t\t\tgoods: {\n\t\t\t\t\tid: goods?.id || 0,\n\t\t\t\t\tname: goods.name,\n\t\t\t\t\timage: ''\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// 在关闭弹窗时重置搜索关键词\n\t// const closePicker = () => {\n\t// \tinternalVisible.value = false\n\t// \tsearchKeyword.value = ''\n\t// \tselectedData.value = {\n\t// \t\ttype: null,\n\t// \t\tbrand: null,\n\t// \t\tgoods: null\n\t// \t}\n\t// }\n\tconst closePicker = () => {\n\t\tinternalVisible.value = false\n\t\tsearchKeyword.value = ''\n\t\tresetAllComponents()\n\t\tnextTick(() => {\n\t\t\tselectedData.value = {\n\t\t\t\ttype: null,\n\t\t\t\tbrand: {\n\t\t\t\t\tid: 0,\n\t\t\t\t\tname: ''\n\t\t\t\t},\n\t\t\t\tgoods: {\n\t\t\t\t\tid: 0,\n\t\t\t\t\tname: '',\n\t\t\t\t\timage: ''\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\n\t// 监听父组件传来的 visible 变化\n\twatch(() => props.visible, (val) => {\n\t\tinternalVisible.value = val\n\t})\n\n\t// 监听内部状态变化通知父组件\n\twatch(internalVisible, (val) => {\n\t\temit('update:visible', val)\n\t})\n\n\n\t// 新增 modal 可见性变化处理\n\tconst handleModalVisibilityChange = (newVal) => {\n\t\tinternalVisible.value = newVal\n\t\t// 当 modal 自身触发关闭时（如点击遮罩层）\n\t\tif (!newVal) {\n\t\t\tclosePicker()\n\t\t}\n\t}\n\t// 类型选择\n\tconst handleTypeSelect = (type) => {\n\t\tselectedData.value.type = type\n\t}\n\tconst getGoodsInfo = (id) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tuni.request({\n\t\t\t\turl: websiteUrl.value + '/goods?id=' + id,\n\t\t\t\tmethod: 'GET',\n\t\t\t\ttimeout: 5000,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tresolve(res.data.data)\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\tconsole.error('商品详情获取失败', err)\n\t\t\t\t\treject(err)\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t}\n\n\t// 品牌选择\n\t// const handleBrandSelect = (brandId, brandName) => {\n\t// \tselectedData.value.brand = {\n\t// \t\tid: brandId,\n\t// \t\tname: brandName\n\t// \t}\n\t// \t// 添加商品加载逻辑\n\t// \ttry {\n\t// \t\tgetGoods(brandId)\n\t// \t} catch (error) {\n\t// \t\tconsole.error('获取商品失败', error)\n\t// \t}\n\t// }\n\tconst handleBrandSelect = (id, name) => {\n\t\tselectedData.value.brand = {\n\t\t\tid: id || 0,\n\t\t\tname\n\t\t}\n\t\tif (id) getGoods(id)\n\t}\n\n\n\t// 商品选择\n\t// const handleGoodsSelect = async (goodsId, goodsName) => {\n\t// \ttry {\n\t// \t\t// 先清空旧数据避免残留\n\t// \t\tselectedData.value.goods = null\n\t// \t\tconst detail = await getGoodsInfo(goodsId)\n\t// \t\tif (!detail) {\n\t// \t\t\tthrow new Error('未找到商品信息')\n\t// \t\t}\n\t// \t\tselectedData.value.goods = {\n\t// \t\t\tid: goodsId,\n\t// \t\t\tname: goodsName,\n\t// \t\t\timage: detail?.goods_images?.[0] || ''\n\t// \t\t}\n\t// \t} catch (error) {\n\t// \t\tconsole.error('商品选择失败', error)\n\t// \t\tuni.showToast({\n\t// \t\t\ttitle: '商品信息获取失败，请重新选择',\n\t// \t\t\ticon: 'none'\n\t// \t\t})\n\t// \t}\n\t// }\n\n\tconst handleGoodsSelect = async (id, name) => {\n\t\ttry {\n\t\t\tselectedData.value.goods = { // 先设置默认值\n\t\t\t\tid: id || 0,\n\t\t\t\tname,\n\t\t\t\timage: ''\n\t\t\t}\n\n\t\t\t// 只有有效ID才请求接口\n\t\t\tif (id && id !== 0) {\n\t\t\t\tconst detail = await getGoodsInfo(id)\n\t\t\t\tselectedData.value.goods.image = detail?.goods_images?.[0] || ''\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('商品信息获取失败', error)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '图片信息获取失败，已保存基本信息',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t}\n\t}\n\n\tfunction getGoods(id) {\n\t\t// 请求 /goods-name-list 并赋值goodsList\n\t\tuni.request({\n\t\t\turl: websiteUrl.value + '/goods-name-list?id=' + id,\n\t\t\tmethod: 'GET',\n\t\t\ttimeout: 5000,\n\t\t\tsuccess: (res) => {\n\t\t\t\tconsole.log(res.data.data);\n\t\t\t\tgoodsList.value = res.data.data\n\t\t\t\tconsole.log(goodsList.value)\n\t\t\t},\n\n\t\t\tfail: (err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '网络请求失败',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\n\t}\n\t// 确认操作\n\t// const handleConfirm = async () => {\n\t// \ttry {\n\t// \t\t// 获取商品图片信息\n\t// \t\tconst goodsDetail = await getGoodsInfo(selectedData.value.goods.id)\n\n\t// \t\t// 构建完整数据对象\n\t// \t\tconst resultData = {\n\t// \t\t\t...selectedData.value,\n\t// \t\t\tgoods_image: goodsDetail?.goods_images?.[0] || '',\n\t// \t\t\tgoods_id: selectedData.value.goods.id,\n\t// \t\t\tbrand_id: selectedData.value.brand.id,\n\t// \t\t\tbrand_name: selectedData.value.brand.name,\n\t// \t\t\ttype: selectedData.value.type\n\t// \t\t}\n\n\t// \t\temit('confirm', resultData)\n\t// \t\tclosePicker()\n\t// \t} catch (error) {\n\t// \t\tconsole.error('商品信息获取失败', error)\n\t// \t\tuni.showToast({\n\t// \t\t\ttitle: '商品信息获取失败',\n\t// \t\t\ticon: 'none'\n\t// \t\t})\n\t// \t}\n\t// }\n\n\tconst handleConfirm = async () => {\n\t\ttry {\n\t\t\tlet result = null;\n\n\t\t\tif (isFuzzyMode.value) {\n\t\t\t\t// 模糊模式处理\n\t\t\t\tif (selectedData.value.goods.id && selectedData.value.goods.id !== 0) {\n\t\t\t\t\t// 修改这里：添加默认类型处理\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst detail = await getGoodsInfo(selectedData.value.goods.id);\n\t\t\t\t\t\tresult = {\n\t\t\t\t\t\t\tisFuzzy: true,\n\t\t\t\t\t\t\tkeyword: searchKeyword.value,\n\t\t\t\t\t\t\tgoods: {\n\t\t\t\t\t\t\t\tid: detail.id || selectedData.value.goods.id,\n\t\t\t\t\t\t\t\tname: detail.goods_name || selectedData.value.goods.name,\n\t\t\t\t\t\t\t\timage: detail?.goods_images?.[0] || ''\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbrand: {\n\t\t\t\t\t\t\t\tid: detail.brand_id || 0,\n\t\t\t\t\t\t\t\tname: detail.brand_name || ''\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t// 添加默认类型\n\t\t\t\t\t\t\ttype: detail.type || '未知类型' // 确保这里使用默认值\n\t\t\t\t\t\t};\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.error('商品信息获取失败，使用缓存数据', error);\n\t\t\t\t\t\tresult = {\n\t\t\t\t\t\t\tisFuzzy: true,\n\t\t\t\t\t\t\tkeyword: searchKeyword.value,\n\t\t\t\t\t\t\tgoods: selectedData.value.goods,\n\t\t\t\t\t\t\tbrand: selectedData.value.brand,\n\t\t\t\t\t\t\t// 确保这里使用默认值\n\t\t\t\t\t\t\ttype: selectedData.value.type || '未知类型'\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// 无商品ID时使用默认值\n\t\t\t\t\tresult = {\n\t\t\t\t\t\tisFuzzy: true,\n\t\t\t\t\t\tkeyword: searchKeyword.value,\n\t\t\t\t\t\tgoods: {\n\t\t\t\t\t\t\tid: 0,\n\t\t\t\t\t\t\tname: searchKeyword.value,\n\t\t\t\t\t\t\timage: ''\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbrand: {\n\t\t\t\t\t\t\tid: 0,\n\t\t\t\t\t\t\tname: ''\n\t\t\t\t\t\t},\n\t\t\t\t\t\t// 明确设置默认类型\n\t\t\t\t\t\ttype: '未知类型'\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tconsole.log(\"jjjjjjjjjjjjjjjj\")\n\t\t\t\t// 精确模式处理\n\t\t\t\tif (selectedData.value.goods.id && selectedData.value.goods.id !== 0) {\n\t\t\t\t\t// 获取最新商品信息\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst detail = await getGoodsInfo(selectedData.value.goods.id);\n\t\t\t\t\t\tselectedData.value.goods.image = detail?.goods_images?.[0] || '';\n\t\t\t\t\t\tselectedData.value.type = detail.type || selectedData.value.type;\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.error('商品信息获取失败，使用缓存数据', error);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// 数据校验\n\t\t\t\tif (!selectedData.value.type) throw new Error('请选择商品类型');\n\t\t\t\tif (!selectedData.value.brand.name) throw new Error('请填写或选择品牌');\n\t\t\t\tif (!selectedData.value.goods.name) throw new Error('请填写或选择商品');\n\n\t\t\t\tresult = {\n\t\t\t\t\tisFuzzy: false,\n\t\t\t\t\ttype: selectedData.value.type,\n\t\t\t\t\tbrand: selectedData.value.brand,\n\t\t\t\t\tgoods: selectedData.value.goods\n\t\t\t\t};\n\t\t\t}\n\t\t\tconsole.log('确认数据:', result);\n\n\t\t\temit('confirm', result);\n\t\t\tclosePicker();\n\t\t} catch (error) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: error.message,\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t}\n\t};\n\n\n\t// 取消操作\n\tconst handleCancel = () => {\n\t\temit('cancel')\n\t\tclosePicker()\n\t}\n</script>\n\n<style lang=\"less\" scoped>\n\t.relation-picker-container {\n\t\tpadding: 24rpx;\n\t\tbackground: #fff;\n\t\tborder-radius: 16rpx;\n\t\twidth: 600rpx;\n\t\tbox-sizing: border-box;\n\n\t\t.picker-header {\n\t\t\tmargin-bottom: 24rpx;\n\t\t\tborder-bottom: 1rpx solid #eee;\n\t\t\tpadding-bottom: 24rpx;\n\n\t\t\t.title {\n\t\t\t\tfont-size: 24rpx; // 标题字号调整\n\t\t\t\tfont-weight: 700; // 加粗程度提升\n\t\t\t\tcolor: #333;\n\t\t\t\tdisplay: block;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\t\t}\n\n\t\t.picker-body {\n\n\n\t\t\t/deep/ .type-picker {\n\t\t\t\tmargin-bottom: 40rpx;\n\t\t\t\tdisplay: block;\n\t\t\t\t.select-input {\n\t\t\t\t\tbackground: #f8f8f8;\n\t\t\t\t\tborder-radius: 12rpx;\n\t\t\t\t\tpadding: 16rpx 24rpx;\n\t\t\t\t\tfont-size: 22rpx;\n\t\t\t\t\tcolor: #333;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* 品牌搜索样式加强 */\n\t\t\t/deep/ .brand-search {\n\n\t\t\t\tbackground: #f8f8f8 !important;\n\t\t\t\tborder-radius: 12rpx !important;\n\t\t\t\tpadding: 16rpx 24rpx !important;\n\t\t\t\tmin-height: 72rpx; // 新增固定高度\n\t\t\t\t// padding: 0px!important;\n\n\t\t\t\t.common_search_input {\n\t\t\t\t\tfont-size: 22rpx !important;\n\t\t\t\t\tcolor: #333 !important;\n\t\t\t\t\tflex: 1;\n\t\t\t\t}\n\n\t\t\t\t.icon_image {\n\t\t\t\t\twidth: 36rpx !important;\n\t\t\t\t\theight: 36rpx !important;\n\t\t\t\t\tmargin: 0 12rpx !important;\n\t\t\t\t}\n\n\t\t\t\t.search_results {\n\t\t\t\t\tbackground: #fff !important;\n\t\t\t\t\tborder: 1rpx solid #eee !important;\n\t\t\t\t\tbox-shadow: 0 4rpx 24rpx rgba(0, 0, 0, 0.08) !important;\n\n\t\t\t\t\t.result_item {\n\t\t\t\t\t\tfont-size: 22rpx !important;\n\t\t\t\t\t\tpadding: 24rpx !important;\n\t\t\t\t\t\tcolor: #666 !important;\n\n\t\t\t\t\t\t&:active {\n\t\t\t\t\t\t\tbackground: #f8f8f8 !important;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* 按钮尺寸优化 */\n\t\t\t.picker-footer {\n\t\t\t\tbutton {\n\t\t\t\t\theight: 64rpx !important; // 缩小按钮高度\n\t\t\t\t\tline-height: 64rpx !important;\n\t\t\t\t\tfont-size: 22rpx !important;\n\t\t\t\t\tpadding: 0 24rpx !important;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/deep/ .goods-picker {\n\t\t\t\t.select-input {\n\t\t\t\t\tbackground: #f8f8f8;\n\t\t\t\t\tborder-radius: 12rpx;\n\t\t\t\t\tpadding: 16rpx 24rpx;\n\t\t\t\t\tfont-size: 22rpx;\n\t\t\t\t\tcolor: #333;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.picker-footer {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\tmargin-top: 32rpx;\n\t\t\tgap: 20rpx;\n\n\t\t\tbutton {\n\t\t\t\tflex: 1;\n\t\t\t\theight: 72rpx;\n\t\t\t\tline-height: 72rpx;\n\t\t\t\tborder-radius: 12rpx;\n\t\t\t\tfont-size: 22rpx; // 字号统一调整\n\t\t\t\ttransition: all 0.3s;\n\t\t\t\tmargin: 0;\n\n\t\t\t\t&::after {\n\t\t\t\t\tborder: none;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.cancel-btn {\n\t\t\t\tbackground: #f5f5f5;\n\t\t\t\tcolor: #666;\n\n\t\t\t\t&:active {\n\t\t\t\t\tbackground: #e8e8e8;\n\t\t\t\t\topacity: 0.8;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.confirm-btn {\n\t\t\t\tbackground: #78d0dd;\n\t\t\t\tcolor: #fff;\n\n\t\t\t\t&:active {\n\t\t\t\t\topacity: 0.8;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/* 品牌搜索样式加强 */\n\t/deep/ .brand-search {\n\n\n\t\tbackground: #f8f8f8 !important;\n\t\tborder-radius: 12rpx !important;\n\t\tpadding: 16rpx 24rpx !important;\n\t\tmin-height: 72rpx; // 新增固定高度\n\t\tmargin-bottom: 20rpx;\n\t\tdisplay: block;\n\n\t\t.common_search_input {\n\t\t\tfont-size: 22rpx !important;\n\t\t\tcolor: #333 !important;\n\t\t\tbackground: #f8f8f8 !important;\n\t\t\tpadding: 0rpx !important;\n\t\t\tflex: 1;\n\t\t}\n\n\t\t.icon_image {\n\t\t\twidth: 36rpx !important;\n\t\t\theight: 36rpx !important;\n\t\t\tmargin: 0 12rpx !important;\n\t\t}\n\n\n\t\t.search_results {\n\t\t\tmargin-top: 0rpx !important;\n\t\t\tbackground: #fff !important;\n\t\t\tborder: 1rpx solid #eee !important;\n\t\t\tbox-shadow: 0 4rpx 24rpx rgba(0, 0, 0, 0.08) !important;\n\n\t\t\t.result_item {\n\t\t\t\tfont-size: 22rpx !important;\n\t\t\t\tpadding: 24rpx !important;\n\t\t\t\tcolor: #666 !important;\n\n\t\t\t\t&:active {\n\t\t\t\t\tbackground: #f8f8f8 !important;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/* 按钮尺寸优化 */\n\t.picker-footer {\n\t\tbutton {\n\t\t\theight: 64rpx !important; // 缩小按钮高度\n\t\t\tline-height: 64rpx !important;\n\t\t\tfont-size: 22rpx !important;\n\t\t\tpadding: 0 24rpx !important;\n\t\t}\n\t}\n\n\t.search_tab {\n\t\tbackground: #f8f8f8 !important;\n\t}\n\n\t.mode-switch {\n\t\tposition: relative;\n\t\theight: 72rpx;\n\t\tmargin-bottom: 24rpx;\n\n\t\t.switch-btn {\n\t\t\tposition: absolute;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tgap: 12rpx;\n\t\t\tborder-radius: 36rpx;\n\t\t\ttransition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\t\t\tbox-shadow: 0 4rpx 16rpx rgba(120, 208, 221, 0.2);\n\n\t\t\ttext {\n\t\t\t\tcolor: #fff;\n\t\t\t\tfont-size: 26rpx;\n\t\t\t\tfont-weight: 500;\n\t\t\t}\n\n\t\t\t&.precision-mode {\n\t\t\t\tbackground: linear-gradient(135deg, #78d0dd, #94a5f3);\n\t\t\t}\n\n\t\t\t&.fuzzy-mode {\n\t\t\t\tbackground: linear-gradient(135deg, #ff9a9e, #fad0c4);\n\t\t\t}\n\n\t\t\t// 入场动画\n\t\t\t&-enter-active,\n\t\t\t&-leave-active {\n\t\t\t\ttransition: all 0.3s ease;\n\t\t\t}\n\n\t\t\t&-enter-from,\n\t\t\t&-leave-to {\n\t\t\t\topacity: 0;\n\t\t\t\ttransform: scale(0.9);\n\t\t\t}\n\t\t}\n\t}\n</style>","import Component from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/relation-picker/relation-picker.vue'\nwx.createComponent(Component)"],"names":["ref","uni","nextTick","watch","websiteUrl"],"mappings":"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"}