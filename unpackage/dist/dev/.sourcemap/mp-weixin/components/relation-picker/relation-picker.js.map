{"version":3,"file":"relation-picker.js","sources":["components/relation-picker/relation-picker.vue","/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/relation-picker/relation-picker.vue?type=component"],"sourcesContent":["<!-- components/relation-picker/relation-picker.vue -->\r\n<template>\r\n\t<common-modal :visible=\"internalVisible\" @update:visible=\"handleModalVisibilityChange\" top=\"3%\">\r\n\t\t<view class=\"relation-picker-container\">\r\n\t\t\t<view class=\"picker-header\">\r\n\t\t\t\t<view class=\"mode-switch\">\r\n\t\t\t\t\t<!-- 模式切换按钮 -->\r\n\t\t\t\t\t<view v-if=\"isFuzzyMode\" class=\"switch-btn precision-mode\" @tap=\"switchMode(false)\">\r\n\t\t\t\t\t\t<uni-icons type=\"search\" size=\"18\" color=\"#fff\"></uni-icons>\r\n\t\t\t\t\t\t<text>切换到精确关联</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-if=\"!isFuzzyMode\" class=\"switch-btn fuzzy-mode\" @tap=\"switchMode(true)\">\r\n\t\t\t\t\t\t<uni-icons type=\"list\" size=\"18\" color=\"#fff\"></uni-icons>\r\n\t\t\t\t\t\t<text>切换到模糊关联</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"picker-body\">\r\n\t\t\t\t<!-- 精确模式 -->\r\n\t\t\t\t<template v-if=\"!isFuzzyMode\">\r\n\t\t\t\t\t<common-name-picker ref=\"typePicker\" :dataList=\"typeList\" @select=\"handleTypeSelect\"\r\n\t\t\t\t\t\t@toggle=\"handleComponentToggle('type')\" class=\"type-picker\" />\r\n\r\n\t\t\t\t\t<common-search ref=\"brandSearch\" mode=\"fill\" @select=\"handleBrandSelect\"\r\n\t\t\t\t\t\t@toggle=\"handleComponentToggle('brand')\" class=\"brand-search\" />\r\n\r\n\t\t\t\t\t<custom-picker ref=\"goodsPicker\" :dataList=\"goodsList\" @select=\"handleGoodsSelect\"\r\n\t\t\t\t\t\t@toggle=\"handleComponentToggle('goods')\" class=\"goods-picker\" />\r\n\t\t\t\t</template>\r\n\r\n\t\t\t\t<!-- 模糊模式 -->\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t<goods-search ref=\"fuzzySearch\" mode=\"fill\" @select=\"handleFuzzySelect\" v-model=\"searchKeyword\"\r\n\t\t\t\t\t\t@toggle=\"handleComponentToggle('fuzzy')\" class=\"fuzzy-search\" />\r\n\t\t\t\t</template>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"picker-footer\">\r\n\t\t\t\t<button class=\"cancel-btn\" @tap=\"handleCancel\">取消</button>\r\n\t\t\t\t<button class=\"confirm-btn\" @tap=\"handleConfirm\">确认</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</common-modal>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\twatch,\r\n\t\tnextTick\r\n\t} from 'vue';\r\n\r\n\timport {\r\n\t\twebsiteUrl,\r\n\t\timage1Url,\r\n\t\twechatSignLogin,\r\n\t\tgetUserInfo,\r\n\t\tglobal,\r\n\t\tasyncGetUserInfo,\r\n\t\tgetScene,\r\n\t} from \"../../common/config.js\"\r\n\r\n\r\n\tconst props = defineProps({\r\n\t\ttypeList: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => []\r\n\t\t},\r\n\t\tvisible: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t}\r\n\t})\r\n\tconst emit = defineEmits([\r\n\t\t'update:visible',\r\n\t\t'confirm',\r\n\t\t'cancel'\r\n\t])\r\n\tconst goodsList = ref([])\r\n\r\n\t// 组件refs\r\n\tconst typePicker = ref()\r\n\tconst brandSearch = ref()\r\n\tconst goodsPicker = ref()\r\n\tconst fuzzySearch = ref()\r\n\r\n\t// 使用内部状态管理可见性\r\n\tconst internalVisible = ref(false)\r\n\t// 状态管理\r\n\tconst isFuzzyMode = ref(true)\r\n\tconst selectedData = ref({\r\n\t\ttype: null,\r\n\t\tbrand: {\r\n\t\t\tid: 0,\r\n\t\t\tname: ''\r\n\t\t},\r\n\t\tgoods: {\r\n\t\t\tid: 0,\r\n\t\t\tname: '',\r\n\t\t\timage: ''\r\n\t\t}\r\n\t})\r\n\r\n\r\n\t// 搜索关键词\r\n\tconst searchKeyword = ref('')\r\n\r\n\t// 模式切换\r\n\t// const switchMode = (isFuzzy) => {\r\n\t// \tconsole.log(isFuzzy)\r\n\t// \tisFuzzyMode.value = isFuzzy\r\n\t// \t// 切换时重置所有状态\r\n\t// \tsearchKeyword.value = ''\r\n\t// \tselectedData.value = {\r\n\t// \t\ttype: null,\r\n\t// \t\tbrand: null,\r\n\t// \t\tgoods: null\r\n\t// \t}\r\n\t// \tgoodsList.value = []\r\n\t// }\r\n\tconst switchMode = (isFuzzy) => {\r\n\t\tisFuzzyMode.value = isFuzzy\r\n\t\tresetAllComponents()\r\n\t\tselectedData.value = {\r\n\t\t\ttype: null,\r\n\t\t\tbrand: {\r\n\t\t\t\tid: 0,\r\n\t\t\t\tname: ''\r\n\t\t\t},\r\n\t\t\tgoods: {\r\n\t\t\t\tid: 0,\r\n\t\t\t\tname: '',\r\n\t\t\t\timage: ''\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 处理组件展开状态\r\n\tconst handleComponentToggle = (component) => {\r\n\t\tconst components = {\r\n\t\t\ttype: typePicker,\r\n\t\t\tbrand: brandSearch,\r\n\t\t\tgoods: goodsPicker,\r\n\t\t\tfuzzy: fuzzySearch\r\n\t\t}\r\n\r\n\t\tObject.entries(components).forEach(([key, ref]) => {\r\n\t\t\tif (key !== component && ref.value?.close) {\r\n\t\t\t\tref.value.close()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// 重置所有子组件\r\n\tconst resetAllComponents = () => {\r\n\t\t;\r\n\t\t[typePicker, brandSearch, goodsPicker, fuzzySearch].forEach(comp => {\r\n\t\t\tif (comp.value?.reset) comp.value.reset()\r\n\t\t})\r\n\t}\r\n\r\n\r\n\r\n\t// 模糊搜索选择处理\r\n\tconst handleFuzzySelect = async (goods) => {\r\n\t\ttry {\r\n\t\t\t// 处理手动输入的情况\r\n\t\t\tif (!goods?.id) {\r\n\t\t\t\tsearchKeyword.value = goods.name\r\n\t\t\t\tselectedData.value = {\r\n\t\t\t\t\ttype: '未知类型',\r\n\t\t\t\t\tbrand: {\r\n\t\t\t\t\t\tid: 0,\r\n\t\t\t\t\t\tname: ''\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgoods: {\r\n\t\t\t\t\t\tid: 0,\r\n\t\t\t\t\t\tname: goods.name,\r\n\t\t\t\t\t\timage: ''\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tconst detail = await getGoodsInfo(goods.id)\r\n\t\t\tsearchKeyword.value = goods.name\r\n\r\n\t\t\tselectedData.value = {\r\n\t\t\t\ttype: detail.type || '未知类型',\r\n\t\t\t\tbrand: {\r\n\t\t\t\t\tid: detail.brand_id || 0,\r\n\t\t\t\t\tname: detail.brand_name || ''\r\n\t\t\t\t},\r\n\t\t\t\tgoods: {\r\n\t\t\t\t\tid: goods.id,\r\n\t\t\t\t\tname: goods.name,\r\n\t\t\t\t\timage: detail?.goods_images?.[0] || ''\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('商品信息获取失败', error)\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '详细信息获取失败，已保存基本信息',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\tsearchKeyword.value = goods.name\r\n\t\t\tselectedData.value = {\r\n\t\t\t\ttype: '未知类型',\r\n\t\t\t\tbrand: {\r\n\t\t\t\t\tid: 0,\r\n\t\t\t\t\tname: ''\r\n\t\t\t\t},\r\n\t\t\t\tgoods: {\r\n\t\t\t\t\tid: goods?.id || 0,\r\n\t\t\t\t\tname: goods.name,\r\n\t\t\t\t\timage: ''\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// 在关闭弹窗时重置搜索关键词\r\n\t// const closePicker = () => {\r\n\t// \tinternalVisible.value = false\r\n\t// \tsearchKeyword.value = ''\r\n\t// \tselectedData.value = {\r\n\t// \t\ttype: null,\r\n\t// \t\tbrand: null,\r\n\t// \t\tgoods: null\r\n\t// \t}\r\n\t// }\r\n\tconst closePicker = () => {\r\n\t\tinternalVisible.value = false\r\n\t\tsearchKeyword.value = ''\r\n\t\tresetAllComponents()\r\n\t\tnextTick(() => {\r\n\t\t\tselectedData.value = {\r\n\t\t\t\ttype: null,\r\n\t\t\t\tbrand: {\r\n\t\t\t\t\tid: 0,\r\n\t\t\t\t\tname: ''\r\n\t\t\t\t},\r\n\t\t\t\tgoods: {\r\n\t\t\t\t\tid: 0,\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\timage: ''\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\r\n\t// 监听父组件传来的 visible 变化\r\n\twatch(() => props.visible, (val) => {\r\n\t\tinternalVisible.value = val\r\n\t})\r\n\r\n\t// 监听内部状态变化通知父组件\r\n\twatch(internalVisible, (val) => {\r\n\t\temit('update:visible', val)\r\n\t})\r\n\r\n\r\n\t// 新增 modal 可见性变化处理\r\n\tconst handleModalVisibilityChange = (newVal) => {\r\n\t\tinternalVisible.value = newVal\r\n\t\t// 当 modal 自身触发关闭时（如点击遮罩层）\r\n\t\tif (!newVal) {\r\n\t\t\tclosePicker()\r\n\t\t}\r\n\t}\r\n\t// 类型选择\r\n\tconst handleTypeSelect = (type) => {\r\n\t\tselectedData.value.type = type\r\n\t}\r\n\tconst getGoodsInfo = (id) => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tuni.request({\r\n\t\t\t\turl: websiteUrl + '/goods?id=' + id,\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\ttimeout: 5000,\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tresolve(res.data.data)\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tconsole.error('商品详情获取失败', err)\r\n\t\t\t\t\treject(err)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\t// 品牌选择\r\n\t// const handleBrandSelect = (brandId, brandName) => {\r\n\t// \tselectedData.value.brand = {\r\n\t// \t\tid: brandId,\r\n\t// \t\tname: brandName\r\n\t// \t}\r\n\t// \t// 添加商品加载逻辑\r\n\t// \ttry {\r\n\t// \t\tgetGoods(brandId)\r\n\t// \t} catch (error) {\r\n\t// \t\tconsole.error('获取商品失败', error)\r\n\t// \t}\r\n\t// }\r\n\tconst handleBrandSelect = (id, name) => {\r\n\t\tselectedData.value.brand = {\r\n\t\t\tid: id || 0,\r\n\t\t\tname\r\n\t\t}\r\n\t\tif (id) getGoods(id)\r\n\t}\r\n\r\n\r\n\t// 商品选择\r\n\t// const handleGoodsSelect = async (goodsId, goodsName) => {\r\n\t// \ttry {\r\n\t// \t\t// 先清空旧数据避免残留\r\n\t// \t\tselectedData.value.goods = null\r\n\t// \t\tconst detail = await getGoodsInfo(goodsId)\r\n\t// \t\tif (!detail) {\r\n\t// \t\t\tthrow new Error('未找到商品信息')\r\n\t// \t\t}\r\n\t// \t\tselectedData.value.goods = {\r\n\t// \t\t\tid: goodsId,\r\n\t// \t\t\tname: goodsName,\r\n\t// \t\t\timage: detail?.goods_images?.[0] || ''\r\n\t// \t\t}\r\n\t// \t} catch (error) {\r\n\t// \t\tconsole.error('商品选择失败', error)\r\n\t// \t\tuni.showToast({\r\n\t// \t\t\ttitle: '商品信息获取失败，请重新选择',\r\n\t// \t\t\ticon: 'none'\r\n\t// \t\t})\r\n\t// \t}\r\n\t// }\r\n\r\n\tconst handleGoodsSelect = async (id, name) => {\r\n\t\ttry {\r\n\t\t\tselectedData.value.goods = { // 先设置默认值\r\n\t\t\t\tid: id || 0,\r\n\t\t\t\tname,\r\n\t\t\t\timage: ''\r\n\t\t\t}\r\n\r\n\t\t\t// 只有有效ID才请求接口\r\n\t\t\tif (id && id !== 0) {\r\n\t\t\t\tconst detail = await getGoodsInfo(id)\r\n\t\t\t\tselectedData.value.goods.image = detail?.goods_images?.[0] || ''\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('商品信息获取失败', error)\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '图片信息获取失败，已保存基本信息',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getGoods(id) {\r\n\t\t// 请求 /goods-name-list 并赋值goodsList\r\n\t\tuni.request({\r\n\t\t\turl: websiteUrl + '/goods-name-list?id=' + id,\r\n\t\t\tmethod: 'GET',\r\n\t\t\ttimeout: 5000,\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tconsole.log(res.data.data);\r\n\t\t\t\tgoodsList.value = res.data.data\r\n\t\t\t\tconsole.log(goodsList.value)\r\n\t\t\t},\r\n\r\n\t\t\tfail: (err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '网络请求失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t}\r\n\t// 确认操作\r\n\t// const handleConfirm = async () => {\r\n\t// \ttry {\r\n\t// \t\t// 获取商品图片信息\r\n\t// \t\tconst goodsDetail = await getGoodsInfo(selectedData.value.goods.id)\r\n\r\n\t// \t\t// 构建完整数据对象\r\n\t// \t\tconst resultData = {\r\n\t// \t\t\t...selectedData.value,\r\n\t// \t\t\tgoods_image: goodsDetail?.goods_images?.[0] || '',\r\n\t// \t\t\tgoods_id: selectedData.value.goods.id,\r\n\t// \t\t\tbrand_id: selectedData.value.brand.id,\r\n\t// \t\t\tbrand_name: selectedData.value.brand.name,\r\n\t// \t\t\ttype: selectedData.value.type\r\n\t// \t\t}\r\n\r\n\t// \t\temit('confirm', resultData)\r\n\t// \t\tclosePicker()\r\n\t// \t} catch (error) {\r\n\t// \t\tconsole.error('商品信息获取失败', error)\r\n\t// \t\tuni.showToast({\r\n\t// \t\t\ttitle: '商品信息获取失败',\r\n\t// \t\t\ticon: 'none'\r\n\t// \t\t})\r\n\t// \t}\r\n\t// }\r\n\r\n\tconst handleConfirm = async () => {\r\n\t\ttry {\r\n\t\t\tlet result = null;\r\n\r\n\t\t\tif (isFuzzyMode.value) {\r\n\t\t\t\t// 模糊模式处理\r\n\t\t\t\tif (selectedData.value.goods.id && selectedData.value.goods.id !== 0) {\r\n\t\t\t\t\t// 修改这里：添加默认类型处理\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst detail = await getGoodsInfo(selectedData.value.goods.id);\r\n\t\t\t\t\t\tresult = {\r\n\t\t\t\t\t\t\tisFuzzy: true,\r\n\t\t\t\t\t\t\tkeyword: searchKeyword.value,\r\n\t\t\t\t\t\t\tgoods: {\r\n\t\t\t\t\t\t\t\tid: detail.id || selectedData.value.goods.id,\r\n\t\t\t\t\t\t\t\tname: detail.goods_name || selectedData.value.goods.name,\r\n\t\t\t\t\t\t\t\timage: detail?.goods_images?.[0] || ''\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tbrand: {\r\n\t\t\t\t\t\t\t\tid: detail.brand_id || 0,\r\n\t\t\t\t\t\t\t\tname: detail.brand_name || ''\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t// 添加默认类型\r\n\t\t\t\t\t\t\ttype: detail.type || '未知类型' // 确保这里使用默认值\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.error('商品信息获取失败，使用缓存数据', error);\r\n\t\t\t\t\t\tresult = {\r\n\t\t\t\t\t\t\tisFuzzy: true,\r\n\t\t\t\t\t\t\tkeyword: searchKeyword.value,\r\n\t\t\t\t\t\t\tgoods: selectedData.value.goods,\r\n\t\t\t\t\t\t\tbrand: selectedData.value.brand,\r\n\t\t\t\t\t\t\t// 确保这里使用默认值\r\n\t\t\t\t\t\t\ttype: selectedData.value.type || '未知类型'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 无商品ID时使用默认值\r\n\t\t\t\t\tresult = {\r\n\t\t\t\t\t\tisFuzzy: true,\r\n\t\t\t\t\t\tkeyword: searchKeyword.value,\r\n\t\t\t\t\t\tgoods: {\r\n\t\t\t\t\t\t\tid: 0,\r\n\t\t\t\t\t\t\tname: searchKeyword.value,\r\n\t\t\t\t\t\t\timage: ''\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbrand: {\r\n\t\t\t\t\t\t\tid: 0,\r\n\t\t\t\t\t\t\tname: ''\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// 明确设置默认类型\r\n\t\t\t\t\t\ttype: '未知类型'\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tconsole.log(\"jjjjjjjjjjjjjjjj\")\r\n\t\t\t\t// 精确模式处理\r\n\t\t\t\tif (selectedData.value.goods.id && selectedData.value.goods.id !== 0) {\r\n\t\t\t\t\t// 获取最新商品信息\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst detail = await getGoodsInfo(selectedData.value.goods.id);\r\n\t\t\t\t\t\tselectedData.value.goods.image = detail?.goods_images?.[0] || '';\r\n\t\t\t\t\t\tselectedData.value.type = detail.type || selectedData.value.type;\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.error('商品信息获取失败，使用缓存数据', error);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 数据校验\r\n\t\t\t\tif (!selectedData.value.type) throw new Error('请选择商品类型');\r\n\t\t\t\tif (!selectedData.value.brand.name) throw new Error('请填写或选择品牌');\r\n\t\t\t\tif (!selectedData.value.goods.name) throw new Error('请填写或选择商品');\r\n\r\n\t\t\t\tresult = {\r\n\t\t\t\t\tisFuzzy: false,\r\n\t\t\t\t\ttype: selectedData.value.type,\r\n\t\t\t\t\tbrand: selectedData.value.brand,\r\n\t\t\t\t\tgoods: selectedData.value.goods\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tconsole.log('确认数据:', result);\r\n\r\n\t\t\temit('confirm', result);\r\n\t\t\tclosePicker();\r\n\t\t} catch (error) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: error.message,\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t// 取消操作\r\n\tconst handleCancel = () => {\r\n\t\temit('cancel')\r\n\t\tclosePicker()\r\n\t}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t.relation-picker-container {\r\n\t\tpadding: 24rpx;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 16rpx;\r\n\t\twidth: 600rpx;\r\n\t\tbox-sizing: border-box;\r\n\r\n\t\t.picker-header {\r\n\t\t\tmargin-bottom: 24rpx;\r\n\t\t\tborder-bottom: 1rpx solid #eee;\r\n\t\t\tpadding-bottom: 24rpx;\r\n\r\n\t\t\t.title {\r\n\t\t\t\tfont-size: 24rpx; // 标题字号调整\r\n\t\t\t\tfont-weight: 700; // 加粗程度提升\r\n\t\t\t\tcolor: #333;\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.picker-body {\r\n\r\n\r\n\t\t\t/deep/ .type-picker {\r\n\t\t\t\tmargin-bottom: 40rpx;\r\n\r\n\t\t\t\t.select-input {\r\n\t\t\t\t\tbackground: #f8f8f8;\r\n\t\t\t\t\tborder-radius: 12rpx;\r\n\t\t\t\t\tpadding: 16rpx 24rpx;\r\n\t\t\t\t\tfont-size: 22rpx;\r\n\t\t\t\t\tcolor: #333;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/* 品牌搜索样式加强 */\r\n\t\t\t/deep/ .brand-search {\r\n\r\n\t\t\t\tbackground: #f8f8f8 !important;\r\n\t\t\t\tborder-radius: 12rpx !important;\r\n\t\t\t\t// padding: 12rpx 24rpx !important;\r\n\t\t\t\tmin-height: 72rpx; // 新增固定高度\r\n\r\n\t\t\t\t.common_search_input {\r\n\t\t\t\t\tfont-size: 22rpx !important;\r\n\t\t\t\t\tcolor: #333 !important;\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.icon_image {\r\n\t\t\t\t\twidth: 36rpx !important;\r\n\t\t\t\t\theight: 36rpx !important;\r\n\t\t\t\t\tmargin: 0 12rpx !important;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.search_results {\r\n\t\t\t\t\tbackground: #fff !important;\r\n\t\t\t\t\tborder: 1rpx solid #eee !important;\r\n\t\t\t\t\tbox-shadow: 0 4rpx 24rpx rgba(0, 0, 0, 0.08) !important;\r\n\r\n\t\t\t\t\t.result_item {\r\n\t\t\t\t\t\tfont-size: 22rpx !important;\r\n\t\t\t\t\t\tpadding: 24rpx !important;\r\n\t\t\t\t\t\tcolor: #666 !important;\r\n\r\n\t\t\t\t\t\t&:active {\r\n\t\t\t\t\t\t\tbackground: #f8f8f8 !important;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/* 按钮尺寸优化 */\r\n\t\t\t.picker-footer {\r\n\t\t\t\tbutton {\r\n\t\t\t\t\theight: 64rpx !important; // 缩小按钮高度\r\n\t\t\t\t\tline-height: 64rpx !important;\r\n\t\t\t\t\tfont-size: 22rpx !important;\r\n\t\t\t\t\tpadding: 0 24rpx !important;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/deep/ .goods-picker {\r\n\t\t\t\t.select-input {\r\n\t\t\t\t\tbackground: #f8f8f8;\r\n\t\t\t\t\tborder-radius: 12rpx;\r\n\t\t\t\t\tpadding: 16rpx 24rpx;\r\n\t\t\t\t\tfont-size: 22rpx;\r\n\t\t\t\t\tcolor: #333;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.picker-footer {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tmargin-top: 32rpx;\r\n\t\t\tgap: 20rpx;\r\n\r\n\t\t\tbutton {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\theight: 72rpx;\r\n\t\t\t\tline-height: 72rpx;\r\n\t\t\t\tborder-radius: 12rpx;\r\n\t\t\t\tfont-size: 22rpx; // 字号统一调整\r\n\t\t\t\ttransition: all 0.3s;\r\n\t\t\t\tmargin: 0;\r\n\r\n\t\t\t\t&::after {\r\n\t\t\t\t\tborder: none;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.cancel-btn {\r\n\t\t\t\tbackground: #f5f5f5;\r\n\t\t\t\tcolor: #666;\r\n\r\n\t\t\t\t&:active {\r\n\t\t\t\t\tbackground: #e8e8e8;\r\n\t\t\t\t\topacity: 0.8;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.confirm-btn {\r\n\t\t\t\tbackground: #78d0dd;\r\n\t\t\t\tcolor: #fff;\r\n\r\n\t\t\t\t&:active {\r\n\t\t\t\t\topacity: 0.8;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/* 品牌搜索样式加强 */\r\n\t/deep/ .brand-search {\r\n\r\n\r\n\t\tbackground: #f8f8f8 !important;\r\n\t\tborder-radius: 12rpx !important;\r\n\t\tpadding: 16rpx 24rpx !important;\r\n\t\tmin-height: 72rpx; // 新增固定高度\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tdisplay: block;\r\n\r\n\t\t.common_search_input {\r\n\t\t\tfont-size: 22rpx !important;\r\n\t\t\tcolor: #333 !important;\r\n\t\t\tbackground: #f8f8f8 !important;\r\n\t\t\tpadding: 0rpx !important;\r\n\t\t\tflex: 1;\r\n\t\t}\r\n\r\n\t\t.icon_image {\r\n\t\t\twidth: 36rpx !important;\r\n\t\t\theight: 36rpx !important;\r\n\t\t\tmargin: 0 12rpx !important;\r\n\t\t}\r\n\r\n\r\n\t\t.search_results {\r\n\t\t\tmargin-top: 0rpx !important;\r\n\t\t\tbackground: #fff !important;\r\n\t\t\tborder: 1rpx solid #eee !important;\r\n\t\t\tbox-shadow: 0 4rpx 24rpx rgba(0, 0, 0, 0.08) !important;\r\n\r\n\t\t\t.result_item {\r\n\t\t\t\tfont-size: 22rpx !important;\r\n\t\t\t\tpadding: 24rpx !important;\r\n\t\t\t\tcolor: #666 !important;\r\n\r\n\t\t\t\t&:active {\r\n\t\t\t\t\tbackground: #f8f8f8 !important;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/* 按钮尺寸优化 */\r\n\t.picker-footer {\r\n\t\tbutton {\r\n\t\t\theight: 64rpx !important; // 缩小按钮高度\r\n\t\t\tline-height: 64rpx !important;\r\n\t\t\tfont-size: 22rpx !important;\r\n\t\t\tpadding: 0 24rpx !important;\r\n\t\t}\r\n\t}\r\n\r\n\t.search_tab {\r\n\t\tbackground: #f8f8f8 !important;\r\n\t}\r\n\r\n\t.mode-switch {\r\n\t\tposition: relative;\r\n\t\theight: 72rpx;\r\n\t\tmargin-bottom: 24rpx;\r\n\r\n\t\t.switch-btn {\r\n\t\t\tposition: absolute;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tgap: 12rpx;\r\n\t\t\tborder-radius: 36rpx;\r\n\t\t\ttransition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n\t\t\tbox-shadow: 0 4rpx 16rpx rgba(120, 208, 221, 0.2);\r\n\r\n\t\t\ttext {\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t}\r\n\r\n\t\t\t&.precision-mode {\r\n\t\t\t\tbackground: linear-gradient(135deg, #78d0dd, #94a5f3);\r\n\t\t\t}\r\n\r\n\t\t\t&.fuzzy-mode {\r\n\t\t\t\tbackground: linear-gradient(135deg, #ff9a9e, #fad0c4);\r\n\t\t\t}\r\n\r\n\t\t\t// 入场动画\r\n\t\t\t&-enter-active,\r\n\t\t\t&-leave-active {\r\n\t\t\t\ttransition: all 0.3s ease;\r\n\t\t\t}\r\n\r\n\t\t\t&-enter-from,\r\n\t\t\t&-leave-to {\r\n\t\t\t\topacity: 0;\r\n\t\t\t\ttransform: scale(0.9);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import Component from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/relation-picker/relation-picker.vue'\nwx.createComponent(Component)"],"names":["ref","uni","nextTick","watch","websiteUrl"],"mappings":"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"}