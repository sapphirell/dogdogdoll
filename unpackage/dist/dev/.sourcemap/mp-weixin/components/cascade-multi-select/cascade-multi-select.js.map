{"version":3,"file":"cascade-multi-select.js","sources":["components/cascade-multi-select/cascade-multi-select.vue","/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/cascade-multi-select/cascade-multi-select.vue?type=component"],"sourcesContent":["<!-- components/cascade-multi-selector.vue -->\n<template>\n  <bottom-popup :show=\"show\" @close=\"closePopup\">\n    <view class=\"cascade-container\">\n      <!-- 顶部操作栏 -->\n      <view class=\"header\">\n        <text class=\"title\">选择尺寸</text>\n        <view class=\"actions\">\n          <text class=\"action-text\" @tap=\"resetSelection\">重置</text>\n          <uni-icons type=\"closeempty\" size=\"24\" color=\"#666\" @tap=\"closePopup\"></uni-icons>\n        </view>\n      </view>\n      \n      <!-- 主体内容 - 纵向级联布局 -->\n      <view class=\"cascade-body\">\n        <!-- 左侧分类列表 -->\n        <scroll-view scroll-y class=\"categories-container\">\n          <view \n            v-for=\"(category, index) in mainCategories\" \n            :key=\"index\"\n            class=\"category-item\"\n            :class=\"{active: activeCategory === category.value}\"\n            @tap=\"selectCategory(category)\"\n          >\n            <text class=\"category-label\">{{ category.label }}</text>\n            <text class=\"category-count\">{{ category.count }}个</text>\n          </view>\n        </scroll-view>\n        \n        <!-- 右侧尺寸列表 -->\n        <scroll-view scroll-y class=\"sizes-container\">\n          <view \n            v-for=\"(size, index) in currentSizes\" \n            :key=\"index\"\n            class=\"size-item\"\n            :class=\"{selected: isSelected(size, activeCategory)}\"\n            @tap=\"toggleSelect(size, activeCategory)\"\n          >\n            <text class=\"size-label\">{{ size }}</text>\n            <uni-icons \n              v-if=\"isSelected(size, activeCategory)\"\n              type=\"checkmarkempty\" \n              size=\"16\" \n              color=\"#65c6d9\"\n            ></uni-icons>\n          </view>\n        </scroll-view>\n      </view>\n      \n      <!-- 底部操作栏 -->\n      <view class=\"footer\">\n        <text class=\"selected-count\">已选: {{ selectedSizes.length }}个</text>\n        <button class=\"confirm-btn\" @tap=\"confirmSelection\">确定</button>\n      </view>\n    </view>\n  </bottom-popup>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue';\n\nconst props = defineProps({\n  show: {\n    type: Boolean,\n    default: false\n  },\n  sizeData: {\n    type: Object,\n    default: () => ({})\n  },\n  initialSelection: {\n    type: Array,\n    default: () => ([])\n  }\n});\n\nconst emit = defineEmits(['close', 'confirm']);\n\n// 当前激活的分类\nconst activeCategory = ref('');\n// 已选择的尺寸 [{ category, size }]\nconst selectedSizes = ref([]);\n\n// 主分类数据\nconst mainCategories = computed(() => {\n  return Object.keys(props.sizeData).map(category => ({\n    label: category,\n    value: category,\n    count: props.sizeData[category].length\n  }));\n});\n\n// 当前显示的尺寸选项\nconst currentSizes = computed(() => {\n  if (!activeCategory.value) return [];\n  return props.sizeData[activeCategory.value] || [];\n});\n\n// 重置选择\nconst resetSelection = () => {\n  activeCategory.value = '';\n  selectedSizes.value = [];\n};\n\n// 关闭弹窗\nconst closePopup = () => {\n  emit('close');\n};\n\n// 选择分类\nconst selectCategory = (category) => {\n  activeCategory.value = category.value;\n};\n\n// 切换尺寸选择\nconst toggleSelect = (size, category) => {\n  const index = selectedSizes.value.findIndex(\n    item => item.category === category && item.size === size\n  );\n  \n  if (index >= 0) {\n    // 已选中，移除\n    selectedSizes.value.splice(index, 1);\n  } else {\n    // 未选中，添加\n    selectedSizes.value.push({\n      category,\n      size\n    });\n  }\n};\n\n// 检查尺寸是否已选中\nconst isSelected = (size, category) => {\n  return selectedSizes.value.some(\n    item => item.category === category && item.size === size\n  );\n};\n\n// 确认选择\nconst confirmSelection = () => {\n  emit('confirm', [...selectedSizes.value]);\n  closePopup();\n};\n\n// 监听显示状态变化\nwatch(() => props.show, (newVal) => {\n  if (newVal) {\n    // 如果有初始选择值，设置初始状态\n    if (props.initialSelection && props.initialSelection.length > 0) {\n      selectedSizes.value = [...props.initialSelection];\n      if (props.initialSelection[0]) {\n        activeCategory.value = props.initialSelection[0].category;\n      }\n    } else {\n      resetSelection();\n      // 默认选中第一个分类\n      if (mainCategories.value.length > 0) {\n        activeCategory.value = mainCategories.value[0].value;\n      }\n    }\n  }\n});\n</script>\n\n<style lang=\"less\" scoped>\n.cascade-container {\n  display: flex;\n  flex-direction: column;\n  height: 70vh;\n  background-color: #fff;\n  border-radius: 24rpx 24rpx 0 0;\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20rpx 30rpx;\n  border-bottom: 1rpx solid #f0f0f0;\n  \n  .title {\n    font-size: 32rpx;\n    font-weight: bold;\n    color: #333;\n  }\n  \n  .actions {\n    display: flex;\n    align-items: center;\n    gap: 30rpx;\n    \n    .action-text {\n      font-size: 28rpx;\n      color: #65c6d9;\n    }\n  }\n}\n\n.cascade-body {\n  display: flex;\n  flex: 1;\n  overflow: hidden;\n}\n\n.categories-container {\n  width: 35%;\n  height: 100%;\n  border-right: 1rpx solid #f0f0f0;\n  \n  .category-item {\n    padding: 25rpx 20rpx;\n    border-bottom: 1rpx solid #f8f8f8;\n    \n    &.active {\n      background-color: #e6f7ff;\n      border-right: 4rpx solid #65c6d9;\n    }\n    \n    .category-label {\n      font-size: 28rpx;\n      color: #333;\n      margin-bottom: 5rpx;\n      display: block;\n    }\n    \n    .category-count {\n      font-size: 24rpx;\n      color: #999;\n    }\n  }\n}\n\n.sizes-container {\n  width: 65%;\n  height: 100%;\n  padding: 15rpx 0;\n  \n  .size-item {\n    padding: 25rpx 30rpx;\n    border-bottom: 1rpx solid #f8f8f8;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    \n    &.selected {\n      background-color: #f0faff;\n      color: #65c6d9;\n      font-weight: 500;\n    }\n    \n    .size-label {\n      font-size: 28rpx;\n    }\n  }\n}\n\n.footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20rpx 30rpx;\n  border-top: 1rpx solid #f0f0f0;\n  background-color: #fff;\n  \n  .selected-count {\n    font-size: 28rpx;\n    color: #666;\n  }\n  \n  .confirm-btn {\n    background: linear-gradient(135deg, #8fecff, #c1ddff);\n    color: #fff;\n    border-radius: 50rpx;\n    padding: 0 60rpx;\n    height: 70rpx;\n    line-height: 70rpx;\n    font-size: 28rpx;\n\tmargin: auto 0 auto auto;\n  }\n}\n</style>\n","import Component from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/components/cascade-multi-select/cascade-multi-select.vue'\nwx.createComponent(Component)"],"names":["ref","computed","watch"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA,UAAM,QAAQ;AAed,UAAM,OAAO;AAGb,UAAM,iBAAiBA,cAAAA,IAAI,EAAE;AAE7B,UAAM,gBAAgBA,cAAAA,IAAI,CAAA,CAAE;AAG5B,UAAM,iBAAiBC,cAAQ,SAAC,MAAM;AACpC,aAAO,OAAO,KAAK,MAAM,QAAQ,EAAE,IAAI,eAAa;AAAA,QAClD,OAAO;AAAA,QACP,OAAO;AAAA,QACP,OAAO,MAAM,SAAS,QAAQ,EAAE;AAAA,MACjC,EAAC;AAAA,IACJ,CAAC;AAGD,UAAM,eAAeA,cAAQ,SAAC,MAAM;AAClC,UAAI,CAAC,eAAe;AAAO,eAAO;AAClC,aAAO,MAAM,SAAS,eAAe,KAAK,KAAK,CAAA;AAAA,IACjD,CAAC;AAGD,UAAM,iBAAiB,MAAM;AAC3B,qBAAe,QAAQ;AACvB,oBAAc,QAAQ;IACxB;AAGA,UAAM,aAAa,MAAM;AACvB,WAAK,OAAO;AAAA,IACd;AAGA,UAAM,iBAAiB,CAAC,aAAa;AACnC,qBAAe,QAAQ,SAAS;AAAA,IAClC;AAGA,UAAM,eAAe,CAAC,MAAM,aAAa;AACvC,YAAM,QAAQ,cAAc,MAAM;AAAA,QAChC,UAAQ,KAAK,aAAa,YAAY,KAAK,SAAS;AAAA,MACxD;AAEE,UAAI,SAAS,GAAG;AAEd,sBAAc,MAAM,OAAO,OAAO,CAAC;AAAA,MACvC,OAAS;AAEL,sBAAc,MAAM,KAAK;AAAA,UACvB;AAAA,UACA;AAAA,QACN,CAAK;AAAA,MACF;AAAA,IACH;AAGA,UAAM,aAAa,CAAC,MAAM,aAAa;AACrC,aAAO,cAAc,MAAM;AAAA,QACzB,UAAQ,KAAK,aAAa,YAAY,KAAK,SAAS;AAAA,MACxD;AAAA,IACA;AAGA,UAAM,mBAAmB,MAAM;AAC7B,WAAK,WAAW,CAAC,GAAG,cAAc,KAAK,CAAC;AACxC;IACF;AAGAC,kBAAK,MAAC,MAAM,MAAM,MAAM,CAAC,WAAW;AAClC,UAAI,QAAQ;AAEV,YAAI,MAAM,oBAAoB,MAAM,iBAAiB,SAAS,GAAG;AAC/D,wBAAc,QAAQ,CAAC,GAAG,MAAM,gBAAgB;AAChD,cAAI,MAAM,iBAAiB,CAAC,GAAG;AAC7B,2BAAe,QAAQ,MAAM,iBAAiB,CAAC,EAAE;AAAA,UAClD;AAAA,QACP,OAAW;AACL;AAEA,cAAI,eAAe,MAAM,SAAS,GAAG;AACnC,2BAAe,QAAQ,eAAe,MAAM,CAAC,EAAE;AAAA,UAChD;AAAA,QACF;AAAA,MACF;AAAA,IACH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjKD,GAAG,gBAAgB,SAAS;"}