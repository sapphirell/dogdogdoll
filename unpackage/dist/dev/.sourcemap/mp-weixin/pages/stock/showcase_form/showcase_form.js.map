{"version":3,"file":"showcase_form.js","sources":["pages/stock/showcase_form/showcase_form.vue","pages/stock/showcase_form/showcase_form.vue?type=page"],"sourcesContent":["<template>\r\n\t<view>\n\t\t<meta name=\"theme-color\" content=\"#F8F8F8\"></meta>\r\n\t\t<view v-if=\"!isEditable\" class=\"edit-tip\">\r\n\t\t\t<text>ÂΩìÂâçÁä∂ÊÄÅ‰∏çÂèØÁºñËæë</text>\r\n\t\t</view>\r\n\r\n\t\t<!-- ‰∏ä‰º†ÂõæÁâáÂàóË°® -->\n\t\t<view style=\"width: 100%;overflow: hidden;\">\n\r\n\t\t\t<scroll-view scroll-x=\"true\" class=\"upload_box\" ll-with-animation=\"true\" :show-scrollbar=\"false\">\r\n\t\t\t\t<view class=\"upload_item\" v-for=\"(item, index) in uploadList\" :key=\"index\">\r\n\t\t\t\t\t<image :src=\"item\" class=\"uploaded_image\" @tap=\"viewFullImage\" mode=\"aspectFill\" />\r\n\t\t\t\t\t<image v-if=\"isEditable\" src=\"/static/cancel.png\" class=\"close_icon\" @tap=\"deleteImage(index)\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"uploadImageBox\" style=\"background: #f8f8f8;\" v-if=\"isEditable\">\r\n\t\t\t\t\t<image src=\"/static/add2.png\" class=\"upload_img\" @tap=\"selectImage(index)\"\r\n\t\t\t\t\t\tstyle=\"width: 50px;height: 50px;margin: 25px;\" />\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</scroll-view>\r\n\t\t</view>\n\t\t<!-- Ê†áÈ¢ò -->\r\n\t\t<input v-model=\"name\" type=\"text\" :disabled=\"!isEditable\" placeholder=\"ËØ∑ËæìÂÖ•Ê†áÈ¢ò\"\r\n\t\t\tstyle=\"padding: 10px;margin: 20px 15px 5px 15px;display: block;\">\r\n\t\t<view class=\"oneLine\"></view>\r\n\t\t<textarea v-model=\"description\" :disabled=\"!isEditable\" placeholder=\"ËØ∑ËæìÂÖ•ÊèèËø∞\"\r\n\t\t\tstyle=\"padding: 10px;margin:10px 15px 5px 15px;display: block;line-height: 28px;width: calc(100% - 50px);\"></textarea>\r\n\t\t<view class=\"oneLine\"></view>\r\n\t\t<view class=\"\">\n\t\t\t<view class=\"relation-trigger\" v-if=\"isEditable\" @tap=\"showRelationPicker\">\n\t\t\t  <text class=\"placeholder\">ÁÇπÂáªÂÖ≥ËÅîÂ®ÉÁâ©</text>\n\t\t\t  <image src=\"/static/right2.png\" class=\"arrow-icon\" />\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"publish-detail\">\n\t\t\t<text>* Â±ïÁ§∫ÊÇ®ÁöÑÂÆùÂÆù‰ª¨ ü©µ„ÄÇ</text>\n\t\t\t<text>* ‰∏çÂÖ≥ËÅîÂïÜÂìÅÁöÑÂ±ïÁ§∫Êüú‰∏ç‰ºöÂá∫Áé∞Âú®ÂπøÂú∫‰∏≠„ÄÇ</text>\n\t\t</view>\r\n\t\t<!-- Áõ∏ÂÖ≥ -->\r\n\t\t<view class=\"saveCollocationDataList\">\r\n\t\t\t<view v-for=\"(item, index) in saveCollocationDataList\" :key=\"index\">\r\n\t\t\t\t<view class=\"saveCollocationDataItem\">\r\n\t\t\t\t\t<image v-if=\"item.goods_image\" :src=\"item.goods_image\" mode=\"aspectFill\" style=\"width: 70px;height: 70px;\"></image>\r\n\t\t\t\t\t<text v-else class=\"no-image\">?</text>\r\n\t\t\t\t\t<text class=\"info-tap\" style=\"width: calc(100% - 120px);display: inline-block;\">{{item.type}} {{item.brand_name}} -\r\n\t\t\t\t\t\t{{item.goods_name}} </text>\r\n\t\t\t\t\t<image src=\"/static/cancel.png\" v-if=\"isEditable\" class=\"close_icon\"\r\n\t\t\t\t\t\t@tap=\"deleteCollcation(index)\" />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\n\t\t <relation-picker\n\t\t   v-model:visible=\"showSelectTab\"\n\t\t    :typeList=\"typeList\"\n\t\t    :goodsList=\"goodsList\"\n\t\t    @confirm=\"handleRelationConfirm\"\n\t\t    @cancel=\"handleRelationCancel\"\n\t\t  />\r\n\r\n\r\n\t\t<view class=\"footer\">\r\n\t\t\t<button v-if=\"showDelete\" @click=\"handleDelete\" class=\"delete-btn\">Âà†Èô§</button>\r\n\t\t\t<button @click=\"submitForm\">ÂèëË°®</button>\r\n\t\t</view>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tonMounted,\r\n\t\tref,\r\n\t\tcomputed,\r\n\t} from 'vue';\r\n\timport {\r\n\t\twebsiteUrl,\r\n\t\timage1Url,\r\n\t\twechatSignLogin,\r\n\t\tgetUserInfo,\r\n\t\tglobal,\r\n\t\tasyncGetUserInfo,\n\t\tgetScene,\r\n\t} from \"../../../common/config.js\";\r\n\r\n\timport {\r\n\t\tchooseImage,\r\n\t\tjumpToCroper,\r\n\t\tgetQiniuToken,\r\n\t\tuploadImageToQiniu,\n\t\tchooseImageList,\r\n\t} from \"../../../common/image.js\";\r\n\r\n\t//Êé•ÂèóÂèÇÊï∞ propsGoodsId propsGoodsName propsBrandId propsBrandNameÂ¶ÇÊûúÊòØÈùûÁ©∫ÊàñÈùû0ÔºåÊ∑ªÂä†‰∏ÄÊù°\r\n\tconst props = defineProps([\"showcase_id\"])\r\n\r\n\tconst uploadList = ref([]);\r\n\tconst goodsList = ref([\r\n\t\t// {\"name\":\"aa\", \"id\":1}\r\n\t]);\r\n\tconst typeList = ref([]);\r\n\tconst showSelectTab = ref(false);\r\n\t// // ‰ø°ÊÅØËæìÂÖ•Ê°Ü‰∏¥Êó∂‰ø°ÊÅØ\r\n\tconst chooseBrandName = ref(\"\")\r\n\tconst chooseBrandId = ref(0)\r\n\tconst chooseGoodsName = ref(\"\")\r\n\tconst chooseGoodsId = ref(0)\r\n\tconst chooseType = ref(\"\")\n\t\n\r\n\n\t// Â§ÑÁêÜÁ°ÆËÆ§‰∫ã‰ª∂\n\t// const handleRelationConfirm = (selectedData) => {\n\t//   // ËøôÈáåÂ§ÑÁêÜÈÄâÊã©ÂêéÁöÑÊï∞ÊçÆ‰øùÂ≠òÈÄªËæë\n\t//   console.log('Êî∂Âà∞ÈÄâÊã©Êï∞ÊçÆ:', selectedData)\n\t//   // Â∞ÜÊï∞ÊçÆÊ∑ªÂä†Âà∞ saveCollocationDataList\n\t//   saveCollocationDataList.value.push({\n\t// \tbrand_id: selectedData.brand_id,\n\t// \tgoods_id: selectedData.goods.id,\n\t// \tbrand_name: selectedData.brand.name,\n\t// \tgoods_name: selectedData.goods.name,\n\t// \tgoods_image: selectedData.goods.image,\n\t// \ttype: selectedData.type\n\t//   })\n\t// }\n\tconst handleRelationConfirm = (data) => {\n\t  try {\n\t    const relationData = {\n\t      goods_id: data.goods.id || 0,\n\t      goods_name: data.goods.name,\n\t      goods_image: data.goods.image || '',\n\t      brand_id: data.brand.id || 0,\n\t      brand_name: data.brand.name || (data.isFuzzy ? '' : 'Êú™Áü•ÂìÅÁâå'),\n\t      type: data.type || (data.isFuzzy ? 'Êú™Áü•Á±ªÂûã' : '')\n\t    }\n\t\n\t    // ÂéªÈáçÊ£ÄÊü•ÔºàÂêåÊó∂ÂåπÈÖçIDÂíåÂêçÁß∞Ôºâ\n\t    const isExist = saveCollocationDataList.value.some(item => \n\t      (item.goods_id !== 0 && item.goods_id === relationData.goods_id) ||\n\t      item.goods_name === relationData.goods_name\n\t    )\n\t\n\t    if (!isExist) {\n\t      saveCollocationDataList.value.push(relationData)\n\t    } else {\n\t      uni.showToast({\n\t        title: 'Â∑≤Â≠òÂú®Áõ∏ÂêåÂÖ≥ËÅîÈ°π',\n\t        icon: 'none'\n\t      })\n\t    }\n\t  } catch (error) {\n\t    console.error('‰øùÂ≠òÂÖ≥ËÅîÊï∞ÊçÆÂ§±Ë¥•:', error)\n\t    uni.showToast({\n\t      title: '‰øùÂ≠òÂÖ≥ËÅî‰ø°ÊÅØÂ§±Ë¥•',\n\t      icon: 'none'\n\t    })\n\t  }\n\t}\n\t// Â§ÑÁêÜÂèñÊ∂à‰∫ã‰ª∂\n\tconst handleRelationCancel = () => {\n\t  console.log('Áî®Êà∑ÂèñÊ∂àÈÄâÊã©')\n\t}\n\t\n\tconst showRelationPicker = () => {\n\t  showSelectTab.value = true;\n\t}\n\t\r\n\t// ÊòØÂê¶ÂèØÁºñËæë\r\n\tconst isEditable = computed(() => [-1, 1, 3].includes(display.value));\r\n\t// const displayText = computed(() => displayOptions.value[display.value]);\r\n\tconst showDelete = computed(() => {\n\t\tif (props.showcase_id > 0) {\n\t\t\treturn true\n\t\t} \n\t\treturn false\n\t});\r\n\r\n\r\n\t// ‰øÆÊîπÂìçÂ∫îÂºèÊï∞ÊçÆ\r\n\tconst name = ref(\"\")\r\n\tconst description = ref(\"\")\r\n\tconst display = ref(-1) // 0=ÂÆ°Ê†∏‰∏≠\r\n\r\n\r\n\t//Ëé∑ÂèñÂïÜÂìÅËØ¶ÊÉÖ\r\n\tfunction getGoodsInfo(id) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tuni.request({\r\n\t\t\t\turl: websiteUrl + '/goods?id=' + id,\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\ttimeout: 5000,\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tconsole.log(res.data.data);\r\n\t\t\t\t\tresolve(res.data); // ËØ∑Ê±ÇÊàêÂäüÔºåËøîÂõûÊï∞ÊçÆ\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'ÁΩëÁªúËØ∑Ê±ÇÂ§±Ë¥•',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treject(err); // ËØ∑Ê±ÇÂ§±Ë¥•ÔºåÊäõÂá∫ÈîôËØØ\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: () => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\t//Â≠òÂÇ®ÁöÑ‰ø°ÊÅØÊ°ÜÂÜÖÂÆπÂàóË°®\r\n\tconst saveCollocationDataList = ref([])\r\n\r\n\r\n\t// Ëé∑ÂèñShowcaseËØ¶ÊÉÖ\r\n\tasync function getShowCaseInfo() {\r\n\t\tif (!props.showcase_id) return\n\t\t\n\r\n\t\ttry {\r\n\t\t\tconst res = await uni.request({\r\n\t\t\t\turl: `${websiteUrl}/with-state/showcase-detail?id=${props.showcase_id}`,\r\n\t\t\t\tmethod: 'GET',\n\t\t\t\theader: {\n\t\t\t\t\t'Authorization': uni.getStorageSync('token'),\n\t\t\t\t},\r\n\t\t\t})\r\n\r\n\t\t\tconst data = res.data.data\r\n\t\t\tname.value = data.name\r\n\t\t\tdescription.value = data.description\r\n\t\t\tdisplay.value = data.display\r\n\t\t\tuploadList.value = data.image_urls?.split(',') || [] // Á°Æ‰øùÂ§ÑÁêÜÁ©∫ÂÄº\r\n\t\t\tconsole.log(data)\r\n\t\t\t// Â¶ÇÊûúÊúâÂÖ≥ËÅîÂïÜÂìÅÈúÄË¶ÅÂä†ËΩΩ\r\n\t\t\tif (data.relations) {\r\n\t\t\t\tsaveCollocationDataList.value = data.relations.map(r => ({\r\n\t\t\t\t\tgoods_id: r.relation_goods_id,\r\n\t\t\t\t\tgoods_name: r.relation_goods_name,\r\n\t\t\t\t\tbrand_id: r.relation_brand_id,\r\n\t\t\t\t\tbrand_name: r.relation_brand_name,\r\n\t\t\t\t\ttype: r.type,\r\n\t\t\t\t\tgoods_image: r.relation_goods_image\r\n\t\t\t\t}))\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: 'Âä†ËΩΩÂ§±Ë¥•',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction viewFullImage(index) {\r\n\t\tuni.previewImage({\r\n\t\t\tcurrent: uploadList.value[index],\r\n\t\t\turls: uploadList.value\r\n\t\t});\r\n\t}\r\n\r\n\t//ÈÄâÊã©ÂõæÁâá\r\n\tasync function selectImage() {\n\t  try {\n\t    // ÈÄâÊã©Â§öÂº†ÂõæÁâá\n\t    const imagePaths = await chooseImageList(9);\n\t    \n\t    // ÈÄê‰∏™‰∏ä‰º†\n\t    for (const path of imagePaths) {\n\t      // ‰∏∫ÊØè‰∏™ÂõæÁâáËé∑ÂèñÁã¨Á´ãtoken\n\t      const tokenData = await getQiniuToken();\n\t      \n\t      // ‰∏ä‰º†Âà∞‰∏ÉÁâõ‰∫ë\n\t      await uploadImageToQiniu(path, tokenData.token, tokenData.path);\n\t      \n\t      // Ê∑ªÂä†Âà∞Â±ïÁ§∫ÂàóË°®\n\t      uploadList.value.push(image1Url + tokenData.path);\n\t    }\n\t    \n\t    uni.showToast({ title: `ÊàêÂäü‰∏ä‰º†${imagePaths.length}Âº†ÂõæÁâá`, icon: 'success' });\n\t  } catch (error) {\n\t    console.error('‰∏ä‰º†Âá∫Èîô:', error);\n\t    uni.showToast({ title: 'ÈÉ®ÂàÜÂõæÁâá‰∏ä‰º†Â§±Ë¥•', icon: 'none' });\n\t  }\n\t}\r\n\r\n\tasync function handleDelete() {\r\n\t\tuni.showModal({\r\n\t\t\ttitle: 'Á°ÆËÆ§Âà†Èô§',\r\n\t\t\tcontent: 'Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™Â±ïÁ§∫ÂêóÔºü',\r\n\t\t\tsuccess: async (res) => {\r\n\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst res = await uni.request({\r\n\t\t\t\t\t\t\turl: `${websiteUrl}/with-state/delete-showcase?id=` + props.showcase_id,\r\n\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t'Authorization': uni.getStorageSync('token'),\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\tif (res.data.status === \"success\") {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: 'Âà†Èô§ÊàêÂäü'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tsetTimeout(() => uni.navigateBack(), 1000)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: 'Âà†Èô§Â§±Ë¥•',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\r\n\t// ÂÆûÁé∞Êèê‰∫§ÊñπÊ≥ï\r\n\tasync function submitForm() {\r\n\t\tconst token = uni.getStorageSync('token');\r\n\t\tif (!token) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: 'ËØ∑ÂÖàÁôªÂΩï',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// Âü∫Êú¨È™åËØÅ\r\n\t\tif (!name.value.trim() || !description.value.trim()) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: 'Ê†áÈ¢òÂíåÊ≠£Êñá‰∏çËÉΩ‰∏∫Á©∫',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (uploadList.value.length === 0) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: 'ËØ∑Ëá≥Â∞ë‰∏ä‰º†‰∏ÄÂº†ÂõæÁâá',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet scene = getScene()\t\t\r\n\t\tlet postData = {\r\n\t\t\tname: name.value,\r\n\t\t\tdescription: description.value,\r\n\t\t\timage_urls: uploadList.value.join(','),\r\n\t\t\tdisplay: display.value,\n\t\t\torigin: scene,\r\n\t\t\trelations: saveCollocationDataList.value.map(item => ({\r\n\t\t\t\trelation_goods_id: item.goods_id,\r\n\t\t\t\trelation_goods_name: item.goods_name,\r\n\t\t\t\trelation_brand_id: item.brand_id,\r\n\t\t\t\trelation_brand_name: item.brand_name,\r\n\t\t\t\ttype: item.type,\r\n\t\t\t\trelation_origin: 2 // Ê†áËØÜÂÖ≥ËÅîÁöÑÊòØshowcase\r\n\t\t\t}))\r\n\t\t};\r\n\r\n\t\ttry {\n\t\t\tlet url = `${websiteUrl}/with-state/add-showcase`\n\t\t\t// id ËΩ¨int\r\n\t\t\tif (props.showcase_id) {\n\t\t\t\turl = `${websiteUrl}/with-state/update-showcase`\n\t\t\t\tpostData = {\n\t\t\t\t\t...postData,\n\t\t\t\t\tid: parseInt(props.showcase_id, 10)\n\t\t\t\t}\n\t\t\t} \r\n\r\n\t\t\tconst res = await uni.request({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: postData,\r\n\t\t\t\theader: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t'Authorization': uni.getStorageSync('token'),\r\n\t\t\t\t}\r\n\t\t\t})\n\r\n\t\t\tif (res.data.code !== \"failed\") {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: 'Êèê‰∫§ÊàêÂäü'\r\n\t\t\t\t})\r\n\t\t\t\tsetTimeout(() => uni.navigateBack(), 1500)\r\n\t\t\t} else {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'Êèê‰∫§Â§±Ë¥•',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\r\n\t\t} catch (err) {\n\t\t\tconsole.log(err)\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: 'Êèê‰∫§Â§±Ë¥•',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// Ëé∑ÂèñtypesÂàóË°®\r\n\tfunction getTypes() {\r\n\t\t///goods-types\r\n\t\tuni.request({\r\n\t\t\turl: websiteUrl + '/goods-types',\r\n\t\t\tmethod: 'GET',\r\n\t\t\ttimeout: 5000,\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tconsole.log(res.data.data);\r\n\t\t\t\ttypeList.value = res.data.data\r\n\t\t\t},\r\n\t\t\tfail: (err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: 'ÁΩëÁªúËØ∑Ê±ÇÂ§±Ë¥•',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// Â≠òÂÇ®‰∏ÄÊù°Êê≠ÈÖç‰ø°ÊÅØ\r\n\tfunction saveCollocation() {\r\n\t\tif (chooseBrandName.value == \"\") {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: 'ËØ∑ÈÄâÊã©ÊàñÂ°´ÂÜôÂìÅÁâåÂêçÁß∞',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (chooseGoodsName.value == \"\") {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: 'ËØ∑ÈÄâÊã©ÊàñÂ°´ÂÜôÂïÜÂìÅÂêçÁß∞',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\n\t\t\n\t\t//Â¶ÇÊûúÊ≤°Êúâgoods_idÔºåÂ≠òÂÇ®goods_nameËøõÂéªÂç≥ÂèØ\n\t\tif (chooseGoodsId.value == 0) {\n\t\t\tlet data  = {\n\t\t\t\t\"brand_id\": chooseBrandId.value,\n\t\t\t\t\"goods_id\": 0,\n\t\t\t\t\"brand_name\": chooseBrandName.value,\n\t\t\t\t\"goods_name\": chooseGoodsName.value,\n\t\t\t\t\"goods_image\": \"\",\n\t\t\t\t\"type\": chooseType.value,\n\t\t\t}\n\t\t\tsaveCollocationDataList.value.push(data)\n\t\t\tshowSelectTab.value = false\n\t\t\tchooseBrandId.value = 0\n\t\t\tchooseBrandName.value = \"\"\n\t\t\tchooseGoodsId.value = 0\n\t\t\tchooseGoodsName.value = \"\"\n\t\t\tchooseType.value = \"\"\n\t\t\treturn\n\t\t}\n\t\t\n\t\t\r\n\t\tgetGoodsInfo(chooseGoodsId.value).then((res) => {\r\n\t\t\tlet data = {\r\n\t\t\t\t\"brand_id\": chooseBrandId.value,\r\n\t\t\t\t\"goods_id\": chooseGoodsId.value,\r\n\t\t\t\t\"brand_name\": chooseBrandName.value,\r\n\t\t\t\t\"goods_name\": chooseGoodsName.value,\r\n\t\t\t\t\"goods_image\": res.data.goods_images[0],\r\n\t\t\t\t\"type\": chooseType.value,\r\n\t\t\t}\r\n\t\t\tsaveCollocationDataList.value.push(data)\r\n\t\t\tshowSelectTab.value = false\r\n\t\t\tchooseBrandId.value = 0\r\n\t\t\tchooseBrandName.value = \"\"\r\n\t\t\tchooseGoodsId.value = 0\r\n\t\t\tchooseGoodsName.value = \"\"\r\n\t\t\tchooseType.value = \"\"\r\n\t\t})\r\n\t}\r\n\r\n\tfunction deleteImage(index) {\r\n\t\tuploadList.value.splice(index, 1)\r\n\t}\r\n\r\n\tfunction deleteCollcation(index) {\r\n\t\tsaveCollocationDataList.value.splice(index, 1)\r\n\t}\n\t// ËÆæÁΩÆÊ†áÈ¢ò\n\tuni.setNavigationBarTitle({\n\t\ttitle: 'Â±ïÁ§∫Êüú'\n\t})\n\t\n\t\r\n\n\t\r\n\tonMounted(() => {\r\n\t\tgetTypes()\r\n\t\tgetShowCaseInfo()\r\n\t})\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\t.uploaded_image {\r\n\t\twidth: 100px;\r\n\t\theight: 100px;\r\n\t\tmargin-right: 10px;\r\n\r\n\t}\r\n\r\n\t.upload_box {\r\n\t\t// Ê†∏ÂøÉ‰øÆÊîπÁÇπÔºö\r\n\t\twidth: 100%; // ÈÅøÂÖç‰ΩøÁî® 100vwÔºàÂèØËÉΩÂõ†ÊªöÂä®Êù°ÂØºËá¥ÂÆΩÂ∫¶Ê∫¢Âá∫Ôºâ\r\n\t\twhite-space: nowrap; // Âº∫Âà∂Â≠êÂÖÉÁ¥†‰∏çÊç¢Ë°å\r\n\t\toverflow-x: auto; // Á°Æ‰øùÊ®™ÂêëÊªöÂä®ÁîüÊïàÔºàUniAppÁöÑscroll-viewÁªÑ‰ª∂Â∑≤Â∞ÅË£ÖÊªöÂä®ÈÄªËæëÔºåÊ≠§Â§Ñ‰∏∫‰øùÈô©ÂèØ‰øùÁïôÔºâ\r\n\t\tdisplay: block; // ÊòéÁ°ÆÂÆπÂô®‰∏∫ÂùóÁ∫ßÂÖÉÁ¥†\r\n\t\tmargin-top: 15px;\r\n\t\tpadding: 10px;\r\n\t\tmargin-left: 10px;\r\n\r\n\t\tview {\r\n\t\t\tdisplay: inline-block; // ÂÖ≥ÈîÆÔºÅÂº∫Âà∂Â≠êÂÖÉÁ¥†Ê®™ÂêëÊéíÂàóÔºàÊõø‰ª£ floatÔºâ\r\n\t\t\tvertical-align: top; // ÂØπÈΩêÊñπÂºèÔºàÈÅøÂÖçÂõæÁâáÂ∫ïÈÉ®ÁïôÁôΩÔºâ\r\n\t\t}\r\n\r\n\t\t.upload_item {\r\n\t\t\tposition: relative;\r\n\t\t\twidth: 100px;\r\n\t\t\tmargin-right: 10px;\r\n\r\n\t\t\tborder-radius: 5px;\r\n\t\t\toverflow: hidden;\r\n\r\n\t\t\t.uploaded_image {\r\n\t\t\t\twidth: 100px;\r\n\t\t\t\theight: 100px;\r\n\t\t\t}\r\n\r\n\t\t\t.close_icon {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tright: 0;\r\n\t\t\t\ttop: 0;\r\n\t\t\t\twidth: 20px;\r\n\t\t\t\theight: 20px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.saveCollocationDataList {\r\n\t\tpadding-bottom: 80px;\r\n\t\tmin-height: 300rpx;\r\n\r\n\t\t.saveCollocationDataItem {\r\n\t\t\tposition: relative;\r\n\t\t\tbackground: #fafafa;\r\n\t\t\twidth: 90vw;\r\n\t\t\tmargin: 10px auto;\r\n\r\n\t\t\t.info-tap {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tbottom: 30px;\r\n\t\t\t\tmargin-left: 10px;\r\n\t\t\t}\n\t\t\t\n\t\t\t.no-image {\n\t\t\t\tdisplay: inline-block;\n\t\t\t\twidth: 70px;\n\t\t\t\theight: 70px;\n\t\t\t\tbottom: 0px;\n\t\t\t\tmargin-left: 0px;\n\t\t\t\tcolor: #fda7a7;\n\t\t\t\tfont-size: 30px;\n\t\t\t\ttext-align: center;\n\t\t\t\tline-height: 70px;\n\t\t\t\tfont-weight: 1000;\n\t\t\t}\r\n\r\n\t\t\t.close_icon {\r\n\t\t\t\twidth: 20px;\r\n\t\t\t\theight: 20px;\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tbottom: 30px;\r\n\t\t\t\tright: 10px;\r\n\t\t\t\tmargin-left: 10px;\r\n\t\t\t\tbackground: #fff;\n\t\t\t\tborder-radius: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\t.footer {\r\n\t\tposition: fixed;\r\n\t\tbottom: 0px;\r\n\t\twidth: 100%;\r\n\t\tbox-shadow: 0 0 5px rbga(0, 0, 0, 0.2);\r\n\t\talign-items: center;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\tgap: 20px;\n\t\tmargin-bottom: 20rpx;\r\n\r\n\t\tbutton {\r\n\r\n\t\t\tbackground-color: #78d0dd;\r\n\t\t\tcolor: #fff;\r\n\t\t\tfont-size: 16px;\r\n\t\t\ttext-align: center;\r\n\t\t\tpadding: 10px;\r\n\t\t\tborder-radius: 30px;\r\n\t\t\tmargin-bottom: 10px;\r\n\t\t\tflex: 1;\r\n\t\t\tmax-width: 45%;\r\n\t\t}\r\n\r\n\t\t.delete-btn {\r\n\t\t\t// opacity: 0.6;\r\n\t\t\t// pointer-events: none;\r\n\t\t}\r\n\t}\r\n\r\n\t.oneLine {\r\n\t\tborder-bottom: 1px solid #dadada;\r\n\t\twidth: calc(100vw - 50px);\r\n\t\tmargin: 0px 25px;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\r\n\t.edit-tip {\r\n\t\tpadding: 10px;\r\n\t\tbackground: #fff3cd;\r\n\t\tcolor: #856404;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 14px;\r\n\t}\n\t\n\n\t\n\t// ÂÖ≥ËÅîÂ®ÉÁâ©\n\t.relation-trigger {\n\t  display: flex;\n\t  align-items: center;\n\t  padding: 20rpx 30rpx;\n\t  background: #f8f8f8;\n\t  border-radius: 12rpx;\n\t  margin: 20rpx;\n\t  \n\t  .placeholder {\n\t    flex: 1;\n\t    color: #999;\n\t    font-size: 28rpx;\n\t  }\n\t  \n\t  .arrow-icon {\n\t    width: 30rpx;\n\t    height: 30rpx;\n\t  }\n\t}\n\t\n\t.publish-detail {\n\t\ttext {\n\t\t\tdisplay: block;\n\t\t\tcolor: #888;\n\t\t\tmargin: 20rpx 40rpx;\n\t\t}\n\t}\r\n</style>","import MiniProgramPage from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/pages/stock/showcase_form/showcase_form.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","computed","websiteUrl","chooseImageList","getQiniuToken","uploadImageToQiniu","image1Url","res","getScene","onMounted","MiniProgramPage"],"mappings":"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"}