{"version":3,"file":"faceup_editor.js","sources":["pages/creator_base/faceup_editor/faceup_editor.vue","pages/creator_base/faceup_editor/faceup_editor.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"faceup-form-container\">\n\n    \n    <scroll-view class=\"form-scroll\" scroll-y>\n      <view class=\"form-body\">\n        <!-- 标题 -->\n        <view class=\"form-item\">\n          <text class=\"label\">妆面标题</text>\n          <input \n            class=\"input\" \n            v-model=\"form.title\" \n            placeholder=\"请输入妆面标题\"\n            maxlength=\"50\"\n          />\n        </view>\n        \n        <!-- 头型名称 - 使用关联搜索组件 -->\n        <view class=\"form-item\">\n          <text class=\"label\">头型名称</text>\n          <view class=\"relation-picker-trigger\" @click=\"showRelationPicker = true\">\n            <text v-if=\"form.head_name\" class=\"selected-value\">{{ form.head_name }}</text>\n            <text v-else class=\"placeholder\">请选择头型</text>\n            <uni-icons type=\"arrowright\" size=\"16\" color=\"#999\"></uni-icons>\n          </view>\n        </view>\n        \n        <!-- 关联商品ID - 隐藏但保留数据 -->\n        <input \n          v-model=\"form.goods_id\" \n          type=\"hidden\"\n\t\t  style=\"visibility: hidden;\"\n        />\n        \n        <!-- 性别 -->\n        <view class=\"form-item\">\n          <text class=\"label\">性别</text>\n          <radio-group class=\"radio-group\" @change=\"handleSexChange\">\n            <label class=\"radio-label\">\n              <radio value=\"男\" :checked=\"form.sex === '男'\" color=\"#8fecff\" />\n              <text>男</text>\n            </label>\n            <label class=\"radio-label\">\n              <radio value=\"女\" :checked=\"form.sex === '女'\" color=\"#ffc3c6\" />\n              <text>女</text>\n            </label>\n          </radio-group>\n        </view>\n        \n        <!-- 风格标签 - 使用级联多选组件 -->\n        <view class=\"form-item\">\n          <view class=\"tag-header\">\n            <text class=\"label\">风格标签</text>\n            <view class=\"tag-selector-btn\" @click=\"showTagPopup = true\">\n              <text>管理风格标签</text>\n              <uni-icons type=\"arrowdown\" size=\"16\" color=\"#666\"></uni-icons>\n            </view>\n          </view>\n          <view class=\"tags-container\">\n            <view \n              v-for=\"(tagId, index) in form.styles_tags\" \n              :key=\"index\" \n              class=\"tag-item\"\n            >\n              <text>{{ styleTags[tagId] }}</text>\n              <uni-icons \n                type=\"close\" \n                size=\"16\" \n                color=\"#999\" \n                @click=\"removeTag(tagId)\"\n              ></uni-icons>\n            </view>\n            <view v-if=\"form.styles_tags.length === 0\" class=\"no-tags-hint\">\n              <text>未选择风格标签</text>\n            </view>\n          </view>\n        </view>\n        \n        <!-- 图片上传 -->\n        <view class=\"form-item\">\n          <text class=\"label\">妆面图片</text>\n          <text class=\"hint\">请上传清晰的妆面图片，最多9张</text>\n          \n          <view class=\"upload-container\">\n            <!-- 已上传图片预览 -->\n            <view \n              v-for=\"(img, index) in form.face_up_image_urls\" \n              :key=\"index\" \n              class=\"image-preview\"\n            >\n              <image :src=\"img\" mode=\"aspectFill\" class=\"preview-img\"></image>\n              <view class=\"image-actions\">\n                <uni-icons \n                  type=\"eye\" \n                  size=\"20\" \n                  color=\"#fff\" \n                  @click=\"previewImage(img)\"\n                ></uni-icons>\n                <uni-icons \n                  type=\"trash\" \n                  size=\"20\" \n                  color=\"#fff\" \n                  @click=\"removeImage(index)\"\n                ></uni-icons>\n              </view>\n            </view>\n            \n            <!-- 上传按钮 -->\n            <view \n              class=\"upload-btn\" \n              @click=\"handleUploadImage\"\n              v-if=\"form.face_up_image_urls.length < 9\"\n            >\n              <uni-icons type=\"plus\" size=\"32\" color=\"#999\"></uni-icons>\n              <text class=\"upload-text\">添加图片</text>\n            </view>\n          </view>\n          \n          <!-- 上传进度提示 -->\n          <view class=\"upload-progress\" v-if=\"uploading\">\n            <progress \n              :percent=\"uploadProgress\" \n              stroke-width=\"4\" \n              activeColor=\"#4a9db5\"\n            />\n            <text>{{ uploadStatusText }}</text>\n          </view>\n        </view>\n      </view>\n    </scroll-view>\n    \n    <!-- 底部操作按钮 -->\n    <view class=\"form-footer\">\n      <button class=\"btn cancel\" @click=\"handleCancel\">取消</button>\n      <button class=\"btn submit\" @click=\"handleSubmit\">{{ isEdit ? '保存修改' : '添加妆面' }}</button>\n    </view>\n    \n    <!-- 风格标签选择弹窗 - 使用级联多选组件 -->\n    <cascade-multi-select \n      :show=\"showTagPopup\"\n      :sizeData=\"tagSizeData\"\n      :initialSelection=\"initialTagSelection\"\n      @close=\"showTagPopup = false\"\n      @confirm=\"handleTagConfirm\"\n      title=\"选择风格标签\"\n    />\n    \n    <!-- 关联搜索组件 -->\n    <relation-picker \n      :visible=\"showRelationPicker\" \n      @update:visible=\"showRelationPicker = $event\"\n      @confirm=\"handleRelationConfirm\"\n      @cancel=\"showRelationPicker = false\"\n      hide-type=\"true\"\n    />\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed } from 'vue';\nimport { onLoad } from '@dcloudio/uni-app';\nimport { chooseImageList, getQiniuToken, uploadImageToQiniu } from '@/common/image.js';\nimport { websiteUrl } from '@/common/config.js';\n\n// 表单数据\nconst isEdit = ref(false);\nconst form = ref({\n  id: 0,\n  title: '',\n  head_name: '',\n  goods_id: '',\n  sex: '男',\n  styles_tags: [], // 存储标签ID数组\n  face_up_image_urls: [] // 图片URL数组\n});\n\n// 关联搜索\nconst showRelationPicker = ref(false);\n\n// 风格标签\nconst styleTags = ref({});\nconst showTagPopup = ref(false);\nconst tagSizeData = ref({}); // 级联选择器所需的数据格式\nconst initialTagSelection = ref([]); // 初始选中的标签\n\n// 上传状态\nconst uploading = ref(false);\nconst uploadProgress = ref(0);\nconst uploadStatusText = ref('');\n\n// 页面加载时获取编辑数据和风格标签\nonLoad(async (options) => {\n  // 获取风格标签\n  await fetchStyleTags();\n  \n  if (options.id) {\n    isEdit.value = true;\n    fetchFaceupDetail(options.id);\n  }\n  \n  uni.setNavigationBarTitle({\n  \ttitle: isEdit ? '编辑妆面' : '添加新妆面' \n  })\n});\n\n// 获取风格标签\nconst fetchStyleTags = async () => {\n  try {\n    const res = await uni.request({\n      url: `${websiteUrl.value}/bjd-faceup-style-tags`,\n      method: 'GET'\n    });\n    \n    if (res.data.status === 'success') {\n      styleTags.value = res.data.data;\n      \n      // 为级联选择器准备数据\n      tagSizeData.value = {\n        '风格标签': Object.values(styleTags.value)\n      };\n    }\n  } catch (error) {\n    console.error('获取风格标签失败:', error);\n    uni.showToast({\n      title: '获取风格标签失败',\n      icon: 'none'\n    });\n  }\n};\n\n// 获取妆面详情\nconst fetchFaceupDetail = async (id) => {\n  try {\n    uni.showLoading({ title: '加载中...' });\n    const res = await uni.request({\n      url: `${websiteUrl.value}/faceup/detail?id=${id}`,\n      method: 'GET'\n    });\n    \n    if (res.data.status === 'success') {\n      const data = res.data.data;\n      form.value = {\n        id: data.id,\n        title: data.title,\n        head_name: data.head_name,\n        goods_id: data.goods_id,\n        sex: data.sex === 1 ? '男' : '女',\n        styles_tags: data.styles_tags ? data.styles_tags.split(',').filter(Boolean) : [],\n        \n        // 修复图片字段处理 - 优先使用 images 数组，如果不存在则使用 face_up_image_urls 拆分\n        face_up_image_urls: data.images || (data.face_up_image_urls ? data.face_up_image_urls.split(',') : [])\n      };\n      \n      // 设置初始选中的标签\n      initialTagSelection.value = form.value.styles_tags.map(tagId => {\n        return {\n          category: '风格标签',\n          size: styleTags.value[tagId]\n        };\n      });\n    } else {\n      uni.showToast({ title: res.data.msg, icon: 'none' });\n    }\n  } catch (error) {\n    console.log(error);\n    uni.showToast({ title: '获取妆面详情失败', icon: 'none' });\n  } finally {\n    uni.hideLoading();\n  }\n};\n\n// 处理关联搜索确认\nconst handleRelationConfirm = (result) => {\n  // 处理模糊模式\n  if (result.isFuzzy) {\n    form.value.head_name = result.goods.name;\n    form.value.goods_id = result.goods.id || '';\n  } \n  // 处理精确模式\n  else {\n    form.value.head_name = result.goods.name;\n    form.value.goods_id = result.goods.id || '';\n  }\n  \n  showRelationPicker.value = false;\n};\n\n// 性别选择\nconst handleSexChange = (e) => {\n  form.value.sex = e.detail.value;\n};\n\n// 移除标签\nconst removeTag = (tagId) => {\n  const index = form.value.styles_tags.indexOf(tagId);\n  if (index > -1) {\n    form.value.styles_tags.splice(index, 1);\n  }\n};\n\n// 处理标签选择确认\nconst handleTagConfirm = (selectedItems) => {\n  // 将选中的标签转换为ID\n  const selectedIds = selectedItems.map(item => {\n    // 找到标签名对应的ID\n    const tagName = item.size;\n    for (const [id, name] of Object.entries(styleTags.value)) {\n      if (name === tagName) return id;\n    }\n    return null;\n  }).filter(id => id !== null);\n  \n  form.value.styles_tags = selectedIds;\n  showTagPopup.value = false;\n};\n\n// 处理图片上传\nconst handleUploadImage = async () => {\n  try {\n    // 计算还能上传几张图片\n    const remaining = 9 - form.value.face_up_image_urls.length;\n    if (remaining <= 0) {\n      uni.showToast({ title: '最多只能上传9张图片', icon: 'none' });\n      return;\n    }\n\n    // 选择图片\n    const tempFilePaths = await chooseImageList(remaining);\n    if (!tempFilePaths || tempFilePaths.length === 0) return;\n\n    // 开始上传\n    uploading.value = true;\n    uploadStatusText.value = '准备上传...';\n\n    // 获取七牛云token\n    uploadStatusText.value = '获取上传凭证...';\n    const qiniuTokenData = await getQiniuToken();\n    if (!qiniuTokenData || !qiniuTokenData.token) {\n      throw new Error('获取上传凭证失败');\n    }\n\n    // 上传所有图片\n    for (let i = 0; i < tempFilePaths.length; i++) {\n      try {\n        const filePath = tempFilePaths[i];\n        \n        // 更新上传状态\n        uploadStatusText.value = `上传中 (${i+1}/${tempFilePaths.length})`;\n        uploadProgress.value = (i / tempFilePaths.length) * 100;\n\n        // 使用七牛云返回的path作为文件名\n        const fileName = qiniuTokenData.path;\n\n        // 上传到七牛云\n        const result = await uploadImageToQiniu(\n          filePath,\n          qiniuTokenData.token,\n          fileName\n        );\n\n        if (result && result.imageUrl) {\n          // 添加到图片列表\n          form.value.face_up_image_urls.push(result.imageUrl);\n          uploadProgress.value = ((i + 1) / tempFilePaths.length) * 100;\n        }\n      } catch (error) {\n        console.error(`第 ${i+1} 张图片上传失败:`, error);\n        uni.showToast({\n          title: `第 ${i+1} 张图片上传失败`,\n          icon: 'none'\n        });\n      }\n    }\n\n    uni.showToast({\n      title: `成功上传${tempFilePaths.length}张图片`,\n      icon: 'success'\n    });\n  } catch (error) {\n    console.error('上传图片失败:', error);\n    uni.showToast({\n      title: '上传图片失败',\n      icon: 'none'\n    });\n  } finally {\n    uploading.value = false;\n    uploadProgress.value = 0;\n  }\n};\n\n// 预览图片\nconst previewImage = (url) => {\n  uni.previewImage({\n    current: url,\n    urls: form.value.face_up_image_urls\n  });\n};\n\n// 删除图片\nconst removeImage = (index) => {\n  uni.showModal({\n    title: '提示',\n    content: '确定要删除这张图片吗？',\n    success: (res) => {\n      if (res.confirm) {\n        form.value.face_up_image_urls.splice(index, 1);\n        uni.showToast({\n          title: '已删除',\n          icon: 'success'\n        });\n      }\n    }\n  });\n};\n\n// 提交表单\nconst handleSubmit = async () => {\n  // 表单验证\n  if (!form.value.title) {\n    uni.showToast({ title: '请输入妆面标题', icon: 'none' });\n    return;\n  }\n  \n  if (!form.value.head_name) {\n    uni.showToast({ title: '请选择头型名称', icon: 'none' });\n    return;\n  }\n  \n  if (!form.value.goods_id) {\n    uni.showToast({ title: '请选择关联商品', icon: 'none' });\n    return;\n  }\n  \n  if (form.value.face_up_image_urls.length === 0) {\n    uni.showToast({ title: '请至少上传一张图片', icon: 'none' });\n    return;\n  }\n  \n  try {\n    uni.showLoading({ title: '提交中...' });\n    \n    // 准备提交数据\n    const submitData = {\n      id: form.value.id,\n      title: form.value.title,\n      head_name: form.value.head_name,\n      goods_id: form.value.goods_id,\n      sex: form.value.sex === '男' ? 1 : 2,\n      styles_tags: form.value.styles_tags.join(','),\n      face_up_image_urls: form.value.face_up_image_urls.join(','),\n    };\n    \n    const apiUrl = isEdit.value \n      ? `${websiteUrl.value}/brand-manager/faceup/update`\n      : `${websiteUrl.value}/brand-manager/faceup/add`;\n\t  \n\t  const token = uni.getStorageSync('token');\n\t  if (!token) {\n\t  \terror.value = '未登录，请先登录';\n\t  \tloading.value = false;\n\t  \tloadStatus.value = 'more';\n\t  \treturn;\n\t  }\n      \n    const res = await uni.request({\n      url: apiUrl,\n      method: 'POST',\n      data: submitData,\n      header: {\n        'Content-Type': 'application/json',\n\t\t'Authorization': token\n      }\n    });\n    \n    if (res.data.status === 'success') {\n      uni.showToast({\n        title: isEdit.value ? '更新成功' : '添加成功',\n        icon: 'success'\n      });\n      \n      setTimeout(() => {\n        uni.navigateBack();\n      }, 1500);\n    } else {\n      uni.showToast({\n        title: res.data.msg || '提交失败',\n        icon: 'none'\n      });\n    }\n  } catch (error) {\n    console.error('提交失败:', error);\n    uni.showToast({\n      title: '提交失败',\n      icon: 'none'\n    });\n  } finally {\n    uni.hideLoading();\n  }\n};\n\n// 取消\nconst handleCancel = () => {\n  uni.navigateBack();\n};\n</script>\n\n<style lang=\"less\">\n.faceup-form-container {\n  padding: 20rpx;\n  background-color: #f8f8f8;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n}\n\n.form-header {\n  padding: 20rpx 0;\n  text-align: center;\n  \n  .title {\n    font-size: 36rpx;\n    font-weight: bold;\n    color: #333;\n  }\n}\n\n.form-scroll {\n  flex: 1;\n  padding-bottom: 20rpx;\n}\n\n.form-body {\n  background-color: #fff;\n  border-radius: 16rpx;\n  padding: 20rpx;\n  margin-bottom: 20rpx;\n}\n\n.form-item {\n  margin-bottom: 30rpx;\n  \n  .label {\n    font-size: 28rpx;\n    color: #333;\n    font-weight: 500;\n    margin-bottom: 12rpx;\n    display: block;\n  }\n  \n  .hint {\n    font-size: 24rpx;\n    color: #999;\n    margin-bottom: 12rpx;\n    display: block;\n  }\n  \n  /* 修复输入框padding问题 */\n  .input {\n    border: 1rpx solid #eee;\n    border-radius: 8rpx;\n    padding: 16rpx 20rpx; /* 增加左右padding */\n    font-size: 28rpx;\n    background-color: #fafafa;\n    width: 100%;\n    box-sizing: border-box;\n    height: 80rpx; /* 固定高度确保内容可见 */\n    line-height: 48rpx; /* 调整行高 */\n  }\n}\n\n.radio-group {\n  display: flex;\n  gap: 40rpx;\n  \n  .radio-label {\n    display: flex;\n    align-items: center;\n    font-size: 28rpx;\n    \n    text {\n      margin-left: 8rpx;\n    }\n  }\n}\n\n/* 关联搜索触发样式 */\n.relation-picker-trigger {\n  border: 1rpx solid #eee;\n  border-radius: 8rpx;\n  padding: 16rpx 20rpx; /* 增加左右padding */\n  background-color: #fafafa;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 80rpx; /* 固定高度 */\n  \n  .selected-value {\n    font-size: 28rpx;\n    color: #333;\n  }\n  \n  .placeholder {\n    font-size: 28rpx;\n    color: #999;\n  }\n}\n\n/* 风格标签头部样式 */\n.tag-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12rpx;\n}\n\n/* 标签选择器样式 */\n.tags-container {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12rpx;\n  min-height: 60rpx;\n  padding: 10rpx;\n  border: 1rpx solid #eee;\n  border-radius: 8rpx;\n  background-color: #fafafa;\n  \n  .tag-item {\n    background-color: #f5f5f5;\n    border-radius: 20rpx;\n    padding: 8rpx 16rpx;\n    display: flex;\n    align-items: center;\n    gap: 6rpx;\n    \n    text {\n      font-size: 24rpx;\n      color: #666;\n    }\n  }\n  \n  .no-tags-hint {\n    font-size: 26rpx;\n    color: #999;\n    padding: 8rpx;\n  }\n}\n\n.tag-selector-btn {\n  border: 1rpx solid #eee;\n  border-radius: 8rpx;\n  padding: 12rpx 16rpx;\n  display: flex;\n  align-items: center;\n  gap: 8rpx;\n  background-color: #f8f8f8;\n  \n  text {\n    font-size: 26rpx;\n    color: #666;\n  }\n}\n\n/* 图片上传区域样式 */\n.upload-container {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20rpx;\n  margin-top: 20rpx;\n}\n\n.image-preview {\n  width: 200rpx;\n  height: 200rpx;\n  border-radius: 12rpx;\n  overflow: hidden;\n  position: relative;\n  \n  .preview-img {\n    width: 100%;\n    height: 100%;\n  }\n  \n  .image-actions {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: flex;\n    justify-content: space-around;\n    padding: 12rpx 0;\n  }\n}\n\n.upload-btn {\n  width: 200rpx;\n  height: 200rpx;\n  border: 2rpx dashed #ddd;\n  border-radius: 12rpx;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  background-color: #f9f9f9;\n  \n  .upload-text {\n    font-size: 24rpx;\n    color: #999;\n    margin-top: 10rpx;\n  }\n}\n\n.upload-progress {\n  margin-top: 20rpx;\n  padding: 20rpx;\n  background-color: #f5f5f5;\n  border-radius: 12rpx;\n  \n  progress {\n    width: 100%;\n    margin-bottom: 10rpx;\n  }\n  \n  text {\n    display: block;\n    text-align: center;\n    font-size: 24rpx;\n    color: #666;\n  }\n}\n\n.form-footer {\n  display: flex;\n  gap: 20rpx;\n  padding: 20rpx;\n  background-color: #fff;\n  position: sticky;\n  bottom: 0;\n  \n  .btn {\n    flex: 1;\n    border-radius: 40rpx;\n    font-size: 28rpx;\n    padding: 20rpx 0;\n    &::after {\n\t\tborder: none;\n\t}\n    &.cancel {\n      background-color: #f5f5f5;\n      color: #666;\n    }\n    \n    &.submit {\n          background: linear-gradient(135deg, #8fecff, #c1ddff);\n          color: #2c3e50;\n    }\n  }\n}\n</style>\n","import MiniProgramPage from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/pages/creator_base/faceup_editor/faceup_editor.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","uni","websiteUrl","error","chooseImageList","getQiniuToken","uploadImageToQiniu","MiniProgramPage"],"mappings":"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"}