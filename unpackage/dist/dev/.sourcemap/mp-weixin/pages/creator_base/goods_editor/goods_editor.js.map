{"version":3,"file":"goods_editor.js","sources":["pages/creator_base/goods_editor/goods_editor.vue","pages/creator_base/goods_editor/goods_editor.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<!-- 表单区域 -->\r\n\t\t<scroll-view scroll-y class=\"form-container\">\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">商品名称</text>\r\n\t\t\t\t<input v-model=\"goodsInfo.name\" placeholder=\"请输入商品名称\" class=\"input\" />\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">品牌</text>\r\n\t\t\t\t<input v-model=\"goodsInfo.brand_name\" disabled class=\"input disabled\" />\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">价格</text>\r\n\t\t\t\t<input v-model=\"goodsInfo.total_amount\" type=\"number\" placeholder=\"请输入价格\" class=\"input\" />\r\n\t\t\t\t<!-- 货币选择器 -->\r\n\t\t\t\t<picker class=\"currency-picker\" @change=\"updateCurrency\" :value=\"currencyIndex\"\r\n\t\t\t\t\t:range=\"currencyOptions\">\r\n\t\t\t\t\t<view class=\"currency\">{{goodsInfo.currency}}</view>\r\n\t\t\t\t</picker>\r\n\r\n\t\t\t\t<text class=\"hint\">暂不支持小数点，如有加购项、不同售价，可以写在描述里</text>\r\n\t\t\t</view>\r\n\r\n\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">尺寸</text>\r\n\r\n\t\t\t\t<!-- 尺寸选择按钮 -->\r\n\t\t\t\t<view class=\"selected-sizes\" @tap=\"openSizeSelector\">\r\n\t\t\t\t\t<text v-if=\"selectedSizeDisplay.length === 0\">选择尺寸</text>\r\n\t\t\t\t\t<view v-else class=\"size-tags\">\r\n\t\t\t\t\t\t<view v-for=\"(size, index) in selectedSizeDisplay\" :key=\"index\" class=\"size-tag\">\r\n\t\t\t\t\t\t\t{{ size }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<text class=\"hint\">可以多选您支持的尺寸，可以选择多个分类；我们推荐不同的大分类建多个词条，并在名称后面加入（x分）的描述。</text>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 尺寸选择器组件 -->\r\n\t\t\t\t<cascade-multi-select ref=\"sizeSelector\" :show=\"showSizeSelector\" :sizeData=\"sizeData\"\r\n\t\t\t\t\t:initialSelection=\"initialSizeSelection\" @close=\"showSizeSelector = false\"\r\n\t\t\t\t\t@confirm=\"handleSizeSelection\"></cascade-multi-select>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">肤色</text>\r\n\t\t\t\t<input v-model=\"goodsInfo.skin\" placeholder=\"请输入肤色\" class=\"input\" />\r\n\t\t\t\t<!-- 肤色快捷选择 -->\r\n\t\t\t\t<view v-if=\"showSkinQuickSelector\" class=\"skin-quick-selector\">\r\n\t\t\t\t\t<view v-for=\"(skin, index) in skinQuickOptions\" :key=\"index\" class=\"skin-tag\"\r\n\t\t\t\t\t\t@click=\"addSkin(skin)\">\r\n\t\t\t\t\t\t{{ skin }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 类型选择器 -->\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">类型</text>\r\n\t\t\t\t<picker @change=\"updateType\" :value=\"typeIndex\" :range=\"typeOptions\">\r\n\t\t\t\t\t<view class=\"picker-content\">{{goodsInfo.type || '请选择类型'}}</view>\r\n\t\t\t\t</picker>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 材质选择器 -->\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">材质</text>\r\n\t\t\t\t<picker @change=\"updateMaterial\" :value=\"materialIndex\" :range=\"materialOptions\">\r\n\t\t\t\t\t<view class=\"picker-content\">{{goodsInfo.doll_material || '请选择材质'}}</view>\r\n\t\t\t\t</picker>\r\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<text class=\"label\">跳转口令</text>\n\t\t\t\t<input v-model=\"goodsInfo.short_link\" placeholder=\"请自定义跳转口令\" class=\"input\" />\n\t\t\t\t<text class=\"hint\">您可以在小红书微博等平台告诉您的用户跳转口令，用户在搜索框内输入完整口令即可跳转到您的商品详情页面，之后您可以通过描述字段告诉用户该如何购买。</text>\n\t\t\t\t<text class=\"hint\">口令唯一不可重复，且不要包含特殊字符，以便用户输入。例如这样告诉用户：狗狗助手神秘咒语 → 眠猫123</text>\n\t\t\t\t<text class=\"hint\">最低支持口令跳转版本 1.1.0</text>\n\t\t\t\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">描述</text>\r\n\t\t\t\t<textarea v-model=\"goodsInfo.desc_content\" placeholder=\"请输入商品描述\" class=\"textarea\" auto-height />\r\n\t\t\t\t<text class=\"hint\">我们不对您的内容做任何限制，您可以自由的将购买地址写在描述中。\r\n\t\t\t\t\t但考虑到我们未来会以代理寄售或电商平台作为盈利方向，暂不提供直接向外跳转的功能。</text>\r\n\t\t\t\t<text class=\"hint\">我们承诺未来也不会限制您展示站外的贩售途径。</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 图片编辑区域 -->\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"label\">商品图片</text>\r\n\t\t\t\t<text class=\"hint\">长按图片可拖拽排序{{ showDelete ? \"，点击图片右上角可删除。\" : \"\" }} </text>\r\n\t\t\t\t<text class=\"hint\">为了保持版面美观，\r\n\t\t\t\t\t请将最好看的一张图放在第一张，第一张不要用大字报。为了保证用户最佳观看效果，请不要上传过大图片和长宽比效果不佳的图片（3:4最优)。\r\n\t\t\t\t</text>\r\n\t\t\t\t<text class=\"hint\">同时为了保护平台数据安全，我们会在一段时间后自动添加水印，但您仍然能看到无水印原图。</text>\r\n\r\n\t\t\t\t<view v-if=\"goodsInfo.goods_images.length < 9\" class=\"add-image-btn\" @click=\"addImages\">\r\n\t\t\t\t\t<uni-icons type=\"plusempty\" size=\"30\" color=\"#999\"></uni-icons>\r\n\t\t\t\t\t<text>添加图片</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"image-edit-container\">\r\n\t\t\t\t<shmily-drag-image v-model=\"goodsInfo.goods_images\" :cols=\"3\" :showItemInfo=\"false\" :itemMargin=\"10\"\r\n\t\t\t\t\t:showDelete=\"true\" border-radius=\"0\" @sort-change=\"handleImageSortChange\"\r\n\t\t\t\t\t@delete=\"handleDeleteImage\" keyName=\"src\" />\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\r\n\t\t<!-- 底部操作按钮 -->\r\n\t\t<view class=\"footer\">\r\n\t\t\t<button class=\"btn save-btn\" @click=\"saveGoods\">保存修改</button>\r\n\t\t</view>\r\n\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\tonMounted,\r\n\t\tcomputed\r\n\t} from 'vue';\r\n\timport {\r\n\t\twebsiteUrl\r\n\t} from '@/common/config.js';\r\n\timport {\r\n\t\tchooseImageList,\r\n\t\tgetQiniuToken,\r\n\t\tuploadImageToQiniu\r\n\t} from '@/common/image.js'; // 引入工具函数\r\n\tconst props = defineProps({\r\n\t\tgoods_id: {\r\n\t\t\ttype: String\r\n\t\t}\r\n\t})\r\n\t// 商品ID（从路由参数获取）\r\n\t// const goodsId = ref(0);\r\n\t// 控制是否显示删除按钮\r\n\tconst showDelete = ref(true);\r\n\r\n\t// 商品信息\r\n\tconst goodsInfo = ref({\r\n\t\tid: 0,\r\n\t\tname: '',\r\n\t\tbrand_id: 0,\r\n\t\tbrand_name: '',\r\n\t\ttotal_amount: 0,\r\n\t\tcurrency: 'CNY',\r\n\t\tsize: '',\r\n\t\tsize_detail: '',\r\n\t\tskin: '',\r\n\t\ttype: '',\r\n\t\tdesc_content: '',\r\n\t\tdoll_material: '',\r\n\t\tgoods_images: []\r\n\t});\r\n\t// 尺寸选择器相关\r\n\tconst sizeData = ref([])\r\n\tconst sizeOptions = ref([]);\r\n\tconst selectedSizePath = ref([]);\r\n\r\n\tconst showSizeSelector = ref(false);\r\n\tconst sizeSelector = ref(null);\r\n\r\n\t// 类型选项\r\n\tconst typeOptions = ref([]);\r\n\tconst typeIndex = ref(-1);\r\n\r\n\t// 货币选项\r\n\tconst currencyOptions = ref([]);\r\n\tconst currencyIndex = ref(-1);\r\n\tconst currencyMap = ref({});\r\n\r\n\t// 材质选项\r\n\tconst materialOptions = ref([]);\r\n\tconst materialIndex = ref(-1);\r\n\r\n\t// 肤色快捷选项\r\n\tconst skinQuickOptions = ref(['白肌', '浅烧', '牡丹白', '奶油', '半白', '粉白', '普肌', '粉普', '烧肌']);\r\n\tconst showSkinQuickSelector = computed(() => {\r\n\t\treturn ['整体', '单体', '单头'].includes(goodsInfo.value.type);\r\n\t});\r\n\r\n\r\n\t// 初始尺寸选择\r\n\tconst initialSizeSelection = ref([]);\r\n\r\n\t// 选中的尺寸显示格式\r\n\tconst selectedSizeDisplay = computed(() => {\r\n\t\tconsole.log(\"goods:\", goodsInfo.value.sizes)\r\n\t\t// 确保 sizes 存在且为数组\r\n\t\tif (!goodsInfo.value.sizes || !Array.isArray(goodsInfo.value.sizes)) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\treturn goodsInfo.value.sizes.map(item => {\r\n\t\t\treturn `${item.goods_size}/${item.size_detail}`;\r\n\t\t});\r\n\t});\r\n\t// 打开尺寸选择器\r\n\tconst openSizeSelector = () => {\r\n\t\t// 设置初始选择值\r\n\t\tinitialSizeSelection.value = goodsInfo.value.sizes.map(item => ({\r\n\t\t\tcategory: item.goods_size,\r\n\t\t\tsize: item.size_detail\r\n\t\t}));\r\n\r\n\t\tshowSizeSelector.value = true;\r\n\t};\r\n\r\n\t// 处理尺寸选择结果\r\n\tconst handleSizeSelection = (sizes) => {\r\n\t\tgoodsInfo.value.sizes = sizes.map(item => ({\r\n\t\t\tgoods_size: item.category,\r\n\t\t\tsize_detail: item.size\r\n\t\t}));\r\n\t};\r\n\r\n\r\n\t// 获取商品信息\r\n\tconst fetchGoodsInfo = async () => {\r\n\t\ttry {\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '加载中...'\r\n\t\t\t});\r\n\t\t\tconst token = uni.getStorageSync('token');\r\n\t\t\tif (!token) {\r\n\t\t\t\terror.value = '未登录，请先登录';\r\n\t\t\t\tloading.value = false;\r\n\t\t\t\tloadStatus.value = 'more';\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst res = await uni.request({\r\n\t\t\t\turl: `${websiteUrl.value}/brand-manager/get-goods-info-by-id`,\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tid: props.goods_id\r\n\t\t\t\t},\r\n\t\t\t\theader: {\r\n\t\t\t\t\tAuthorization: token\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tif (res.data.status === 'success') {\r\n\t\t\t\tconst data = res.data.data;\r\n\r\n\t\t\t\tgoodsInfo.value = {\r\n\t\t\t\t\t...data,\r\n\t\t\t\t\t// 确保 sizes 数组存在\r\n\t\t\t\t\tsizes: data.sizes || [],\r\n\t\t\t\t\tgoods_images: data.goods_images.map(img => ({\r\n\t\t\t\t\t\tid: img.id,\r\n\t\t\t\t\t\tsrc: img.url,\r\n\t\t\t\t\t\tname: '',\r\n\t\t\t\t\t\tprice: '',\r\n\t\t\t\t\t\ttype: '',\r\n\t\t\t\t\t})),\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// 设置类型索引\r\n\t\t\t\ttypeIndex.value = typeOptions.value.indexOf(goodsInfo.value.type);\r\n\r\n\t\t\t\t// 设置货币索引\r\n\t\t\t\tcurrencyIndex.value = currencyOptions.value.findIndex(\r\n\t\t\t\t\titem => item === goodsInfo.value.currency\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// 设置材质索引\r\n\t\t\t\tmaterialIndex.value = materialOptions.value.indexOf(\r\n\t\t\t\t\tgoodsInfo.value.doll_material\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: res.data.msg,\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('获取商品信息失败', error);\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '获取商品信息失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t} finally {\r\n\t\t\tuni.hideLoading();\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t// 获取尺寸数据\r\n\tconst fetchSizes = async () => {\r\n\t\ttry {\r\n\t\t\tconst res = await uni.request({\r\n\t\t\t\turl: `${websiteUrl.value}/sizes`,\r\n\t\t\t\tmethod: 'GET'\r\n\t\t\t});\r\n\r\n\t\t\tif (res.data.status === \"success\") {\r\n\t\t\t\tsizeData.value = res.data.data;\r\n\t\t\t\tconst formattedSizes = [];\r\n\r\n\t\t\t\tfor (const [category, items] of Object.entries(sizeData.value)) {\r\n\t\t\t\t\tformattedSizes.push({\r\n\t\t\t\t\t\ttext: category,\r\n\t\t\t\t\t\tvalue: category,\r\n\t\t\t\t\t\tchildren: items.map(item => ({\r\n\t\t\t\t\t\t\ttext: item,\r\n\t\t\t\t\t\t\tvalue: item\r\n\t\t\t\t\t\t}))\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsizeOptions.value = formattedSizes;\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('获取尺寸数据失败:', err);\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '获取尺寸数据失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// 获取类型数据\r\n\tconst fetchTypes = async () => {\r\n\t\ttry {\r\n\t\t\tconst res = await uni.request({\r\n\t\t\t\turl: `${websiteUrl.value}/goods-types`,\r\n\t\t\t\tmethod: 'GET'\r\n\t\t\t});\r\n\r\n\t\t\tif (res.data.status === \"success\") {\r\n\t\t\t\ttypeOptions.value = res.data.data;\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('获取类型数据失败:', err);\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '获取类型数据失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// 获取货币数据\r\n\tconst fetchCurrencies = async () => {\r\n\t\ttry {\r\n\t\t\tconst res = await uni.request({\r\n\t\t\t\turl: `${websiteUrl.value}/currency`,\r\n\t\t\t\tmethod: 'GET'\r\n\t\t\t});\r\n\r\n\t\t\tif (res.data.status === \"success\") {\r\n\t\t\t\tcurrencyMap.value = res.data.data;\r\n\t\t\t\tcurrencyOptions.value = Object.keys(res.data.data);\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('获取货币数据失败:', err);\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '获取货币数据失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// 获取材质数据\r\n\tconst fetchMaterials = async () => {\r\n\t\ttry {\r\n\t\t\tlet url = `${websiteUrl.value}/materials`;\r\n\t\t\tif (goodsInfo.value.type === '假发') {\r\n\t\t\t\turl = `${websiteUrl.value}/hair-materials`;\r\n\t\t\t}\r\n\r\n\t\t\tconst res = await uni.request({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod: 'GET'\r\n\t\t\t});\r\n\r\n\t\t\tif (res.data.status === \"success\") {\r\n\t\t\t\tmaterialOptions.value = res.data.data;\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error('获取材质数据失败:', err);\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '获取材质数据失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// 尺寸选择变化\r\n\tconst onSizeChange = (e) => {\r\n\t\tconst nodes = e.detail.value;\r\n\r\n\t\tif (nodes.length === 2) {\r\n\t\t\tgoodsInfo.value.size = nodes[0].value;\r\n\t\t\tgoodsInfo.value.size_detail = nodes[1].value;\r\n\t\t} else {\r\n\t\t\tgoodsInfo.value.size = '';\r\n\t\t\tgoodsInfo.value.size_detail = '';\r\n\t\t}\r\n\t};\r\n\r\n\t// 更新类型\r\n\tconst updateType = (e) => {\r\n\t\tconst index = e.detail.value;\r\n\t\ttypeIndex.value = index;\r\n\t\tgoodsInfo.value.type = typeOptions.value[index];\r\n\r\n\t\t// 类型改变时重新获取材质\r\n\t\tfetchMaterials();\r\n\t};\r\n\r\n\t// 更新货币\r\n\tconst updateCurrency = (e) => {\r\n\t\tconst index = e.detail.value;\r\n\t\tcurrencyIndex.value = index;\r\n\t\tgoodsInfo.value.currency = currencyOptions.value[index];\r\n\t};\r\n\r\n\t// 更新材质\r\n\tconst updateMaterial = (e) => {\r\n\t\tconst index = e.detail.value;\r\n\t\tmaterialIndex.value = index;\r\n\t\tgoodsInfo.value.doll_material = materialOptions.value[index];\r\n\t};\r\n\r\n\t// 添加肤色快捷选项\r\n\tconst addSkin = (skin) => {\r\n\t\tif (goodsInfo.value.skin) {\r\n\t\t\tgoodsInfo.value.skin += ` ${skin}`;\r\n\t\t} else {\r\n\t\t\tgoodsInfo.value.skin = skin;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t// 处理图片排序变化\r\n\tconst handleImageSortChange = (sortedIds) => {\r\n\t\t// 根据排序后的ID重新排序图片数组\r\n\t\tconst sortedImages = [];\r\n\t\tsortedIds.forEach(id => {\r\n\t\t\tconst image = goodsInfo.value.goods_images.find(img => img.id === id);\r\n\t\t\tif (image) sortedImages.push(image);\r\n\t\t});\r\n\t\tgoodsInfo.value.goods_images = sortedImages;\r\n\t};\r\n\r\n\t// 保存商品信息\r\n\tconst saveGoods = async () => {\r\n\t\ttry {\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '保存中...'\r\n\t\t\t});\r\n\r\n\t\t\t// 准备要提交的数据\r\n\t\t\tconst submitData = {\r\n\t\t\t\t...goodsInfo.value,\r\n\t\t\t\t// 转换图片格式为后端需要的格式\r\n\t\t\t\tgoods_images: goodsInfo.value.goods_images.map(img => ({\r\n\t\t\t\t\tid: img.id,\r\n\t\t\t\t\turl: img.src\r\n\t\t\t\t})),\r\n\t\t\t\t// 尺寸数据已经是后端需要的格式\r\n\t\t\t\tsizes: goodsInfo.value.sizes\r\n\t\t\t};\r\n\r\n\t\t\tconst token = uni.getStorageSync('token');\r\n\t\t\tif (!token) {\r\n\t\t\t\terror.value = '未登录，请先登录';\r\n\t\t\t\tloading.value = false;\r\n\t\t\t\tloadStatus.value = 'more';\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// 调用更新接口\r\n\t\t\tconst res = await uni.request({\r\n\t\t\t\turl: `${websiteUrl.value}/brand-manager/update-goods`,\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: submitData,\r\n\t\t\t\theader: {\r\n\t\t\t\t\tAuthorization: token\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tif (res.data.status === 'success') {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '保存成功'\r\n\t\t\t\t});\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.navigateBack();\r\n\t\t\t\t}, 1500);\r\n\t\t\t} else {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: res.data.msg,\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('保存失败', error);\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '保存失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t} finally {\r\n\t\t\tuni.hideLoading();\r\n\t\t}\r\n\t};\r\n\r\n\t// 添加图片方法\r\n\tconst addImages = async () => {\r\n\t\ttry {\r\n\t\t\t// 计算还能添加几张图片\r\n\t\t\tconst remaining = 9 - goodsInfo.value.goods_images.length;\r\n\t\t\tif (remaining <= 0) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '最多只能添加9张图片',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// 选择图片\r\n\t\t\tconst tempFilePaths = await chooseImageList(remaining);\r\n\r\n\t\t\t// 显示上传进度\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '上传中...',\r\n\t\t\t\tmask: true\r\n\t\t\t});\r\n\r\n\t\t\t// 上传所有图片\r\n\t\t\tfor (let i = 0; i < tempFilePaths.length; i++) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 更新上传状态\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: `上传中 (${i+1}/${tempFilePaths.length})`,\r\n\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// 获取七牛云上传凭证\r\n\t\t\t\t\tconst qiniuTokenData = await getQiniuToken();\r\n\r\n\t\t\t\t\t// 检查返回的数据结构\r\n\t\t\t\t\tif (!qiniuTokenData || !qiniuTokenData.path || !qiniuTokenData.token) {\r\n\t\t\t\t\t\tthrow new Error('获取上传凭证失败: 缺少必要字段');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 使用七牛云返回的 path 作为文件名\r\n\t\t\t\t\tconst fileName = qiniuTokenData.path;\r\n\r\n\t\t\t\t\t// 上传图片到七牛云\r\n\t\t\t\t\tconst result = await uploadImageToQiniu(\r\n\t\t\t\t\t\ttempFilePaths[i],\r\n\t\t\t\t\t\tqiniuTokenData.token,\r\n\t\t\t\t\t\tfileName\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tif (result && result.imageUrl) {\r\n\t\t\t\t\t\t// 将新图片添加到商品图片列表\r\n\t\t\t\t\t\tgoodsInfo.value.goods_images.push({\r\n\t\t\t\t\t\t\tid: Date.now() + i, // 临时ID\r\n\t\t\t\t\t\t\tsrc: result.imageUrl,\r\n\t\t\t\t\t\t\tname: '',\r\n\t\t\t\t\t\t\tprice: '',\r\n\t\t\t\t\t\t\ttype: '',\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error(`第 ${i+1} 张图片上传失败:`, error);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: `第 ${i+1} 张图片上传失败: ${error.message || error}`,\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 3000\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tuni.hideLoading();\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: `成功添加${tempFilePaths.length}张图片`,\r\n\t\t\t\ticon: 'success'\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('添加图片失败', error);\r\n\t\t\tuni.hideLoading();\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: `添加图片失败: ${error.message || error}`,\r\n\t\t\t\ticon: 'none',\r\n\t\t\t\tduration: 3000\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t// 处理图片删除事件\r\n\tconst handleDeleteImage = (imageId) => {\r\n\t\tuni.showModal({\r\n\t\t\ttitle: '删除确认',\r\n\t\t\tcontent: '确定要删除这张图片吗？',\r\n\t\t\tconfirmText: '删除',\r\n\t\t\tconfirmColor: '#ff3b30',\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t// 从商品图片列表中删除该图片\r\n\t\t\t\t\tgoodsInfo.value.goods_images = goodsInfo.value.goods_images.filter(\r\n\t\t\t\t\t\timg => img.id !== imageId\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '图片已删除',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// 这里可以添加调用后台接口删除图片的逻辑\r\n\t\t\t\t\t// deleteImageFromServer(imageId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tonMounted(async () => {\n\t\tuni.setNavigationBarTitle({\n\t\t\ttitle: \"编辑商品信息\"\n\t\t})\r\n\t\t// 先获取基础数据\r\n\t\tawait fetchSizes();\r\n\t\tawait fetchTypes();\r\n\t\tawait fetchCurrencies();\r\n\r\n\t\t// 然后获取商品信息\r\n\t\tawait fetchGoodsInfo();\r\n\r\n\t\t// 最后获取材质（需要商品类型信息）\r\n\t\tawait fetchMaterials();\r\n\t});\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t.container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\theight: 100vh;\r\n\t\tbackground-color: #f8f8f8;\r\n\t}\r\n\r\n\t.form-container {\r\n\t\tflex: 1;\r\n\t\tpadding: 20rpx 30rpx;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.form-item {\r\n\t\tmargin-bottom: 30rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 24rpx;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\r\n\t\tposition: relative;\r\n\r\n\t\t.label {\r\n\t\t\tdisplay: block;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tcolor: #333;\r\n\t\t\tmargin-bottom: 16rpx;\r\n\t\t}\r\n\r\n\t\t.hint {\r\n\t\t\tdisplay: block;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tcolor: #999;\r\n\t\t\tmargin: 16rpx 0;\n\t\t\tletter-spacing: 1rpx;\r\n\t\t}\r\n\r\n\t\t.input {\r\n\t\t\theight: 80rpx;\r\n\t\t\tbackground-color: #f9f9f9;\r\n\t\t\tborder-radius: 12rpx;\r\n\t\t\tpadding: 0 20rpx;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: #333;\r\n\r\n\t\t\t&.disabled {\r\n\t\t\t\tbackground-color: #f0f0f0;\r\n\t\t\t\tcolor: #999;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.textarea {\r\n\t\t\tmin-height: 160rpx;\r\n\t\t\tbackground-color: #f9f9f9;\r\n\t\t\tborder-radius: 12rpx;\r\n\t\t\tpadding: 20rpx;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: #333;\r\n\t\t\twidth: calc(100% - 40rpx);\r\n\t\t}\r\n\r\n\t\t.currency {\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 50rpx;\r\n\t\t\tbottom:30rpx;\r\n\t\t\ttransform: translateY(-50%);\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: #333;\r\n\t\t}\r\n\t}\r\n\r\n\t.image-edit-container {\r\n\t\tmargin-top: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tmargin-top: 20rpx;\r\n\t}\r\n\r\n\t.footer {\r\n\t\tpadding: 20rpx 30rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tbox-shadow: 0 -4rpx 12rpx rgba(0, 0, 0, 0.05);\r\n\r\n\t\t.btn {\r\n\t\t\theight: 88rpx;\r\n\t\t\tborder-radius: 44rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\tfont-weight: 500;\r\n\r\n\t\t\t&.save-btn {\r\n\t\t\t\tbackground: linear-gradient(to right, #65c6d9, #4a9db5);\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/* 添加图片按钮样式 */\r\n\t.add-image-btn {\r\n\t\tdisplay: inline-flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\twidth: 200rpx;\r\n\t\theight: 200rpx;\r\n\t\tbackground-color: #f9f9f9;\r\n\t\tborder: 2rpx dashed #ddd;\r\n\t\tborder-radius: 16rpx;\r\n\t\tmargin: 10rpx;\r\n\t\tcursor: pointer;\r\n\t\ttransition: all 0.3s;\r\n\r\n\t\t&:active {\r\n\t\t\tbackground-color: #f0f0f0;\r\n\t\t\ttransform: scale(0.98);\r\n\t\t}\r\n\r\n\t\ttext {\r\n\t\t\tfont-size: 26rpx;\r\n\t\t\tcolor: #999;\r\n\t\t\tmargin-top: 10rpx;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/* 添加图片按钮样式 */\r\n\t.add-image-btn {\r\n\t\tdisplay: inline-flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\twidth: 200rpx;\r\n\t\theight: 200rpx;\r\n\t\tbackground-color: #f9f9f9;\r\n\t\tborder: 2rpx dashed #ddd;\r\n\t\tborder-radius: 16rpx;\r\n\t\tmargin: 10rpx;\r\n\t\tcursor: pointer;\r\n\t\ttransition: all 0.3s;\r\n\r\n\t\t&:active {\r\n\t\t\tbackground-color: #f0f0f0;\r\n\t\t\ttransform: scale(0.98);\r\n\t\t}\r\n\r\n\t\ttext {\r\n\t\t\tfont-size: 26rpx;\r\n\t\t\tcolor: #999;\r\n\t\t\tmargin-top: 10rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t/* 尺寸选择器样式 */\r\n\t.size-picker {\r\n\t\tborder: none;\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 0 20rpx;\r\n\t\theight: 80rpx;\r\n\t\tline-height: 80rpx;\r\n\t\tbackground-color: #f9f9f9;\r\n\t\tmargin-top: 15rpx;\r\n\r\n\t\t/deep/.input-value-border {\r\n\t\t\tborder: none;\r\n\t\t\tposition: relative;\r\n\t\t\ttop: 10rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t/* 肤色快速选择器 */\r\n\t.skin-quick-selector {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tmargin-top: 20rpx;\r\n\t\tgap: 10rpx;\r\n\r\n\t\t.skin-tag {\r\n\t\t\tpadding: 8rpx 20rpx;\r\n\t\t\tbackground-color: #f0f8ff;\r\n\t\t\tborder-radius: 40rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tcolor: #4a9db5;\r\n\t\t\tborder: 1rpx solid #65c6d9;\r\n\r\n\t\t\t&:active {\r\n\t\t\t\tbackground-color: #d1e8f0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/* 选择器内容样式 */\r\n\t.picker-content {\r\n\t\theight: 80rpx;\r\n\t\tline-height: 80rpx;\r\n\t\tpadding: 0 20rpx;\r\n\t\tbackground-color: #f9f9f9;\r\n\t\tborder-radius: 12rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.currency-picker {\r\n\t\twidth: 150rpx;\r\n\t\tposition: absolute;\r\n\t\tright: 10rpx;\r\n\t\tbottom: 60rpx;\r\n\t}\r\n</style>","import MiniProgramPage from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/pages/creator_base/goods_editor/goods_editor.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","uni","websiteUrl","error","chooseImageList","getQiniuToken","uploadImageToQiniu","onMounted"],"mappings":"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"}