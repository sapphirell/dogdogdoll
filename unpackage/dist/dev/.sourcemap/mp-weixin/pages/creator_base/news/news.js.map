{"version":3,"file":"news.js","sources":["pages/creator_base/news/news.vue","pages/creator_base/news/news.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"brand-news-page\">\r\n\t\t<!-- 文章列表 -->\r\n\t\t<scroll-view class=\"news-list\" scroll-y scroll-x=false @scrolltolower=\"loadMore\"\r\n\t\t\t:style=\"{ height: scrollHeight + 'px' }\">\r\n\t\t\t<!-- 加载状态 -->\r\n\t\t\t<view v-if=\"loading\" class=\"loading-container\">\r\n\t\t\t\t<uni-load-more status=\"loading\"></uni-load-more>\r\n\t\t\t</view>\r\n\t\t\t<!-- 列表内容 -->\r\n\t\t\t<view v-for=\"item in newsList\" :key=\"item.id\" class=\"news-item\" v-else-if=\"newsList.length > 0\">\r\n\t\t\t\t<view class=\"news-header\">\r\n\t\t\t\t\t<view class=\"header-left\">\r\n\t\t\t\t\t\t<text class=\"news-title\">{{ item.title }}</text>\r\n\t\t\t\t\t\t<text class=\"news-time\">{{ formatDate(item.created_at * 1000) }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"action-btns\">\r\n\t\t\t\t\t\t<button class=\"edit-btn\" @click=\"editNews(item)\">编辑</button>\r\n\t\t\t\t\t\t<button class=\"delete-btn\" @click=\"confirmDelete(item.id)\">删除</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 图片区域 -->\r\n\t\t\t\t<view class=\"news-images\" v-if=\"item.image_list && item.image_list.length\">\r\n\t\t\t\t\t<image v-for=\"(img, index) in item.image_list\" :key=\"index\" :src=\"img\" mode=\"aspectFill\"\r\n\t\t\t\t\t\tclass=\"news-image\" @click=\"previewImages(item.image_list, index)\"></image>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 内容预览 -->\r\n\t\t\t\t<view class=\"news-content-preview\">\r\n\t\t\t\t\t{{ item.content.length > 50 ? item.content.substring(0, 50) + '...' : item.content }}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 加载更多 -->\r\n\t\t\t<view class=\"load-more\" v-if=\"!loading\">\r\n\t\t\t\t<text v-if=\"loadingStatus === 'loading'\">加载中...</text>\r\n\t\t\t\t<text v-if=\"loadingStatus === 'noMore' && newsList.length !== 0\">— 没有更多了 —</text>\r\n\t\t\t</view>\r\n\t\t\t<!-- 空状态 -->\r\n\t\t\t<view class=\"empty\" v-if=\"newsList.length === 0 && !loading\">\r\n\t\t\t\t<image class=\"empty-icon\" src=\"/static/images/empty.png\"></image>\r\n\t\t\t\t<text class=\"empty-text\">暂无品牌文章</text>\r\n\t\t\t\t<text class=\"empty-tip\">点击加号按钮创建您的第一篇文章</text>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\r\n\t\t<!-- 新增按钮 -->\r\n\t\t<button class=\"add-btn\" @click=\"showAddDialog\">\r\n\t\t\t<uni-icons type=\"plusempty\" size=\"30\" color=\"#fff\"></uni-icons>\r\n\t\t</button>\r\n\r\n\t\t<!-- 新增/编辑弹窗 -->\r\n\t\t<uni-popup ref=\"popup\" type=\"bottom\">\r\n\t\t\t<view class=\"popup-content\">\r\n\t\t\t\t<view class=\"popup-header\">\r\n\t\t\t\t\t<text class=\"popup-title\">{{ isEditMode ? '编辑文章' : '新增文章' }}</text>\r\n\t\t\t\t\t<uni-icons type=\"closeempty\" size=\"24\" color=\"#999\" @click=\"closeDialog\"></uni-icons>\r\n\t\t\t\t</view>\r\n\t\t\t\t<scroll-view scroll-y=\"true\" class=\"form-container\" style=\"height: 1000rpx;\">\r\n\t\t\t\t\t<!-- 文章类型选择器 -->\r\n\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t<text class=\"form-label\">文章类型</text>\r\n\t\t\t\t\t\t<picker @change=\"onNewsTypeChange\" :value=\"formData.news_type\" :range=\"newsTypes\"\r\n\t\t\t\t\t\t\trange-key=\"label\">\r\n\t\t\t\t\t\t\t<view class=\"picker\">\r\n\t\t\t\t\t\t\t\t{{ newsTypes.find(t => t.value === formData.news_type)?.label || '请选择文章类型' }}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</picker>\n\t\t\t\t\t\t<view class=\"goods-search-tip\">\n\t\t\t\t\t\t\t只可以发布与【贩售】相关内容；半成品->图透、即将截止贩售->截定、开始贩售以及其它->公告\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"goods-search-tip\">\n\t\t\t\t\t\t\t我们每天上午和晚上10点左右会搬运一次小红书里发布的和贩售相关的新消息，如果有重复可以自行编辑或删除。\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t<text class=\"form-label\">文章标题</text>\r\n\t\t\t\t\t\t<input class=\"form-input\" v-model=\"formData.title\" placeholder=\"请输入文章标题\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t<text class=\"form-label\">文章内容</text>\r\n\t\t\t\t\t\t<textarea class=\"form-textarea\" v-model=\"formData.content\" placeholder=\"请输入文章内容\" auto-height />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 商品关联搜索 -->\r\n\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t<text class=\"form-label\">关联商品</text>\r\n\t\t\t\t\t\t<view class=\"goods-search-container\">\r\n\t\t\t\t\t\t\t<goods-search mode=\"fill\" :modelValue=\"formData.subscribe_goods_name\"\r\n\t\t\t\t\t\t\t\t@select=\"onGoodsSelect\" :brandId=\"currentBrandId\" />\r\n\t\t\t\t\t\t\t<view class=\"goods-search-tip\">\r\n\t\t\t\t\t\t\t\t关联商品，用户可以订阅消息，如果该商品下次发布贩售消息，订阅用户将收到弹窗提醒\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t<text class=\"form-label\">展示图片</text>\r\n\t\t\t\t\t\t<view class=\"image-uploader\">\r\n\t\t\t\t\t\t\t<!-- 上传状态提示 -->\r\n\t\t\t\t\t\t\t<view v-if=\"uploading\" class=\"uploading-container\">\r\n\t\t\t\t\t\t\t\t<uni-load-more status=\"loading\"></uni-load-more>\r\n\t\t\t\t\t\t\t\t<text class=\"uploading-text\">上传中 ({{ uploadedCount }}/{{ totalToUpload }})</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<!-- 图片预览 -->\r\n\t\t\t\t\t\t\t<view v-for=\"(img, index) in formData.image_list\" :key=\"index\" class=\"image-preview\">\r\n\t\t\t\t\t\t\t\t<image :src=\"img\" mode=\"aspectFill\" class=\"preview-image\"></image>\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"close\" size=\"18\" color=\"#fff\" class=\"delete-icon\"\r\n\t\t\t\t\t\t\t\t\t@click=\"removeImage(index)\"></uni-icons>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<!-- 上传按钮 -->\r\n\t\t\t\t\t\t\t<view class=\"upload-btn\" @click=\"chooseAndUploadImages\"\r\n\t\t\t\t\t\t\t\tv-if=\"formData.image_list.length < 9 && !uploading\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"plusempty\" size=\"28\" color=\"#999\"></uni-icons>\r\n\t\t\t\t\t\t\t\t<text>添加图片</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t\t<button class=\"submit-btn\" @click=\"submitNews\" :disabled=\"submitting\">\r\n\t\t\t\t\t{{ submitting ? '提交中...' : '提交' }}\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\t</view>\r\n</template>\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\tonMounted\r\n\t} from 'vue'\r\n\timport {\r\n\t\tonShow\r\n\t} from '@dcloudio/uni-app'\r\n\timport {\r\n\t\tchooseImageList,\r\n\t\tgetQiniuToken,\r\n\t\tuploadImageToQiniu\r\n\t} from '@/common/image.js';\r\n\timport {\r\n\t\twebsiteUrl\r\n\t} from '@/common/config.js';\r\n\t// 列表数据\r\n\tconst newsList = ref([])\r\n\tconst currentPage = ref(1)\r\n\tconst pageSize = ref(10)\r\n\tconst total = ref(0)\r\n\tconst loading = ref(false)\r\n\tconst submitting = ref(false)\r\n\tconst loadingStatus = ref('more')\r\n\tconst scrollHeight = ref(0)\r\n\t// 表单相关\r\n\tconst popup = ref(null)\r\n\tconst isEditMode = ref(false)\r\n\tconst currentNewsId = ref(null)\r\n\t// 上传相关状态\r\n\tconst uploading = ref(false)\r\n\tconst uploadedCount = ref(0)\r\n\tconst totalToUpload = ref(0)\r\n\tconst uploadStatusText = ref('')\r\n\tconst formData = ref({\r\n\t\ttitle: '',\r\n\t\tcontent: '',\r\n\t\timage_list: [],\r\n\t\tnews_type: 1, // 默认图透\r\n\t\tsubscribe_goods_id: 0,\r\n\t\tsubscribe_goods_name: ''\r\n\t})\r\n\r\n\t// 新增文章类型选项\r\n\tconst newsTypes = ref([{\r\n\t\t\tvalue: 1,\r\n\t\t\tlabel: '图透'\r\n\t\t},\r\n\t\t{\r\n\t\t\tvalue: 2,\r\n\t\t\tlabel: '尾款'\r\n\t\t},\r\n\t\t{\r\n\t\t\tvalue: 3,\r\n\t\t\tlabel: '截定'\r\n\t\t},\r\n\t\t{\r\n\t\t\tvalue: 4,\r\n\t\t\tlabel: '公告'\r\n\t\t}\r\n\t])\r\n\t// 当前品牌ID（根据实际情况获取）\r\n\tconst currentBrandId = ref(1)\r\n\t// 商品选择事件\r\n\tconst onGoodsSelect = (goods) => {\r\n\t\tformData.value.subscribe_goods_id = goods.id\r\n\t\tformData.value.subscribe_goods_name = goods.name\r\n\t}\r\n\t// 文章类型改变事件\r\n\tconst onNewsTypeChange = (e) => {\r\n\t\tformData.value.news_type = parseInt(e.detail.value) + 1\r\n\t}\r\n\t// 初始化页面\r\n\tonMounted(() => {\r\n\t\tcalcScrollHeight()\r\n\t\tuni.setNavigationBarTitle({\r\n\t\t\ttitle: \"品牌文章管理\"\r\n\t\t})\r\n\t})\r\n\tonShow(() => {\r\n\t\tfetchNewsList(true)\r\n\t})\r\n\t// 计算滚动区域高度\r\n\tconst calcScrollHeight = () => {\r\n\t\tconst systemInfo = uni.getSystemInfoSync()\r\n\t\tscrollHeight.value = systemInfo.windowHeight - 50 // 减去头部高度\r\n\t}\r\n\t// 获取Authorization\r\n\tconst getAuthorization = () => {\r\n\t\tconst token = uni.getStorageSync('token') || ''\r\n\t\treturn token\r\n\t}\r\n\t// 选择并上传图片\r\n\tconst chooseAndUploadImages = async () => {\r\n\t\ttry {\r\n\t\t\t// 计算还能上传的数量\r\n\t\t\tconst remaining = 9 - formData.value.image_list.length\r\n\t\t\tif (remaining <= 0) return\r\n\t\t\t// 选择图片\r\n\t\t\tconst tempFilePaths = await chooseImageList(remaining)\r\n\t\t\tif (!tempFilePaths || tempFilePaths.length === 0) return\r\n\t\t\t// 获取七牛云凭证\r\n\t\t\tconst qiniuData = await getQiniuToken()\r\n\t\t\tconst token = qiniuData.token\r\n\t\t\tconst basePath = qiniuData.path // 使用返回的path作为基础路径\r\n\t\t\t// 设置上传状态\r\n\t\t\tuploading.value = true\r\n\t\t\ttotalToUpload.value = tempFilePaths.length\r\n\t\t\tuploadedCount.value = 0\r\n\t\t\t// 依次上传每张图片\r\n\t\t\tconst uploadedUrls = []\r\n\t\t\tfor (let i = 0; i < tempFilePaths.length; i++) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst filePath = tempFilePaths[i]\r\n\t\t\t\t\t// 更新上传状态\r\n\t\t\t\t\tuploadStatusText.value = `上传中 (${i+1}/${tempFilePaths.length})`\r\n\t\t\t\t\tuploadedCount.value = i + 1\r\n\t\t\t\t\t// 上传到七牛云\r\n\t\t\t\t\tconst result = await uploadImageToQiniu(\r\n\t\t\t\t\t\tfilePath,\r\n\t\t\t\t\t\ttoken,\r\n\t\t\t\t\t\tbasePath\r\n\t\t\t\t\t)\r\n\t\t\t\t\tif (result && result.imageUrl) {\r\n\t\t\t\t\t\tuploadedUrls.push(result.imageUrl)\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (uploadError) {\r\n\t\t\t\t\tconsole.error(`第 ${i+1} 张图片上传失败:`, uploadError)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: `第 ${i+1} 张图片上传失败`,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 更新表单中的图片列表\r\n\t\t\tformData.value.image_list = [...formData.value.image_list, ...uploadedUrls]\r\n\t\t\t// 显示上传结果\r\n\t\t\tif (uploadedUrls.length > 0) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: `成功上传 ${uploadedUrls.length} 张图片`,\r\n\t\t\t\t\ticon: 'success'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('图片选择或上传失败:', error)\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '图片上传失败: ' + (error.message || '未知错误'),\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t} finally {\r\n\t\t\tuploading.value = false\r\n\t\t\tuploadedCount.value = 0\r\n\t\t\ttotalToUpload.value = 0\r\n\t\t}\r\n\t}\r\n\t// 获取文章列表\r\n\tconst fetchNewsList = async (reset = false) => {\r\n\t\tif (loading.value) return\r\n\t\tif (reset) {\r\n\t\t\tcurrentPage.value = 1\r\n\t\t\tnewsList.value = []\r\n\t\t\tloadingStatus.value = 'more'\r\n\t\t}\r\n\t\tloading.value = true\r\n\t\tloadingStatus.value = 'loading'\r\n\t\ttry {\r\n\t\t\tconst res = await uni.request({\r\n\t\t\t\turl: websiteUrl.value + '/brand-manager/news/list',\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tpage_index: currentPage.value,\r\n\t\t\t\t\tpage_size: pageSize.value\r\n\t\t\t\t},\r\n\t\t\t\theader: {\r\n\t\t\t\t\t'Authorization': getAuthorization()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tif (res.data.status === 'success') {\r\n\t\t\t\tconst data = res.data.data\r\n\t\t\t\tconst newList = data.news_list || []\r\n\t\t\t\ttotal.value = data.total\r\n\t\t\t\t// 处理图片数据\r\n\t\t\t\tconst processedList = newList.map(news => {\r\n\t\t\t\t\t// 处理图片数据：将逗号分隔的字符串转为数组\r\n\t\t\t\t\tconst image_list = news.image_urls ?\r\n\t\t\t\t\t\tnews.image_urls.split(',').filter(url => url.trim() !== '') :\r\n\t\t\t\t\t\t(news.image_list || []);\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...news,\r\n\t\t\t\t\t\timage_list\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tif (reset) {\r\n\t\t\t\t\tnewsList.value = processedList\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnewsList.value = [...newsList.value, ...processedList]\r\n\t\t\t\t}\r\n\t\t\t\tif (newsList.value.length >= total.value) {\r\n\t\t\t\t\tloadingStatus.value = 'noMore'\r\n\t\t\t\t} else {\r\n\t\t\t\t\tloadingStatus.value = 'more'\r\n\t\t\t\t\tcurrentPage.value++\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: res.data.message || '获取列表失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '网络错误',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t} finally {\r\n\t\t\tloading.value = false\r\n\t\t}\r\n\t}\r\n\t// 加载更多\r\n\tconst loadMore = () => {\r\n\t\tif (loadingStatus.value === 'noMore') return\r\n\t\tfetchNewsList()\r\n\t}\r\n\t// 显示新增弹窗\r\n\tconst showAddDialog = () => {\r\n\t\tresetForm()\r\n\t\tisEditMode.value = false\r\n\t\tpopup.value.open()\r\n\t}\r\n\t// 编辑文章\r\n\tconst editNews = (news) => {\r\n\t\tresetForm()\r\n\t\tisEditMode.value = true\r\n\t\tcurrentNewsId.value = news.id\r\n\t\t// 填充表单数据\r\n\t\tformData.value = {\r\n\t\t\ttitle: news.title,\r\n\t\t\tcontent: news.content,\r\n\t\t\timage_list: [...(news.image_list || [])],\r\n\t\t\tnews_type: news.news_type || 1,\r\n\t\t\tsubscribe_goods_id: news.subscribe_goods_id || 0,\r\n\t\t\tsubscribe_goods_name: news.subscribe_goods_name || ''\r\n\t\t}\r\n\t\tpopup.value.open()\r\n\t}\r\n\t// 重置表单\r\n\tconst resetForm = () => {\r\n\t\tformData.value = {\r\n\t\t\ttitle: '',\r\n\t\t\tcontent: '',\r\n\t\t\timage_list: []\r\n\t\t}\r\n\t\tcurrentNewsId.value = null\r\n\t\tsubmitting.value = false\r\n\t}\r\n\t// 提交表单\r\n\tconst submitNews = async () => {\r\n\t\tif (!formData.value.title) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请填写文章标题',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (!formData.value.content) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请填写文章内容',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\t// 准备请求参数\r\n\t\tconst params = {\r\n\t\t\ttitle: formData.value.title,\r\n\t\t\tcontent: formData.value.content,\r\n\t\t\timage_urls: formData.value.image_list,\r\n\t\t\tnews_type: formData.value.news_type,\r\n\t\t\tsubscribe_goods_id: formData.value.subscribe_goods_id,\r\n\t\t\tsubscribe_goods_name: formData.value.subscribe_goods_name\r\n\t\t}\r\n\t\tif (isEditMode.value) {\r\n\t\t\tparams.id = currentNewsId.value\r\n\t\t}\r\n\t\tsubmitting.value = true\r\n\t\ttry {\r\n\t\t\tconst url = websiteUrl.value + (isEditMode.value ?\r\n\t\t\t\t'/brand-manager/news/update' :\r\n\t\t\t\t'/brand-manager/news/create')\r\n\t\t\tconst method = 'POST'\r\n\t\t\tconst res = await uni.request({\r\n\t\t\t\turl,\r\n\t\t\t\tmethod,\r\n\t\t\t\tdata: params,\r\n\t\t\t\theader: {\r\n\t\t\t\t\t'Authorization': getAuthorization(),\r\n\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tif (res.data.status === 'success') {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: isEditMode.value ? '更新成功' : '添加成功',\r\n\t\t\t\t\ticon: 'success'\r\n\t\t\t\t})\r\n\t\t\t\tpopup.value.close()\r\n\t\t\t\tfetchNewsList(true)\r\n\t\t\t} else {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: res.data.message || (isEditMode.value ? '更新失败' : '添加失败'),\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('提交失败:', error)\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请求失败，请稍后重试',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t} finally {\r\n\t\t\tsubmitting.value = false\r\n\t\t}\r\n\t}\r\n\t// 关闭弹窗\r\n\tconst closeDialog = () => {\r\n\t\tpopup.value.close()\r\n\t}\r\n\t// 确认删除\r\n\tconst confirmDelete = (id) => {\r\n\t\tuni.showModal({\r\n\t\t\ttitle: '提示',\r\n\t\t\tcontent: '确定要删除该文章吗？',\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\tdeleteNews(id)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t// 删除文章\r\n\tconst deleteNews = async (id) => {\r\n\t\ttry {\r\n\t\t\tconst res = await uni.request({\r\n\t\t\t\turl: websiteUrl.value + '/brand-manager/news/delete?id=' + id,\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\theader: {\r\n\t\t\t\t\t'Authorization': getAuthorization()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tif (res.data.status === 'success') {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '删除成功',\r\n\t\t\t\t\ticon: 'success'\r\n\t\t\t\t})\r\n\t\t\t\tfetchNewsList(true)\r\n\t\t\t} else {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: res.data.message || '删除失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('删除失败:', error)\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '网络错误',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t// 删除图片\r\n\tconst removeImage = (index) => {\r\n\t\tformData.value.image_list.splice(index, 1)\r\n\t}\r\n\t// 预览图片\r\n\tconst previewImages = (images, current) => {\r\n\t\tuni.previewImage({\r\n\t\t\tcurrent,\r\n\t\t\turls: images,\r\n\t\t\tindicator: 'number'\r\n\t\t})\r\n\t}\r\n\t// 格式化日期\r\n\tconst formatDate = (timestamp, format = 'yyyy-MM-dd HH:mm') => {\r\n\t\tif (!timestamp) return ''\r\n\t\tconst date = new Date(timestamp)\r\n\t\tconst year = date.getFullYear()\r\n\t\tconst month = (date.getMonth() + 1).toString().padStart(2, '0')\r\n\t\tconst day = date.getDate().toString().padStart(2, '0')\r\n\t\tconst hours = date.getHours().toString().padStart(2, '0')\r\n\t\tconst minutes = date.getMinutes().toString().padStart(2, '0')\r\n\t\tif (format === 'yyyy-MM-dd') {\r\n\t\t\treturn `${year}-${month}-${day}`\r\n\t\t}\r\n\t\tif (format === 'HH:mm') {\r\n\t\t\treturn `${hours}:${minutes}`\r\n\t\t}\r\n\t\treturn `${year}-${month}-${day} ${hours}:${minutes}`\r\n\t}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\t.brand-news-page {\r\n\t\tpadding: 15px;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tmin-height: 100vh;\r\n\t\tbox-sizing: border-box;\r\n\r\n\t\t.news-list {\r\n\t\t\tmargin-bottom: 20px;\r\n\r\n\t\t\t.news-item {\r\n\t\t\t\tbackground-color: #fff;\r\n\t\t\t\tborder-radius: 12px;\r\n\t\t\t\tpadding: 15px;\r\n\t\t\t\tmargin-bottom: 15px;\r\n\t\t\t\tbox-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\r\n\t\t\t\ttransition: all 0.3s ease;\r\n\r\n\t\t\t\t&:active {\r\n\t\t\t\t\ttransform: translateY(2px);\r\n\t\t\t\t\tbox-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.news-header {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tmargin-bottom: 12px;\r\n\r\n\t\t\t\t\t.header-left {\r\n\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\toverflow: hidden;\r\n\r\n\t\t\t\t\t\t.news-title {\r\n\t\t\t\t\t\t\tfont-size: 16px;\r\n\t\t\t\t\t\t\tfont-weight: 600;\r\n\t\t\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\t\t\tmargin-bottom: 6px;\r\n\t\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.news-time {\r\n\t\t\t\t\t\t\tfont-size: 12px;\r\n\t\t\t\t\t\t\tcolor: #999;\r\n\t\t\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.action-btns {\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tmargin-left: 10px;\r\n\r\n\t\t\t\t\t\tbutton {\r\n\t\t\t\t\t\t\tmargin-left: 8px;\r\n\t\t\t\t\t\t\tpadding: 4px 12px;\r\n\t\t\t\t\t\t\tfont-size: 12px;\r\n\t\t\t\t\t\t\tborder-radius: 20px;\r\n\t\t\t\t\t\t\tborder: none;\r\n\t\t\t\t\t\t\tline-height: 1.5;\r\n\r\n\t\t\t\t\t\t\t&.edit-btn {\r\n\t\t\t\t\t\t\t\tbackground-color: #409eff;\r\n\t\t\t\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\t\t\t\tbox-shadow: 0 2px 4px rgba(64, 158, 255, 0.3);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t&.delete-btn {\r\n\t\t\t\t\t\t\t\tbackground-color: #f56c6c;\r\n\t\t\t\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\t\t\t\tbox-shadow: 0 2px 4px rgba(245, 108, 108, 0.3);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t&:active {\r\n\t\t\t\t\t\t\t\topacity: 0.8;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.news-images {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tflex-wrap: wrap;\r\n\t\t\t\t\tmargin: 10px -4px;\r\n\r\n\t\t\t\t\t.news-image {\r\n\t\t\t\t\t\twidth: calc(33.33% - 8px);\r\n\t\t\t\t\t\theight: 100px;\r\n\t\t\t\t\t\tmargin: 4px;\r\n\t\t\t\t\t\tborder-radius: 8px;\r\n\t\t\t\t\t\tbackground-color: #f0f0f0;\r\n\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.news-content-preview {\r\n\t\t\t\t\tfont-size: 14px;\r\n\t\t\t\t\tcolor: #666;\r\n\t\t\t\t\tline-height: 1.6;\r\n\t\t\t\t\tdisplay: -webkit-box;\r\n\t\t\t\t\t-webkit-box-orient: vertical;\r\n\t\t\t\t\t-webkit-line-clamp: 3;\r\n\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\tmargin-top: 8px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.loading-container {\r\n\t\t\t\tpadding: 20px 0;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tcolor: #999;\r\n\t\t\t}\r\n\r\n\t\t\t.load-more {\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tpadding: 20px 0;\r\n\t\t\t\tfont-size: 12px;\r\n\t\t\t\tcolor: #999;\r\n\t\t\t}\r\n\r\n\t\t\t.empty {\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tpadding: 50px 0;\r\n\r\n\t\t\t\t.empty-icon {\r\n\t\t\t\t\twidth: 120px;\r\n\t\t\t\t\theight: 120px;\r\n\t\t\t\t\tmargin-bottom: 15px;\r\n\t\t\t\t\topacity: 0.6;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.empty-text {\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\tfont-size: 16px;\r\n\t\t\t\t\tcolor: #666;\r\n\t\t\t\t\tmargin-bottom: 8px;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.empty-tip {\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\tfont-size: 13px;\r\n\t\t\t\t\tcolor: #999;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.add-btn {\r\n\t\t\tposition: fixed;\r\n\t\t\tright: 20px;\r\n\t\t\tbottom: 80px;\r\n\t\t\twidth: 56px;\r\n\t\t\theight: 56px;\r\n\t\t\tbackground: linear-gradient(135deg, #a6e9f7, #1ed1e1);\r\n\t\t\tborder-radius: 50%;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tbox-shadow: 0 4px 12px rgba(30, 209, 225, 0.4);\r\n\t\t\tz-index: 99;\r\n\t\t\tborder: none;\r\n\r\n\t\t\t&:active {\r\n\t\t\t\ttransform: scale(0.95);\r\n\t\t\t\tbox-shadow: 0 2px 6px rgba(30, 209, 225, 0.3);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.popup-content {\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tborder-top-left-radius: 20px;\r\n\t\t\tborder-top-right-radius: 20px;\r\n\t\t\tpadding: 20px;\r\n\t\t\tmax-height: 80vh;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\r\n\t\t\t.popup-header {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tpadding-bottom: 15px;\r\n\t\t\t\tborder-bottom: 1px solid #eee;\r\n\t\t\t\tmargin-bottom: 15px;\r\n\r\n\t\t\t\t.popup-title {\r\n\t\t\t\t\tfont-size: 18px;\r\n\t\t\t\t\tfont-weight: 600;\r\n\t\t\t\t\tcolor: #333;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.form-container {\r\n\t\t\t\tpadding-bottom: 20px;\n\r\n\t\t\t\t.form-group {\r\n\t\t\t\t\tmargin-bottom: 20px;\r\n\r\n\t\t\t\t\t.form-label {\r\n\t\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\t\tfont-size: 14px;\r\n\t\t\t\t\t\tcolor: #666;\r\n\t\t\t\t\t\tmargin-bottom: 8px;\r\n\t\t\t\t\t\tfont-weight: 500;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.form-input {\r\n\t\t\t\t\t\tbackground-color: #f8f8f8;\r\n\t\t\t\t\t\tborder-radius: 8px;\r\n\t\t\t\t\t\tpadding: 12px 15px;\r\n\t\t\t\t\t\tfont-size: 14px;\r\n\t\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\t\tborder: 1px solid #eee;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.form-textarea {\r\n\t\t\t\t\t\tbackground-color: #f8f8f8;\r\n\t\t\t\t\t\tborder-radius: 8px;\r\n\t\t\t\t\t\tpadding: 12px 15px;\r\n\t\t\t\t\t\tfont-size: 14px;\r\n\t\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\t\tmin-height: 100px;\r\n\t\t\t\t\t\tborder: 1px solid #eee;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.image-uploader {\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-wrap: wrap;\r\n\t\t\t\t\t\tmargin: -4px;\r\n\r\n\t\t\t\t\t\t.uploading-container {\r\n\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\t\t\tpadding: 20px 0;\r\n\t\t\t\t\t\t\tcolor: #999;\r\n\r\n\t\t\t\t\t\t\t.uploading-text {\r\n\t\t\t\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\t\t\t\tmargin-top: 10px;\r\n\t\t\t\t\t\t\t\tfont-size: 12px;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.image-preview {\r\n\t\t\t\t\t\t\twidth: calc(33.33% - 8px);\r\n\t\t\t\t\t\t\theight: 100px;\r\n\t\t\t\t\t\t\tmargin: 4px;\r\n\t\t\t\t\t\t\tborder-radius: 8px;\r\n\t\t\t\t\t\t\tposition: relative;\r\n\t\t\t\t\t\t\toverflow: hidden;\r\n\r\n\t\t\t\t\t\t\t.preview-image {\r\n\t\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t.delete-icon {\r\n\t\t\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\t\t\ttop: 5px;\r\n\t\t\t\t\t\t\t\tright: 5px;\r\n\t\t\t\t\t\t\t\tbackground-color: rgba(0, 0, 0, 0.5);\r\n\t\t\t\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\t\t\t\tpadding: 2px;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.upload-btn {\r\n\t\t\t\t\t\t\twidth: calc(33.33% - 8px);\r\n\t\t\t\t\t\t\theight: 100px;\r\n\t\t\t\t\t\t\tmargin: 4px;\r\n\t\t\t\t\t\t\tborder: 1px dashed #ddd;\r\n\t\t\t\t\t\t\tborder-radius: 8px;\r\n\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\t\t\tcolor: #999;\r\n\t\t\t\t\t\t\tfont-size: 12px;\r\n\t\t\t\t\t\t\tbackground-color: #fafafa;\r\n\r\n\t\t\t\t\t\t\ttext {\r\n\t\t\t\t\t\t\t\tmargin-top: 5px;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.submit-btn {\r\n\t\t\t\tbackground: linear-gradient(to right, #1ed1e1, #2a8cff);\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tborder-radius: 30px;\r\n\t\t\t\theight: 44px;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\tfont-size: 16px;\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t\tborder: none;\r\n\t\t\t\tbox-shadow: 0 4px 10px rgba(42, 140, 255, 0.3);\r\n\r\n\t\t\t\t&:active {\r\n\t\t\t\t\topacity: 0.9;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&[disabled] {\r\n\t\t\t\t\topacity: 0.7;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.goods-search-container {\r\n\t\tposition: relative;\r\n\t\tmargin-top: 10px;\r\n\r\n\t\r\n\t}\r\n\t.goods-search-tip {\r\n\t\t\tfont-size: 12px;\r\n\t\t\tcolor: #999;\r\n\t\t\tmargin-top: 8px;\r\n\t\t\tline-height: 1.4;\r\n\t\t}\r\n\t/* 选择器样式 */\r\n\t.picker {\r\n\t\tbackground-color: #f8f8f8;\r\n\t\tborder-radius: 8px;\r\n\t\tpadding: 12px 15px;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #333;\r\n\t\tborder: 1px solid #eee;\r\n\t}\r\n\t\r\n</style>","import MiniProgramPage from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/pages/creator_base/news/news.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onMounted","uni","onShow","chooseImageList","getQiniuToken","uploadImageToQiniu","websiteUrl","MiniProgramPage"],"mappings":"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"}