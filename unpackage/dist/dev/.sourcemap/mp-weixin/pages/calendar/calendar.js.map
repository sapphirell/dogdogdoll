{"version":3,"file":"calendar.js","sources":["pages/calendar/calendar.vue","pages/calendar/calendar.vue?type=page"],"sourcesContent":["<template>\r\n\t<common-page head_color=\"rgb(185 195 253)\">\r\n\t\t<view-logs></view-logs>\r\n\t\t<!-- 顶部Tab切换区域 -->\r\n\t\t<view class=\"tab-container\">\r\n\t\t\t<view class=\"tab-item\" :class=\"{ active: activeTab === 'sale' }\" @click=\"switchTab('sale')\">\r\n\t\t\t\t<text>贩售</text>\r\n\t\t\t\t<view class=\"tab-indicator\" v-if=\"activeTab === 'sale'\"></view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"tab-item\" :class=\"{ active: activeTab === 'makeup' }\" @click=\"switchTab('makeup')\">\r\n\t\t\t\t<text>约妆</text>\r\n\t\t\t\t<view class=\"tab-indicator\" v-if=\"activeTab === 'makeup'\"></view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 搜索区域 -->\r\n<!-- \t\t<view class=\"search-container\" :style=\"miniProgram ? 'width:500rpx; margin:0rpx 20rpx 10rpx 20rpx;' : ''\">\r\n\t\t\t<common-search width=\"560rpx\"></common-search>\r\n\t\t</view> -->\r\n\r\n\t\t<!-- 分类筛选（仅贩售Tab显示） -->\r\n\t\t<view class=\"category-container\" v-if=\"activeTab === 'sale'\">\r\n\t\t\t<scroll-view scroll-x=\"true\" class=\"category-scroll\" :show-scrollbar=\"false\">\r\n\t\t\t\t<view class=\"category-item\" v-for=\"(item, index) in tabList\" :key=\"index\"\r\n\t\t\t\t\t:class=\"{ active: activeType === item }\" @click=\"handleTabClick(item)\">\r\n\t\t\t\t\t{{ item }}\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 尺寸筛选（仅贩售Tab显示） -->\r\n\t\t<view class=\"size-container\" v-if=\"activeTab === 'sale'\">\r\n\t\t\t<scroll-view scroll-x=\"true\" class=\"size-scroll\" :show-scrollbar=\"false\">\r\n\t\t\t\t<view class=\"size-item\" v-for=\"(item, index) in sizeList\" :key=\"index\"\r\n\t\t\t\t\t:class=\"{ active: activeSize === item }\" @click=\"handleSizeClick(item)\">\r\n\t\t\t\t\t{{ item }}\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\n\t\t\n\t\t<view  v-if=\"activeTab === 'makeup'\" style=\"height: 50rpx;    background: rgb(211 245 255);\"></view>\r\n\r\n\t\t<!-- 日期选择区域（复用部分） -->\r\n\t\t<view class=\"date-picker-container\">\r\n\t\t\t<scroll-view class=\"date-scroll\" scroll-x=\"true\" :scroll-left=\"scrollLeft\" :show-scrollbar=\"false\">\r\n\t\t\t\t<view v-for=\"(item, date) in currentCalendar\" :key=\"date\" class=\"date-item\"\r\n\t\t\t\t\t@click=\"selectDate(date, item)\">\r\n\r\n\t\t\t\t\t<!-- 根据当前Tab显示不同的徽章 -->\r\n\t\t\t\t\t<view class=\"date-badge\" v-if=\"activeTab === 'sale' && item.goods_number > 0\">\r\n\t\t\t\t\t\t{{ item.goods_number }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"date-badge\" v-else-if=\"activeTab === 'makeup' && item.plans_number > 0\">\r\n\t\t\t\t\t\t{{ item.plans_number }}\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"weekday\" :class=\"{'weekend': item.weekday==='周日'||item.weekday==='周六'}\">\r\n\t\t\t\t\t\t{{ item.weekday }}\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"day-number\" :class=\"{'selected': chooseDate === date}\">\r\n\t\t\t\t\t\t{{ isToday(date) ? '今天' : item.day_number }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 内容展示区域 -->\r\n\t\t<view class=\"goods-container\">\r\n\t\t\t<!-- 贩售日历内容 -->\r\n\t\t\t<template v-if=\"activeTab === 'sale'\">\r\n\t\t\t\t<view class=\"date-title\">\r\n\t\t\t\t\t<text class=\"highlight\">{{chooseDate}} 日</text>\r\n\t\t\t\t\t<text> 星期{{chooseItem.weekday}}上新</text>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view v-if=\"chooseItem.goods == null\" class=\"empty-tip\">\r\n\t\t\t\t\t<image src=\"/static/empty-box.png\" class=\"empty-icon\"></image>\r\n\t\t\t\t\t<text>这天没有上新呢...</text>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view v-else>\r\n\t\t\t\t\t<view v-for=\"good in chooseItem.goods\" :key=\"good.id\" class=\"goods-card\"\r\n\t\t\t\t\t\t@click=\"jumpGoods(good.id, good.goods_id)\">\r\n\t\t\t\t\t\t<view class=\"goods-image-container\">\r\n\t\t\t\t\t\t\t<image :src=\"good.goods_image\" mode=\"aspectFill\" class=\"goods-image\"></image>\r\n\t\t\t\t\t\t\t<view class=\"goods-tags\">\r\n\t\t\t\t\t\t\t\t<text class=\"tag sale-type\">{{good.sale_type}}</text>\r\n\t\t\t\t\t\t\t\t<text class=\"tag first-day\" v-if=\"good.is_first_sale_day == 1\">首日</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<view class=\"goods-info\">\r\n\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t<text class=\"brand-name\">{{good.brand_name}}</text>\r\n\t\t\t\t\t\t\t\t<text class=\"goods-name\">{{good.goods_name}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t<view class=\"goods-details\">\r\n\t\t\t\t\t\t\t\t<text>{{good.size}} · {{good.size_detail}} · {{good.type}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t<!-- 时间信息区域 -->\r\n\t\t\t\t\t\t\t<view class=\"time-info\">\r\n\t\t\t\t\t\t\t\t<text>开定 {{ formatTimestamp(good.sub_time) }}</text>\r\n\t\t\t\t\t\t\t\t<text v-if=\"good.sub_time_end\">截止 {{ formatTimestamp(good.sub_time_end)}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t<!-- 价格信息区域 -->\r\n\t\t\t\t\t\t\t<view class=\"price-info\">\r\n\t\t\t\t\t\t\t\t<view v-if=\"good.sale_type != '限量现货' && good.sale_type != '不限量现货'\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"price-group\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"price-label\">定金</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"deposit-price\">{{good.sub_amount}}</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"currency\">({{good.currency}})</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"price-group\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"price-label\">尾款</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"final-price\">{{good.fin_amount}}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<view v-else>\r\n\t\t\t\t\t\t\t\t\t<view class=\"price-group\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"price-label\">全款</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"full-price\">{{good.sub_amount + good.fin_amount}}</text>\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"currency\">({{good.currency}})</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\r\n\t\t\t\n\t\t\t <!-- 约妆日历内容 -->\n\t\t\t  <template v-else>\n\t\t\t    <view class=\"date-title\">\n\t\t\t      <text class=\"highlight\">{{chooseDate}} 日</text>\n\t\t\t      <text> 星期{{chooseItem.weekday}}约妆</text>\n\t\t\t    </view>\n\t\t\t    <view v-if=\"chooseItem.plans == null || chooseItem.plans.length === 0\" class=\"empty-tip\">\n\t\t\t      <image src=\"/static/empty-box.png\" class=\"empty-icon\"></image>\n\t\t\t      <text>这天没有开妆计划呢...</text>\n\t\t\t    </view>\n\t\t\t    <view v-else>\n\t\t\t      <view v-for=\"plan in chooseItem.plans\" :key=\"plan.id\" class=\"plan-card\" @tap=\"navigateToArtistDetail(plan.artist_info)\">\n\t\t\t\n\t\t\t        <!-- 艺术家信息区域 -->\n\t\t\t        <view class=\"artist-header\">\n\t\t\t          <view class=\"artist-info\">\n\t\t\t            <image v-if=\"plan.artist_info && plan.artist_info.LogoImage\" \n\t\t\t                   :src=\"plan.artist_info.LogoImage\" \n\t\t\t                   mode=\"aspectFill\" \n\t\t\t                   class=\"artist-avatar\"></image>\n\t\t\t            <view class=\"artist-details\">\n\t\t\t              <text class=\"artist-name\">{{plan.artist_name}}</text>\n\t\t\t              <!-- 妆费区间显示在这里 -->\n\t\t\t              <view class=\"makeup-price-range\">\n\t\t\t                <text>妆费: {{ getPriceRange(plan) }}</text>\n\t\t\t              </view>\n\t\t\t            </view>\n\t\t\t          </view>\n\t\t\t        </view>\n\t\t\t        \n\t\t\t        <!-- 艺术家描述 -->\n\t\t\t        <view class=\"artist-description\" v-if=\"plan.artist_info && plan.artist_info.Description\">\n\t\t\t          {{plan.artist_info.Description}}\n\t\t\t        </view>\n\t\t\t        \n\t\t\t        <!-- 例图展示区域 -->\n\t\t\t        <view class=\"highlight-images\" v-if=\"plan.artist_info && plan.artist_info.artist_highlight_images\">\n\t\t\t          <scroll-view scroll-x=\"true\" class=\"image-scroll\">\n\t\t\t            <image \n\t\t\t              v-for=\"(img, index) in getHighlightImages(plan.artist_info.artist_highlight_images)\" \n\t\t\t              :key=\"index\" \n\t\t\t              :src=\"img\" \n\t\t\t              mode=\"aspectFill\" \n\t\t\t              class=\"highlight-image\"\n\t\t\t              @click=\"previewImage(img)\">\n\t\t\t            </image>\n\t\t\t          </scroll-view>\n\t\t\t        </view>\n\t\t\t        \n\t\t\t        <!-- 折叠区域 -->\n\t\t\t        <view class=\"foldable-section\" :class=\"{ expanded: expandStates[plan.id] }\">\n\t\t\t          <!-- 计划信息 -->\n\t\t\t          <view class=\"plan-info\">\n\t\t\t            <view class=\"info-row\">\n\t\t\t              <text class=\"label\">开放时间:</text>\n\t\t\t              <text class=\"value\">{{formatTimestamp(plan.open_time)}} - {{formatTimestamp(plan.close_time)}}</text>\n\t\t\t            </view>\n\t\t\t            <view class=\"info-row\">\n\t\t\t              <text class=\"label\">接单类型:</text>\n\t\t\t              <text class=\"value\">{{getOrderTypeText(plan.order_type)}}</text>\n\t\t\t            </view>\n\t\t\t            <view class=\"info-row\">\n\t\t\t              <text class=\"label\">最大人数:</text>\n\t\t\t              <text class=\"value\">{{plan.max_participants === 0 ? '不限量' : plan.max_participants}}</text>\n\t\t\t            </view>\n\t\t\t            <view class=\"info-row\">\n\t\t\t              <text class=\"label\">每人限投:</text>\n\t\t\t              <text class=\"value\">{{plan.max_submissions_per_user}}次</text>\n\t\t\t            </view>\n\t\t\t          </view>\n\t\t\t          \n\t\t\t          <!-- 档位选择 -->\n\t\t\t          <view class=\"plan-config\">\n\t\t\t            <view class=\"config-section\">\n\t\t\t              <text class=\"section-title\">档位选择</text>\n\t\t\t              <view v-for=\"tier in getTiers(plan)\" :key=\"tier.title\" class=\"tier-item\">\n\t\t\t                <text class=\"tier-title\">{{tier.title}}</text>\n\t\t\t                <text class=\"tier-price\">{{tier.price}}元</text>\n\t\t\t                <text class=\"tier-desc\">{{tier.description}}</text>\n\t\t\t              </view>\n\t\t\t            </view>\n\t\t\t            \n\t\t\t            <!-- 加购服务 -->\n\t\t\t            <view class=\"config-section\" v-if=\"getAddons(plan).length > 0\">\n\t\t\t              <text class=\"section-title\">加购服务</text>\n\t\t\t              <view v-for=\"addon in getAddons(plan)\" :key=\"addon.title\" class=\"addon-item\">\n\t\t\t                <text class=\"addon-title\">{{addon.title}}</text>\n\t\t\t                <text class=\"addon-price\">{{addon.price}}元</text>\n\t\t\t                <text class=\"addon-desc\">{{addon.description}}</text>\n\t\t\t              </view>\n\t\t\t            </view>\n\t\t\t          </view>\n\t\t\t        </view>\n\t\t\t        \n\t\t\t        <!-- 折叠按钮 -->\n\t\t\t        <view class=\"fold-toggle\" @click.stop=\"toggleFold(plan.id)\">\n\t\t\t          <text>{{ expandStates[plan.id] ? '收起' : '展开' }}</text>\n\t\t\t          <uni-icons :type=\"expandStates[plan.id] ? 'arrowup' : 'arrowdown'\" size=\"16\" color=\"#81D8cf\"></uni-icons>\n\t\t\t        </view>\n\t\t\t      </view>\n\t\t\t    </view>\n\t\t\t  </template>\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t</view>\r\n\t\t<loading-toast :show=\"loading\"></loading-toast>\r\n\t</common-page>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\tcomputed,\n\t\twatch,\r\n\t} from 'vue';\r\n\r\n\timport {\r\n\t\tonLoad,\r\n\t\tonPullDownRefresh,\r\n\r\n\t} from \"@dcloudio/uni-app\"\r\n\r\n\timport {\r\n\t\twebsiteUrl,\r\n\t} from \"../../common/config.js\";\r\n\r\n\t// Tab相关\r\n\tconst activeTab = ref('sale') // 'sale' 或 'makeup'\r\n\r\n\t// 贩售日历相关\r\n\tconst tabList = ref([\r\n\t\t'全部', '整体', '单头', '单体', '娃衣',\r\n\t\t'眼珠', '娃鞋', '手型', '脚型', '袜子', '配饰'\r\n\t])\r\n\tconst sizeList = ref([\r\n\t\t\"全部尺寸\",\r\n\t\t\"四分\",\r\n\t\t\"六分\",\r\n\t\t\"三分\",\r\n\t\t\"其它大尺寸\",\r\n\t\t\"八分\",\r\n\t\t\"十二分\",\r\n\t\t\"一分\",\r\n\t\t\"二分\",\r\n\t\t\"五分\",\r\n\t\t\"棉花娃\",\r\n\t\t\"眼珠\",\r\n\t])\n\t\n\t// 获取艺术家状态文本\n\tconst getArtistStatusText = (status) => {\n\t  const statusMap = {\n\t    1: \"长期接单\",\n\t    2: \"限时手速投递\",\n\t    3: \"限时抽选投递\",\n\t    4: \"限时黑箱卡投递\",\n\t    9: \"关闭投递\"\n\t  };\n\t  return statusMap[status] || \"未知状态\";\n\t};\n\t// 获取接单类型文本\n\tconst getOrderTypeText = (type) => {\n\t  const typeMap = {\n\t    1: \"限时手速\",\n\t    2: \"抽选投递\",\n\t    3: \"黑箱卡投递\"\n\t  };\n\t  return typeMap[type] || \"未知类型\";\n\t};\n\t\r\n\tlet activeType = ref('全部')\r\n\tlet activeSize = ref('全部尺寸')\r\n\tconst saleCalendar = ref({})\r\n\r\n\t// 约妆日历相关\r\n\tconst makeupCalendar = ref({})\r\n\tconst brandNames = ref({})\n\t\n\t // 新增的折叠状态管理\n\t  const expandStates = ref({});\n\t  \n\t  // 切换折叠状态\n\t  const toggleFold = (planId) => {\n\t    expandStates.value[planId] = !expandStates.value[planId];\n\t  };\n\t  \n\t  // 处理例图字符串\n\t  const getHighlightImages = (imagesString) => {\n\t    if (!imagesString) return [];\n\t    return imagesString.split(',').filter(img => img.trim() !== '');\n\t  };\n\t  \n\t  // 图片预览\n\t  const previewImage = (url) => {\n\t    uni.previewImage({\n\t      urls: [url],\n\t      current: url\n\t    });\n\t  };\r\n\r\n\t// 共用数据\r\n\tconst today = new Date();\r\n\tconst year = today.getFullYear();\r\n\tconst month = String(today.getMonth() + 1).padStart(2, '0');\r\n\tconst day = String(today.getDate()).padStart(2, '0');\r\n\tconst todayFormat = ref(`${year}-${month}-${day}`);\r\n\r\n\tconst scrollView = ref(null);\r\n\tconst systemInfo = uni.getSystemInfoSync();\r\n\tconst screenWidth = systemInfo.screenWidth;\r\n\tconst itemWidth = screenWidth / 7\r\n\tlet scrollLeft = ref(0)\r\n\r\n\tconst miniProgram = process.env.VUE_APP_PLATFORM === 'mp-weixin'\r\n\r\n\tlet chooseDate = ref(todayFormat.value)\r\n\tlet chooseItem = ref({})\r\n\tlet loading = ref(true)\r\n\r\n\t// 当前显示的日历数据（考虑筛选条件）\r\n\tconst currentCalendar = computed(() => {\r\n\t\tif (activeTab.value === 'sale') {\r\n\t\t\treturn filteredSaleCalendar.value\r\n\t\t}\r\n\t\treturn makeupCalendar.value\r\n\t})\n\t\n\t  // 新增：获取妆费价格区间\n\t  const getPriceRange = (plan) => {\n\t    const tiers = getTiers(plan);\n\t    if (!tiers || tiers.length === 0) {\n\t      return '待定';\n\t    }\n\t    \n\t    const prices = tiers.map(tier => parseFloat(tier.price)).filter(price => !isNaN(price));\n\t    if (prices.length === 0) {\n\t      return '待定';\n\t    }\n\t    \n\t    const min = Math.min(...prices);\n\t    const max = Math.max(...prices);\n\t    \n\t    if (min === max) {\n\t      return `${min}元`;\n\t    }\n\t    return `${min}-${max}元`;\n\t  };\r\n\r\n\t// Tab切换\r\n\tconst switchTab = (tab) => {\r\n\t\tif (activeTab.value === tab) return\r\n\t\tactiveTab.value = tab\r\n\r\n\t\t// 重置为今天\r\n\t\tchooseDate.value = todayFormat.value\r\n\r\n\t\t// 如果切换到约妆且数据未加载，则加载数据\r\n\t\tif (tab === 'makeup' && Object.keys(makeupCalendar.value).length === 0) {\r\n\t\t\tfetchMakeupCalendar()\r\n\t\t} else {\r\n\t\t\t// 更新选中项\r\n\t\t\tupdateSelectedItem()\r\n\t\t}\r\n\t}\r\n\r\n\t// 使用计算属性实现组合筛选\r\n\tconst filteredSaleCalendar = computed(() => {\r\n\t\tconst filtered = {}\r\n\t\tObject.entries(saleCalendar.value).forEach(([date, info]) => {\r\n\t\t\tconst copy = {\r\n\t\t\t\t...info\r\n\t\t\t}\r\n\r\n\t\t\tif (copy.goods) {\r\n\t\t\t\tcopy.goods = copy.goods.filter(g => {\r\n\t\t\t\t\t// 组合筛选条件\r\n\t\t\t\t\tconst typeMatch = activeType.value === '全部' || g.type === activeType.value;\r\n\t\t\t\t\tconst sizeMatch = activeSize.value === '全部尺寸' || g.size === activeSize.value;\r\n\t\t\t\t\treturn typeMatch && sizeMatch;\r\n\t\t\t\t});\r\n\t\t\t\t// 更新商品数量\r\n\t\t\t\tcopy.goods_number = copy.goods.length;\r\n\r\n\t\t\t\t// 如果没有商品，设置为null\r\n\t\t\t\tif (copy.goods.length === 0) {\r\n\t\t\t\t\tcopy.goods = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfiltered[date] = copy\r\n\t\t})\r\n\t\treturn filtered\r\n\t})\r\n\r\n\t// 贩售日历数据获取\r\n\tconst fetchSaleCalendar = () => {\r\n\t\tloading.value = true\r\n\t\tuni.request({\r\n\t\t\turl: websiteUrl.value + `/goods-news`,\r\n\t\t\tmethod: 'GET',\r\n\t\t\ttimeout: 5000,\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tsaleCalendar.value = res.data.data\r\n\t\t\t\tchooseItem.value = saleCalendar.value[todayFormat.value] || {\r\n\t\t\t\t\tgoods: null\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: (err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '网络请求失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcomplete: () => {\r\n\t\t\t\tscrollLeft.value = itemWidth * 7 - 5\r\n\t\t\t\tloading.value = false\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// 约妆日历数据获取\r\n\tconst fetchMakeupCalendar = () => {\r\n\t\tloading.value = true\r\n\t\tuni.request({\r\n\t\t\turl: websiteUrl.value + `/bjd-makeup-news`,\r\n\t\t\tmethod: 'GET',\r\n\t\t\ttimeout: 5000,\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tmakeupCalendar.value = res.data.data\r\n\t\t\t\tchooseItem.value = makeupCalendar.value[todayFormat.value] || {\r\n\t\t\t\t\tplans: null\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: (err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '网络请求失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcomplete: () => {\r\n\t\t\t\tloading.value = false\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// 品牌名称获取\r\n\tconst fetchBrandNames = () => {\r\n\t\t// 这里应该有获取品牌名称的API调用\r\n\t\t// 暂时使用模拟数据\r\n\t\tbrandNames.value = {\r\n\t\t\t938: \"小圆点儿工作室\"\r\n\t\t}\r\n\t}\r\n\r\n\tfunction isToday(date) {\r\n\t\treturn date === todayFormat.value;\r\n\t}\r\n\r\n\t// 贩售日历筛选\r\n\tfunction filterSaleCalendar() {\r\n\t\tconst filtered = {}\r\n\t\tObject.entries(saleCalendar.value).forEach(([date, info]) => {\r\n\t\t\tconst copy = {\r\n\t\t\t\t...info\r\n\t\t\t}\r\n\t\t\tif (copy.goods) {\r\n\t\t\t\tcopy.goods = copy.goods.filter(g => {\r\n\t\t\t\t\t// 类型筛选\r\n\t\t\t\t\tconst typeMatch = activeType.value === '全部' || g.type === activeType.value;\r\n\t\t\t\t\t// 尺寸筛选\r\n\t\t\t\t\tconst sizeMatch = activeSize.value === '全部尺寸' || g.size === activeSize.value;\r\n\t\t\t\t\treturn typeMatch && sizeMatch;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (copy.goods.length === 0) copy.goods = null\r\n\t\t\t\tcopy.goods_number = copy.goods ? copy.goods.length : 0\r\n\t\t\t}\r\n\t\t\tfiltered[date] = copy\r\n\t\t})\r\n\t\treturn filtered\r\n\t}\r\n\r\n\t// 尺寸筛选处理 - 只需更新筛选状态\r\n\tconst handleSizeClick = (size) => {\r\n\t\tactiveSize.value = size\r\n\t\t// 不需要额外操作，计算属性会自动更新\r\n\t}\r\n\r\n\r\n\t// 类型筛选处理 - 只需更新筛选状态\r\n\tconst handleTabClick = (type) => {\r\n\t\tactiveType.value = type\r\n\t\t// 不需要额外操作，计算属性会自动更新\r\n\t}\r\n\r\n\t// 更新选中的商品项\r\n\tfunction updateSelectedItem() {\r\n\t\tconst calendar = currentCalendar.value\r\n\r\n\t\t// 优先检查当前选中的日期是否还有内容\r\n\t\tif (calendar[chooseDate.value]) {\r\n\t\t\tchooseItem.value = calendar[chooseDate.value]\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// 否则查找第一个有内容的日期\r\n\t\tconst firstValidEntry = Object.entries(calendar).find(([_, v]) =>\r\n\t\t\t(activeTab.value === 'sale' && v.goods) ||\r\n\t\t\t(activeTab.value === 'makeup' && v.plans)\r\n\t\t)\r\n\r\n\t\tif (firstValidEntry) {\r\n\t\t\tchooseDate.value = firstValidEntry[0]\r\n\t\t\tchooseItem.value = firstValidEntry[1]\r\n\t\t} else {\r\n\t\t\tchooseItem.value = activeTab.value === 'sale' ? {\r\n\t\t\t\tgoods: null\r\n\t\t\t} : {\r\n\t\t\t\tplans: null\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction jumpGoods(id, goodsId) {\r\n\t\t// 记录一次点击\r\n\t\tuni.request({\r\n\t\t\turl: websiteUrl.value + '/sale-record-click?id=' + id,\r\n\t\t\tmethod: 'POST',\r\n\t\t\theader: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tsuccess: () => console.log('点击记录成功'),\r\n\t\t\tfail: (err) => console.error('点击记录失败:', err)\r\n\t\t});\r\n\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '/pages/goods/goods?goods_id=' + goodsId\r\n\t\t})\r\n\t}\r\n\t// 导航到妆师详情页\n\tconst navigateToArtistDetail = (artist) => {\n\t\tuni.navigateTo({\n\t\t\turl: \"/pages/artist_info/artist_info?brand_id=\" + artist.brand_id\n\t\t})\n\t};\n\r\n\r\n\tfunction selectDate(date, item) {\r\n\t\tchooseDate.value = date\r\n\t\tchooseItem.value = item\r\n\t}\r\n\r\n\tfunction formatTimestamp(timestamp) {\r\n\t\tconst date = new Date(timestamp * 1000);\r\n\t\tconst month = (date.getMonth() + 1).toString().padStart(2, '0');\r\n\t\tconst day = date.getDate().toString().padStart(2, '0');\r\n\t\tconst hours = date.getHours().toString().padStart(2, '0');\r\n\t\tconst minutes = date.getMinutes().toString().padStart(2, '0');\r\n\t\treturn `${month}/${day} ${hours}:${minutes}`;\r\n\t}\r\n\r\n\t// 约妆相关方法\r\n\tconst getTiers = (plan) => {\r\n\t\ttry {\r\n\t\t\tconst config = JSON.parse(plan.order_config)\r\n\t\t\treturn config.tiers || []\r\n\t\t} catch {\r\n\t\t\treturn []\r\n\t\t}\r\n\t}\r\n\r\n\tconst getAddons = (plan) => {\r\n\t\ttry {\r\n\t\t\tconst config = JSON.parse(plan.order_config)\r\n\t\t\treturn config.addons || []\r\n\t\t} catch {\r\n\t\t\treturn []\r\n\t\t}\r\n\t}\r\n\r\n\tconst getBrandName = (brandId) => {\r\n\t\treturn brandNames.value[brandId] || \"未知品牌\"\r\n\t}\r\n\r\n\tconst viewPlanDetail = (planId) => {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: `/pages/makeup/detail?id=${planId}`\r\n\t\t})\r\n\t}\r\n\r\n\tconst bookPlan = (planId) => {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: `/pages/makeup/book?id=${planId}`\r\n\t\t})\r\n\t}\r\n\r\n\t// 在计算属性变化时更新选中项\r\n\twatch([filteredSaleCalendar, makeupCalendar], () => {\r\n\t\tupdateSelectedItem()\r\n\t})\r\n\r\n\tonLoad(() => {\r\n\t\tfetchSaleCalendar()\r\n\t\tfetchBrandNames()\r\n\t})\r\n\r\n\tonPullDownRefresh(async () => {\r\n\t\ttry {\r\n\t\t\tif (activeTab.value === 'sale') {\r\n\t\t\t\tfetchSaleCalendar()\r\n\t\t\t} else {\r\n\t\t\t\tfetchMakeupCalendar()\r\n\t\t\t}\r\n\t\t\tuni.stopPullDownRefresh();\r\n\t\t} catch (error) {\r\n\t\t\tuni.stopPullDownRefresh();\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '刷新失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\n/* ======================== 顶部Tab样式 ======================== */\n.tab-container {\n  display: flex;\n  padding: 20rpx 30rpx 0;\n  background: linear-gradient(180deg, rgb(185 195 253) 0%, rgb(211 245 255) 100%);\n  \n  .tab-item {\n    flex: 1;\n    text-align: center;\n    padding: 20rpx 0;\n    font-size: 32rpx;\n    color: #666;\n    position: relative;\n    \n    &.active {\n      color: #7dc3d3;\n      font-weight: bold;\n    }\n    \n    .tab-indicator {\n      position: absolute;\n      bottom: 0;\n      left: 50%;\n      transform: translateX(-50%);\n      width: 80rpx;\n      height: 6rpx;\n      background: #7dc3d3;\n      border-radius: 3rpx;\n    }\n  }\n}\n\n/* ======================== 顶部区域 ======================== */\n.header-container {\n  background: linear-gradient(180deg, rgb(185 195 253) 0%, rgb(211 245 255) 100%);\n  padding-bottom: 20rpx;\n  border-radius: 0 0 30rpx 30rpx;\n  box-shadow: 0 10rpx 20rpx rgba(185, 195, 253, 0.2);\n}\n\n.search-container {\n  padding: 20rpx 30rpx;\n}\n\n.category-container {\n  padding: 20rpx 20rpx 0rpx;\n  background: rgb(211 245 255);\n}\n\n.category-scroll {\n  white-space: nowrap;\n  height: 100rpx;\n}\n\n.category-item {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 28rpx;\n  margin: 0 15rpx;\n  padding: 10rpx 25rpx;\n  border-radius: 50rpx;\n  background: rgba(255, 255, 255, 0.5);\n  transition: all 0.3s ease;\n  box-shadow: 0 4rpx 10rpx rgba(0, 0, 0, 0.05);\n  color: #666;\n  font-weight: 500;\n  position: relative;\n  top: 10rpx;\n\n  &.active {\n    background: #7dc3d3;\n    color: white;\n    font-weight: bold;\n    box-shadow: 0 4rpx 10rpx rgba(125, 195, 211, 0.4);\n    transform: translateY(-4rpx);\n  }\n}\n\n/* ======================== 日期选择区域 ======================== */\n.date-picker-container {\n  padding: 20rpx 20rpx;\n  background: white;\n  margin: -20rpx 20rpx 0;\n  border-radius: 30rpx;\n  box-shadow: 0 5rpx 15rpx rgba(0, 0, 0, 0.05);\n  position: relative;\n  z-index: 10;\n  // border: 1px solid #d8c6ce;\n}\n\n.date-scroll {\n  white-space: nowrap;\n  width: 100%;\n  display: flex;\n  padding: 10rpx 0;\n}\n\n.date-item {\n  display: inline-flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: calc(100vw / 7);\n  padding: 50rpx 0 10rpx 0;\n  position: relative;\n}\n\n.date-badge {\n  position: absolute;\n  top: 0rpx;\n  right: 35rpx;\n  background: #ff9ab2;\n  color: white;\n  border-radius: 50%;\n  width: 36rpx;\n  height: 36rpx;\n  line-height: 36rpx;\n  font-size: 22rpx;\n  text-align: center;\n  font-weight: bold;\n  z-index: 2;\n}\n\n.weekday {\n  font-size: 26rpx;\n  color: #666;\n  margin-bottom: 10rpx;\n\n  &.weekend {\n    color: #ff6b6b;\n    font-weight: bold;\n  }\n}\n\n.day-number {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 70rpx;\n  height: 70rpx;\n  border-radius: 50%;\n  font-size: 24rpx;\n  color: #333;\n  background: #f5f9ff;\n  transition: all 0.3s ease;\n  font-weight: 500;\n\n  &.selected {\n    background: linear-gradient(135deg, #7dc3d3, #89d1e1);\n    color: white;\n    font-weight: bold;\n    transform: scale(1.1);\n    box-shadow: 0 5rpx 15rpx rgba(125, 195, 211, 0.3);\n  }\n}\n\n/* ======================== 尺寸筛选区域样式 ======================== */\n.size-container {\n  padding: 0 20rpx 10rpx;\n    background: rgb(211 245 255);\n}\n\n.size-scroll {\n  white-space: nowrap;\n  height: 80rpx;\n}\n\n.size-item {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 26rpx;\n  margin: 0 12rpx;\n  padding: 8rpx 20rpx;\n  border-radius: 50rpx;\n  background: rgba(255, 255, 255, 0.5);\n  transition: all 0.3s ease;\n  box-shadow: 0 4rpx 8rpx rgba(0, 0, 0, 0.05);\n  color: #666;\n  font-weight: 500;\n\n  &.active {\n    background: #ff9ab2;\n    color: white;\n    font-weight: bold;\n    box-shadow: 0 4rpx 10rpx rgba(255, 154, 178, 0.4);\n  }\n}\n\n/* ======================== 内容展示区域 ======================== */\n.goods-container {\n  padding: 40rpx 30rpx;\n  background: #f8faff;\n  border-radius: 40rpx 40rpx 0 0;\n  min-height: 70vh;\n}\n\n.date-title {\n  font-size: 32rpx;\n  color: #555;\n  margin-bottom: 30rpx;\n  padding-left: 15rpx;\n  border-left: 8rpx solid #7dc3d3;\n\n  .highlight {\n    color: #7dc3d3;\n    font-weight: bold;\n    margin-right: 10rpx;\n  }\n}\n\n/* ======================== 空状态样式 ======================== */\n.empty-tip {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 80rpx 0;\n  color: #999;\n  font-size: 32rpx;\n\n  .empty-icon {\n    width: 180rpx;\n    height: 180rpx;\n    margin-bottom: 30rpx;\n    opacity: 0.6;\n  }\n}\n\n/* ======================== 贩售商品卡片样式 ======================== */\n.goods-card {\n  display: flex;\n  background: white;\n  border-radius: 24rpx;\n  overflow: hidden;\n  margin-bottom: 30rpx;\n  box-shadow: 0 8rpx 25rpx rgba(185, 195, 253, 0.15);\n  transition: transform 0.3s ease;\n\n  &:active {\n    transform: scale(0.98);\n  }\n}\n\n.goods-image-container {\n  position: relative;\n  width: 260rpx;\n  flex-shrink: 0;\n}\n\n.goods-image {\n  width: 100%;\n  height: 10.625rem;\n  display: block;\n  overflow: hidden;\n  border-radius: 10px;\n  margin: 20rpx 10rpx;\n}\n\n.goods-tags {\n  position: absolute;\n  top: 35rpx;\n  left: 10rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n}\n\n.tag {\n  font-size: 24rpx;\n  padding: 6rpx 18rpx;\n  border-radius: 0 10rpx 10rpx 0;\n  margin-bottom: 10rpx;\n  color: white;\n  font-weight: 500;\n}\n\n.sale-type {\n  background: linear-gradient(90deg, rgba(52, 68, 160, 0.8), rgba(52, 68, 160, 0.6));\n}\n\n.first-day {\n  background: linear-gradient(90deg, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.5));\n}\n\n.goods-info {\n  flex: 1;\n  padding: 25rpx;\n  display: flex;\n  flex-direction: column;\n}\n\n.brand-name {\n  font-size: 22rpx;\n  color: #fff;\n  font-weight: bold;\n  margin-bottom: 8rpx;\n  display: inline-block;\n  background: #7dc3d3;\n  padding: 5rpx 10rpx;\n  border-radius: 10rpx;\n  margin-right: 15rpx;\n}\n\n.goods-name {\n  font-size: 26rpx;\n  color: #38374c;\n  font-weight: bold;\n  margin-bottom: 8rpx;\n  display: inline-block;\n}\n\n.goods-details {\n  text {\n    font-size: 24rpx;\n    color: #888;\n    margin-bottom: 20rpx;\n  }\n}\n\n.time-info {\n  background: #f8f9ff;\n  border-radius: 12rpx;\n  padding: 15rpx;\n  color: #666;\n  margin-bottom: 20rpx;\n\n  text {\n    flex: 1;\n    min-width: 45%;\n    display: flex;\n    align-items: center;\n    display: block;\n    font-size: 22rpx;\n    margin-bottom: 10rpx;\n\n    &::before {\n      content: '';\n      display: inline-block;\n      width: 10rpx;\n      height: 10rpx;\n      background: #7dc3d3;\n      border-radius: 50%;\n      margin-right: 12rpx;\n    }\n  }\n}\n\n/* ======================== 价格信息样式 ======================== */\n.price-info {\n  margin-top: auto;\n  display: flex;\n  gap: 25rpx;\n}\n\n.price-group {\n  display: flex;\n  align-items: baseline;\n  flex-wrap: wrap;\n}\n\n.price-label {\n  font-size: 26rpx;\n  color: #ff9ab2;\n  margin-right: 8rpx;\n  white-space: nowrap;\n}\n\n.deposit-price {\n  font-size: 36rpx;\n  color: #ff6b9c;\n  font-weight: bold;\n  margin-right: 6rpx;\n}\n\n.final-price {\n  font-size: 32rpx;\n  color: #ff6b9c;\n  font-weight: bold;\n}\n\n.full-price {\n  font-size: 36rpx;\n  color: #ff6b9c;\n  font-weight: bold;\n  margin: 0 5rpx;\n}\n\n.currency {\n  font-size: 24rpx;\n  color: #999;\n  transform: translateY(-2rpx);\n}\n\n/* ======================== 约妆计划卡片样式 ======================== */\n.plan-card {\n  background: white;\n  border-radius: 24rpx;\n  padding: 30rpx;\n  margin-bottom: 30rpx;\n  box-shadow: 0 8rpx 25rpx rgba(125, 195, 211, 0.15); /* 蓝色阴影 */\n  position: relative;\n}\n/* 艺术家头部区域 */\n.artist-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20rpx;\n}\n .artist-info {\n    display: flex;\n    align-items: center;\n    \n    .artist-avatar {\n      width: 100rpx;\n      height: 100rpx;\n      border-radius: 50%;\n      margin-right: 20rpx;\n      border: 2rpx solid #e6f7ff;\n    }\n    \n    .artist-details {\n      display: flex;\n      flex-direction: column;\n      \n      .artist-name {\n        font-size: 28rpx;\n        font-weight: bold;\n        color: #333;\n        margin-bottom: 5rpx;\n\t\tpadding-left: 8rpx;\n      }\n      \n      /* 妆费区间样式 */\n      .makeup-price-range {\n    \n        font-weight: bold;\n        background: linear-gradient(135deg, #97e7f7, #d5acd6);\n        padding: 4rpx 12rpx;\n        border-radius: 20rpx;\n        align-self: flex-start;\n\t\ttext {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #fff;\n\t\t}\n      }\n    }\n  }\n.artist-status {\n  background: linear-gradient(90deg, #7dc3d3, #5da8c0); /* 蓝色渐变 */\n  color: white;\n  font-size: 24rpx;\n  padding: 6rpx 15rpx;\n  border-radius: 20rpx;\n}\n/* 艺术家描述 */\n.artist-description {\n  font-size: 26rpx;\n  color: #666;\n  line-height: 1.6;\n  margin-bottom: 20rpx;\n  padding: 15rpx;\n  background: #f8f9ff; /* 浅蓝色背景 */\n  border-radius: 12rpx;\n}\n/* 基础价格 */\n.base-price {\n    font-size: 0.8125rem;\n    color: #ffffff;\n    font-weight: bold;\n    margin-bottom: 0.625rem;\n    text-align: center;\n    padding: 0.3125rem;\n    background: #95a5ac;\n    border-radius: 0.3125rem;\n}\n/* ======================== 计划信息区域 ======================== */\n.plan-info {\n  background: #f0f9ff;\n  border-radius: 12rpx;\n  padding: 20rpx;\n  margin-bottom: 20rpx;\n  \n  .info-row {\n    display: flex;\n    margin-bottom: 15rpx;\n    font-size: 26rpx;\n    \n    &:last-child {\n      margin-bottom: 0;\n    }\n    \n    .label {\n      color: #5da8c0;\n      font-weight: bold;\n      width: 140rpx;\n    }\n    \n    .value {\n      color: #333;\n      flex: 1;\n    }\n  }\n}\n/* 配置部分 */\n.config-section {\n  margin-bottom: 25rpx;\n  \n  .section-title {\n    display: block;\n    font-size: 26rpx;\n    font-weight: bold;\n    color: #5da8c0; /* 深蓝色 */\n    margin-bottom: 15rpx;\n    padding-bottom: 8rpx;\n    border-bottom: 1rpx solid #e6f7ff; /* 浅蓝色 */\n  }\n  \n  .tier-item, .addon-item {\n    display: flex;\n    align-items: center;\n    padding: 12rpx 0;\n    border-bottom: 1rpx dashed #e6f7ff; /* 浅蓝色虚线 */\n    \n    &:last-child {\n      border-bottom: none;\n    }\n    \n    .tier-title, .addon-title {\n      font-size: 26rpx;\n      color: #333;\n      width: 140rpx;\n      font-weight: 500;\n    }\n    \n    .tier-price, .addon-price {\n      font-size: 26rpx;\n      color: #5da8c0; /* 深蓝色 */\n      font-weight: bold;\n      width: 120rpx;\n      text-align: right;\n    }\n    \n    .tier-desc, .addon-desc {\n      font-size: 24rpx;\n      color: #888;\n      flex: 1;\n      margin-left: 20rpx;\n    }\n  }\n}\n/* 操作按钮 - 优化版 */\n.plan-actions {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20rpx;\n  padding-top: 20rpx;\n  border-top: 1rpx solid #e6f7ff; /* 浅蓝色分割线 */\n  \n  button {\n    height: 70rpx;\n    line-height: 70rpx;\n    font-size: 26rpx;\n    border-radius: 35rpx;\n    background: none;\n    border: none;\n    position: relative;\n    overflow: hidden;\n    transition: all 0.2s ease;\n    background: white;\n    \n    /* 移除默认按钮样式 */\n    &::after {\n      border: none;\n    }\n    \n    &.btn-view-detail {\n      color: #5da8c0; /* 深蓝色文字 */\n      box-shadow: 0 2rpx 8rpx rgba(93, 168, 192, 0.2);\n      \n      /* 点击效果 */\n      &:active {\n        background: #f0f9ff;\n        box-shadow: 0 1rpx 4rpx rgba(93, 168, 192, 0.1);\n      }\n    }\n    \n    &.btn-book {\n      color: #5da8c0; /* 深蓝色文字 */\n      box-shadow: 0 2rpx 8rpx rgba(93, 168, 192, 0.2);\n      \n      /* 点击效果 */\n      &:active {\n        background: #f0f9ff;\n        box-shadow: 0 1rpx 4rpx rgba(93, 168, 192, 0.1);\n      }\n    }\n    \n    /* 按钮悬浮效果 */\n    &:not([disabled]):hover {\n      transform: translateY(-2rpx);\n      box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\n    }\n  }\n}\n/* 响应式调整 */\n@media (max-width: 480px) {\n  .artist-header {\n    flex-direction: column;\n    align-items: flex-start;\n    \n    .artist-status {\n      margin-top: 10rpx;\n      align-self: flex-start;\n    }\n  }\n  \n  .plan-actions {\n    flex-direction: column;\n    \n    button {\n      width: 100%;\n      margin-bottom: 15rpx;\n      \n      &.btn-view-detail {\n        margin-right: 0;\n        margin-bottom: 15rpx;\n      }\n    }\n  }\n}\n\n/* ======================== 例图展示区域 ======================== */\n.highlight-images {\n  margin: 20rpx 0;\n  padding: 10rpx 0;\n  overflow: hidden;\n  \n  .image-scroll {\n    white-space: nowrap;\n  }\n  \n  .highlight-image {\n    display: inline-block;\n    width: 240rpx;\n    height: 300rpx;\n    border-radius: 12rpx;\n    margin-right: 15rpx;\n    background: #f5f9ff;\n    box-shadow: 0 4rpx 10rpx rgba(0, 0, 0, 0.05);\n    transition: transform 0.3s ease;\n    \n    &:active {\n      transform: scale(0.95);\n    }\n    \n    &:last-child {\n      margin-right: 0;\n    }\n  }\n}\n/* ======================== 折叠区域 ======================== */\n.foldable-section {\n  max-height: 0;\n  overflow: hidden;\n  transition: max-height 0.5s ease, opacity 0.3s ease;\n  opacity: 0;\n  \n  &.expanded {\n    max-height: 1500rpx; /* 足够大的值容纳内容 */\n    opacity: 1;\n  }\n}\n.fold-toggle {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20rpx 0;\n  color: #81D8cf;\n  font-size: 26rpx;\n  font-weight: 500;\n  margin-top: 10rpx;\n  \n  text {\n    margin-right: 10rpx;\n  }\n  \n  &:active {\n    opacity: 0.8;\n  }\n}\n\n/* ======================== 其他通用样式 ======================== */\n::-webkit-scrollbar {\n  width: 0 !important;\n  height: 0 !important;\n  background-color: transparent !important;\n  display: none !important;\n}\n\n/* 响应式调整 */\n@media (max-width: 480px) {\n  .artist-header {\n    flex-direction: column;\n    align-items: flex-start;\n    \n    .artist-status {\n      margin-top: 10rpx;\n      align-self: flex-start;\n    }\n  }\n  \n  .plan-actions {\n    flex-direction: column;\n    \n    button {\n      width: 100%;\n      margin-bottom: 15rpx;\n      \n      &.btn-view-detail {\n        margin-right: 0;\n      }\n    }\n  }\n}\n</style>\n","import MiniProgramPage from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/pages/calendar/calendar.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","computed","websiteUrl","month","day","watch","onLoad","onPullDownRefresh"],"mappings":"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"}