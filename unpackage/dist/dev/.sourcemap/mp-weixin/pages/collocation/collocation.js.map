{"version":3,"file":"collocation.js","sources":["pages/collocation/collocation.vue","pages/collocation/collocation.vue?type=page"],"sourcesContent":["<template>\n\t<view>\n\t\t<view-logs />\n\t\t<!-- 上传图片列表 -->\n\t\t<view style=\"width: 100%;overflow: hidden;\">\n\t\t\t<scroll-view scroll-x=\"true\" class=\"upload_box\" ll-with-animation=\"true\" :show-scrollbar=\"false\">\n\t\t\t\t<view class=\"upload_item\" v-for=\"(item, index) in uploadList\" :key=\"index\">\n\t\t\t\t\t<image :src=\"item\" class=\"uploaded_image\" @tap=\"viewFullImage(index)\" mode=\"aspectFill\" />\n\t\t\t\t\t<image src=\"../../static/cancel.png\" class=\"close_icon\" @tap=\"deleteImage(index)\" />\n\t\t\t\t</view>\n\t\t\t\t<view class=\"uploadImageBox\" style=\"background: #f8f8f8;\" v-if=\"uploadList.length < 9\">\n\t\t\t\t\t<image src=\"../../static/add2.png\" class=\"upload_img\" @tap=\"selectImage\"\n\t\t\t\t\t\tstyle=\"width: 50px;height: 50px;margin: 25px;\" />\n\t\t\t\t</view>\n\n\t\t\t</scroll-view>\n\t\t</view>\n\t\t<!-- 标题 -->\n\t\t<input v-model=\"title\" type=\"text\" placeholder=\"请输入标题\"\n\t\t\tstyle=\"padding: 10px;margin: 20px 15px 5px 15px;display: block;\">\n\t\t<view class=\"oneLine\"></view>\n\t\t<textarea v-model=\"content\" placeholder=\"请输入正文\"\n\t\t\tstyle=\"padding: 10px;margin:10px 15px 5px 15px;display: block;line-height: 28px;width: calc(100% - 50px);\"></textarea>\n\t\t<view class=\"oneLine\"></view>\n\t\t<view class=\"\">\n\t\t\t<view class=\"relation-trigger\" @tap=\"showRelationPicker\">\n\t\t\t\t<text class=\"placeholder\">点击关联娃物</text>\n\t\t\t\t<image src=\"/static/right2.png\" class=\"arrow-icon\" />\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"publish-detail\">\n\t\t\t<text>* 分享您对于打扮BJD的想法✨。</text>\n\t\t\t<text>* 不关联商品的搭配不会出现在广场中。</text>\n\t\t\t<text>* 可以是BJD相关的贩售广告，但不可以滥用关联。</text>\n\t\t</view>\n\t\t<!-- 相关 -->\n\t\t<view class=\"saveCollocationDataList\">\n\t\t\t<view v-for=\"(item, index) in saveCollocationDataList\" :key=\"index\">\n\t\t\t\t<view class=\"saveCollocationDataItem\">\n\t\t\t\t\t<image v-if=\"item.goods_image\" :src=\"item.goods_image\" mode=\"aspectFill\"\n\t\t\t\t\t\tstyle=\"width: 70px;height: 70px;\"></image>\n\t\t\t\t\t<text v-else class=\"no-image\">?</text>\n\t\t\t\t\t<text class=\"info-tap\" style=\"width: calc(100% - 120px);display: inline-block;\">{{item.type}}\n\t\t\t\t\t\t{{item.brand_name}} -\n\t\t\t\t\t\t{{item.goods_name}} </text>\n\t\t\t\t\t<image src=\"../../static/cancel.png\" class=\"close_icon\" @tap=\"deleteCollcation(index)\" />\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<relation-picker v-model:visible=\"showSelectTab\" :typeList=\"typeList\" :goodsList=\"goodsList\"\n\t\t\t@confirm=\"handleRelationConfirm\" @cancel=\"handleRelationCancel\" />\n\n\t\t<view class=\"footer\">\n\t\t\t<button @click=\"submitForm\">{{ isEdit ? '更新' : '提交' }}</button>\n\t\t</view>\n\n\t</view>\n</template>\n\n<script setup>\n\timport {\n\t\tref,\n\t\tonMounted\n\t} from 'vue';\n\timport {\n\t\twebsiteUrl,\n\t\timage1Url,\n\t} from \"../../common/config.js\";\n\timport {\n\t\tgetQiniuToken,\n\t\tuploadImageToQiniu,\n\t\tchooseImageList,\n\t} from \"../../common/image.js\";\n\n\t// 接受参数 propsGoodsId propsGoodsName propsBrandId propsBrandName如果是非空或非0，添加一条\n\t// 新增collocation_id参数用于编辑模式\n\tconst props = defineProps([\"goods_id\", \"goods_name\", \"brand_id\", \"brand_name\", \"type\", \"collocation_id\"])\n\n\t// 标记是否为编辑模式\n\tconst isEdit = ref(false);\n\tconst uploadList = ref([]);\n\tconst goodsList = ref([]);\n\tconst typeList = ref([]);\n\tconst showSelectTab = ref(false);\n\tconst saveCollocationDataList = ref([])\n\t\n\t//表单信息\n\tconst title = ref(\"\")\n\tconst content = ref(\"\")\n\n\t// 获取搭配详情\n\tasync function fetchCollocationDetail() {\n\t\tif (!props.collocation_id) return;\n\t\t\n\t\ttry {\n\t\t\tconst res = await uni.request({\n\t\t\t\turl: `${websiteUrl.value}/view-collocation?collocation_id=${props.collocation_id}&origin=1`,\n\t\t\t\tmethod: 'GET',\n\t\t\t\ttimeout: 5000\n\t\t\t});\n\t\t\t\n\t\t\tif (res.data.status === \"success\") {\n\t\t\t\tconst data = res.data.data;\n\t\t\t\ttitle.value = data.title || \"\";\n\t\t\t\tcontent.value = data.content || \"\";\n\t\t\t\tuploadList.value = data.image_url_list || [];\n\t\t\t\t\n\t\t\t\t// 处理关联商品\n\t\t\t\tif (data.collocation_relation_list && data.collocation_relation_list.length > 0) {\n\t\t\t\t\tsaveCollocationDataList.value = data.collocation_relation_list.map(item => ({\n\t\t\t\t\t\tgoods_id: item.relation_goods_id,\n\t\t\t\t\t\tgoods_name: item.relation_goods_name,\n\t\t\t\t\t\tbrand_id: item.relation_brand_id,\n\t\t\t\t\t\tbrand_name: item.relation_brand_name,\n\t\t\t\t\t\ttype: item.type,\n\t\t\t\t\t\tgoods_image: item.relation_goods_image || \"\"\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('获取搭配详情失败:', error);\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '加载搭配详情失败',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t}\n\t}\n\n\tonMounted(() => {\n\t\t// 初始化商品类型\n\t\tgetTypes();\n\t\t\n\t\t// 检查是否是编辑模式\n\t\tif (props.collocation_id) {\n\t\t\tisEdit.value = true;\n\t\t\tfetchCollocationDetail();\n\t\t}\n\t\t\n\t\t// 处理直接关联商品\n\t\tif (props.goods_id && props.goods_name && props.brand_id && props.brand_name && props.type) {\n\t\t\tgetGoodsInfo(props.goods_id).then((res) => {\n\t\t\t\tlet data = {\n\t\t\t\t\t\"brand_id\": parseInt(props.brand_id, 10),\n\t\t\t\t\t\"goods_id\": parseInt(props.goods_id, 10),\n\t\t\t\t\t\"brand_name\": props.brand_name,\n\t\t\t\t\t\"goods_name\": props.goods_name,\n\t\t\t\t\t\"goods_image\": res.data.goods_images[0],\n\t\t\t\t\t\"type\": props.type\n\t\t\t\t}\n\t\t\t\t// 避免重复添加\n\t\t\t\tconst exists = saveCollocationDataList.value.some(item => \n\t\t\t\t\titem.goods_id === data.goods_id && item.brand_id === data.brand_id\n\t\t\t\t);\n\t\t\t\tif (!exists) {\n\t\t\t\t\tsaveCollocationDataList.value.push(data);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n\t// 处理确认事件\n\tconst handleRelationConfirm = (data) => {\n\t\ttry {\n\t\t\tconst relationData = {\n\t\t\t\tgoods_id: data.goods.id || 0,\n\t\t\t\tgoods_name: data.goods.name,\n\t\t\t\tgoods_image: data.goods.image || '',\n\t\t\t\tbrand_id: data.brand.id || 0,\n\t\t\t\tbrand_name: data.brand.name || (data.isFuzzy ? '' : '未知品牌'),\n\t\t\t\ttype: data.type || (data.isFuzzy ? '未知类型' : '')\n\t\t\t}\n\n\t\t\t// 去重检查（同时匹配ID和名称）\n\t\t\tconst isExist = saveCollocationDataList.value.some(item =>\n\t\t\t\t(item.goods_id !== 0 && item.goods_id === relationData.goods_id) ||\n\t\t\t\titem.goods_name === relationData.goods_name\n\t\t\t)\n\n\t\t\tif (!isExist) {\n\t\t\t\tsaveCollocationDataList.value.push(relationData)\n\t\t\t} else {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '已存在相同关联项',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('保存关联数据失败:', error)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '保存关联信息失败',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t}\n\t}\n\t\n\t// 处理取消事件\n\tconst handleRelationCancel = () => {\n\t\tconsole.log('用户取消选择')\n\t}\n\n\tconst showRelationPicker = () => {\n\t\tshowSelectTab.value = true;\n\t}\n\n\t//获取商品详情\n\tfunction getGoodsInfo(id) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tuni.request({\n\t\t\t\turl: websiteUrl.value + '/goods?id=' + id,\n\t\t\t\tmethod: 'GET',\n\t\t\t\ttimeout: 5000,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tresolve(res.data); // 请求成功，返回数据\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '网络请求失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t\treject(err);\n\t\t\t\t}\n\t\t\t})\n\t\t});\n\t}\n\n\tfunction viewFullImage(index) {\n\t\tuni.previewImage({\n\t\t\tcurrent: uploadList.value[index],\n\t\t\turls: uploadList.value\n\t\t});\n\t}\n\n\t//选择图片\n\tasync function selectImage() {\n\t\ttry {\n\t\t\t// 计算还能上传几张图片\n\t\t\tconst remaining = 9 - uploadList.value.length;\n\t\t\tif (remaining <= 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '最多只能上传9张图片',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 选择多张图片\n\t\t\tconst imagePaths = await chooseImageList(remaining);\n\n\t\t\t// 逐个上传\n\t\t\tfor (const path of imagePaths) {\n\t\t\t\t// 为每个图片获取独立token\n\t\t\t\tconst tokenData = await getQiniuToken();\n\n\t\t\t\t// 上传到七牛云\n\t\t\t\tawait uploadImageToQiniu(path, tokenData.token, tokenData.path);\n\n\t\t\t\t// 添加到展示列表\n\t\t\t\tuploadList.value.push(image1Url + tokenData.path);\n\t\t\t}\n\n\t\t\tuni.showToast({\n\t\t\t\ttitle: `成功上传${imagePaths.length}张图片`,\n\t\t\t\ticon: 'success'\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tconsole.error('上传出错:', error);\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '部分图片上传失败',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t}\n\t}\n\n\t// 实现提交方法\n\tasync function submitForm() {\n\t\tconst token = uni.getStorageSync('token');\n\t\tif (!token) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请先登录',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\t// 基本验证\n\t\tif (!title.value.trim()) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '标题不能为空',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tif (uploadList.value.length === 0) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请至少上传一张图片',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\t// 构造请求数据\n\t\tconst postData = {\n\t\t\ttitle: title.value,\n\t\t\tcontent: content.value,\n\t\t\timage_url_list: uploadList.value,\n\t\t\trelations: saveCollocationDataList.value.map(item => ({\n\t\t\t\trelation_goods_id: item.goods_id,\n\t\t\t\trelation_goods_name: item.goods_name,\n\t\t\t\trelation_brand_id: item.brand_id,\n\t\t\t\trelation_brand_name: item.brand_name,\n\t\t\t\ttype: item.type,\n\t\t\t\trelation_origin: 1 // 标识关联的是collocation\n\t\t\t}))\n\t\t};\n\t\t\n\t\t// 编辑模式添加collocation_id\n\t\tif (isEdit.value) {\n\t\t\tpostData.collocation_id = parseInt(props.collocation_id);\n\t\t}\n\n\t\ttry {\n\t\t\tconst url = isEdit.value \n\t\t\t\t? websiteUrl.value + '/with-state/update-collocation'\n\t\t\t\t: websiteUrl.value + '/with-state/add-collocation';\n\t\t\t\t\n\t\t\tconst res = await uni.request({\n\t\t\t\turl: url,\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: postData,\n\t\t\t\theader: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'Authorization': token,\n\t\t\t\t},\n\t\t\t\ttimeout: 8000\n\t\t\t});\n\t\t\t\n\t\t\tif (res.data.status === \"success\") {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: isEdit.value ? '更新成功' : '提交成功'\n\t\t\t\t});\n\t\t\t\t// 返回上一页\n\t\t\t\tsetTimeout(() => uni.navigateBack(), 1500);\n\t\t\t} else {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: res[1].data.msg || (isEdit.value ? '更新失败' : '提交失败'),\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '网络请求失败',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t}\n\t}\n\n\t// 获取types列表\n\tfunction getTypes() {\n\t\tuni.request({\n\t\t\turl: websiteUrl.value + '/goods-types',\n\t\t\tmethod: 'GET',\n\t\t\ttimeout: 5000,\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.data && res.data.data) {\n\t\t\t\t\ttypeList.value = res.data.data;\n\t\t\t\t}\n\t\t\t},\n\t\t\tfail: (err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '获取商品类型失败',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}\n\n\tfunction deleteImage(index) {\n\t\tuploadList.value.splice(index, 1)\n\t}\n\n\tfunction deleteCollcation(index) {\n\t\tsaveCollocationDataList.value.splice(index, 1)\n\t}\n</script>\n\n<style lang=\"less\">\n\t/* 样式保持不变，与之前相同 */\n\t.uploaded_image {\n\t\twidth: 100px;\n\t\theight: 100px;\n\t\tmargin-right: 10px;\n\t}\n\n\t.upload_box {\n\t\twidth: 100%;\n\t\twhite-space: nowrap;\n\t\toverflow-x: auto;\n\t\tdisplay: block;\n\t\tmargin-top: 15px;\n\t\tpadding: 10px;\n\t\tmargin-left: 10px;\n\n\t\tview {\n\t\t\tdisplay: inline-block;\n\t\t\tvertical-align: top;\n\t\t}\n\n\t\t.upload_item {\n\t\t\tposition: relative;\n\t\t\twidth: 100px;\n\t\t\tmargin-right: 10px;\n\t\t\tborder-radius: 5px;\n\t\t\toverflow: hidden;\n\n\t\t\t.uploaded_image {\n\t\t\t\twidth: 100px;\n\t\t\t\theight: 100px;\n\t\t\t}\n\n\t\t\t.close_icon {\n\t\t\t\tposition: absolute;\n\t\t\t\tright: 0;\n\t\t\t\ttop: 0;\n\t\t\t\twidth: 20px;\n\t\t\t\theight: 20px;\n\t\t\t}\n\t\t}\n\t}\n\n\t.saveCollocationDataList {\n\t\tpadding-bottom: 80px;\n\t\tmin-height: 300rpx;\n\n\t\t.saveCollocationDataItem {\n\t\t\tposition: relative;\n\t\t\tbackground: #fafafa;\n\t\t\twidth: 90vw;\n\t\t\tmargin: 10px auto;\n\n\t\t\t.info-tap {\n\t\t\t\tposition: absolute;\n\t\t\t\tbottom: 30px;\n\t\t\t\tmargin-left: 10px;\n\t\t\t}\n\n\t\t\t.no-image {\n\t\t\t\tdisplay: inline-block;\n\t\t\t\twidth: 70px;\n\t\t\t\theight: 70px;\n\t\t\t\tbottom: 0px;\n\t\t\t\tmargin-left: 0px;\n\t\t\t\tcolor: #fda7a7;\n\t\t\t\tfont-size: 30px;\n\t\t\t\ttext-align: center;\n\t\t\t\tline-height: 70px;\n\t\t\t\tfont-weight: 1000;\n\t\t\t}\n\n\t\t\t.close_icon {\n\t\t\t\twidth: 20px;\n\t\t\t\theight: 20px;\n\t\t\t\tposition: absolute;\n\t\t\t\tbottom: 30px;\n\t\t\t\tright: 10px;\n\t\t\t\tmargin-left: 10px;\n\t\t\t\tbackground: #f2f2f2;\n\t\t\t\tborder-radius: 100%;\n\t\t\t}\n\t\t}\n\t}\n\n\t.footer {\n\t\tposition: fixed;\n\t\tbottom: 0px;\n\t\twidth: 100%;\n\t\tbox-shadow: 0 0 5px rbga(0, 0, 0, 0.2);\n\t\talign-items: center;\n\n\t\tbutton {\n\t\t\twidth: 80%;\n\t\t\tbackground-color: #78d0dd;\n\t\t\tcolor: #fff;\n\t\t\tfont-size: 16px;\n\t\t\ttext-align: center;\n\t\t\tpadding: 10px;\n\t\t\tborder-radius: 30px;\n\t\t\tmargin-bottom: 10px;\n\t\t}\n\t}\n\n\t.oneLine {\n\t\tborder-bottom: 1px solid #dadada;\n\t\twidth: calc(100vw - 50px);\n\t\tmargin: 0px 25px;\n\t\tbox-sizing: border-box;\n\t}\n\n\t// 关联娃物\n\t.relation-trigger {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding: 20rpx 30rpx;\n\t\tbackground: #f8f8f8;\n\t\tborder-radius: 12rpx;\n\t\tmargin: 20rpx;\n\n\t\t.placeholder {\n\t\t\tflex: 1;\n\t\t\tcolor: #999;\n\t\t\tfont-size: 28rpx;\n\t\t}\n\n\t\t.arrow-icon {\n\t\t\twidth: 30rpx;\n\t\t\theight: 30rpx;\n\t\t}\n\t}\n\n\t.publish-detail {\n\t\ttext {\n\t\t\tdisplay: block;\n\t\t\tcolor: #888;\n\t\t\tmargin: 20rpx 40rpx;\n\t\t}\n\t}\n</style>\n","import MiniProgramPage from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/pages/collocation/collocation.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","websiteUrl","onMounted","chooseImageList","getQiniuToken","uploadImageToQiniu","image1Url","MiniProgramPage"],"mappings":"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"}