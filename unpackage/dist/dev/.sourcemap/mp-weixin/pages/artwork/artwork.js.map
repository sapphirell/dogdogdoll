{"version":3,"file":"artwork.js","sources":["pages/artwork/artwork.vue","pages/artwork/artwork.vue?type=page"],"sourcesContent":["<template>\n  <view>\n    <!-- 图片轮播区域 -->\n    <view style=\"position: relative;\">\n      <view class=\"heart\" @click=\"likeFn()\">\n        <uni-icons type=\"heart\" size=\"28\" color=\"#ff4d4f\" v-if=\"!hasLike\"></uni-icons>\n        <uni-icons type=\"heart-filled\" size=\"28\" color=\"#ff4d4f\" v-else></uni-icons>\n        <text class=\"num\">{{ detailData?.like_count ? formatNumber(detailData.like_count) : 0 }}</text>\n      </view>\n      <swiper class=\"swiper-box\" :indicator-dots=\"true\" :autoplay=\"false\">\n        <swiper-item v-for=\"(img, index) in detailData.images\" :key=\"index\">\n          <image :src=\"img\" mode=\"aspectFill\" class=\"swiper-image\" @tap=\"viewFullImage(index)\" />\n        </swiper-item>\n      </swiper>\n    </view>\n\n    <!-- 作者信息区域 -->\n    <view class=\"author-info\" @click=\"navigateToBrand(detailData.brand_id)\" v-if=\"brandInfo\">\n      <image :src=\"brandInfo.logo_image\" mode=\"aspectFill\" class=\"author-avatar\" />\n      <view class=\"author-details\">\n        <text class=\"author-name\">{{ brandInfo.brand_name }}</text>\n        <text class=\"publish-time\">发布于 {{ formatTimestamp(detailData.created_at) }}</text>\n      </view>\n    </view>\n\n    <!-- 作品信息区域 -->\n    <view class=\"content-box\">\n      <text class=\"title\">{{ detailData.title }}</text>\n      <text class=\"head-name\">头名: {{ detailData.head_name }}</text>\n      \n      <!-- 作品元信息 -->\n      <view class=\"meta-info\">\n        <text class=\"meta-item\">性别: {{ getSexText(detailData.sex) }}</text>\n        <text class=\"meta-item\">类型: {{ getArtTypeText(detailData.art_type) }}</text>\n      </view>\n      \n      <!-- 风格标签 -->\n      <view class=\"tags-container\" v-if=\"detailData.faceup_tag_content && detailData.faceup_tag_content.length\">\n        <text class=\"tags-title\">风格:</text>\n        <view class=\"tags-list\">\n          <view v-for=\"(tag, index) in detailData.faceup_tag_content\" :key=\"index\" class=\"tag-item\">\n            {{ tag }}\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <!-- 关联商品 -->\n    <view class=\"goods-section\" v-if=\"detailData.goods_id && goodsInfo\">\n      <text class=\"section-title\">关联商品</text>\n      <view class=\"goods-item\" @click=\"navigateToGoods(detailData.goods_id)\">\n        <view class=\"image-container\">\n          <image :src=\"goodsInfo.goods_images?.[0] || '/static/goods-default.png'\" mode=\"aspectFill\" class=\"goods-image\" />\n        </view>\n        <view class=\"goods-info\">\n          <text class=\"goods-name\">{{ goodsInfo.name }}</text>\n          <text class=\"goods-brand\">{{ goodsInfo.brand_name }}</text>\n          <view class=\"see\">去看看 →</view>\n        </view>\n      </view>\n    </view>\n\n    <!-- 评论区 -->\n    <view style=\"padding: 10px;\">\n      <comment-list ref=\"commentListRef\" :type=\"commentType\" :relation-id=\"parseInt(pageId)\" @reply=\"handleReplyComment\" />\n    </view>\n\n    <!-- 输入框 -->\n    <comment-input ref=\"commentInputRef\" :reply-info=\"replyForItem\" :target-id=\"pageId\"\n      @submit=\"handleCommentSubmit\" @update:reply-info=\"val => replyForItem = val\" />\n\n    <view style=\"width: 100%;height: 120rpx;\"></view>\n\n    <!-- 加载状态 -->\n    <view v-if=\"loading\" class=\"loading\">加载中...</view>\n    <view v-if=\"error\" class=\"error\">{{ errorMsg }}</view>\n  </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { onLoad } from \"@dcloudio/uni-app\";\nimport { websiteUrl, asyncGetUserInfo, global } from \"../../common/config.js\";\n\n// 页面数据\nconst detailData = ref({\n  id: 0,\n  title: '',\n  head_name: '',\n  faceup_tag_content: [],\n  sex: 0,\n  created_at: 0,\n  brand_id: 0,\n  art_type: 1,\n  goods_id: 0,\n  images: [],\n  like_count: 0\n})\n\n// 商品和品牌信息\nconst goodsInfo = ref(null)\nconst brandInfo = ref(null)\n\n// 页面状态\nconst loading = ref(true)\nconst error = ref(false)\nconst errorMsg = ref('')\nconst hasLike = ref(false)\nconst pageId = ref(0)\nconst commentType = ref(8) // 妆师作品的评论类型为8\n\n// 评论相关\nconst commentListRef = ref(null)\nconst commentInputRef = ref(null)\nconst replyForItem = ref({})\n\n// 格式化数字\nfunction formatNumber(num) {\n  if (!num) return '0'\n  if (num < 1000) return num.toString()\n  return `${Math.floor(num / 1000)}k+`\n}\n\n// 获取性别文本\nfunction getSexText(sex) {\n  const sexMap = {\n    0: '未知',\n    1: '男',\n    2: '女'\n  }\n  return sexMap[sex] || '未知'\n}\n\n// 获取艺术类型文本\nfunction getArtTypeText(type) {\n  const typeMap = {\n    1: '妆师',\n    2: '毛娘'\n  }\n  return typeMap[type] || '未知类型'\n}\n\n// 格式化时间戳\nfunction formatTimestamp(timestamp) {\n  if (!timestamp) return ''\n  const date = new Date(timestamp * 1000)\n  return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')}`\n}\n\n// 查看大图\nfunction viewFullImage(index) {\n  uni.previewImage({\n    current: detailData.value.images[index],\n    urls: detailData.value.images\n  })\n}\n\n// 获取作品详情\nconst fetchData = async (id) => {\n  try {\n    loading.value = true\n    const res = await uni.request({\n      url: websiteUrl.value + `/faceup/detail?id=${id}`,\n    })\n\n    if (res.data.status !== 'success') {\n      handleError(res.data.msg || '数据加载失败')\n      return\n    }\n\n    // 使用返回的数据\n    detailData.value = res.data.data\n    \n    // 确保images是数组\n    if (!Array.isArray(detailData.value.images)) {\n      detailData.value.images = detailData.value.face_up_image_urls ? \n        detailData.value.face_up_image_urls.split(',') : []\n    }\n\n    // 获取关联商品信息\n    if (detailData.value.goods_id) {\n      fetchGoodsInfo(detailData.value.goods_id)\n    }\n\n    // 获取关联品牌信息\n    if (detailData.value.brand_id) {\n      fetchBrandInfo(detailData.value.brand_id)\n    }\n\n  } catch (err) {\n    console.error('获取作品详情失败:', err)\n    handleError('数据加载失败')\n  } finally {\n    loading.value = false\n  }\n}\n\n// 获取商品信息\nconst fetchGoodsInfo = async (goodsId) => {\n  try {\n    const res = await uni.request({\n      url: websiteUrl.value + `/goods?id=${goodsId}`,\n      method: 'GET'\n    })\n\n    if (res.data.status === 'success') {\n      goodsInfo.value = res.data.data\n    }\n  } catch (e) {\n    console.error('获取商品信息失败:', e)\n  }\n}\n\n// 获取品牌信息\nconst fetchBrandInfo = async (brandId) => {\n  try {\n    const res = await uni.request({\n      url: websiteUrl.value + `/brand-info?id=${brandId}`,\n      method: 'GET'\n    })\n\n    if (res.data.status === 'success') {\n      brandInfo.value = res.data.data\n    }\n  } catch (e) {\n    console.error('获取品牌信息失败:', e)\n  }\n}\n\n// 错误处理\nconst handleError = (msg) => {\n  error.value = true\n  errorMsg.value = msg\n  uni.showToast({\n    title: msg,\n    icon: 'none'\n  })\n}\n\n// 跳转到商品\nfunction navigateToGoods(goodsId) {\n  uni.navigateTo({\n    url: `/pages/goods/goods?goods_id=${goodsId}`\n  })\n}\n\n// 跳转到品牌\nfunction navigateToBrand(brandId) {\n  uni.navigateTo({\n    url: `/pages/brand/brand?brand_id=${brandId}`\n  })\n}\n\n// 点赞功能 - 妆师作品点赞类型为7\nfunction likeFn() {\n  let token = uni.getStorageSync('token');\n  if (!global.isLogin) {\n    uni.showToast({\n      title: '请先登录',\n      icon: 'none'\n    })\n    return\n  }\n  \n  const requestData = {\n    id: parseInt(pageId.value),\n    type: 7, // 妆师作品点赞类型为7\n  }\n  \n  // 判断是请求点赞接口还是取消点赞接口\n  let url = hasLike.value ? '/with-state/unlike' : '/with-state/add-like';\n  uni.request({\n    url: websiteUrl.value + url,\n    method: 'POST',\n    header: {\n      'Authorization': token,\n    },\n    data: requestData,\n    success: (res) => {\n      if (res.data.status == \"success\") {\n        uni.showToast({\n          title: hasLike.value ? '取消点赞' : '点赞成功',\n          icon: 'success'\n        })\n        hasLike.value = !hasLike.value\n        \n        // 更新点赞数\n        if (hasLike.value) {\n          detailData.value.like_count += 1;\n        } else {\n          detailData.value.like_count -= 1;\n        }\n      } else {\n        uni.showToast({\n          title: res.data.msg || '操作失败',\n          icon: 'none'\n        })\n      }\n    },\n    fail: (err) => {\n      console.log(err);\n      uni.showToast({\n        title: '网络请求失败',\n        icon: 'none'\n      })\n    },\n  });\n}\n\n// 获取是否点赞\nfunction getHasLike() {\n  let token = uni.getStorageSync('token');\n  if (!token) {\n    return\n  }\n\n  uni.request({\n    url: websiteUrl.value + '/with-state/hasLike?id=' + pageId.value + '&type=7', // 类型7\n    method: 'POST',\n    header: {\n      'Authorization': token,\n    },\n    success: (res) => {\n      if (res.data.status == \"success\") {\n        hasLike.value = res.data.data.id > 0\n      }\n    }\n  });\n}\n\n// 评论相关函数\nconst handleReplyComment = ({ parent, target }) => {\n  let item = parent\n  if (target != null) {\n    item = target\n  }\n\n  if (replyForItem.value.id == item.id) {\n    replyForItem.value = {}\n    return\n  }\n  \n  replyForItem.value = item;\n  commentInputRef.value?.focusInput()\n}\n\n// 评论提交处理 - 妆师作品评论类型为8\nconst handleCommentSubmit = (submitData) => {\n  let token = uni.getStorageSync('token');\n  if (!global.isLogin) {\n    uni.showToast({\n      title: '请先登录',\n      icon: 'none'\n    })\n    return\n  }\n  \n  const requestData = {\n    content: submitData.content,\n    origin: submitData.origin,\n    target_id: parseInt(pageId.value),\n    type: 8, // 妆师作品评论类型为8\n    image_url: submitData.image_url || \"\",\n    association_id: submitData.association_id || 0,\n    association_type: submitData.association_type || 0,\n    is_anonymous: submitData.is_anonymous || 0,\n    ...(replyForItem.value.id && {\n      reply_id: replyForItem.value.id,\n      reply_for: replyForItem.value.comment,\n      reply_uid: replyForItem.value.user_id,\n      parent_id: replyForItem.value.parent_id > 0 ? \n        replyForItem.value.parent_id : replyForItem.value.id,\n    })\n  }\n  \n  // 创建临时评论对象\n  const tempComment = {\n    id: Date.now(),\n    content: submitData.content,\n    created_at: Math.floor(Date.now() / 1000),\n    like_count: 0,\n    reply_count: 0,\n    is_liked: false,\n    floor: 0,\n    ...(submitData.is_anonymous ? {\n      avatar: \"https://images1.fantuanpu.com/home/default_avatar.jpg\",\n      username: \"匿名用户\",\n      is_anonymous: 1\n    } : {\n      avatar: global.userInfo.avatar,\n      username: global.userInfo.nickname,\n      is_anonymous: 0\n    }),\n    ...(submitData.image_url && {\n      image_url: submitData.image_url\n    }),\n    ...(replyForItem.value.id && {\n      reply_id: replyForItem.value.id,\n      reply_for: replyForItem.value.comment,\n      reply_uid: replyForItem.value.user_id,\n      parent_id: replyForItem.value.parent_id > 0 ? \n        replyForItem.value.parent_id : replyForItem.value.id,\n      reply_username: replyForItem.value.is_anonymous ? \n        \"匿名用户\" : replyForItem.value.username\n    })\n  }\n  \n  // 添加临时评论\n  if (!replyForItem.value.id) {\n    commentListRef.value?.addNewComment(tempComment)\n  } else if (replyForItem.value.parent_id === 0) {\n    commentListRef.value?.addReplyComment({\n      ...tempComment,\n      parent_id: replyForItem.value.id\n    })\n  } else {\n    commentListRef.value?.addReplyComment({\n      ...tempComment,\n      parent_id: replyForItem.value.parent_id\n    })\n  }\n\n  uni.request({\n    url: websiteUrl.value + '/with-state/add-comment',\n    method: 'POST',\n    header: {\n      'Authorization': token\n    },\n    data: requestData,\n    success: (res) => {\n      if (res.data.status == \"success\") {\n        const newComment = res.data.data\n        const finalComment = {\n          ...newComment,\n          ...(submitData.is_anonymous ? {\n            avatar: \"https://images1.fantuanpu.com/home/default_avatar.jpg\",\n            username: \"匿名用户\",\n            is_anonymous: 1\n          } : {\n            avatar: global.userInfo.avatar,\n            username: global.userInfo.nickname,\n            is_anonymous: 0\n          })\n        }\n        \n        if (newComment.reply_uid && replyForItem.value.is_anonymous) {\n          finalComment.reply_username = \"匿名用户\"\n        }\n\n        // 更新临时评论为真实评论\n        commentListRef.value?.updateTempComment(tempComment.id, finalComment)\n\n        uni.showToast({\n          title: '评论成功',\n          icon: 'success'\n        })\n      } else {\n        commentListRef.value?.removeTempComment(tempComment.id)\n        uni.showToast({\n          title: res.data.msg,\n          icon: 'none'\n        })\n      }\n    },\n    fail: (err) => {\n      commentListRef.value?.removeTempComment(tempComment.id)\n      uni.showToast({\n        title: '网络请求失败',\n        icon: 'none'\n      })\n    }\n  });\n}\n\n// 页面加载\nonLoad((options) => {\n  if (!options.id) {\n    handleError('缺少必要参数')\n    return\n  }\n  \n  pageId.value = options.id\n  fetchData(options.id)\n  \n  // 检查登录状态\n  asyncGetUserInfo().then(() => {\n    // 获取点赞状态\n    getHasLike()\n  })\n})\n</script>\n\n<style lang=\"less\" scoped>\n.swiper-box {\n  height: 750rpx;\n}\n\n.swiper-image {\n  width: 100%;\n  height: 100%;\n}\n\n.heart {\n  position: absolute;\n  top: 10px;\n  right: 20px;\n  z-index: 10;\n  width: 50px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 15px;\n  padding: 5px;\n\n  .uni-icons {\n    width: 30px;\n    height: 30px;\n  }\n\n  .num {\n    color: white;\n    font-size: 14px;\n    margin-left: 5px;\n    font-weight: bold;\n  }\n}\n\n/* 作者信息区域 */\n.author-info {\n  display: flex;\n  align-items: center;\n  padding: 30rpx;\n  background: #fff;\n  border-bottom: 1rpx solid #f0f0f0;\n  \n  .author-avatar {\n    width: 80rpx;\n    height: 80rpx;\n    border-radius: 50%;\n    margin-right: 20rpx;\n  }\n  \n  .author-details {\n    display: flex;\n    flex-direction: column;\n  }\n  \n  .author-name {\n    font-size: 32rpx;\n    font-weight: bold;\n    color: #333;\n  }\n  \n  .publish-time {\n    font-size: 26rpx;\n    color: #999;\n    margin-top: 8rpx;\n  }\n}\n\n.content-box {\n  padding: 30rpx;\n  background: #fff;\n  border-radius: 0 0 16rpx 16rpx;\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\n}\n\n.title {\n  font-size: 36rpx;\n  font-weight: 800;\n  margin-bottom: 20rpx;\n  display: block;\n  color: #333;\n}\n\n.head-name {\n  display: block;\n  font-size: 30rpx;\n  color: #666;\n  margin-bottom: 20rpx;\n}\n\n.meta-info {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 15rpx;\n  margin-bottom: 20rpx;\n}\n\n.meta-item {\n  font-size: 28rpx;\n  color: #666;\n  padding: 8rpx 20rpx;\n  background: #f5f5f5;\n  border-radius: 8rpx;\n}\n\n/* 风格标签区域 */\n.tags-container {\n  display: flex;\n  margin-top: 20rpx;\n  \n  .tags-title {\n    font-size: 28rpx;\n    color: #666;\n    margin-right: 20rpx;\n    line-height: 50rpx;\n  }\n  \n  .tags-list {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 15rpx;\n    flex: 1;\n  }\n  \n  .tag-item {\n    font-size: 26rpx;\n    color: #1ed1e1;\n    padding: 8rpx 20rpx;\n    background: #e8f7ff;\n    border-radius: 8rpx;\n    border: 1rpx solid #b3e5fc;\n  }\n}\n\n.section-title {\n  display: block;\n  font-size: 32rpx;\n  font-weight: 700;\n  color: #333;\n  margin: 30rpx 20rpx 20rpx;\n  padding-left: 20rpx;\n  border-left: 8rpx solid #1ed1e1;\n}\n\n.goods-section {\n  background: #fff;\n  border-radius: 16rpx;\n  margin: 20rpx;\n  padding: 20rpx;\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\n}\n\n.goods-item {\n  display: flex;\n  padding: 20rpx;\n  background: #f9f9f9;\n  border-radius: 12rpx;\n  align-items: center;\n}\n\n.image-container {\n  width: 180rpx;\n  height: 180rpx;\n  margin-right: 30rpx;\n  flex-shrink: 0;\n}\n\n.goods-image {\n  width: 100%;\n  height: 100%;\n  border-radius: 8rpx;\n  object-fit: cover;\n}\n\n.goods-info {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.goods-name {\n  font-size: 30rpx;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 10rpx;\n}\n\n.goods-brand {\n  font-size: 26rpx;\n  color: #666;\n  margin-bottom: 20rpx;\n}\n\n.see {\n  color: #1ed1e1;\n  font-size: 26rpx;\n  font-weight: bold;\n  align-self: flex-start;\n}\n\n.loading, .error {\n  text-align: center;\n  padding: 40rpx;\n  font-size: 28rpx;\n  color: #999;\n}\n</style>\n","import MiniProgramPage from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/pages/artwork/artwork.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","websiteUrl","global","_a","_b","onLoad","asyncGetUserInfo"],"mappings":";;;;;;;;;;;;;;;;;;AAqFA,UAAM,aAAaA,cAAAA,IAAI;AAAA,MACrB,IAAI;AAAA,MACJ,OAAO;AAAA,MACP,WAAW;AAAA,MACX,oBAAoB,CAAE;AAAA,MACtB,KAAK;AAAA,MACL,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,MACV,QAAQ,CAAE;AAAA,MACV,YAAY;AAAA,IACd,CAAC;AAGD,UAAM,YAAYA,cAAG,IAAC,IAAI;AAC1B,UAAM,YAAYA,cAAG,IAAC,IAAI;AAG1B,UAAM,UAAUA,cAAG,IAAC,IAAI;AACxB,UAAM,QAAQA,cAAG,IAAC,KAAK;AACvB,UAAM,WAAWA,cAAG,IAAC,EAAE;AACvB,UAAM,UAAUA,cAAG,IAAC,KAAK;AACzB,UAAM,SAASA,cAAG,IAAC,CAAC;AACpB,UAAM,cAAcA,cAAG,IAAC,CAAC;AAGzB,UAAM,iBAAiBA,cAAG,IAAC,IAAI;AAC/B,UAAM,kBAAkBA,cAAG,IAAC,IAAI;AAChC,UAAM,eAAeA,cAAG,IAAC,EAAE;AAG3B,aAAS,aAAa,KAAK;AACzB,UAAI,CAAC;AAAK,eAAO;AACjB,UAAI,MAAM;AAAM,eAAO,IAAI,SAAU;AACrC,aAAO,GAAG,KAAK,MAAM,MAAM,GAAI,CAAC;AAAA,IAClC;AAGA,aAAS,WAAW,KAAK;AACvB,YAAM,SAAS;AAAA,QACb,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,MACJ;AACD,aAAO,OAAO,GAAG,KAAK;AAAA,IACxB;AAGA,aAAS,eAAe,MAAM;AAC5B,YAAM,UAAU;AAAA,QACd,GAAG;AAAA,QACH,GAAG;AAAA,MACJ;AACD,aAAO,QAAQ,IAAI,KAAK;AAAA,IAC1B;AAGA,aAAS,gBAAgB,WAAW;AAClC,UAAI,CAAC;AAAW,eAAO;AACvB,YAAM,OAAO,IAAI,KAAK,YAAY,GAAI;AACtC,aAAO,GAAG,KAAK,YAAW,CAAE,KAAK,KAAK,SAAU,IAAG,GAAG,WAAW,SAAS,GAAG,GAAG,CAAC,IAAI,KAAK,QAAO,EAAG,SAAQ,EAAG,SAAS,GAAG,GAAG,CAAC;AAAA,IACjI;AAGA,aAAS,cAAc,OAAO;AAC5BC,oBAAAA,MAAI,aAAa;AAAA,QACf,SAAS,WAAW,MAAM,OAAO,KAAK;AAAA,QACtC,MAAM,WAAW,MAAM;AAAA,MAC3B,CAAG;AAAA,IACH;AAGA,UAAM,YAAY,OAAO,OAAO;AAC9B,UAAI;AACF,gBAAQ,QAAQ;AAChB,cAAM,MAAM,MAAMA,cAAG,MAAC,QAAQ;AAAA,UAC5B,KAAKC,cAAAA,WAAW,QAAQ,qBAAqB,EAAE;AAAA,QACrD,CAAK;AAED,YAAI,IAAI,KAAK,WAAW,WAAW;AACjC,sBAAY,IAAI,KAAK,OAAO,QAAQ;AACpC;AAAA,QACD;AAGD,mBAAW,QAAQ,IAAI,KAAK;AAG5B,YAAI,CAAC,MAAM,QAAQ,WAAW,MAAM,MAAM,GAAG;AAC3C,qBAAW,MAAM,SAAS,WAAW,MAAM,qBACzC,WAAW,MAAM,mBAAmB,MAAM,GAAG,IAAI,CAAE;AAAA,QACtD;AAGD,YAAI,WAAW,MAAM,UAAU;AAC7B,yBAAe,WAAW,MAAM,QAAQ;AAAA,QACzC;AAGD,YAAI,WAAW,MAAM,UAAU;AAC7B,yBAAe,WAAW,MAAM,QAAQ;AAAA,QACzC;AAAA,MAEF,SAAQ,KAAK;AACZD,sBAAAA,MAAA,MAAA,SAAA,oCAAc,aAAa,GAAG;AAC9B,oBAAY,QAAQ;AAAA,MACxB,UAAY;AACR,gBAAQ,QAAQ;AAAA,MACjB;AAAA,IACH;AAGA,UAAM,iBAAiB,OAAO,YAAY;AACxC,UAAI;AACF,cAAM,MAAM,MAAMA,cAAG,MAAC,QAAQ;AAAA,UAC5B,KAAKC,cAAAA,WAAW,QAAQ,aAAa,OAAO;AAAA,UAC5C,QAAQ;AAAA,QACd,CAAK;AAED,YAAI,IAAI,KAAK,WAAW,WAAW;AACjC,oBAAU,QAAQ,IAAI,KAAK;AAAA,QAC5B;AAAA,MACF,SAAQ,GAAG;AACVD,sBAAAA,yDAAc,aAAa,CAAC;AAAA,MAC7B;AAAA,IACH;AAGA,UAAM,iBAAiB,OAAO,YAAY;AACxC,UAAI;AACF,cAAM,MAAM,MAAMA,cAAG,MAAC,QAAQ;AAAA,UAC5B,KAAKC,cAAAA,WAAW,QAAQ,kBAAkB,OAAO;AAAA,UACjD,QAAQ;AAAA,QACd,CAAK;AAED,YAAI,IAAI,KAAK,WAAW,WAAW;AACjC,oBAAU,QAAQ,IAAI,KAAK;AAAA,QAC5B;AAAA,MACF,SAAQ,GAAG;AACVD,sBAAAA,yDAAc,aAAa,CAAC;AAAA,MAC7B;AAAA,IACH;AAGA,UAAM,cAAc,CAAC,QAAQ;AAC3B,YAAM,QAAQ;AACd,eAAS,QAAQ;AACjBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,MACV,CAAG;AAAA,IACH;AAGA,aAAS,gBAAgB,SAAS;AAChCA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,+BAA+B,OAAO;AAAA,MAC/C,CAAG;AAAA,IACH;AAGA,aAAS,gBAAgB,SAAS;AAChCA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,+BAA+B,OAAO;AAAA,MAC/C,CAAG;AAAA,IACH;AAGA,aAAS,SAAS;AAChB,UAAI,QAAQA,cAAAA,MAAI,eAAe,OAAO;AACtC,UAAI,CAACE,cAAM,OAAC,SAAS;AACnBF,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AACD;AAAA,MACD;AAED,YAAM,cAAc;AAAA,QAClB,IAAI,SAAS,OAAO,KAAK;AAAA,QACzB,MAAM;AAAA;AAAA,MACP;AAGD,UAAI,MAAM,QAAQ,QAAQ,uBAAuB;AACjDA,oBAAAA,MAAI,QAAQ;AAAA,QACV,KAAKC,cAAAA,WAAW,QAAQ;AAAA,QACxB,QAAQ;AAAA,QACR,QAAQ;AAAA,UACN,iBAAiB;AAAA,QAClB;AAAA,QACD,MAAM;AAAA,QACN,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,KAAK,UAAU,WAAW;AAChCD,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO,QAAQ,QAAQ,SAAS;AAAA,cAChC,MAAM;AAAA,YAChB,CAAS;AACD,oBAAQ,QAAQ,CAAC,QAAQ;AAGzB,gBAAI,QAAQ,OAAO;AACjB,yBAAW,MAAM,cAAc;AAAA,YACzC,OAAe;AACL,yBAAW,MAAM,cAAc;AAAA,YAChC;AAAA,UACT,OAAa;AACLA,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO,IAAI,KAAK,OAAO;AAAA,cACvB,MAAM;AAAA,YAChB,CAAS;AAAA,UACF;AAAA,QACF;AAAA,QACD,MAAM,CAAC,QAAQ;AACbA,wBAAAA,uDAAY,GAAG;AACfA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACd,CAAO;AAAA,QACF;AAAA,MACL,CAAG;AAAA,IACH;AAGA,aAAS,aAAa;AACpB,UAAI,QAAQA,cAAAA,MAAI,eAAe,OAAO;AACtC,UAAI,CAAC,OAAO;AACV;AAAA,MACD;AAEDA,oBAAAA,MAAI,QAAQ;AAAA,QACV,KAAKC,cAAU,WAAC,QAAQ,4BAA4B,OAAO,QAAQ;AAAA;AAAA,QACnE,QAAQ;AAAA,QACR,QAAQ;AAAA,UACN,iBAAiB;AAAA,QAClB;AAAA,QACD,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,KAAK,UAAU,WAAW;AAChC,oBAAQ,QAAQ,IAAI,KAAK,KAAK,KAAK;AAAA,UACpC;AAAA,QACF;AAAA,MACL,CAAG;AAAA,IACH;AAGA,UAAM,qBAAqB,CAAC,EAAE,QAAQ,aAAa;;AACjD,UAAI,OAAO;AACX,UAAI,UAAU,MAAM;AAClB,eAAO;AAAA,MACR;AAED,UAAI,aAAa,MAAM,MAAM,KAAK,IAAI;AACpC,qBAAa,QAAQ,CAAE;AACvB;AAAA,MACD;AAED,mBAAa,QAAQ;AACrB,4BAAgB,UAAhB,mBAAuB;AAAA,IACzB;AAGA,UAAM,sBAAsB,CAAC,eAAe;;AAC1C,UAAI,QAAQD,cAAAA,MAAI,eAAe,OAAO;AACtC,UAAI,CAACE,cAAM,OAAC,SAAS;AACnBF,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AACD;AAAA,MACD;AAED,YAAM,cAAc;AAAA,QAClB,SAAS,WAAW;AAAA,QACpB,QAAQ,WAAW;AAAA,QACnB,WAAW,SAAS,OAAO,KAAK;AAAA,QAChC,MAAM;AAAA;AAAA,QACN,WAAW,WAAW,aAAa;AAAA,QACnC,gBAAgB,WAAW,kBAAkB;AAAA,QAC7C,kBAAkB,WAAW,oBAAoB;AAAA,QACjD,cAAc,WAAW,gBAAgB;AAAA,QACzC,GAAI,aAAa,MAAM,MAAM;AAAA,UAC3B,UAAU,aAAa,MAAM;AAAA,UAC7B,WAAW,aAAa,MAAM;AAAA,UAC9B,WAAW,aAAa,MAAM;AAAA,UAC9B,WAAW,aAAa,MAAM,YAAY,IACxC,aAAa,MAAM,YAAY,aAAa,MAAM;AAAA,QACrD;AAAA,MACF;AAGD,YAAM,cAAc;AAAA,QAClB,IAAI,KAAK,IAAK;AAAA,QACd,SAAS,WAAW;AAAA,QACpB,YAAY,KAAK,MAAM,KAAK,IAAG,IAAK,GAAI;AAAA,QACxC,YAAY;AAAA,QACZ,aAAa;AAAA,QACb,UAAU;AAAA,QACV,OAAO;AAAA,QACP,GAAI,WAAW,eAAe;AAAA,UAC5B,QAAQ;AAAA,UACR,UAAU;AAAA,UACV,cAAc;AAAA,QACpB,IAAQ;AAAA,UACF,QAAQE,cAAAA,OAAO,SAAS;AAAA,UACxB,UAAUA,cAAAA,OAAO,SAAS;AAAA,UAC1B,cAAc;AAAA,QACf;AAAA,QACD,GAAI,WAAW,aAAa;AAAA,UAC1B,WAAW,WAAW;AAAA,QACvB;AAAA,QACD,GAAI,aAAa,MAAM,MAAM;AAAA,UAC3B,UAAU,aAAa,MAAM;AAAA,UAC7B,WAAW,aAAa,MAAM;AAAA,UAC9B,WAAW,aAAa,MAAM;AAAA,UAC9B,WAAW,aAAa,MAAM,YAAY,IACxC,aAAa,MAAM,YAAY,aAAa,MAAM;AAAA,UACpD,gBAAgB,aAAa,MAAM,eACjC,SAAS,aAAa,MAAM;AAAA,QAC/B;AAAA,MACF;AAGD,UAAI,CAAC,aAAa,MAAM,IAAI;AAC1B,6BAAe,UAAf,mBAAsB,cAAc;AAAA,MACrC,WAAU,aAAa,MAAM,cAAc,GAAG;AAC7C,6BAAe,UAAf,mBAAsB,gBAAgB;AAAA,UACpC,GAAG;AAAA,UACH,WAAW,aAAa,MAAM;AAAA,QACpC;AAAA,MACA,OAAS;AACL,6BAAe,UAAf,mBAAsB,gBAAgB;AAAA,UACpC,GAAG;AAAA,UACH,WAAW,aAAa,MAAM;AAAA,QACpC;AAAA,MACG;AAEDF,oBAAAA,MAAI,QAAQ;AAAA,QACV,KAAKC,cAAAA,WAAW,QAAQ;AAAA,QACxB,QAAQ;AAAA,QACR,QAAQ;AAAA,UACN,iBAAiB;AAAA,QAClB;AAAA,QACD,MAAM;AAAA,QACN,SAAS,CAAC,QAAQ;;AAChB,cAAI,IAAI,KAAK,UAAU,WAAW;AAChC,kBAAM,aAAa,IAAI,KAAK;AAC5B,kBAAM,eAAe;AAAA,cACnB,GAAG;AAAA,cACH,GAAI,WAAW,eAAe;AAAA,gBAC5B,QAAQ;AAAA,gBACR,UAAU;AAAA,gBACV,cAAc;AAAA,cAC1B,IAAc;AAAA,gBACF,QAAQC,cAAAA,OAAO,SAAS;AAAA,gBACxB,UAAUA,cAAAA,OAAO,SAAS;AAAA,gBAC1B,cAAc;AAAA,cACf;AAAA,YACF;AAED,gBAAI,WAAW,aAAa,aAAa,MAAM,cAAc;AAC3D,2BAAa,iBAAiB;AAAA,YAC/B;AAGD,aAAAC,MAAA,eAAe,UAAf,gBAAAA,IAAsB,kBAAkB,YAAY,IAAI;AAExDH,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO;AAAA,cACP,MAAM;AAAA,YAChB,CAAS;AAAA,UACT,OAAa;AACL,aAAAI,MAAA,eAAe,UAAf,gBAAAA,IAAsB,kBAAkB,YAAY;AACpDJ,0BAAAA,MAAI,UAAU;AAAA,cACZ,OAAO,IAAI,KAAK;AAAA,cAChB,MAAM;AAAA,YAChB,CAAS;AAAA,UACF;AAAA,QACF;AAAA,QACD,MAAM,CAAC,QAAQ;;AACb,WAAAG,MAAA,eAAe,UAAf,gBAAAA,IAAsB,kBAAkB,YAAY;AACpDH,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACd,CAAO;AAAA,QACF;AAAA,MACL,CAAG;AAAA,IACH;AAGAK,kBAAM,OAAC,CAAC,YAAY;AAClB,UAAI,CAAC,QAAQ,IAAI;AACf,oBAAY,QAAQ;AACpB;AAAA,MACD;AAED,aAAO,QAAQ,QAAQ;AACvB,gBAAU,QAAQ,EAAE;AAGpBC,oBAAgB,iBAAA,EAAG,KAAK,MAAM;AAE5B,mBAAY;AAAA,MAChB,CAAG;AAAA,IACH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxeD,GAAG,WAAW,eAAe;"}