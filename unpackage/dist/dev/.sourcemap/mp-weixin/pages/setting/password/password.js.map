{"version":3,"file":"password.js","sources":["pages/setting/password/password.vue","pages/setting/password/password.vue?type=page"],"sourcesContent":["<template>\n\t<view-logs />\n\t<view class=\"password-container\">\n\t\t<view class=\"form-wrapper\">\n\t\t\t<view v-if=\"global.userInfo.password\" class=\"input-group\">\n\t\t\t\t<view class=\"input-item\">\n\t\t\t\t\t<input class=\"input\" type=\"password\" placeholder=\" \" v-model=\"oldPassword\" />\n\t\t\t\t\t<label class=\"floating-label\">原密码</label>\n\t\t\t\t\t<uni-icons class=\"input-icon\" type=\"locked\" size=\"18\" color=\"#999\" />\n\t\t\t\t</view>\n\t\t\t\t<view class=\"input-item\">\n\t\t\t\t\t<input class=\"input\" type=\"password\" placeholder=\" \" v-model=\"newPassword\" />\n\t\t\t\t\t<label class=\"floating-label\">新密码</label>\n\t\t\t\t\t<uni-icons class=\"input-icon\" type=\"gear\" size=\"18\" color=\"#999\" />\n\t\t\t\t</view>\n\t\t\t\t<view class=\"input-item\">\n\t\t\t\t\t<input class=\"input\" type=\"password\" placeholder=\" \" v-model=\"newPassword2\" />\n\t\t\t\t\t<label class=\"floating-label\">确认新密码</label>\n\t\t\t\t\t<uni-icons class=\"input-icon\" type=\"checkmarkempty\" size=\"18\" color=\"#999\" />\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view v-else class=\"input-group\">\n\t\t\t\t<view class=\"input-item\">\n\t\t\t\t\t<input class=\"input\" type=\"password\" placeholder=\" \" v-model=\"newPassword\" />\n\t\t\t\t\t<label class=\"floating-label\">设置密码</label>\n\t\t\t\t\t<uni-icons class=\"input-icon\" type=\"locked\" size=\"18\" color=\"#999\" />\n\t\t\t\t</view>\n\t\t\t\t<view class=\"input-item\">\n\t\t\t\t\t<input class=\"input\" type=\"password\" placeholder=\" \" v-model=\"newPassword2\" />\n\t\t\t\t\t<label class=\"floating-label\">确认密码</label>\n\t\t\t\t\t<uni-icons class=\"input-icon\" type=\"checkmarkempty\" size=\"18\" color=\"#999\" />\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<view class=\"password-strength\" v-if=\"newPassword\">\n\t\t\t\t<view class=\"strength-bar\" :class=\"getStrengthClass(1)\"></view>\n\t\t\t\t<view class=\"strength-bar\" :class=\"getStrengthClass(2)\"></view>\n\t\t\t\t<view class=\"strength-bar\" :class=\"getStrengthClass(3)\"></view>\n\t\t\t\t<text class=\"strength-text\">{{ strengthText }}</text>\n\t\t\t</view>\n\n\t\t\t<button class=\"submit-btn\" :class=\"{active: isFormValid}\" @click=\"updatePassword\" :disabled=\"!isFormValid\">\n\t\t\t\t{{ global.userInfo.password ? '更新密码' : '设置密码' }}\n\t\t\t</button>\n\t\t</view>\n\n\t\t<view class=\"security-tips\">\n\t\t\t<uni-icons type=\"info\" size=\"16\" color=\"#666\" />\n\t\t\t<text>建议使用8位以上包含字母和数字的组合</text>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\n\timport {\n\t\tref,\n\t\tcomputed\n\t} from 'vue';\n\n\timport {\n\t\twebsiteUrl,\n\t\twechatSignLogin,\n\t\tgetUserInfo,\n\t\tglobal,\n\t} from \"../../../common/config.js\";\n\n\tuni.setNavigationBarTitle({\n\t\ttitle: '设置密码'\n\t})\n\t// 密码表单\n\tlet oldPassword = ref(\"\")\n\tlet newPassword = ref(\"\")\n\tlet newPassword2 = ref(\"\")\n\n\t// 根据当前状态验证表单有效性\n\tconst isFormValid = computed(() => {\n\t\treturn newPassword.value && newPassword2.value && newPassword.value === newPassword2.value\n\t})\n\n\t// 密码强度计算 \t  // 根据密码复杂度返回提示文本\n\tconst strengthText = computed(() => {\n\t\tif (newPassword.value.length < 6) {\n\t\t\treturn '密码过于简单'\n\t\t} else if (newPassword.value.length < 10) {\n\t\t\treturn '密码强度一般'\n\t\t} else {\n\t\t\treturn '密码强度较高'\n\t\t}\n\t})\n\n\t// 强度条样式\n\tconst getStrengthClass = (level) => {\n\t\t// 根据密码强度返回对应样式\n\n\t\tif (newPassword.value.length < 6) {\n\t\t\treturn 'weak'\n\t\t} else if (newPassword.value.length < 10) {\n\t\t\treturn 'medium'\n\t\t} else {\n\t\t\treturn 'strong'\n\t\t}\n\t}\n\n\n\n\t// 修改密码\n\tfunction updatePassword() {\n\t\tif (newPassword.value != newPassword2.value) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '两次密码输入不一致',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\tif ( global.userInfo.password && !oldPassword.value) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请输入原密码',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t\t// /with-state/setting-password\n\t\tuni.request({\n\t\t\turl: websiteUrl.value + '/with-state/setting-password',\n\t\t\tmethod: \"POST\",\n\t\t\theader: {\n\t\t\t\t'Authorization': uni.getStorageSync('token'),\n\t\t\t},\n\t\t\tdata: {\n\t\t\t\told_password: oldPassword.value,\n\t\t\t\tnew_password: newPassword.value\n\t\t\t},\n\t\t\tsuccess: (res) => {\n\t\t\t\tconsole.log(res.data)\n\t\t\t\tif (res.data.status == \"success\") {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '修改成功',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: res.data.msg,\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t}\n\n\n\tgetUserInfo();\n</script>\n\n<style lang=\"less\" scoped>\n\t@primary-color: #65C3D6;\n\t@error-color: #ff5252;\n\t@success-color: #4CAF50;\n\t@bg-color: #f5f7fa;\n\n\t.password-container {\n\t\tpadding: 40rpx;\n\t\tbackground: @bg-color;\n\t\tmin-height: 100vh;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t.form-wrapper {\n\t\tbackground: #fff;\n\t\tborder-radius: 24rpx;\n\t\tpadding: 40rpx;\n\t\tbox-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.04);\n\t}\n\n\t.input-group {\n\t\tmargin-bottom: 40rpx;\n\t}\n\n\t.input-item {\n\t\tmargin-bottom: 48rpx;\n\t\tposition: relative;\n\n\t\t&:last-child {\n\t\t\tmargin-bottom: 0;\n\t\t}\n\t}\n\n\t.input {\n\t\theight: 100rpx;\n\t\tpadding: 0 80rpx 0 40rpx;\n\t\tfont-size: 32rpx;\n\t\tborder: 2rpx solid #e0e0e0;\n\t\tborder-radius: 16rpx;\n\t\ttransition: all 0.3s ease;\n\n\t\t&:focus {\n\t\t\tborder-color: @primary-color;\n\t\t\tbox-shadow: 0 4rpx 12rpx rgba(101, 195, 214, 0.2);\n\n\t\t\t&+.floating-label {\n\t\t\t\ttransform: translateY(-220%);\n\t\t\t\tfont-size: 26rpx;\n\t\t\t\tcolor: @primary-color;\n\t\t\t}\n\t\t}\n\t}\n\n\t.floating-label {\n\t\tposition: absolute;\n\t\tleft: 40rpx;\n\t\ttop: 60%;\n\t\ttransform: translateY(-50%);\n\t\tcolor: #999;\n\t\tfont-size: 32rpx;\n\t\tpointer-events: none;\n\t\ttransition: all 0.3s ease;\n\t\tbackground: #fff;\n\n\t\t.input:not(:placeholder-shown)+&,\n\t\t.input:focus+& {\n\t\t\ttransform: translateY(-220%);\n\t\t\tfont-size: 26rpx;\n\t\t}\n\t}\n\n\t.input-icon {\n\t\tposition: absolute;\n\t\tright: 30rpx;\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t}\n\n\t.password-strength {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 16rpx;\n\t\tmargin: 32rpx 0;\n\n\t\t.strength-bar {\n\t\t\theight: 8rpx;\n\t\t\tflex: 1;\n\t\t\tbackground: #eee;\n\t\t\tborder-radius: 4rpx;\n\t\t\ttransition: all 0.3s ease;\n\n\t\t\t&.weak {\n\t\t\t\tbackground: @error-color;\n\t\t\t}\n\n\t\t\t&.medium {\n\t\t\t\tbackground: #ffb300;\n\t\t\t}\n\n\t\t\t&.strong {\n\t\t\t\tbackground: @success-color;\n\t\t\t}\n\t\t}\n\n\t\t.strength-text {\n\t\t\tfont-size: 26rpx;\n\t\t\tcolor: #666;\n\t\t}\n\t}\n\n\t.submit-btn {\n\t\twidth: 100%;\n\t\theight: 96rpx;\n\t\tbackground: linear-gradient(135deg, #65C3D6 0%, #4CA1AF 100%);\n\t\tcolor: #fff;\n\t\tfont-size: 32rpx;\n\t\tborder-radius: 16rpx;\n\t\tborder: none;\n\t\tposition: relative;\n\t\toverflow: hidden;\n\t\ttransition: all 0.3s ease;\n\t\tline-height: 96rpx;\n\n\n\t\t&:active {\n\t\t\ttransform: scale(0.98);\n\t\t\topacity: 0.9;\n\t\t}\n\n\t\t&.active {\n\t\t\tbox-shadow: 0 8rpx 24rpx rgba(101, 195, 214, 0.3);\n\t\t}\n\n\t\t.loading {\n\t\t\tposition: absolute;\n\t\t\tright: 30rpx;\n\t\t\ttop: 50%;\n\t\t\ttransform: translateY(-50%);\n\t\t\twidth: 32rpx;\n\t\t\theight: 32rpx;\n\t\t\tborder: 3rpx solid #fff;\n\t\t\tborder-top-color: transparent;\n\t\t\tborder-radius: 50%;\n\t\t\tanimation: spin 0.8s linear infinite;\n\t\t}\n\t}\n\n\t.security-tips {\n\t\tmargin-top: 40rpx;\n\t\tpadding: 24rpx;\n\t\tbackground: #fff;\n\t\tborder-radius: 16rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 12rpx;\n\t\tfont-size: 26rpx;\n\t\tcolor: #666;\n\t\t\n\t\t.uni-icons {\n\t\t\tflex: 1;\n\t\t}\n\n\t\ttext {\n\t\t\tflex: 6;\n\t\t}\n\t}\n\n\t@keyframes spin {\n\t\tto {\n\t\t\ttransform: translateY(-50%) rotate(360deg);\n\t\t}\n\t}\n</style>","import MiniProgramPage from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/pages/setting/password/password.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","ref","computed","global","websiteUrl","getUserInfo"],"mappings":";;;;;;;;;;;;;;;;AAkECA,kBAAAA,MAAI,sBAAsB;AAAA,MACzB,OAAO;AAAA,IACT,CAAE;AAED,QAAI,cAAcC,cAAG,IAAC,EAAE;AACxB,QAAI,cAAcA,cAAG,IAAC,EAAE;AACxB,QAAI,eAAeA,cAAG,IAAC,EAAE;AAGzB,UAAM,cAAcC,cAAAA,SAAS,MAAM;AAClC,aAAO,YAAY,SAAS,aAAa,SAAS,YAAY,UAAU,aAAa;AAAA,IACvF,CAAE;AAGD,UAAM,eAAeA,cAAAA,SAAS,MAAM;AACnC,UAAI,YAAY,MAAM,SAAS,GAAG;AACjC,eAAO;AAAA,MACP,WAAU,YAAY,MAAM,SAAS,IAAI;AACzC,eAAO;AAAA,MACV,OAAS;AACN,eAAO;AAAA,MACP;AAAA,IACH,CAAE;AAGD,UAAM,mBAAmB,CAAC,UAAU;AAGnC,UAAI,YAAY,MAAM,SAAS,GAAG;AACjC,eAAO;AAAA,MACP,WAAU,YAAY,MAAM,SAAS,IAAI;AACzC,eAAO;AAAA,MACV,OAAS;AACN,eAAO;AAAA,MACP;AAAA,IACD;AAKD,aAAS,iBAAiB;AACzB,UAAI,YAAY,SAAS,aAAa,OAAO;AAC5CF,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AACD;AAAA,MACA;AACD,UAAKG,cAAM,OAAC,SAAS,YAAY,CAAC,YAAY,OAAO;AACpDH,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AACD;AAAA,MACA;AAEDA,oBAAAA,MAAI,QAAQ;AAAA,QACX,KAAKI,cAAAA,WAAW,QAAQ;AAAA,QACxB,QAAQ;AAAA,QACR,QAAQ;AAAA,UACP,iBAAiBJ,cAAAA,MAAI,eAAe,OAAO;AAAA,QAC3C;AAAA,QACD,MAAM;AAAA,UACL,cAAc,YAAY;AAAA,UAC1B,cAAc,YAAY;AAAA,QAC1B;AAAA,QACD,SAAS,CAAC,QAAQ;AACjBA,wBAAAA,MAAA,MAAA,OAAA,8CAAY,IAAI,IAAI;AACpB,cAAI,IAAI,KAAK,UAAU,WAAW;AACjCA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACZ,CAAM;AAAA,UACN,OAAW;AACNA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO,IAAI,KAAK;AAAA,cAChB,MAAM;AAAA,YACZ,CAAM;AAAA,UACD;AAAA,QACD;AAAA,MACJ,CAAG;AAAA,IAED;AAGDK,kBAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtJD,GAAG,WAAW,eAAe;"}