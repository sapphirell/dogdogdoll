{"version":3,"file":"password.js","sources":["pages/setting/password/password.vue","pages/setting/password/password.vue?type=page"],"sourcesContent":["<template>\n\t<view-logs />\r\n\t<view class=\"password-container\">\r\n\t\t<view class=\"form-wrapper\">\r\n\t\t\t<view v-if=\"global.userInfo.password\" class=\"input-group\">\r\n\t\t\t\t<view class=\"input-item\">\r\n\t\t\t\t\t<input class=\"input\" type=\"password\" placeholder=\" \" v-model=\"oldPassword\" />\r\n\t\t\t\t\t<label class=\"floating-label\">原密码</label>\r\n\t\t\t\t\t<uni-icons class=\"input-icon\" type=\"locked\" size=\"18\" color=\"#999\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"input-item\">\r\n\t\t\t\t\t<input class=\"input\" type=\"password\" placeholder=\" \" v-model=\"newPassword\" />\r\n\t\t\t\t\t<label class=\"floating-label\">新密码</label>\r\n\t\t\t\t\t<uni-icons class=\"input-icon\" type=\"gear\" size=\"18\" color=\"#999\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"input-item\">\r\n\t\t\t\t\t<input class=\"input\" type=\"password\" placeholder=\" \" v-model=\"newPassword2\" />\r\n\t\t\t\t\t<label class=\"floating-label\">确认新密码</label>\r\n\t\t\t\t\t<uni-icons class=\"input-icon\" type=\"checkmarkempty\" size=\"18\" color=\"#999\" />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view v-else class=\"input-group\">\r\n\t\t\t\t<view class=\"input-item\">\r\n\t\t\t\t\t<input class=\"input\" type=\"password\" placeholder=\" \" v-model=\"newPassword\" />\r\n\t\t\t\t\t<label class=\"floating-label\">设置密码</label>\r\n\t\t\t\t\t<uni-icons class=\"input-icon\" type=\"locked\" size=\"18\" color=\"#999\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"input-item\">\r\n\t\t\t\t\t<input class=\"input\" type=\"password\" placeholder=\" \" v-model=\"newPassword2\" />\r\n\t\t\t\t\t<label class=\"floating-label\">确认密码</label>\r\n\t\t\t\t\t<uni-icons class=\"input-icon\" type=\"checkmarkempty\" size=\"18\" color=\"#999\" />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"password-strength\" v-if=\"newPassword\">\r\n\t\t\t\t<view class=\"strength-bar\" :class=\"getStrengthClass(1)\"></view>\r\n\t\t\t\t<view class=\"strength-bar\" :class=\"getStrengthClass(2)\"></view>\r\n\t\t\t\t<view class=\"strength-bar\" :class=\"getStrengthClass(3)\"></view>\r\n\t\t\t\t<text class=\"strength-text\">{{ strengthText }}</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<button class=\"submit-btn\" :class=\"{active: isFormValid}\" @click=\"updatePassword\" :disabled=\"!isFormValid\">\r\n\t\t\t\t{{ global.userInfo.password ? '更新密码' : '设置密码' }}\r\n\t\t\t</button>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"security-tips\">\r\n\t\t\t<uni-icons type=\"info\" size=\"16\" color=\"#666\" />\r\n\t\t\t<text>建议使用8位以上包含字母和数字的组合</text>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\tcomputed\r\n\t} from 'vue';\r\n\r\n\timport {\r\n\t\twebsiteUrl,\r\n\t\twechatSignLogin,\r\n\t\tgetUserInfo,\r\n\t\tglobal,\r\n\t} from \"../../../common/config.js\";\r\n\r\n\tuni.setNavigationBarTitle({\r\n\t\ttitle: '设置密码'\r\n\t})\r\n\t// 密码表单\r\n\tlet oldPassword = ref(\"\")\r\n\tlet newPassword = ref(\"\")\r\n\tlet newPassword2 = ref(\"\")\r\n\r\n\t// 根据当前状态验证表单有效性\r\n\tconst isFormValid = computed(() => {\r\n\t\treturn newPassword.value && newPassword2.value && newPassword.value === newPassword2.value\r\n\t})\r\n\r\n\t// 密码强度计算 \t  // 根据密码复杂度返回提示文本\r\n\tconst strengthText = computed(() => {\r\n\t\tif (newPassword.value.length < 6) {\r\n\t\t\treturn '密码过于简单'\r\n\t\t} else if (newPassword.value.length < 10) {\r\n\t\t\treturn '密码强度一般'\r\n\t\t} else {\r\n\t\t\treturn '密码强度较高'\r\n\t\t}\r\n\t})\r\n\r\n\t// 强度条样式\r\n\tconst getStrengthClass = (level) => {\r\n\t\t// 根据密码强度返回对应样式\r\n\r\n\t\tif (newPassword.value.length < 6) {\r\n\t\t\treturn 'weak'\r\n\t\t} else if (newPassword.value.length < 10) {\r\n\t\t\treturn 'medium'\r\n\t\t} else {\r\n\t\t\treturn 'strong'\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t// 修改密码\r\n\tfunction updatePassword() {\r\n\t\tif (newPassword.value != newPassword2.value) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '两次密码输入不一致',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif ( global.userInfo.password && !oldPassword.value) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请输入原密码',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\t// /with-state/setting-password\r\n\t\tuni.request({\r\n\t\t\turl: websiteUrl + '/with-state/setting-password',\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theader: {\r\n\t\t\t\t'Authorization': uni.getStorageSync('token'),\r\n\t\t\t},\r\n\t\t\tdata: {\r\n\t\t\t\told_password: oldPassword.value,\r\n\t\t\t\tnew_password: newPassword.value\r\n\t\t\t},\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tconsole.log(res.data)\r\n\t\t\t\tif (res.data.status == \"success\") {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '修改成功',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: res.data.msg,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t}\r\n\r\n\r\n\tgetUserInfo();\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t@primary-color: #65C3D6;\r\n\t@error-color: #ff5252;\r\n\t@success-color: #4CAF50;\r\n\t@bg-color: #f5f7fa;\r\n\r\n\t.password-container {\r\n\t\tpadding: 40rpx;\r\n\t\tbackground: @bg-color;\r\n\t\tmin-height: 100vh;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t.form-wrapper {\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 24rpx;\r\n\t\tpadding: 40rpx;\r\n\t\tbox-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.04);\r\n\t}\r\n\r\n\t.input-group {\r\n\t\tmargin-bottom: 40rpx;\r\n\t}\r\n\r\n\t.input-item {\r\n\t\tmargin-bottom: 48rpx;\r\n\t\tposition: relative;\r\n\r\n\t\t&:last-child {\r\n\t\t\tmargin-bottom: 0;\r\n\t\t}\r\n\t}\r\n\r\n\t.input {\r\n\t\theight: 100rpx;\r\n\t\tpadding: 0 80rpx 0 40rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\tborder: 2rpx solid #e0e0e0;\r\n\t\tborder-radius: 16rpx;\r\n\t\ttransition: all 0.3s ease;\r\n\r\n\t\t&:focus {\r\n\t\t\tborder-color: @primary-color;\r\n\t\t\tbox-shadow: 0 4rpx 12rpx rgba(101, 195, 214, 0.2);\r\n\r\n\t\t\t&+.floating-label {\r\n\t\t\t\ttransform: translateY(-220%);\r\n\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\tcolor: @primary-color;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.floating-label {\r\n\t\tposition: absolute;\r\n\t\tleft: 40rpx;\r\n\t\ttop: 60%;\r\n\t\ttransform: translateY(-50%);\r\n\t\tcolor: #999;\r\n\t\tfont-size: 32rpx;\r\n\t\tpointer-events: none;\r\n\t\ttransition: all 0.3s ease;\r\n\t\tbackground: #fff;\r\n\r\n\t\t.input:not(:placeholder-shown)+&,\r\n\t\t.input:focus+& {\r\n\t\t\ttransform: translateY(-220%);\r\n\t\t\tfont-size: 26rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.input-icon {\r\n\t\tposition: absolute;\r\n\t\tright: 30rpx;\r\n\t\ttop: 50%;\r\n\t\ttransform: translateY(-50%);\r\n\t}\r\n\r\n\t.password-strength {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 16rpx;\r\n\t\tmargin: 32rpx 0;\r\n\r\n\t\t.strength-bar {\r\n\t\t\theight: 8rpx;\r\n\t\t\tflex: 1;\r\n\t\t\tbackground: #eee;\r\n\t\t\tborder-radius: 4rpx;\r\n\t\t\ttransition: all 0.3s ease;\r\n\r\n\t\t\t&.weak {\r\n\t\t\t\tbackground: @error-color;\r\n\t\t\t}\r\n\r\n\t\t\t&.medium {\r\n\t\t\t\tbackground: #ffb300;\r\n\t\t\t}\r\n\r\n\t\t\t&.strong {\r\n\t\t\t\tbackground: @success-color;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.strength-text {\r\n\t\t\tfont-size: 26rpx;\r\n\t\t\tcolor: #666;\r\n\t\t}\r\n\t}\r\n\r\n\t.submit-btn {\r\n\t\twidth: 100%;\r\n\t\theight: 96rpx;\r\n\t\tbackground: linear-gradient(135deg, #65C3D6 0%, #4CA1AF 100%);\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 32rpx;\r\n\t\tborder-radius: 16rpx;\r\n\t\tborder: none;\r\n\t\tposition: relative;\r\n\t\toverflow: hidden;\r\n\t\ttransition: all 0.3s ease;\r\n\t\tline-height: 96rpx;\r\n\r\n\r\n\t\t&:active {\r\n\t\t\ttransform: scale(0.98);\r\n\t\t\topacity: 0.9;\r\n\t\t}\r\n\r\n\t\t&.active {\r\n\t\t\tbox-shadow: 0 8rpx 24rpx rgba(101, 195, 214, 0.3);\r\n\t\t}\r\n\r\n\t\t.loading {\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 30rpx;\r\n\t\t\ttop: 50%;\r\n\t\t\ttransform: translateY(-50%);\r\n\t\t\twidth: 32rpx;\r\n\t\t\theight: 32rpx;\r\n\t\t\tborder: 3rpx solid #fff;\r\n\t\t\tborder-top-color: transparent;\r\n\t\t\tborder-radius: 50%;\r\n\t\t\tanimation: spin 0.8s linear infinite;\r\n\t\t}\r\n\t}\r\n\r\n\t.security-tips {\r\n\t\tmargin-top: 40rpx;\r\n\t\tpadding: 24rpx;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 16rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 12rpx;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #666;\n\t\t\n\t\t.uni-icons {\n\t\t\tflex: 1;\n\t\t}\r\n\r\n\t\ttext {\r\n\t\t\tflex: 6;\r\n\t\t}\r\n\t}\r\n\r\n\t@keyframes spin {\r\n\t\tto {\r\n\t\t\ttransform: translateY(-50%) rotate(360deg);\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/pages/setting/password/password.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","ref","computed","global","websiteUrl","getUserInfo"],"mappings":";;;;;;;;;;;;;;;;AAkECA,kBAAAA,MAAI,sBAAsB;AAAA,MACzB,OAAO;AAAA,IACT,CAAE;AAED,QAAI,cAAcC,cAAG,IAAC,EAAE;AACxB,QAAI,cAAcA,cAAG,IAAC,EAAE;AACxB,QAAI,eAAeA,cAAG,IAAC,EAAE;AAGzB,UAAM,cAAcC,cAAAA,SAAS,MAAM;AAClC,aAAO,YAAY,SAAS,aAAa,SAAS,YAAY,UAAU,aAAa;AAAA,IACvF,CAAE;AAGD,UAAM,eAAeA,cAAAA,SAAS,MAAM;AACnC,UAAI,YAAY,MAAM,SAAS,GAAG;AACjC,eAAO;AAAA,MACP,WAAU,YAAY,MAAM,SAAS,IAAI;AACzC,eAAO;AAAA,MACV,OAAS;AACN,eAAO;AAAA,MACP;AAAA,IACH,CAAE;AAGD,UAAM,mBAAmB,CAAC,UAAU;AAGnC,UAAI,YAAY,MAAM,SAAS,GAAG;AACjC,eAAO;AAAA,MACP,WAAU,YAAY,MAAM,SAAS,IAAI;AACzC,eAAO;AAAA,MACV,OAAS;AACN,eAAO;AAAA,MACP;AAAA,IACD;AAKD,aAAS,iBAAiB;AACzB,UAAI,YAAY,SAAS,aAAa,OAAO;AAC5CF,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AACD;AAAA,MACA;AACD,UAAKG,cAAM,OAAC,SAAS,YAAY,CAAC,YAAY,OAAO;AACpDH,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AACD;AAAA,MACA;AAEDA,oBAAAA,MAAI,QAAQ;AAAA,QACX,KAAKI,cAAU,aAAG;AAAA,QAClB,QAAQ;AAAA,QACR,QAAQ;AAAA,UACP,iBAAiBJ,cAAAA,MAAI,eAAe,OAAO;AAAA,QAC3C;AAAA,QACD,MAAM;AAAA,UACL,cAAc,YAAY;AAAA,UAC1B,cAAc,YAAY;AAAA,QAC1B;AAAA,QACD,SAAS,CAAC,QAAQ;AACjBA,wBAAAA,MAAA,MAAA,OAAA,8CAAY,IAAI,IAAI;AACpB,cAAI,IAAI,KAAK,UAAU,WAAW;AACjCA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACZ,CAAM;AAAA,UACN,OAAW;AACNA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO,IAAI,KAAK;AAAA,cAChB,MAAM;AAAA,YACZ,CAAM;AAAA,UACD;AAAA,QACD;AAAA,MACJ,CAAG;AAAA,IAED;AAGDK,kBAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtJD,GAAG,WAAW,eAAe;"}