{"version":3,"file":"setting.js","sources":["pages/setting/setting.vue","pages/setting/setting.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"settings-container\">\r\n\t\t<!-- 统一item结构 -->\r\n\t\t<view v-for=\"(item, index) in menuItems\" :key=\"index\" class=\"menu-item\" @click=\"item.action(item)\">\r\n\t\t\t<text class=\"menu-label\">{{ item.label }}</text>\r\n\t\t\t<view class=\"menu-value\">\r\n\t\t\t\t<text :class=\"item.status ? 'active' : 'inactive'\">{{ item.displayValue }}</text>\r\n\t\t\t\t<image class=\"arrow-icon\" src=\"../../static/right.png\" />\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\tcomputed\r\n\t} from 'vue'\r\n\timport {\r\n\t\twebsiteUrl,\r\n\t\twechatSignLogin,\r\n\t\tgetUserInfo,\r\n\t\tglobal,\n\t\tbindWechat,\r\n\t} from \"../../common/config.js\";\r\n\tuni.setNavigationBarTitle({\r\n\t\ttitle: '设置'\r\n\t});\r\n\r\n\tconst menuItems = computed(() => [{\r\n\t\t\tlabel: '更改用户名',\r\n\t\t\taction: jump2username,\r\n\t\t\tstatus: !!global.userInfo.password,\r\n\t\t\tdisplayValue: global.userInfo.password ? '去修改' : '未设置'\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: '更改密码',\r\n\t\t\taction: jump2password,\r\n\t\t\tstatus: !!global.userInfo.password,\r\n\t\t\tdisplayValue: global.userInfo.password ? '去修改' : '未设置'\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: '绑定手机号',\r\n\t\t\taction: jump2telphone,\r\n\t\t\tstatus: !!global.userInfo.tel_phone, // 修正字段名\r\n\t\t\tdisplayValue: global.userInfo.tel_phone ?\r\n\t\t\t\tglobal.userInfo.tel_phone.replace(/(\\d{3})\\d{4}(\\d{4})/, '$1****$2') : '去绑定'\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: '绑定微信',\r\n\t\t\taction: jump2wechat,\r\n\t\t\tstatus: !!global.userInfo.wechat_open_id,\r\n\t\t\tdisplayValue: global.userInfo.wechat_open_id ? '已绑定' : '去绑定'\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: '检查更新',\r\n\t\t\taction: checkUpdate,\r\n\t\t\tstatus: false,\r\n\t\t\tdisplayValue: '无需更新'\r\n\t\t}\r\n\t])\r\n\r\n\t// 用户信息\r\n\tlet userInfo = ref({})\r\n\r\n\t// 是否需要更新\r\n\tlet needUpdate = ref(false)\r\n\r\n\r\n\t//跳转到密码设置页面\r\n\tfunction jump2password() {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '/pages/setting/password/password'\r\n\t\t})\r\n\t}\r\n\t//跳转到手机号设置页面\r\n\tfunction jump2telphone() {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '/pages/setting/tel_phone/tel_phone'\r\n\t\t})\r\n\t}\r\n\t//跳转到修改用户名\r\n\tfunction jump2username() {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '/pages/setting/username/username'\r\n\t\t})\r\n\t}\r\n\t//绑定微信\r\n\tfunction jump2wechat() {\r\n\t\tif (global.userInfo.wechat_open_id) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '已绑定微信',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\t// 添加实际绑定逻辑\r\n\t\t\tbindWechat()\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tconsole.log('微信绑定成功');\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '微信绑定成功',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.error('微信绑定失败:', err);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '微信绑定失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\t//检查更新\r\n\tfunction checkUpdate() {\r\n\t\t// 获取manifest.json文件的内容\r\n\t\tif (uni.getSystemInfoSync().platform === 'app') {\r\n\t\t\tconst version = plus.runtime.version;\r\n\t\t\tconsole.log('App version from manifest:', version);\r\n\t\t} else {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '您所使用的平台无需更新',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tgetUserInfo();\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t@primary-color: #4cbbd0;\r\n\t@text-color: #333;\r\n\t@secondary-text: #666;\r\n\t@border-color: #eee;\r\n\r\n\t.settings-container {\r\n\t\tpadding: 24rpx;\r\n\t\tbackground: #f8f8f8;\r\n\t\tmin-height: 100vh;\r\n\t}\r\n\r\n\t.menu-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 32rpx;\r\n\t\tmargin-bottom: 24rpx;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 16rpx;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.04);\r\n\t\ttransition: all 0.2s ease;\r\n\r\n\t\t&:active {\r\n\t\t\tbackground: #fafafa;\r\n\t\t\ttransform: scale(0.98);\r\n\t\t}\r\n\t}\r\n\r\n\t.menu-label {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: @text-color;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.menu-value {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 16rpx;\r\n\r\n\t\ttext {\r\n\t\t\tfont-size: 28rpx;\r\n\r\n\t\t\t&.active {\r\n\t\t\t\tcolor: @primary-color;\r\n\t\t\t}\r\n\r\n\t\t\t&.inactive {\r\n\t\t\t\tcolor: @secondary-text;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.arrow-icon {\r\n\t\twidth: 36rpx;\r\n\t\theight: 36rpx;\r\n\t\topacity: 0.6;\r\n\t}\r\n\r\n\t// 统一按钮样式重置\r\n\tbutton {\r\n\t\tbackground: transparent;\r\n\t\tpadding: 0;\r\n\t\tmargin: 0;\r\n\t\tline-height: 1;\r\n\t\tborder-radius: 0;\r\n\r\n\t\t&::after {\r\n\t\t\tborder: none;\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/pages/setting/setting.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","computed","global","ref","bindWechat","getUserInfo"],"mappings":";;;;;;;AAyBCA,kBAAAA,MAAI,sBAAsB;AAAA,MACzB,OAAO;AAAA,IACT,CAAE;AAED,UAAM,YAAYC,cAAQ,SAAC,MAAM;AAAA,MAAC;AAAA,QAChC,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,QAAQ,CAAC,CAACC,qBAAO,SAAS;AAAA,QAC1B,cAAcA,cAAAA,OAAO,SAAS,WAAW,QAAQ;AAAA,MACjD;AAAA,MACD;AAAA,QACC,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,QAAQ,CAAC,CAACA,qBAAO,SAAS;AAAA,QAC1B,cAAcA,cAAAA,OAAO,SAAS,WAAW,QAAQ;AAAA,MACjD;AAAA,MACD;AAAA,QACC,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,QAAQ,CAAC,CAACA,qBAAO,SAAS;AAAA;AAAA,QAC1B,cAAcA,cAAAA,OAAO,SAAS,YAC7BA,cAAM,OAAC,SAAS,UAAU,QAAQ,uBAAuB,UAAU,IAAI;AAAA,MACxE;AAAA,MACD;AAAA,QACC,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,QAAQ,CAAC,CAACA,qBAAO,SAAS;AAAA,QAC1B,cAAcA,cAAAA,OAAO,SAAS,iBAAiB,QAAQ;AAAA,MACvD;AAAA,MACD;AAAA,QACC,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,QAAQ;AAAA,QACR,cAAc;AAAA,MACd;AAAA,IACH,CAAE;AAGcC,kBAAAA,IAAI,CAAA,CAAE;AAGJA,kBAAAA,IAAI,KAAK;AAI1B,aAAS,gBAAgB;AACxBH,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACR,CAAG;AAAA,IACD;AAED,aAAS,gBAAgB;AACxBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACR,CAAG;AAAA,IACD;AAED,aAAS,gBAAgB;AACxBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACR,CAAG;AAAA,IACD;AAED,aAAS,cAAc;AACtB,UAAIE,cAAM,OAAC,SAAS,gBAAgB;AACnCF,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AAAA,MACJ,OAAS;AAENI,iCAAY,EACV,KAAK,MAAM;AACXJ,wBAAAA,sDAAY,QAAQ;AACpBA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACZ,CAAM;AAAA,QACN,CAAK,EACA,MAAM,SAAO;AACbA,iFAAc,WAAW,GAAG;AAC5BA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACZ,CAAM;AAAA,QACN,CAAK;AAAA,MACF;AAAA,IACD;AAED,aAAS,cAAc;AAEtB,UAAIA,oBAAI,oBAAoB,aAAa,OAAO;AAC/C,cAAM,UAAU,KAAK,QAAQ;AAC7BA,sBAAA,MAAA,MAAA,OAAA,oCAAY,8BAA8B,OAAO;AAAA,MACpD,OAAS;AACNA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AAAA,MACD;AAAA,IACD;AAEDK,kBAAAA;;;;;;;;;;;;;;;;;;AC9HD,GAAG,WAAW,eAAe;"}