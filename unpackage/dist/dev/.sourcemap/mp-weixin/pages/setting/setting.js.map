{"version":3,"file":"setting.js","sources":["pages/setting/setting.vue","pages/setting/setting.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"settings-container\">\n\t\t<!-- 统一item结构 -->\n\t\t<view \n\t\t\tv-for=\"(item, index) in menuItems\" \n\t\t\t:key=\"index\"\n\t\t\tclass=\"menu-item\"\n\t\t\t@click=\"item.action(item)\"\n\t\t>\n\t\t\t<text class=\"menu-label\">{{ item.label }}</text>\n\t\t\t<view class=\"menu-value\">\n\t\t\t\t<text :class=\"item.status ? 'active' : 'inactive'\">{{ item.displayValue }}</text>\n\t\t\t\t<image class=\"arrow-icon\" src=\"../../static/right.png\" />\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\r\n\r\n<script setup>\r\n\timport { ref, computed } from 'vue'\r\n\timport {\r\n\t\twebsiteUrl,\r\n\t\twechatSignLogin,\r\n\t\tgetUserInfo,\r\n\t\tglobal,\r\n\t} from \"../../common/config.js\";\r\n\tuni.setNavigationBarTitle({\r\n\t\ttitle: '设置'\r\n\t});\n\t\n\tconst menuItems = computed(() => [\n\t  {\n\t    label: '更改用户名',\n\t    action: jump2username,\n\t    status: !!global.userInfo.password,\n\t    displayValue: global.userInfo.password ? '去修改' : '未设置'\n\t  },\n\t  {\n\t    label: '更改密码',\n\t    action: jump2password,\n\t    status: !!global.userInfo.password,\n\t    displayValue: global.userInfo.password ? '去修改' : '未设置'\n\t  },\n\t  {\n\t  \tlabel: '绑定手机号',\n\t  \taction: jump2telphone,\n\t  \tstatus: !!global.userInfo.tel_phone,  // 修正字段名\n\t  \tdisplayValue: global.userInfo.tel_phone ? \n\t  \t\tglobal.userInfo.tel_phone.replace(/(\\d{3})\\d{4}(\\d{4})/, '$1****$2') : \n\t  \t\t'去绑定'\n\t  },\n\t  {\n\t    label: '绑定微信',\n\t    action: jump2wechat,\n\t    status: !!global.userInfo.wechat_open_id,\n\t    displayValue: global.userInfo.wechat_open_id ? '已绑定' : '去绑定'\n\t  },\n\t  {\n\t    label: '检查更新',\n\t    action: checkUpdate,\n\t    status: false,\n\t    displayValue: '无需更新'\n\t  }\n\t])\r\n\r\n\t// 用户信息\r\n\tlet userInfo = ref({})\r\n\r\n\t// 是否需要更新\n\tlet needUpdate = ref(false)\r\n\r\n\r\n\t//跳转到密码设置页面\r\n\tfunction jump2password() {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '/pages/setting/password/password'\r\n\t\t})\r\n\t}\r\n\t//跳转到手机号设置页面\r\n\tfunction jump2telphone() {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '/pages/setting/tel_phone/tel_phone'\r\n\t\t})\r\n\t}\n\t//跳转到修改用户名\n\tfunction jump2username() {\n\t\tuni.navigateTo({\n\t\t\turl: '/pages/setting/username/username'\n\t\t})\n\t}\r\n\t//绑定微信\r\n\tfunction jump2wechat() {\n\t\tif (global.userInfo.wechat_open_id) {\n\t\t\tuni.showToast({ title: '已绑定微信', icon: 'none' })\n\t\t} else {\n\t\t\t// 添加实际绑定逻辑\n\t\t\twechatSignLogin().then(res => {\n\t\t\t\tuni.showToast({ title: '绑定成功' })\n\t\t\t\tgetUserInfo()\n\t\t\t})\n\t\t}\n\t}\n\t//检查更新\n\tfunction checkUpdate() {\n\t\t// 获取manifest.json文件的内容\n\t\tif (uni.getSystemInfoSync().platform === 'app') {\n\t\t  const version = plus.runtime.version;\n\t\t  console.log('App version from manifest:', version);\n\t\t} else {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '您所使用的平台无需更新',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t}\n\t} \r\n\r\n\tgetUserInfo();\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t@primary-color: #4cbbd0;\n\t@text-color: #333;\n\t@secondary-text: #666;\n\t@border-color: #eee;\n\t\n\t.settings-container {\n\t\tpadding: 24rpx;\n\t\tbackground: #f8f8f8;\n\t\tmin-height: 100vh;\n\t}\n\t\n\t.menu-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding: 32rpx;\n\t\tmargin-bottom: 24rpx;\n\t\tbackground: #fff;\n\t\tborder-radius: 16rpx;\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0,0,0,0.04);\n\t\ttransition: all 0.2s ease;\n\t\t\n\t\t&:active {\n\t\t\tbackground: #fafafa;\n\t\t\ttransform: scale(0.98);\n\t\t}\n\t}\n\t\n\t.menu-label {\n\t\tfont-size: 30rpx;\n\t\tcolor: @text-color;\n\t\tfont-weight: 500;\n\t}\n\t\n\t.menu-value {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 16rpx;\n\t\t\n\t\ttext {\n\t\t\tfont-size: 28rpx;\n\t\t\t&.active {\n\t\t\t\tcolor: @primary-color;\n\t\t\t}\n\t\t\t&.inactive {\n\t\t\t\tcolor: @secondary-text;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t.arrow-icon {\n\t\twidth: 36rpx;\n\t\theight: 36rpx;\n\t\topacity: 0.6;\n\t}\n\t\n\t// 统一按钮样式重置\n\tbutton {\n\t\tbackground: transparent;\n\t\tpadding: 0;\n\t\tmargin: 0;\n\t\tline-height: 1;\n\t\tborder-radius: 0;\n\t\t\n\t\t&::after {\n\t\t\tborder: none;\n\t\t}\n\t}\r\n</style>","import MiniProgramPage from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/pages/setting/setting.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","computed","global","ref","wechatSignLogin","getUserInfo"],"mappings":";;;;;;;AA0BCA,kBAAAA,MAAI,sBAAsB;AAAA,MACzB,OAAO;AAAA,IACT,CAAE;AAED,UAAM,YAAYC,cAAAA,SAAS,MAAM;AAAA,MAC/B;AAAA,QACE,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,QAAQ,CAAC,CAACC,qBAAO,SAAS;AAAA,QAC1B,cAAcA,cAAAA,OAAO,SAAS,WAAW,QAAQ;AAAA,MAClD;AAAA,MACD;AAAA,QACE,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,QAAQ,CAAC,CAACA,qBAAO,SAAS;AAAA,QAC1B,cAAcA,cAAAA,OAAO,SAAS,WAAW,QAAQ;AAAA,MAClD;AAAA,MACD;AAAA,QACC,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,QAAQ,CAAC,CAACA,qBAAO,SAAS;AAAA;AAAA,QAC1B,cAAcA,cAAAA,OAAO,SAAS,YAC7BA,cAAAA,OAAO,SAAS,UAAU,QAAQ,uBAAuB,UAAU,IACnE;AAAA,MACD;AAAA,MACD;AAAA,QACE,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,QAAQ,CAAC,CAACA,qBAAO,SAAS;AAAA,QAC1B,cAAcA,cAAAA,OAAO,SAAS,iBAAiB,QAAQ;AAAA,MACxD;AAAA,MACD;AAAA,QACE,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,QAAQ;AAAA,QACR,cAAc;AAAA,MACf;AAAA,IACJ,CAAE;AAGcC,kBAAAA,IAAI,CAAA,CAAE;AAGJA,kBAAAA,IAAI,KAAK;AAI1B,aAAS,gBAAgB;AACxBH,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACR,CAAG;AAAA,IACD;AAED,aAAS,gBAAgB;AACxBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACR,CAAG;AAAA,IACD;AAED,aAAS,gBAAgB;AACxBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACR,CAAG;AAAA,IACD;AAED,aAAS,cAAc;AACtB,UAAIE,cAAM,OAAC,SAAS,gBAAgB;AACnCF,sBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,QAAQ;AAAA,MACjD,OAAS;AAENI,sCAAiB,EAAC,KAAK,SAAO;AAC7BJ,wBAAAA,MAAI,UAAU,EAAE,OAAO,OAAM,CAAE;AAC/BK,oCAAa;AAAA,QACjB,CAAI;AAAA,MACD;AAAA,IACD;AAED,aAAS,cAAc;AAEtB,UAAIL,oBAAI,oBAAoB,aAAa,OAAO;AAC9C,cAAM,UAAU,KAAK,QAAQ;AAC7BA,6EAAY,8BAA8B,OAAO;AAAA,MACrD,OAAS;AACNA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AAAA,MACD;AAAA,IACD;AAEDK,kBAAAA;;;;;;;;;;;;;;;;;;ACnHD,GAAG,WAAW,eAAe;"}