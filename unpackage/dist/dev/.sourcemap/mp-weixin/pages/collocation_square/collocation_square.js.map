{"version":3,"file":"collocation_square.js","sources":["pages/collocation_square/collocation_square.vue","pages/collocation_square/collocation_square.vue?type=page"],"sourcesContent":["<template>\r\n\t<meta name=\"theme-color\" content=\"#f5f5f5\">\r\n\t</meta>\r\n\t<common-page head_color=\"#f5f5f5\">\r\n\r\n\t\t<view class=\"container\">\r\n\t\t\t<!-- <view v-if=\"miniProgram\" style=\"height: 40rpx;\"></view> -->\r\n\t\t\t<!-- 筛选栏 -->\r\n\t\t\t<view class=\"filter-bar\" :style=\"miniProgram ? 'width:500rpx' : ''\">\r\n\t\t\t\t<view class=\"filter-tags\" @tap=\"showFilter\">\r\n\t\t\t\t\t<view class=\"selected-goods\">\r\n\t\t\t\t\t\t<view v-for=\"goods in filterGoods\" :key=\"goods.goods_id\" class=\"tag\" @tap.stop=\"(e) => removeGood(goods.goods_id, e)\">\r\n\t\t\t\t\t\t\t{{ goods.goods_name }}\r\n\t\t\t\t\t\t\t<text class=\"remove\">×</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text v-if=\"!filterGoods.length\" class=\"tip\">当前无筛选条件</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<button class=\"submit-btn\" @tap=\"fetchCollocations(true)\">筛选</button>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 搭配列表 -->\r\n\t\t\t<scroll-view class=\"card-list\" scroll-y @scrolltolower=\"loadMore\" :show-scrollbar=\"false\" >\r\n\t\t\t\t<view class=\"cards-container\" :style=\"{ height: containerHeight + 'px' }\">\r\n\t\t\t\t\t<view v-for=\"(item, index) in collocationList\" :key=\"item.collocation_id\" class=\"card\"\r\n\t\t\t\t\t\t:id=\"'card-' + index\" :style=\"cardStyle(index)\"\r\n\t\t\t\t\t\t@tap=\"jump2collectionDetail(item.collocation_id, item.origin )\">\n\t\t\t\t\t\t\n\t\t\t\t\t\t  <view class=\"user-info\" @tap.stop=\"jumpToUserPage(item.uid)\">\n\t\t\t\t\t\t    <image :src=\"item.avatar || '/default_avatar.jpg'\" class=\"avatar\" mode=\"aspectFill\" />\n\t\t\t\t\t\t    <view class=\"user-meta\">\n\t\t\t\t\t\t      <text class=\"username\">{{ getUserName(item.username) }}</text>\n\t\t\t\t\t\t      <view class=\"like-count\">\n\t\t\t\t\t\t        <uni-icons type=\"hand-up\" size=\"18\" color=\"#5f85a3\"></uni-icons>\n\t\t\t\t\t\t        <text style=\"margin: 0 5rpx;color: #5f85a3;\"> {{ item.like_count }}</text>\n\t\t\t\t\t\t      </view>\n\t\t\t\t\t\t    </view>\n\t\t\t\t\t\t  </view>\n\t\t\t\t\t\t  \r\n\t\t\t\t\t\t<image v-if=\"item.image_urls?.length > 0\" :src=\"item.image_urls[0]\" mode=\"aspectFill\" class=\"card-image\" lazy-load />\r\n\t\t\t\t\t\t<view class=\"card-content\">\r\n\t\t\t\t\t\t\t<text class=\"title\">{{ item.title }}</text>\r\n\t\t\t\t\t\t\t<text class=\"desc\">{{ item.content }}</text>\r\n\t\t\t\t\t\t\t<view class=\"goods-tags\">\r\n\t\t\t\t\t\t\t\t<view class=\"tag-box\" v-for=\"(rel, index) in item.relation_list\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"goods-tag\">\r\n\t\t\t\t\t\t\t\t\t\t{{ rel.relation_goods_name || '未命名商品' }}\r\n\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 加载状态 -->\r\n\t\t\t\t<view class=\"loading-state\">\r\n\t\t\t\t\t<text v-if=\"loading\">加载中...</text>\r\n\t\t\t\t\t<text v-if=\"noMore\" class=\"no-more\">没有更多了</text>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\r\n\t\t\t<!-- 筛选弹窗 -->\r\n\t\t\t<common-modal v-model:visible=\"showFilterModal\" top=\"0\" width=\"100%\" height=\"100%\">\n\t\t\t\t<view class=\"modal-mask\" @tap.stop=\"closeFilter\"></view>\r\n\t\t\t\t<view class=\"filter-modal\">\r\n\t\t\t\t\t<view class=\"modal-header\" :style=\"miniProgram ? 'margin-top:60rpx' : 'margin-top:0rpx'\">\r\n\t\t\t\t\t\t<text class=\"title\">筛选看想要的娃物搭配吧！</text>\r\n\t\t\t\t\t\t<text class=\"close\" @tap=\"closeFilter\">×</text>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 商品搜索组件 -->\r\n\t\t\t\t\t<goods-search mode=\"fill\" @select=\"handleGoodsSelect\" :background=\"'#f8f8f8'\" :width=\"'100%'\" />\r\n\r\n\t\t\t\t\t<!-- 已选商品展示 -->\r\n\t\t\t\t\t<view class=\"selected-goods\">\r\n\t\t\t\t\t\t<view v-for=\"goods in filterGoods\" :key=\"goods.goods_id\" class=\"goods-tag\"  @tap.stop=\"(e) => removeGood(goods.goods_id, e)\">\r\n\t\t\t\t\t\t\t{{ goods.goods_name }}\r\n\t\t\t\t\t\t\t<text class=\"remove\" >×</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"action-btns\">\r\n\t\t\t\t\t\t<button class=\"btn reset\" @tap=\"resetFilter\">重置</button>\r\n\t\t\t\t\t\t<button class=\"btn confirm\" @tap=\"applyFilter\">应用筛选</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</common-modal>\r\n\t\t</view>\r\n\t</common-page>\r\n\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\treactive,\r\n\t\tonMounted,\r\n\t\tnextTick,\r\n\t\tgetCurrentInstance\r\n\t} from 'vue'\r\n\timport {\r\n\t\twebsiteUrl\r\n\t} from '../../common/config.js'\r\n\r\n\t// 响应式数据\r\n\tconst collocationList = ref([])\r\n\tconst loading = ref(false)\r\n\tconst noMore = ref(false)\r\n\tconst currentPage = ref(1)\r\n\tconst pageSize = 10\r\n\r\n\tconst containerHeight = ref(0)\r\n\tconst cardWidth = ref(0)\r\n\tconst columnsHeight = reactive([0, 0]) // 记录两列高度\r\n\r\n\t// 筛选相关\r\n\tconst showFilterModal = ref(false)\r\n\tconst filterBrand = ref('')\r\n\tconst goodsOptions = ref([])\r\n\tconst instance = getCurrentInstance()\r\n\r\n\tconst selectedBrand = ref(null)\r\n\tconst filterGoods = ref([]) // 现在存储的是 {goods_id, goods_name} 对象数组\r\n\tconst tempSelectGoods = ref(null) // 临时存储选择的商品\r\n\r\n\t// 是否小程序\r\n\tconst miniProgram = process.env.VUE_APP_PLATFORM === 'mp-weixin'\r\n\r\n\r\n\t// 计算卡片样式\r\n\tconst cardStyle = (index) => {\r\n\t\tconst item = collocationList.value[index]\r\n\t\tif (!item.position) return {}\r\n\t\treturn {\r\n\t\t\tleft: `${item.position.left}px`,\r\n\t\t\ttop: `${item.position.top}px`,\r\n\t\t\twidth: `${cardWidth.value}px`\r\n\t\t}\r\n\t}\r\n\r\n\t// 计算布局逻辑\r\n\tconst calculateLayout = (instance) => {\r\n\t\t// 获取组件实例的正确方式\r\n\t\tconsole.log(\"进入计算布局逻辑\")\r\n\t\tif (!instance) {\r\n\t\t\tconsole.log(\"无法获取instance\")\r\n\t\t\treturn\r\n\t\t}\r\n\t\tconsole.log(\"获取成功\")\r\n\t\tif (!collocationList.value) {\r\n\t\t\tconsole.log(\"无列表数据，不需要计算布局\")\r\n\t\t\treturn\r\n\t\t}\r\n\t\tconsole.log(\"获取成功，准备createSelectorQuery\")\r\n\t\tconsole.log(instance)\r\n\t\tconst query = uni.createSelectorQuery().in(instance.proxy)\r\n\t\tconsole.log(\"获取到query\")\r\n\t\t// 收集所有查询任务\r\n\t\tconst tasks = collocationList.value.map((_, index) => {\r\n\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\tquery.select(`#card-${index}`).boundingClientRect(rect => {\r\n\t\t\t\t\tresolve({\r\n\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\trect\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\t// 统一执行查询\r\n\t\tquery.exec(async () => {\r\n\t\t\tconsole.log(\"进入Query\")\r\n\t\t\t// 重置列高\r\n\t\t\tcolumnsHeight[0] = 0\r\n\t\t\tcolumnsHeight[1] = 0\r\n\r\n\t\t\t// 按顺序处理所有查询结果\r\n\t\t\tconst results = await Promise.all(tasks)\r\n\t\t\tif (!results.length) {\r\n\t\t\t\tconsole.warn('未查询到任何卡片元素');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tresults.forEach(({\r\n\t\t\t\tindex,\r\n\t\t\t\trect\r\n\t\t\t}) => {\r\n\t\t\t\tif (!rect) {\r\n\t\t\t\t\tconsole.error(`卡片${index}元素查询失败`);\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst item = collocationList.value[index]\r\n\t\t\t\tconst colIdx = columnsHeight[0] <= columnsHeight[1] ? 0 : 1\r\n\t\t\t\tconst left = colIdx * (cardWidth.value + 10)\r\n\t\t\t\tconst top = columnsHeight[colIdx] + 10\r\n\r\n\t\t\t\tcolumnsHeight[colIdx] = top + rect.height\r\n\t\t\t\titem.position = {\r\n\t\t\t\t\tleft,\r\n\t\t\t\t\ttop\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\t// 更新容器高度\r\n\t\t\tcontainerHeight.value = Math.max(...columnsHeight) + 20 // 添加安全边距\r\n\t\t})\r\n\t}\r\n\r\n\r\n\t// 初始化卡片宽度\r\n\tonMounted(() => {\r\n\t\tconst systemInfo = uni.getSystemInfoSync()\r\n\t\tconst padding = 30 // 容器左右padding总和（px）\r\n\t\tcardWidth.value = (systemInfo.windowWidth - padding) / 2\r\n\t})\r\n\r\n\t// 获取搭配列表\r\n\tconst fetchCollocations = async (reset = false) => {\r\n\t\tif (reset) {\r\n\t\t\tcollocationList.value = [];\r\n\t\t\tcurrentPage.value = 1; // 重置页码\r\n\t\t\tnoMore.value = false; // 重置没有更多数据状态\r\n\t\t\tloading.value = false; // 重置加载状态\r\n\t\t}\r\n\t\tif (loading.value || noMore.value) {\r\n\t\t\tconsole.log(\"正在加载或没有更多数据，停止请求\")\r\n\t\t\treturn\r\n\t\t};\r\n\r\n\t\ttry {\r\n\t\t\tloading.value = true;\r\n\t\t\t// 构造请求参数\r\n\t\t\tconst params = {\r\n\t\t\t\tpage: currentPage.value,\r\n\t\t\t\tpage_size: pageSize,\r\n\t\t\t\tfilter_goods_id_list: filterGoods.value.map(g => g.goods_id)\r\n\t\t\t};\r\n\r\n\t\t\t// 添加调试信息\r\n\t\t\tconsole.log('请求参数:', JSON.stringify(params, null, 2));\r\n\r\n\t\t\tconst res = await uni.request({\r\n\t\t\t\turl: `${websiteUrl}/collocation-list`,\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: params,\r\n\t\t\t\theader: {\r\n\t\t\t\t\t'content-type': 'application/json' // 确保使用JSON格式\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tconsole.log('接口响应:', res);\r\n\r\n\t\t\tif (res.data.status === 'success') {\r\n\t\t\t\t  // 添加安全解构\n\t\t\t\t  const data = res.data.data || {}\n\t\t\t\t  const newItems = Array.isArray(data.collocation_relation_list) \n\t\t\t\t    ? data.collocation_relation_list \n\t\t\t\t    : []\n\t\t\t\t\n\t\t\t\t  collocationList.value = reset \n\t\t\t\t    ? newItems \n\t\t\t\t    : [...collocationList.value, ...newItems]\n\t\t\t\t\n\t\t\t\t  noMore.value = newItems.length < pageSize\n\t\t\t\t  currentPage.value++\n\t\t\t\t\n\t\t\t\t  // 添加空数据提示\n\t\t\t\t  if (reset && newItems.length === 0) {\n\t\t\t\t    uni.showToast({\n\t\t\t\t      title: '暂无相关搭配',\n\t\t\t\t      icon: 'none'\n\t\t\t\t    })\n\t\t\t\t  }\n\t\t\t\t\n\t\t\t\t\r\n\t\t\t\tconsole.log(\"等待next tick\")\r\n\t\t\t\tawait nextTick()\r\n\t\t\t\tconsole.log(\"等待完成\")\r\n\t\t\t\tcalculateLayout(instance)\r\n\t\t\t\t// 500ms 后再运行一次计算布局\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tconsole.log(\"二次计算布局\")\r\n\t\t\t\t\tcalculateLayout(instance)\r\n\t\t\t\t}, 500)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('请求失败:', error);\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '加载失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t} finally {\r\n\t\t\tloading.value = false;\r\n\t\t}\r\n\t};\r\n\r\n\t// 筛选处理\r\n\tconst showFilter = () => {\r\n\t\tshowFilterModal.value = true;\r\n\t};\r\n\r\n\t// 品牌选择处理\r\n\tconst handleBrandSelect = (brandId, brandName) => {\r\n\t\tselectedBrand.value = {\r\n\t\t\tid: brandId,\r\n\t\t\tname: brandName\r\n\t\t}\r\n\t\tfilterBrand.value = brandName\r\n\t\t// filterGoods.value = [] // 切换品牌时清空已选商品\r\n\t\tif (brandId) {\r\n\t\t\tloadGoodsOptions(brandId)\r\n\t\t}\r\n\t}\r\n\r\n\t// 加载商品选项\r\n\tconst loadGoodsOptions = async (brandId) => {\r\n\t\ttry {\r\n\t\t\tconst res = await uni.request({\r\n\t\t\t\turl: `${websiteUrl}/goods-name-list?id=${brandId}`,\r\n\t\t\t\tmethod: 'GET'\r\n\t\t\t})\r\n\t\t\tconsole.log('商品列表:', res.data)\r\n\t\t\tif (res.data.status === 'success') {\r\n\t\t\t\tgoodsOptions.value = res.data.data\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('加载商品失败:', error)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleGoodsSelect = (goods) => {\r\n\t\tconsole.log(\"选择商品:\", goods)\r\n\t\tif (!goods?.id) return;\r\n\r\n\t\t// 转换数据结构\r\n\t\tconst newGoods = {\r\n\t\t\tgoods_id: goods.id,\r\n\t\t\tgoods_name: `${goods.brand_name ? goods.brand_name + '·' : ''}${goods.name}`\r\n\t\t};\r\n\r\n\t\t// 检查重复\r\n\t\tconst exists = filterGoods.value.some(\r\n\t\t\titem => item.goods_id === newGoods.goods_id\r\n\t\t);\r\n\r\n\t\tif (!exists) {\r\n\t\t\t// 使用解构赋值触发响应式更新\r\n\t\t\tfilterGoods.value = [...filterGoods.value, newGoods];\r\n\t\t}\r\n\r\n\t\t// 强制更新视图（可选）\r\n\t\t// await nextTick(); \r\n\r\n\t};\n\t\n\tconst onShareAppMessage = () => ({\n\t\ttitle: 'BJD娃圈你想知道的这里都有~',\n\t\tpath: '/pages/news/news',\n\t\tsuccess(res) {\n\t\t\tconsole.log('分享成功', res)\n\t\t},\n\t\tfail(err) {\n\t\t\tconsole.log('分享失败', err)\n\t\t},\n\t\tmp: {\n\t\t\twxpath: '/pages/index/index.html'\n\t\t}\n\t})\r\n\r\n\t// 应用筛选\r\n\tconst applyFilter = async () => {\r\n\t\tshowFilterModal.value = false;\r\n\t\t// 强制重置并加载第一页\r\n\t\tawait fetchCollocations(true);\r\n\t};\r\n\t// 关闭弹窗时清空临时选择\r\n\tconst closeFilter = () => {\r\n\t\tshowFilterModal.value = false;\r\n\t};\r\n\r\n\r\n\t// 移除单个商品\r\n\tconst removeGood = (goodsId,event) => {\r\n\t\t// 阻止事件冒泡\r\n\t  event?.stopPropagation?.()  // 安全调用\n\t  filterGoods.value = filterGoods.value.filter(g => g.goods_id !== goodsId)\n\t  noMore.value = false\n\t  fetchCollocations(true)\r\n\t}\r\n\t// 重置筛选\r\n\tconst resetFilter = () => {\r\n\t\tselectedBrand.value = null\r\n\t\tfilterBrand.value = ''\r\n\t\tfilterGoods.value = []\r\n\t\tgoodsOptions.value = []\r\n\t}\r\n\r\n\t// 跳转到搭配\r\n\tfunction jump2collectionDetail(collocation_id, origin) {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '/pages/collocation_share/collocation_share?collocation_id=' + collocation_id + '&origin=' +\r\n\t\t\t\torigin\r\n\t\t})\r\n\t}\r\n\r\n\t// 确认筛选\r\n\tconst confirmFilter = async () => {\r\n\t\tfilterGoods.value.push(tempSelectGoods.value)\r\n\t\tshowFilterModal.value = false\r\n\t\tnoMore.value = false\r\n\t\tawait fetchCollocations(true)\r\n\t}\r\n\r\n\t// 分页加载\r\n\tconst loadMore = () => {\r\n\t\tif (!noMore.value) fetchCollocations()\r\n\t}\r\n\r\n\t// 跳转详情\r\n\tconst navigateToDetail = (item) => {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: `/pages/collocation_share/collocation_share?collocation_id=${item.collocation_id}&origin=${item.origin}`\r\n\t\t})\r\n\t}\n\t\n\tconst jumpToUserPage = (uid) => {\n\t  uni.navigateTo({\n\t    url: `/pages/user_page/user_page?uid=${uid}`\n\t  })\n\t}\n\t\n\t// 临时用户名缓存（实际应通过接口获取）\n\tconst getUserName = (name) => {\n\t  // 这里可以替换为真实的用户名获取逻辑\n\t  return name.length > 10 ? `${name.toString().slice(-8)}...` : name\n\t}\n\t\r\n\r\n\t// 初始化加载\r\n\tonMounted(fetchCollocations)\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t$primary-color: #a6e9f7;\r\n\t$hover-color: #1ed1e1;\r\n\t$border-color: #e6e6e6;\r\n\t$radius: 8px;\r\n\r\n\ttext {\r\n\t\tfont-size: 22rpx;\r\n\t}\r\n\r\n\t.container {\r\n\t\tpadding: 20rpx;\r\n\t\tbackground: #f5f5f5;\r\n\t\t// padding-top: 50rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.filter-bar {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 10rpx 20rpx;\r\n\t\tbackground: #fff;\r\n\t\tfont-size: 22rpx;\r\n\t\tborder-radius: 16rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\r\n\r\n\t\t.filter-tags {\r\n\t\t\tflex: 1;\r\n\r\n\t\t\t.tag {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\tpadding: 8rpx 16rpx;\r\n\t\t\t\tbackground: #f0f2f5;\r\n\t\t\t\tborder-radius: 8rpx;\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tcolor: #666;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t.tip {\r\n\t\t\t\tcolor: #999;\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.filter-btn {\r\n\t\t\twidth: 120rpx;\r\n\t\t\theight: 40rpx;\r\n\t\t\tline-height: 40rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tbackground: #007aff;\r\n\t\t\tcolor: white;\r\n\t\t\tborder-radius: 8rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.card-list {\r\n\t\theight: calc(100vh - 160rpx);\r\n\r\n\r\n\t\t.cards-container {\r\n\t\t\tposition: relative;\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\r\n\t\t.card {\r\n\t\t\tposition: absolute;\r\n\t\t\tbackground: white;\r\n\t\t\tborder-radius: 16rpx;\r\n\t\t\tmargin-bottom: 20rpx;\r\n\t\t\toverflow: hidden;\r\n\t\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\r\n\t\t\twidth: 330rpx;\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tmargin: 0rpx;\r\n\r\n\t\t\t//顶部对齐\r\n\t\t\tvertical-align: top;\r\n\t\t\ttransition: top 0.3s ease, left 0.3s ease;\r\n\r\n\t\t\t.card-image {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 400rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.card-content {\r\n\t\t\t\tpadding: 24rpx;\r\n\r\n\t\t\t\t.title {\r\n\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t\tfont-weight: 500;\r\n\t\t\t\t\tcolor: #515151;\r\n\t\t\t\t\tmargin-bottom: 16rpx;\r\n\t\t\t\t\tdisplay: -webkit-box;\r\n\t\t\t\t\t-webkit-box-orient: vertical;\r\n\t\t\t\t\t-webkit-line-clamp: 1;\r\n\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\twhite-space: normal;\r\n\t\t\t\t\ttext-overflow: ellipsis;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.desc {\r\n\t\t\t\t\tdisplay: -webkit-box;\r\n\t\t\t\t\t-webkit-box-orient: vertical;\r\n\t\t\t\t\t-webkit-line-clamp: 2;\r\n\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\tfont-size: 22rpx;\r\n\t\t\t\t\tcolor: #666;\r\n\t\t\t\t\tline-height: 1.5;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.goods-tags {\r\n\t\t\t\t\tmargin-top: 20rpx;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tflex-wrap: wrap;\r\n\t\t\t\t\tgap: 12rpx;\r\n\r\n\t\t\t\t\t.tag-box {\r\n\t\t\t\t\t\tpadding: 4rpx 15rpx;\r\n\t\t\t\t\t\tbackground: #f0f2f5;\r\n\t\t\t\t\t\tborder-radius: 8rpx;\r\n\r\n\t\t\t\t\t\t.goods-tag {\r\n\t\t\t\t\t\t\tline-height: 20rpx;\r\n\t\t\t\t\t\t\tfont-size: 20rpx;\r\n\t\t\t\t\t\t\tcolor: #666;\r\n\t\t\t\t\t\t\tmax-width: 110rpx;\r\n\t\t\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t}\r\n\t\t\t}\n\t\t\t// 用户信息\n\t\t\t.user-info {\n\t\t\t    display: flex;\n\t\t\t    align-items: center;\n\t\t\t    padding: 20rpx 24rpx 0;\n\t\t\t    margin-bottom: 16rpx;\n\t\t\t    \n\t\t\t    .avatar {\n\t\t\t      width: 64rpx;\n\t\t\t      height: 64rpx;\n\t\t\t      border-radius: 50%;\n\t\t\t      margin-right: 16rpx;\n\t\t\t    }\n\t\t\t    \n\t\t\t    .user-meta {\n\t\t\t      flex: 1;\n\t\t\t      \n\t\t\t      .username {\n\t\t\t        font-size: 24rpx;\n\t\t\t        color: #515151;\n\t\t\t        display: block;\n\t\t\t        max-width: 150rpx;\n\t\t\t        overflow: hidden;\n\t\t\t        text-overflow: ellipsis;\n\t\t\t        white-space: nowrap;\n\t\t\t      }\n\t\t\t      \n\t\t\t      .like-count {\n\t\t\t        font-size: 20rpx;\n\t\t\t        color: #666;\n\t\t\t        display: flex;\n\t\t\t        align-items: center;\n\t\t\t        \n\t\t\t        .icon {\n\t\t\t          color: #ff4c4c;\n\t\t\t          margin-right: 8rpx;\n\t\t\t        }\n\t\t\t      }\n\t\t\t    }\n\t\t\t  }\n\t\t\t  \n\t\t\t  .card-image {\n\t\t\t    height: 360rpx; // 调整图片高度\n\t\t\t\twidth: calc(100% - 40rpx);\n\t\t\t\toverflow: hidden;\n\t\t\t\tborder-radius: 15rpx;\n\t\t\t\tmargin: 0 20rpx ;\n\t\t\t  }\r\n\t\t}\r\n\t}\r\n\r\n\t.modal-container {\r\n\t\tpadding-top: 0rpx;\r\n\r\n\t}\r\n\r\n\t.search_tab {\r\n\t\tpadding: 0px;\r\n\t}\r\n\r\n\t.submit-btn {\r\n\t\tbackground: linear-gradient(135deg, $primary-color, $hover-color);\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t\tborder-radius: 15rpx;\r\n\t\tfont-size: 22rpx;\r\n\t\tfont-weight: 900;\r\n\t\theight: 60rpx;\r\n\t\tline-height: 60rpx;\r\n\t\tbox-shadow: 0 6rpx 20rpx rgba($primary-color, 0.3);\r\n\t\ttransition: all 0.3s;\r\n\r\n\t\t&::after {\r\n\t\t\tborder: none;\r\n\t\t}\r\n\r\n\t\t&.loading {\r\n\t\t\topacity: 0.7;\r\n\t\t\tbackground: #007aff;\r\n\t\t}\r\n\r\n\t\t&[disabled] {\r\n\t\t\tbackground: #c8c9cc;\r\n\t\t\tcolor: #fff;\r\n\t\t}\r\n\r\n\t\t&:active {\r\n\t\t\ttransform: translateY(2rpx);\r\n\t\t\tbox-shadow: 0 4rpx 12rpx rgba($primary-color, 0.3);\r\n\t\t}\r\n\t}\r\n\r\n\t.filter-modal {\r\n\t\tpadding: 40rpx;\r\n\t\tbackground: white;\r\n\t\tborder-radius: 24rpx;\n\t\t  position: relative;\n\t\t  z-index: 1001;\n\t\t  \n\t\t  /* 添加遮罩层样式 */\n\t\t  .modal-mask {\n\t\t    position: fixed;\n\t\t    top: 0;\n\t\t    left: 0;\n\t\t    right: 0;\n\t\t    bottom: 0;\n\t\t    background: rgba(0, 0, 0, 0.5);\n\t\t    z-index: 1000;\n\t\t  }\n\r\n\r\n\t\t.modal-header {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t\tmargin-bottom: 40rpx;\r\n\t\t\tpadding-left: 20rpx;\n\t\t\r\n\r\n\t\t\t.title {\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tfont-weight: 500;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t.close {\r\n\t\t\t\tfont-size: 48rpx;\r\n\t\t\t\tcolor: #999;\r\n\t\t\t\tposition: relative;\r\n\t\t\t\ttop: -8rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.filter-items {\r\n\t\t\t.filter-item {\r\n\t\t\t\tmargin-bottom: 40rpx;\r\n\r\n\t\t\t\t.label {\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tcolor: #666;\r\n\t\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.action-btns {\r\n\t\t\tdisplay: flex;\r\n\t\t\tgap: 30rpx;\r\n\t\t\tmargin-top: 40rpx;\r\n\r\n\t\t\t.btn {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\theight: 50rpx;\r\n\t\t\t\tline-height: 50rpx;\r\n\t\t\t\tborder-radius: 12rpx;\r\n\t\t\t\tfont-size: 22rpx;\r\n\r\n\t\t\t\t&::after {\r\n\t\t\t\t\tborder: none;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&.reset {\r\n\t\t\t\t\tbackground: #f0f2f5;\r\n\t\t\t\t\tcolor: #666;\r\n\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t&.confirm {\r\n\t\t\t\t\t// background: #007aff;\r\n\t\t\t\t\t// color: white;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.selected-goods {\r\n\t\t\tmargin-top: 20rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-wrap: wrap;\r\n\t\t\tgap: 10rpx;\r\n\t\t}\r\n\r\n\t\t.goods-tag {\r\n\t\t\tbackground: #f0f2f5;\r\n\t\t\tpadding: 8rpx 20rpx;\r\n\t\t\tborder-radius: 30rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tcolor: #666;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t.remove {\r\n\t\t\t\tmargin-left: 10rpx;\r\n\t\t\t\tcolor: #999;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t.loading-state {\r\n\t\ttext-align: center;\r\n\t\tpadding: 40rpx;\r\n\t\tcolor: #999;\r\n\t\tfont-size: 28rpx;\r\n\r\n\t\t.no-more {\r\n\t\t\tdisplay: block;\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from '/Users/sapphirell/Documents/git/dogdogdoll-uniapp/pages/collocation_square/collocation_square.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","reactive","getCurrentInstance","uni","onMounted","websiteUrl","nextTick"],"mappings":";;;;;;;;;;;;;;;;;AA8GC,MAAA,WAAA;;;;AAJA,UAAA,kBAAAA,kBAAA,CAAA,CAAA;AACA,UAAA,UAAAA,kBAAA,KAAA;AACA,UAAA,SAAAA,kBAAA,KAAA;AACA,UAAA,cAAAA,kBAAA,CAAA;AAGA,UAAA,kBAAAA,kBAAA,CAAA;AACA,UAAA,YAAAA,kBAAA,CAAA;AACA,UAAA,gBAAAC,cAAA,SAAA,CAAA,GAAA,CAAA,CAAA;AAGA,UAAA,kBAAAD,kBAAA,KAAA;AACA,UAAA,cAAAA,kBAAA,EAAA;AACA,UAAA,eAAAA,kBAAA,CAAA,CAAA;AACA,UAAA,WAAAE,cAAAA;AAEA,UAAA,gBAAAF,kBAAA,IAAA;AACA,UAAA,cAAAA,kBAAA,CAAA,CAAA;AACAA,kBAAAA,IAAA,IAAA;AAOA,UAAA,YAAA,CAAA,UAAA;AACC,YAAA,OAAA,gBAAA,MAAA,KAAA;AACA,UAAA,CAAA,KAAA;AAAoB,eAAA;AACpB,aAAA;AAAA,QAAO,MAAA,GAAA,KAAA,SAAA,IAAA;AAAA,QACqB,KAAA,GAAA,KAAA,SAAA,GAAA;AAAA,QACF,OAAA,GAAA,UAAA,KAAA;AAAA,MACA;AAAA,IAC1B;AAID,UAAA,kBAAA,CAAA,cAAA;AAECG,oBAAAA,MAAA,MAAA,OAAA,0DAAA,UAAA;AACA,UAAA,CAAA,WAAA;AACCA,sBAAAA,MAAA,MAAA,OAAA,0DAAA,cAAA;AACA;AAAA,MAAA;AAEDA,oBAAAA,MAAA,MAAA,OAAA,0DAAA,MAAA;AACA,UAAA,CAAA,gBAAA,OAAA;AACCA,sBAAAA,MAAA,MAAA,OAAA,0DAAA,eAAA;AACA;AAAA,MAAA;AAEDA,oBAAAA,MAAA,MAAA,OAAA,0DAAA,4BAAA;AACAA,oBAAAA,MAAA,MAAA,OAAA,0DAAA,SAAA;AACA,YAAA,QAAAA,cAAAA,MAAA,oBAAA,EAAA,GAAA,UAAA,KAAA;AACAA,oBAAAA,MAAA,MAAA,OAAA,0DAAA,UAAA;AAEA,YAAA,QAAA,gBAAA,MAAA,IAAA,CAAA,GAAA,UAAA;AACC,eAAA,IAAA,QAAA,CAAA,YAAA;AACC,gBAAA,OAAA,SAAA,KAAA,EAAA,EAAA,mBAAA,CAAA,SAAA;AACC,oBAAA;AAAA,cAAQ;AAAA,cACP;AAAA,YACA,CAAA;AAAA,UACA,CAAA;AAAA,QACD,CAAA;AAAA,MACD,CAAA;AAIF,YAAA,KAAA,YAAA;AACCA,sBAAAA,MAAA,MAAA,OAAA,0DAAA,SAAA;AAEA,sBAAA,CAAA,IAAA;AACA,sBAAA,CAAA,IAAA;AAGA,cAAA,UAAA,MAAA,QAAA,IAAA,KAAA;AACA,YAAA,CAAA,QAAA,QAAA;AACCA,wBAAAA,MAAA,MAAA,QAAA,0DAAA,YAAA;AACA;AAAA,QAAA;AAED,gBAAA,QAAA,CAAA;AAAA,UAAiB;AAAA,UAChB;AAAA,QACA,MAAA;AAEA,cAAA,CAAA,MAAA;AACCA,gCAAA,MAAA,SAAA,0DAAA,KAAA,KAAA,QAAA;AACA;AAAA,UAAA;AAGD,gBAAA,OAAA,gBAAA,MAAA,KAAA;AACA,gBAAA,SAAA,cAAA,CAAA,KAAA,cAAA,CAAA,IAAA,IAAA;AACA,gBAAA,OAAA,UAAA,UAAA,QAAA;AACA,gBAAA,MAAA,cAAA,MAAA,IAAA;AAEA,wBAAA,MAAA,IAAA,MAAA,KAAA;AACA,eAAA,WAAA;AAAA,YAAgB;AAAA,YACf;AAAA,UACA;AAAA,QACD,CAAA;AAID,wBAAA,QAAA,KAAA,IAAA,GAAA,aAAA,IAAA;AAAA,MAAqD,CAAA;AAAA,IACrD;AAKFC,kBAAAA,UAAA,MAAA;AACC,YAAA,aAAAD,oBAAA;AACA,YAAA,UAAA;AACA,gBAAA,SAAA,WAAA,cAAA,WAAA;AAAA,IAAuD,CAAA;AAIxD,UAAA,oBAAA,OAAA,QAAA,UAAA;AACC,UAAA,OAAA;AACC,wBAAA,QAAA;AACA,oBAAA,QAAA;AACA,eAAA,QAAA;AACA,gBAAA,QAAA;AAAA,MAAgB;AAEjB,UAAA,QAAA,SAAA,OAAA,OAAA;AACCA,sBAAAA,MAAA,MAAA,OAAA,0DAAA,kBAAA;AACA;AAAA,MAAA;AAGD,UAAA;AACC,gBAAA,QAAA;AAEA,cAAA,SAAA;AAAA,UAAe,MAAA,YAAA;AAAA,UACI,WAAA;AAAA,UACP,sBAAA,YAAA,MAAA,IAAA,CAAA,MAAA,EAAA,QAAA;AAAA,QACgD;AAI5DA,sBAAAA,MAAA,MAAA,OAAA,0DAAA,SAAA,KAAA,UAAA,QAAA,MAAA,CAAA,CAAA;AAEA,cAAA,MAAA,MAAAA,cAAA,MAAA,QAAA;AAAA,UAA8B,KAAA,GAAAE,cAAA,UAAA;AAAA,UACX,QAAA;AAAA,UACV,MAAA;AAAA,UACF,QAAA;AAAA,YACE,gBAAA;AAAA;AAAA,UACS;AAAA,QACjB,CAAA;AAGDF,sBAAA,MAAA,MAAA,OAAA,0DAAA,SAAA,GAAA;AAEA,YAAA,IAAA,KAAA,WAAA,WAAA;AAEG,gBAAA,OAAA,IAAA,KAAA,QAAA,CAAA;AACA,gBAAA,WAAA,MAAA,QAAA,KAAA,yBAAA,IAAA,KAAA,4BAAA;AAIA,0BAAA,QAAA,QAAA,WAAA,CAAA,GAAA,gBAAA,OAAA,GAAA,QAAA;AAIA,iBAAA,QAAA,SAAA,SAAA;AACA,sBAAA;AAGA,cAAA,SAAA,SAAA,WAAA,GAAA;AACEA,0BAAAA,MAAA,UAAA;AAAA,cAAc,OAAA;AAAA,cACL,MAAA;AAAA,YACD,CAAA;AAAA,UACP;AAILA,wBAAAA,MAAA,MAAA,OAAA,0DAAA,aAAA;AACA,gBAAAG,cAAA,WAAA;AACAH,wBAAAA,MAAA,MAAA,OAAA,0DAAA,MAAA;AACA,0BAAA,QAAA;AAEA,qBAAA,MAAA;AACCA,0BAAAA,MAAA,MAAA,OAAA,0DAAA,QAAA;AACA,4BAAA,QAAA;AAAA,UAAwB,GAAA,GAAA;AAAA,QACnB;AAAA,MACP,SAAA,OAAA;AAEAA,sBAAA,MAAA,MAAA,SAAA,0DAAA,SAAA,KAAA;AACAA,sBAAAA,MAAA,UAAA;AAAA,UAAc,OAAA;AAAA,UACN,MAAA;AAAA,QACD,CAAA;AAAA,MACN,UAAA;AAED,gBAAA,QAAA;AAAA,MAAgB;AAAA,IACjB;AAID,UAAA,aAAA,MAAA;AACC,sBAAA,QAAA;AAAA,IAAwB;AAgCzB,UAAA,oBAAA,CAAA,UAAA;AACCA,oBAAA,MAAA,MAAA,OAAA,0DAAA,SAAA,KAAA;AACA,UAAA,EAAA,+BAAA;AAAgB;AAGhB,YAAA,WAAA;AAAA,QAAiB,UAAA,MAAA;AAAA,QACA,YAAA,GAAA,MAAA,aAAA,MAAA,aAAA,MAAA,EAAA,GAAA,MAAA,IAAA;AAAA,MAC0D;AAI3E,YAAA,SAAA,YAAA,MAAA;AAAA,QAAiC,CAAA,SAAA,KAAA,aAAA,SAAA;AAAA,MACG;AAGpC,UAAA,CAAA,QAAA;AAEC,oBAAA,QAAA,CAAA,GAAA,YAAA,OAAA,QAAA;AAAA,MAAmD;AAAA,IACpD;AAsBD,UAAA,cAAA,YAAA;AACC,sBAAA,QAAA;AAEA,YAAA,kBAAA,IAAA;AAAA,IAA4B;AAG7B,UAAA,cAAA,MAAA;AACC,sBAAA,QAAA;AAAA,IAAwB;AAKzB,UAAA,aAAA,CAAA,SAAA,UAAA;;AAEE,2CAAA,oBAAA;AACA,kBAAA,QAAA,YAAA,MAAA,OAAA,CAAA,MAAA,EAAA,aAAA,OAAA;AACA,aAAA,QAAA;AACA,wBAAA,IAAA;AAAA,IAAsB;AAGxB,UAAA,cAAA,MAAA;AACC,oBAAA,QAAA;AACA,kBAAA,QAAA;AACA,kBAAA,QAAA;AACA,mBAAA,QAAA;IAAsB;AAIvB,aAAA,sBAAA,gBAAA,QAAA;AACCA,oBAAAA,MAAA,WAAA;AAAA,QAAe,KAAA,+DAAA,iBAAA,aAAA;AAAA,MAEb,CAAA;AAAA,IACD;AAYF,UAAA,WAAA,MAAA;AACC,UAAA,CAAA,OAAA;AAAmB;IAAkB;AAUtC,UAAA,iBAAA,CAAA,QAAA;AACEA,oBAAAA,MAAA,WAAA;AAAA,QAAe,KAAA,kCAAA,GAAA;AAAA,MAC6B,CAAA;AAAA,IAC3C;AAIH,UAAA,cAAA,CAAA,SAAA;AAEE,aAAA,KAAA,SAAA,KAAA,GAAA,KAAA,WAAA,MAAA,EAAA,CAAA,QAAA;AAAA,IAA8D;AAKhEC,kBAAA,UAAA,iBAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvbD,GAAG,WAAW,eAAe;"}