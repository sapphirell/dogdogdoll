{"version":3,"file":"loading.js","sources":["uni_modules/z-paging/components/z-paging/js/modules/loading.js"],"sourcesContent":["// [z-paging]loading相关模块\nimport u from '.././z-paging-utils'\nimport Enum from '.././z-paging-enum'\n\nexport default {\n\tprops: {\n\t\t// 第一次加载后自动隐藏loading slot，默认为是\n\t\tautoHideLoadingAfterFirstLoaded: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: u.gc('autoHideLoadingAfterFirstLoaded', true)\n\t\t},\n\t\t// loading slot是否铺满屏幕并固定，默认为否\n\t\tloadingFullFixed: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: u.gc('loadingFullFixed', false)\n\t\t},\n\t\t// 是否自动显示系统Loading：即uni.showLoading，若开启则将在刷新列表时(调用reload、refresh时)显示，下拉刷新和滚动到底部加载更多不会显示，默认为false。\n\t\tautoShowSystemLoading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: u.gc('autoShowSystemLoading', false)\n\t\t},\n\t\t// 显示系统Loading时是否显示透明蒙层，防止触摸穿透，默认为是(H5、App、微信小程序、百度小程序有效)\n\t\tsystemLoadingMask: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: u.gc('systemLoadingMask', true)\n\t\t},\n\t\t// 显示系统Loading时显示的文字，默认为\"加载中\"\n\t\tsystemLoadingText: {\n\t\t\ttype: [String, Object],\n\t\t\tdefault: u.gc('systemLoadingText', null)\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: false,\n\t\t\tloadingForNow: false,\n\t\t}\n\t},\n\twatch: {\n\t\t// loading状态\n\t\tloadingStatus(newVal) {\n\t\t\tthis.$emit('loadingStatusChange', newVal);\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.loadingStatusAfterRender = newVal;\n\t\t\t})\n\t\t\tif (this.useChatRecordMode) {\n\t\t\t\tif (this.isFirstPage && (newVal === Enum.More.NoMore || newVal === Enum.More.Fail)) {\n\t\t\t\t\tthis.isFirstPageAndNoMore = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.isFirstPageAndNoMore = false;\n\t\t},\n\t\tloading(newVal){\n\t\t\tif (newVal) {\n\t\t\t\tthis.loadingForNow = newVal;\n\t\t\t}\n\t\t},\n\t},\n\tcomputed: {\n\t\t// 是否显示loading\n\t\tshowLoading() {\n\t\t\tif (this.firstPageLoaded || !this.loading || !this.loadingForNow) return false;\n\t\t\tif (this.finalShowSystemLoading) {\n\t\t\t\t// 显示系统loading\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: this.finalSystemLoadingText,\n\t\t\t\t\tmask: this.systemLoadingMask\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn this.autoHideLoadingAfterFirstLoaded ? (this.fromEmptyViewReload ? true : !this.pagingLoaded) : this.loadingType === Enum.LoadingType.Refresher;\n\t\t},\n\t\t// 最终的是否显示系统loading\n\t\tfinalShowSystemLoading() {\n\t\t\treturn this.autoShowSystemLoading && this.loadingType === Enum.LoadingType.Refresher;\n\t\t}\n\t},\n\tmethods: {\n\t\t// 处理开始加载更多状态\n\t\t_startLoading(isReload = false) {\n\t\t\tif ((this.showLoadingMoreWhenReload && !this.isUserPullDown) || !isReload) {\n\t\t\t\tthis.loadingStatus = Enum.More.Loading;\n\t\t\t}\n\t\t\tthis.loading = true;\n\t\t},\n\t\t// 停止系统loading和refresh\n\t\t_endSystemLoadingAndRefresh(){\n\t\t\tthis.finalShowSystemLoading && uni.hideLoading();\n\t\t\t!this.useCustomRefresher && uni.stopPullDownRefresh();\n\t\t\t// #ifdef APP-NVUE\n\t\t\tthis.usePageScroll && uni.stopPullDownRefresh();\n\t\t\t// #endif\n\t\t}\n\t}\n}\n"],"names":["u","Enum","uni"],"mappings":";;;;AAIA,MAAe,gBAAA;AAAA,EACd,OAAO;AAAA;AAAA,IAEN,iCAAiC;AAAA,MAChC,MAAM;AAAA,MACN,SAASA,uDAAC,EAAC,GAAG,mCAAmC,IAAI;AAAA,IACrD;AAAA;AAAA,IAED,kBAAkB;AAAA,MACjB,MAAM;AAAA,MACN,SAASA,uDAAC,EAAC,GAAG,oBAAoB,KAAK;AAAA,IACvC;AAAA;AAAA,IAED,uBAAuB;AAAA,MACtB,MAAM;AAAA,MACN,SAASA,uDAAC,EAAC,GAAG,yBAAyB,KAAK;AAAA,IAC5C;AAAA;AAAA,IAED,mBAAmB;AAAA,MAClB,MAAM;AAAA,MACN,SAASA,uDAAC,EAAC,GAAG,qBAAqB,IAAI;AAAA,IACvC;AAAA;AAAA,IAED,mBAAmB;AAAA,MAClB,MAAM,CAAC,QAAQ,MAAM;AAAA,MACrB,SAASA,uDAAC,EAAC,GAAG,qBAAqB,IAAI;AAAA,IACvC;AAAA,EACD;AAAA,EACD,OAAO;AACN,WAAO;AAAA,MACN,SAAS;AAAA,MACT,eAAe;AAAA,IACf;AAAA,EACD;AAAA,EACD,OAAO;AAAA;AAAA,IAEN,cAAc,QAAQ;AACrB,WAAK,MAAM,uBAAuB,MAAM;AACxC,WAAK,UAAU,MAAM;AACpB,aAAK,2BAA2B;AAAA,MACpC,CAAI;AACD,UAAI,KAAK,mBAAmB;AAC3B,YAAI,KAAK,gBAAgB,WAAWC,2DAAK,KAAK,UAAU,WAAWA,sDAAAA,KAAK,KAAK,OAAO;AACnF,eAAK,uBAAuB;AAC5B;AAAA,QACA;AAAA,MACD;AACD,WAAK,uBAAuB;AAAA,IAC5B;AAAA,IACD,QAAQ,QAAO;AACd,UAAI,QAAQ;AACX,aAAK,gBAAgB;AAAA,MACrB;AAAA,IACD;AAAA,EACD;AAAA,EACD,UAAU;AAAA;AAAA,IAET,cAAc;AACb,UAAI,KAAK,mBAAmB,CAAC,KAAK,WAAW,CAAC,KAAK;AAAe,eAAO;AACzE,UAAI,KAAK,wBAAwB;AAEhCC,sBAAAA,MAAI,YAAY;AAAA,UACf,OAAO,KAAK;AAAA,UACZ,MAAM,KAAK;AAAA,QAChB,CAAK;AAAA,MACD;AACD,aAAO,KAAK,kCAAmC,KAAK,sBAAsB,OAAO,CAAC,KAAK,eAAgB,KAAK,gBAAgBD,sDAAAA,KAAK,YAAY;AAAA,IAC7I;AAAA;AAAA,IAED,yBAAyB;AACxB,aAAO,KAAK,yBAAyB,KAAK,gBAAgBA,sDAAI,KAAC,YAAY;AAAA,IAC3E;AAAA,EACD;AAAA,EACD,SAAS;AAAA;AAAA,IAER,cAAc,WAAW,OAAO;AAC/B,UAAK,KAAK,6BAA6B,CAAC,KAAK,kBAAmB,CAAC,UAAU;AAC1E,aAAK,gBAAgBA,2DAAK,KAAK;AAAA,MAC/B;AACD,WAAK,UAAU;AAAA,IACf;AAAA;AAAA,IAED,8BAA6B;AAC5B,WAAK,0BAA0BC,oBAAI;AACnC,OAAC,KAAK,sBAAsBA,cAAG,MAAC,oBAAmB;AAAA,IAInD;AAAA,EACD;AACF;;"}