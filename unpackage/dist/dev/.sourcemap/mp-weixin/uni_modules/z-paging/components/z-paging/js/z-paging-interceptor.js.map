{"version":3,"file":"z-paging-interceptor.js","sources":["uni_modules/z-paging/components/z-paging/js/z-paging-interceptor.js"],"sourcesContent":["// [z-paging]拦截器\n\nconst queryKey = 'Query';\nconst fetchParamsKey = 'FetchParams';\nconst fetchResultKey = 'FetchResult';\nconst language2LocalKey = 'Language2Local';\n\n// 拦截&处理@query事件\nfunction handleQuery(callback) {\n\t_addHandleByKey(queryKey, callback);\n\treturn this;\n}\n\n// 拦截&处理@query事件(私有，请勿调用)\nfunction _handleQuery(pageNo, pageSize, from, lastItem) {\n\tconst callback = _getHandleByKey(queryKey);\n\treturn callback ? callback(pageNo, pageSize, from, lastItem) : [pageNo, pageSize, from];\n}\n\n// 拦截&处理:fetch参数\nfunction handleFetchParams(callback) {\n\t_addHandleByKey(fetchParamsKey, callback);\n\treturn this;\n}\n\n// 拦截&处理:fetch参数(私有，请勿调用)\nfunction _handleFetchParams(parmas, extraParams) {\n\tconst callback = _getHandleByKey(fetchParamsKey);\n\treturn callback ? callback(parmas, extraParams || {}) : { pageNo: parmas.pageNo, pageSize: parmas.pageSize, ...(extraParams || {}) };\n}\n\n// 拦截&处理:fetch结果\nfunction handleFetchResult(callback) {\n\t_addHandleByKey(fetchResultKey, callback);\n\treturn this;\n}\n\n// 拦截&处理:fetch结果(私有，请勿调用)\nfunction _handleFetchResult(result, paging, params) {\n\tconst callback = _getHandleByKey(fetchResultKey);\n\tcallback && callback(result, paging, params);\n\treturn callback ? true : false;\n}\n\n// 拦截&处理系统language转i18n local\nfunction handleLanguage2Local(callback) {\n\t_addHandleByKey(language2LocalKey, callback);\n\treturn this;\n}\n\n// 拦截&处理系统language转i18n local(私有，请勿调用)\nfunction _handleLanguage2Local(language, local) {\n\tconst callback = _getHandleByKey(language2LocalKey);\n\treturn callback ? callback(language, local) : local;\n}\n\n// 获取当前app对象\nfunction _getApp(){\n\t// #ifndef APP-NVUE\n\treturn getApp();\n\t// #endif\n\t// #ifdef APP-NVUE\n\treturn getApp({ allowDefault: true });\n\t// #endif\n}\n\n// 是否可以访问globalData\nfunction _hasGlobalData() {\n\treturn _getApp() && _getApp().globalData;\n}\n\n// 添加处理函数\nfunction _addHandleByKey(key, callback) {\n\ttry {\n\t\tsetTimeout(function() {\n\t\t\tif (_hasGlobalData()) {\n\t\t\t\t_getApp().globalData[`zp_handle${key}Callback`] = callback;\n\t\t\t}\n\t\t}, 1);\n\t} catch (_) {}\n}\n\n// 获取处理回调函数\nfunction _getHandleByKey(key) {\n\treturn _hasGlobalData() ? _getApp().globalData[`zp_handle${key}Callback`] : null;\n}\n\nexport default {\n\thandleQuery,\n\t_handleQuery,\n\thandleFetchParams,\n\t_handleFetchParams,\n\thandleFetchResult,\n\t_handleFetchResult,\n\thandleLanguage2Local,\n\t_handleLanguage2Local\n};\n"],"names":[],"mappings":";AAEA,MAAM,WAAW;AACjB,MAAM,iBAAiB;AACvB,MAAM,iBAAiB;AACvB,MAAM,oBAAoB;AAG1B,SAAS,YAAY,UAAU;AAC9B,kBAAgB,UAAU,QAAQ;AAClC,SAAO;AACR;AAGA,SAAS,aAAa,QAAQ,UAAU,MAAM,UAAU;AACvD,QAAM,WAAW,gBAAgB,QAAQ;AACzC,SAAO,WAAW,SAAS,QAAQ,UAAU,MAAM,QAAQ,IAAI,CAAC,QAAQ,UAAU,IAAI;AACvF;AAGA,SAAS,kBAAkB,UAAU;AACpC,kBAAgB,gBAAgB,QAAQ;AACxC,SAAO;AACR;AAGA,SAAS,mBAAmB,QAAQ,aAAa;AAChD,QAAM,WAAW,gBAAgB,cAAc;AAC/C,SAAO,WAAW,SAAS,QAAQ,eAAe,CAAA,CAAE,IAAI,EAAE,QAAQ,OAAO,QAAQ,UAAU,OAAO,UAAU,GAAI,eAAe,CAAA;AAChI;AAGA,SAAS,kBAAkB,UAAU;AACpC,kBAAgB,gBAAgB,QAAQ;AACxC,SAAO;AACR;AAGA,SAAS,mBAAmB,QAAQ,QAAQ,QAAQ;AACnD,QAAM,WAAW,gBAAgB,cAAc;AAC/C,cAAY,SAAS,QAAQ,QAAQ,MAAM;AAC3C,SAAO,WAAW,OAAO;AAC1B;AAGA,SAAS,qBAAqB,UAAU;AACvC,kBAAgB,mBAAmB,QAAQ;AAC3C,SAAO;AACR;AAGA,SAAS,sBAAsB,UAAU,OAAO;AAC/C,QAAM,WAAW,gBAAgB,iBAAiB;AAClD,SAAO,WAAW,SAAS,UAAU,KAAK,IAAI;AAC/C;AAGA,SAAS,UAAS;AAEjB,SAAO,OAAM;AAKd;AAGA,SAAS,iBAAiB;AACzB,SAAO,QAAS,KAAI,QAAS,EAAC;AAC/B;AAGA,SAAS,gBAAgB,KAAK,UAAU;AACvC,MAAI;AACH,eAAW,WAAW;AACrB,UAAI,eAAc,GAAI;AACrB,gBAAO,EAAG,WAAW,YAAY,GAAG,UAAU,IAAI;AAAA,MAClD;AAAA,IACD,GAAE,CAAC;AAAA,EACN,SAAU,GAAG;AAAA,EAAE;AACf;AAGA,SAAS,gBAAgB,KAAK;AAC7B,SAAO,eAAc,IAAK,QAAO,EAAG,WAAW,YAAY,GAAG,UAAU,IAAI;AAC7E;AAEA,MAAe,cAAA;AAAA,EACd;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACD;;"}