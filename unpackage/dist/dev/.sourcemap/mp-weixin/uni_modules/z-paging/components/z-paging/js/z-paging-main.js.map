{"version":3,"file":"z-paging-main.js","sources":["uni_modules/z-paging/components/z-paging/js/z-paging-main.js?vue&type=script&src=true&lang.js"],"sourcesContent":["// [z-paging]核心js\n\nimport zStatic from './z-paging-static'\nimport c from './z-paging-constant'\nimport u from './z-paging-utils'\n\nimport zPagingRefresh from '../components/z-paging-refresh'\nimport zPagingLoadMore from '../components/z-paging-load-more'\nimport zPagingEmptyView from '../../z-paging-empty-view/z-paging-empty-view'\n\n// modules\nimport commonLayoutModule from './modules/common-layout'\nimport dataHandleModule from './modules/data-handle'\nimport i18nModule from './modules/i18n'\nimport nvueModule from './modules/nvue'\nimport emptyModule from './modules/empty'\nimport refresherModule from './modules/refresher'\nimport loadMoreModule from './modules/load-more'\nimport loadingModule from './modules/loading'\nimport chatRecordModerModule from './modules/chat-record-mode'\nimport scrollerModule from './modules/scroller'\nimport backToTopModule from './modules/back-to-top'\nimport virtualListModule from './modules/virtual-list'\n\nimport Enum from './z-paging-enum'\n\nconst systemInfo = u.getSystemInfoSync();\nexport default {\n\tname: \"z-paging\",\n\tcomponents: {\n\t\tzPagingRefresh,\n\t\tzPagingLoadMore,\n\t\tzPagingEmptyView\n\t},\n\tmixins: [\n\t\tcommonLayoutModule,\n\t\tdataHandleModule,\n\t\ti18nModule,\n\t\tnvueModule,\n\t\temptyModule,\n\t\trefresherModule,\n\t\tloadMoreModule,\n\t\tloadingModule,\n\t\tchatRecordModerModule,\n\t\tscrollerModule,\n\t\tbackToTopModule,\n\t\tvirtualListModule\n\t],\n\tdata() {\n\t\treturn {\n\t\t\t// --------------静态资源---------------\n\t\t\tbase64BackToTop: zStatic.base64BackToTop,\n\n\t\t\t// -------------全局数据相关--------------\n\t\t\t// 当前加载类型\n\t\t\tloadingType: Enum.LoadingType.Refresher,\n\t\t\trequestTimeStamp: 0,\n\t\t\twxsPropType: '',\n\t\t\trenderPropScrollTop: -1,\n\t\t\tcheckScrolledToBottomTimeOut: null,\n\t\t\tcacheTopHeight: -1,\n\t\t\tstatusBarHeight: systemInfo.statusBarHeight,\n\n\t\t\t// --------------状态&判断---------------\n\t\t\tinsideOfPaging: -1,\n\t\t\tisLoadFailed: false,\n\t\t\tisIos: systemInfo.platform === 'ios',\n\t\t\tdisabledBounce: false,\n\t\t\tfromCompleteEmit: false,\n\t\t\tdisabledCompleteEmit: false,\n\t\t\tpageLaunched: false,\n\t\t\tactive: false,\n\t\t\t\n\t\t\t// ---------------wxs相关---------------\n\t\t\twxsIsScrollTopInTopRange: true,\n\t\t\twxsScrollTop: 0,\n\t\t\twxsPageScrollTop: 0,\n\t\t\twxsOnPullingDown: false,\n\t\t};\n\t},\n\tprops: {\n\t\t// 调用complete后延迟处理的时间，单位为毫秒，默认0毫秒，优先级高于minDelay\n\t\tdelay: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: u.gc('delay', 0),\n\t\t},\n\t\t// 触发@query后最小延迟处理的时间，单位为毫秒，默认0毫秒，优先级低于delay（假设设置为300毫秒，若分页请求时间小于300毫秒，则在调用complete后延迟[300毫秒-请求时长]；若请求时长大于300毫秒，则不延迟），当show-refresher-when-reload为true或reload(true)时，其最小值为400\n\t\tminDelay: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: u.gc('minDelay', 0),\n\t\t},\n\t\t// 设置z-paging的style，部分平台(如微信小程序)无法直接修改组件的style，可使用此属性代替\n\t\tpagingStyle: {\n\t\t\ttype: Object,\n\t\t\tdefault: u.gc('pagingStyle', {}),\n\t\t},\n\t\t// z-paging的高度，优先级低于pagingStyle中设置的height；传字符串，如100px、100rpx、100%\n\t\theight: {\n\t\t\ttype: String,\n\t\t\tdefault: u.gc('height', '')\n\t\t},\n\t\t// z-paging的宽度，优先级低于pagingStyle中设置的width；传字符串，如100px、100rpx、100%\n\t\twidth: {\n\t\t\ttype: String,\n\t\t\tdefault: u.gc('width', '')\n\t\t},\n\t\t// z-paging的最大宽度，优先级低于pagingStyle中设置的max-width；传字符串，如100px、100rpx、100%。默认为空，也就是铺满窗口宽度，若设置了特定值则会自动添加margin: 0 auto\n\t\tmaxWidth: {\n\t\t\ttype: String,\n\t\t\tdefault: u.gc('maxWidth', '')\n\t\t},\n\t\t// z-paging的背景色，优先级低于pagingStyle中设置的background。传字符串，如\"#ffffff\"\n\t\tbgColor: {\n\t\t\ttype: String,\n\t\t\tdefault: u.gc('bgColor', '')\n\t\t},\n\t\t// 设置z-paging的容器(插槽的父view)的style\n\t\tpagingContentStyle: {\n\t\t\ttype: Object,\n\t\t\tdefault: u.gc('pagingContentStyle', {}),\n\t\t},\n\t\t// z-paging是否自动高度，若自动高度则会自动铺满屏幕\n\t\tautoHeight: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: u.gc('autoHeight', false)\n\t\t},\n\t\t// z-paging是否自动高度时，附加的高度，注意添加单位px或rpx，若需要减少高度，则传负数\n\t\tautoHeightAddition: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: u.gc('autoHeightAddition', '0px')\n\t\t},\n\t\t// loading(下拉刷新、上拉加载更多)的主题样式，支持black，white，默认black\n\t\tdefaultThemeStyle: {\n\t\t\ttype: String,\n\t\t\tdefault: u.gc('defaultThemeStyle', 'black')\n\t\t},\n\t\t// z-paging是否使用fixed布局，若使用fixed布局，则z-paging的父view无需固定高度，z-paging高度默认为100%，默认为是(当使用内置scroll-view滚动时有效)\n\t\tfixed: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: u.gc('fixed', true)\n\t\t},\n\t\t// 是否开启底部安全区域适配\n\t\tsafeAreaInsetBottom: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: u.gc('safeAreaInsetBottom', false)\n\t\t},\n\t\t// 开启底部安全区域适配后，是否使用placeholder形式实现，默认为否。为否时滚动区域会自动避开底部安全区域，也就是所有滚动内容都不会挡住底部安全区域，若设置为是，则滚动时滚动内容会挡住底部安全区域，但是当滚动到底部时才会避开底部安全区域\n\t\tuseSafeAreaPlaceholder: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: u.gc('useSafeAreaPlaceholder', false)\n\t\t},\n\t\t// z-paging bottom的背景色，默认透明，传字符串，如\"#ffffff\"\n\t\tbottomBgColor: {\n\t\t\ttype: String,\n\t\t\tdefault: u.gc('bottomBgColor', '')\n\t\t},\n\t\t// slot=\"top\"的view的z-index，默认为99，仅使用页面滚动时有效\n\t\ttopZIndex: {\n\t\t\ttype: Number,\n\t\t\tdefault: u.gc('topZIndex', 99)\n\t\t},\n\t\t// z-paging内容容器父view的z-index，默认为1\n\t\tsuperContentZIndex: {\n\t\t\ttype: Number,\n\t\t\tdefault: u.gc('superContentZIndex', 1)\n\t\t},\n\t\t// z-paging内容容器部分的z-index，默认为1\n\t\tcontentZIndex: {\n\t\t\ttype: Number,\n\t\t\tdefault: u.gc('contentZIndex', 1)\n\t\t},\n\t\t// z-paging二楼的z-index，默认为100\n\t\tf2ZIndex: {\n\t\t\ttype: Number,\n\t\t\tdefault: u.gc('f2ZIndex', 100)\n\t\t},\n\t\t// 使用页面滚动时，是否在不满屏时自动填充满屏幕，默认为是\n\t\tautoFullHeight: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: u.gc('autoFullHeight', true)\n\t\t},\n\t\t// 是否监听列表触摸方向改变，默认为否\n\t\twatchTouchDirectionChange: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: u.gc('watchTouchDirectionChange', false)\n\t\t},\n\t\t// z-paging中布局的单位，默认为rpx\n\t\tunit: {\n\t\t\ttype: String,\n\t\t\tdefault: u.gc('unit', 'rpx')\n\t\t}\n\t},\n\tcreated() {\n\t\t// 组件创建时，检测是否开始加载状态\n\t\tif (this.createdReload && !this.refresherOnly && this.auto) {\n\t\t\tthis._startLoading();\n\t\t\tthis.$nextTick(this._preReload);\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.active = true;\n\t\tthis.wxsPropType = u.getTime().toString();\n\t\tthis.renderJsIgnore;\n\t\tif (!this.createdReload && !this.refresherOnly && this.auto) {\n\t\t\t// 开始预加载\n\t\t\tu.delay(() => this.$nextTick(this._preReload), 0);\n\t\t}\n\t\t// 如果开启了列表缓存，在初始化的时候通过缓存数据填充列表数据\n\t\tthis.finalUseCache && this._setListByLocalCache();\n\t\tlet delay = 0;\n\t\t// #ifdef H5 || MP\n\t\tdelay = c.delayTime;\n\t\t// #endif\n\t\tthis.$nextTick(() => {\n\t\t\t// 初始化systemInfo\n\t\t\tthis.systemInfo = u.getSystemInfoSync();\n\t\t\t// 初始化z-paging高度\n\t\t\t!this.usePageScroll && this.autoHeight  && this._setAutoHeight();\n\t\t\t// #ifdef MP-KUAISHOU\n\t\t\tthis._setFullScrollViewInHeight();\n\t\t\t// #endif\n\t\t\tthis.loaded = true;\n\t\t\tu.delay(() => {\n\t\t\t\t// 更新fixed模式下z-paging的布局，主要是更新windowTop、windowBottom\n\t\t\t\tthis.updateFixedLayout();\n\t\t\t\t// 更新缓存中z-paging整个内容容器高度\n\t\t\t\tthis._updateCachedSuperContentHeight();\n\t\t\t});\n\t\t})\n\t\t// 初始化页面滚动模式下slot=\"top\"、slot=\"bottom\"高度\n\t\tthis.updatePageScrollTopHeight();\n\t\tthis.updatePageScrollBottomHeight();\n\t\t// 初始化slot=\"left\"、slot=\"right\"宽度\n\t\tthis.updateLeftAndRightWidth();\n\t\tif (this.finalRefresherEnabled && this.useCustomRefresher) {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.isTouchmoving = true;\n\t\t\t})\n\t\t}\n\t\t// 监听uni.$emit中全局emit的complete error等事件\n\t\tthis._onEmit();\n\t\t// #ifdef APP-NVUE\n\t\tif (!this.isIos && !this.useChatRecordMode) {\n\t\t\tthis.nLoadingMoreFixedHeight = true;\n\t\t}\n\t\t// 在nvue中更新nvue下拉刷新view容器的宽度，而不是写死默认的750rpx，需要考虑列表宽度不是铺满屏幕的情况\n\t\tthis._nUpdateRefresherWidth();\n\t\t// #endif\n\t\t// #ifndef APP-NVUE\n\t\t// 虚拟列表模式时，初始化数据\n\t\tthis.finalUseVirtualList && this._virtualListInit();\n\t\t// #endif\n\t\t// #ifndef APP-PLUS\n\t\tthis.$nextTick(() => {\n\t\t\t// 非app平台中，在通过获取css设置的底部安全区域占位view高度设置bottom距离后，更新页面滚动底部高度\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis._getCssSafeAreaInsetBottom(() => this.safeAreaInsetBottom && this.updatePageScrollBottomHeight());\n\t\t\t}, delay)\n\t\t})\n\t\t// #endif\n\t},\n\tdestroyed() {\n\t\tthis._handleUnmounted();\n\t},\n\t// #ifdef VUE3\n\tunmounted() {\n\t\tthis._handleUnmounted();\n\t},\n\t// #endif\n\twatch: {\n\t\tdefaultThemeStyle: {\n\t\t\thandler(newVal) {\n\t\t\t\tif (newVal.length) {\n\t\t\t\t\tthis.finalRefresherDefaultStyle = newVal;\n\t\t\t\t}\n\t\t\t},\n\t\t\timmediate: true\n\t\t},\n\t\tautoHeight(newVal) {\n\t\t\tthis.loaded && !this.usePageScroll && this._setAutoHeight(newVal);\n\t\t},\n\t\tautoHeightAddition(newVal) {\n\t\t\tthis.loaded && !this.usePageScroll && this.autoHeight && this._setAutoHeight(newVal);\n\t\t},\n\t},\n\tcomputed: {\n\t\t// 当前z-paging的内置样式\n\t\tfinalPagingStyle() {\n\t\t\tconst pagingStyle = { ...this.pagingStyle };\n\t\t\tif (!this.systemInfo) return pagingStyle;\n\t\t\tconst { windowTop, windowBottom } = this;\n\t\t\tif (!this.usePageScroll && this.fixed) {\n\t\t\t\tif (windowTop && !pagingStyle.top) {\n\t\t\t\t\tpagingStyle.top = windowTop + 'px';\n\t\t\t\t}\n\t\t\t\tif (windowBottom && !pagingStyle.bottom) {\n\t\t\t\t\tpagingStyle.bottom = windowBottom + 'px';\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.bgColor.length && !pagingStyle['background']) {\n\t\t\t\tpagingStyle['background'] = this.bgColor;\n\t\t\t}\n\t\t\tif (this.height.length && !pagingStyle['height']) {\n\t\t\t\tpagingStyle['height'] = this.height;\n\t\t\t}\n\t\t\tif (this.width.length && !pagingStyle['width']) {\n\t\t\t\tpagingStyle['width'] = this.width;\n\t\t\t}\n\t\t\tif (this.maxWidth.length && !pagingStyle['max-width']) {\n\t\t\t\tpagingStyle['max-width'] = this.maxWidth;\n\t\t\t\tpagingStyle['margin'] = '0 auto';\n\t\t\t}\n\t\t\treturn pagingStyle;\n\t\t},\n\t\t// 当前z-paging内容的样式\n\t\tfinalPagingContentStyle() {\n\t\t\tif (this.contentZIndex != 1) {\n\t\t\t\tthis.pagingContentStyle['z-index'] = this.contentZIndex;\n\t\t\t\tthis.pagingContentStyle['position'] = 'relative';\n\t\t\t}\n\t\t\treturn this.pagingContentStyle;\n\t\t},\n\t\t\n\t\trenderJsIgnore() {\n\t\t\tif ((this.usePageScroll && this.useChatRecordMode) || (!this.refresherEnabled && this.scrollable) || !this.useCustomRefresher) {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.renderPropScrollTop = 10;\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn 0;\n\t\t},\n\t\twindowHeight() {\n\t\t\tif (!this.systemInfo) return 0;\n\t\t\treturn this.systemInfo.windowHeight || 0;\n\t\t},\n\t\twindowBottom() {\n\t\t\tif (!this.systemInfo) return 0;\n\t\t\tlet windowBottom = this.systemInfo.windowBottom || 0;\n\t\t\t// 如果开启底部安全区域适配并且不使用placeholder的形式体现并且不是聊天记录模式（因为聊天记录模式在keyboardHeight计算初已添加了底部安全区域），在windowBottom添加底部安全区域高度\n\t\t\tif (this.safeAreaInsetBottom && !this.useSafeAreaPlaceholder && !this.useChatRecordMode) {\n\t\t\t\twindowBottom += this.safeAreaBottom;\n\t\t\t}\n\t\t\treturn windowBottom;\n\t\t},\n\t\tisIosAndH5() {\n\t\t\t// #ifndef H5\n\t\t\treturn false;\n\t\t\t// #endif\n\t\t\treturn this.isIos;\n\t\t}\n\t},\n\tmethods: {\n\t\t// 当前版本号\n\t\tgetVersion() {\n\t\t\treturn `z-paging v${c.version}`;\n\t\t},\n\t\t// 设置nvue List的specialEffects\n\t\tsetSpecialEffects(args) {\n\t\t\tthis.setListSpecialEffects(args);\n\t\t},\n\t\t// 与setSpecialEffects等效，兼容旧版本\n\t\tsetListSpecialEffects(args) {\n\t\t\tthis.nFixFreezing = args && Object.keys(args).length;\n\t\t\tif (this.isIos) {\n\t\t\t\tthis.privateRefresherEnabled = 0;\n\t\t\t}\n\t\t\t!this.usePageScroll && this.$refs['zp-n-list'].setSpecialEffects(args);\n\t\t},\n\t\t// #ifdef APP-VUE\n\t\t// 当app长时间进入后台后进入前台，因系统内存管理导致app重新加载时，进行一些适配处理\n\t\t_handlePageLaunch() {\n\t\t\t// 首次触发不进行处理，只有进入后台后打开app重新加载时才处理\n\t\t\tif (this.pageLaunched) {\n\t\t\t\t// 解决在vue3+ios中，app ReLaunch时顶部下拉刷新展示位置向下偏移的问题\n\t\t\t\t// #ifdef VUE3\n\t\t\t\tthis.refresherThresholdUpdateTag = 1;\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.refresherThresholdUpdateTag = 0;\n\t\t\t\t})\n\t\t\t\t// #endif\n\t\t\t\t// 解决使用虚拟列表时，app ReLaunch时白屏问题\n\t\t\t\tthis._checkVirtualListScroll();\n\t\t\t}\n\t\t\tthis.pageLaunched = true;\n\t\t},\n\t\t// #endif\n\t\t// 使手机发生较短时间的振动（15ms）\n\t\t_doVibrateShort() {\n\t\t\t// #ifndef H5\n\t\t\t\n\t\t\t// #ifdef APP-PLUS\n\t\t\tif (this.isIos) {\n\t\t\t\tconst UISelectionFeedbackGenerator = plus.ios.importClass('UISelectionFeedbackGenerator');\n\t\t\t\tconst feedbackGenerator = new UISelectionFeedbackGenerator();\n\t\t\t\tfeedbackGenerator.init();\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tfeedbackGenerator.selectionChanged();\n\t\t\t\t}, 0)\n\t\t\t} else {\n\t\t\t\tplus.device.vibrate(15);\n\t\t\t}\n\t\t\t// #endif\n\t\t\t// #ifndef APP-PLUS\n\t\t\tuni.vibrateShort();\n\t\t\t// #endif\n\t\t\t\n\t\t\t// #endif\n\t\t},\n\t\t// 设置z-paging高度\n\t\tasync _setAutoHeight(shouldFullHeight = true, scrollViewNode = null) {\n\t\t\tconst heightKey = 'min-height';\n\t\t\ttry {\n\t\t\t\tif (shouldFullHeight) {\n\t\t\t\t\t// 如果需要铺满全屏，则计算当前全屏可是区域的高度\n\t\t\t\t\tlet finalScrollViewNode = scrollViewNode || await this._getNodeClientRect('.zp-scroll-view');\n\t\t\t\t\tlet finalScrollBottomNode = await this._getNodeClientRect('.zp-page-bottom');\n\t\t\t\t\tif (finalScrollViewNode) {\n\t\t\t\t\t\tconst scrollViewTop = finalScrollViewNode[0].top;\n\t\t\t\t\t\tlet scrollViewHeight = this.windowHeight - scrollViewTop;\n\t\t\t\t\t\tscrollViewHeight -= finalScrollBottomNode ? finalScrollBottomNode[0].height : 0;\n\t\t\t\t\t\tconst additionHeight = u.convertToPx(this.autoHeightAddition);\n\t\t\t\t\t\t// 在支付宝小程序中，添加!important会导致min-height失效，因此在支付宝小程序中需要去掉\n\t\t\t\t\t\tlet importantSuffix =  ' !important';\n\t\t\t\t\t\t// #ifdef MP-ALIPAY\n\t\t\t\t\t\timportantSuffix = '';\n\t\t\t\t\t\t// #endif\n\t\t\t\t\t\tconst finalHeight = scrollViewHeight + additionHeight - (this.insideMore ? 1 : 0) + 'px' + importantSuffix;\n\t\t\t\t\t\tthis.$set(this.scrollViewStyle, heightKey, finalHeight);\n\t\t\t\t\t\tthis.$set(this.scrollViewInStyle, heightKey, finalHeight);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.$delete(this.scrollViewStyle, heightKey);\n\t\t\t\t\tthis.$delete(this.scrollViewInStyle, heightKey);\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\t\t},\n\t\t// #ifdef MP-KUAISHOU\n\t\t// 设置scroll-view内容器的最小高度等于scroll-view的高度(为了解决在快手小程序中内容较少时scroll-view内容器高度无法铺满scroll-view的问题)\n\t\tasync _setFullScrollViewInHeight() {\n\t\t\ttry {\n\t\t\t\t// 如果需要铺满全屏，则计算当前全屏可是区域的高度\n\t\t\t\tconst scrollViewNode = await this._getNodeClientRect('.zp-scroll-view');\n\t\t\t\tscrollViewNode && this.$set(this.scrollViewInStyle, 'min-height', scrollViewNode[0].height + 'px');\n\t\t\t} catch (e) {}\n\t\t},\n\t\t// #endif\n\t\t// 组件销毁后续处理\n\t\t_handleUnmounted() {\n\t\t\tthis.active = false;\n\t\t\tthis._offEmit();\n\t\t\t// 取消监听键盘高度变化事件（H5、百度小程序、抖音小程序、飞书小程序、QQ小程序、快手小程序不支持）\n\t\t\t// #ifndef H5 || MP-BAIDU || MP-TOUTIAO || MP-QQ || MP-KUAISHOU\n\t\t\tthis.useChatRecordMode && uni.offKeyboardHeightChange(this._handleKeyboardHeightChange);\n\t\t\t// #endif\n\t\t},\n\t\t// 触发更新是否超出页面状态\n\t\t_updateInsideOfPaging() {\n\t\t\tthis.insideMore && this.insideOfPaging === true && setTimeout(this.doLoadMore, 200)\n\t\t},\n\t\t// 清除timeout\n\t\t_cleanTimeout(timeout) {\n\t\t\tif (timeout) {\n\t\t\t\tclearTimeout(timeout);\n\t\t\t\ttimeout = null;\n\t\t\t}\n\t\t\treturn timeout;\n\t\t},\n\t\t// 添加全局emit监听\n\t\t_onEmit() {\n\t\t\tuni.$on(c.errorUpdateKey, (errorMsg) => {\n\t\t\t\tif (this.loading) {\n\t\t\t\t\tif (!!errorMsg) {\n\t\t\t\t\t\tthis.customerEmptyViewErrorText = errorMsg;\n\t\t\t\t\t}\n\t\t\t\t\tthis.complete(false).catch(() => {});\n\t\t\t\t}\n\t\t\t})\n\t\t\tuni.$on(c.completeUpdateKey, (data) => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tif (this.loading) {\n\t\t\t\t\t\tif (!this.disabledCompleteEmit) {\n\t\t\t\t\t\t\tconst type = data.type || 'normal';\n\t\t\t\t\t\t\tconst list = data.list || data;\n\t\t\t\t\t\t\tconst rule = data.rule;\n\t\t\t\t\t\t\tthis.fromCompleteEmit = true;\n\t\t\t\t\t\t\tswitch (type){\n\t\t\t\t\t\t\t\tcase 'normal':\n\t\t\t\t\t\t\t\t\tthis.complete(list);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'total':\n\t\t\t\t\t\t\t\t\tthis.completeByTotal(list, rule);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'nomore':\n\t\t\t\t\t\t\t\t\tthis.completeByNoMore(list, rule);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'key':\n\t\t\t\t\t\t\t\t\tthis.completeByKey(list, rule);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.disabledCompleteEmit = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, 1);\n\t\t\t})\n\t\t},\n\t\t// 销毁全局emit和listener监听\n\t\t_offEmit(){\n\t\t\tuni.$off(c.errorUpdateKey);\n\t\t\tuni.$off(c.completeUpdateKey);\n\t\t},\n\t},\n};\n"],"names":["u","commonLayoutModule","dataHandleModule","i18nModule","nvueModule","emptyModule","refresherModule","loadMoreModule","loadingModule","chatRecordModerModule","scrollerModule","backToTopModule","virtualListModule","zStatic","Enum","c","uni"],"mappings":"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"}